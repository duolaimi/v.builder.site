{
    "piwik.js": "var _paq = _paq || [];\r\nvar setCustomVariable = \"setCustomVariable\",\r\n    piwikparam = $('.getUrlPiwik').attr('data-param') || '',\r\n    getUrlPiwik = piwikparam === '' ? document.URL : piwikparam;\r\n    \r\nvar piwikdefault = {\r\n    url: getUrlPiwik,\r\n    page: 'page',\r\n    visit: 'visit',\r\n    siteId:\"2\"  //pc端为1 h5为2\r\n}\r\nvar piwikutils = {\r\n    getQueryString: function (name) {\r\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        if (r != null) return unescape(r[2]); return null;\r\n    },\r\n    getCookie:function(name) {\r\n        var strcookie = document.cookie;\r\n        var arrcookie = strcookie.split(\"; \");\r\n        for (var i = 0; i < arrcookie.length; i++) {\r\n            var arr = arrcookie[i].split(\"=\");\r\n            if (arr[0] == name) return arr[1];\r\n        }\r\n        return \"\";\r\n    }\r\n}\r\n\r\n/*\r\n *  url地址解析\r\n */\r\nfunction stringUrlParse(param1){\r\n    var anchor = document.createElement('a');\r\n    anchor.href = param1;\r\n    return {\r\n        source: param1,\r\n        protocol: anchor.protocol.replace(':', ''),\r\n        host: anchor.hostname,\r\n        port: anchor.port,\r\n        query: anchor.search,\r\n        params: (function() {\r\n            var ret = {},\r\n                seg = anchor.search.replace(/^\\?/, '').split('&'),\r\n                len = seg.length,\r\n                i = 0,\r\n                str;\r\n            for (; i < len; i++) {\r\n                if (!seg[i]) {\r\n                    continue;\r\n                }\r\n                str = seg[i].split('=');\r\n                ret[str[0]] = str[1];\r\n            }\r\n            return ret;\r\n        })(),\r\n        file: (anchor.pathname.match(/\\/([^\\/?#]+)$/i) || [, ''])[1],\r\n        hash: anchor.hash.replace('#', ''),\r\n        path: anchor.pathname.replace(/^([^\\/])/, '/$1'),\r\n        relative: (anchor.href.match(/tps?:\\/\\/[^\\/]+(.+)/) || [, ''])[1],\r\n        segments: anchor.pathname.replace(/^\\//, '').split('/')\r\n    };\r\n}\r\n\r\nvar piwikstat = {\r\n    init: function () {\r\n        var referer = this.getReferrer().substr(0, 255),\r\n            getSource = piwikutils.getQueryString(\"utm_source\"),\r\n            getCampaign = piwikutils.getQueryString(\"utm_campaign\"),\r\n            getTerm = piwikutils.getQueryString(\"utm_term\"),\r\n            getContent = piwikutils.getQueryString(\"utm_content\"),\r\n            getKeyword = piwikutils.getQueryString(\"utm_kw\"),\r\n            getMedium = piwikutils.getQueryString(\"utm_medium\");\r\n        var url = piwikdefault.url;\r\n        if (url.indexOf(\"utm_source=\") !== -1) {\r\n            url = url.replace(\"&utm_medium=\" + getMedium, \"\");\r\n            _paq.push([setCustomVariable, 7, \"utm_medium\", getMedium, piwikdefault.visit]);\r\n\r\n            url = url.replace(\"&utm_campaign=\" + getCampaign, \"\");\r\n            _paq.push([setCustomVariable, 8, \"utm_campaign\", getCampaign, piwikdefault.visit]);\r\n\r\n            url = url.replace(\"&utm_term=\" + getTerm, \"\");\r\n            _paq.push([setCustomVariable, 9, \"utm_term\", getTerm, piwikdefault.visit]);\r\n\r\n            url = url.replace(\"&utm_content=\" + getContent, \"\");\r\n            _paq.push([setCustomVariable, 10, \"utm_content\", getContent, piwikdefault.visit]);\r\n\r\n            url = url.replace(\"&utm_kw=\" + getKeyword, \"\");\r\n            _paq.push([setCustomVariable, 11, \"utm_kw\", getKeyword, piwikdefault.visit]);\r\n\r\n            url = url.replace(\"utm_medium=\" + getMedium + \"&\", \"\");\r\n            url = url.replace(\"utm_campaign=\" + getCampaign + \"&\", \"\");\r\n            url = url.replace(\"utm_term=\" + getTerm + \"&\", \"\");\r\n            url = url.replace(\"utm_content=\" + getContent + \"&\", \"\");\r\n\r\n            var newAtt = \"pk_campaign=\" + getSource + \"-\" + getCampaign + \"-\" + getTerm + \"&pk_kwd=\" + getContent + \"-\" + getMedium;\r\n            url = url.replace(\"utm_source=\" + getSource, newAtt);\r\n            _paq.push([setCustomVariable, 6, \"utm_source\", getSource, piwikdefault.visit]);\r\n\r\n        }\r\n\r\n        var onlynumber = function (str) {\r\n            if (str !== '') {\r\n                var reg = new RegExp(str + \"\\\\d+\", \"\");\r\n                //var matchstr = location.href.match(reg);\r\n                var matchstr = piwikdefault.url.match(reg);\r\n                if (matchstr != null) {\r\n                    return matchstr[0].match(/\\d+/);\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n \r\n        /*订单号*/\r\n        var psysn = piwikutils.getQueryString(\"pay_sn\");\r\n        if (psysn !== null) {\r\n            _paq.push([setCustomVariable, 5, \"pay_sn\", psysn, piwikdefault.page]);\r\n        }\r\n\r\n        /*专场号*/\r\n        var showid = onlynumber('special_id=');\r\n        if (showid !== null) {\r\n            _paq.push([setCustomVariable, 2, \"special_id\", showid, piwikdefault.page]);\r\n        }\r\n\r\n        /*商品号*/\r\n        var goodsid = onlynumber('goods_id=');\r\n        if (goodsid !== null) {\r\n            _paq.push([setCustomVariable, 3, \"goods_id\", goodsid, piwikdefault.page]);\r\n        }\r\n\r\n        /*类别号*/\r\n        var category = onlynumber('category=');\r\n        if (category !== null) {\r\n            _paq.push([setCustomVariable, 11, \"category\", category, piwikdefault.page]);\r\n        }\r\n\r\n        /*用户id*/\r\n        var userid = piwikutils.getCookie('memberid');\r\n        if (userid) {\r\n            _paq.push([setCustomVariable, 1, \"userid\", userid, piwikdefault.visit]);\r\n            _paq.push([setCustomVariable, 1, \"userid\", userid, piwikdefault.page]);\r\n        }\r\n\r\n        // if (getKeyword !== \"non\") {\r\n        //     _paq.push([setCustomVariable, 4, \"utm_kw\", getKeyword, piwikdefault.visit]);\r\n        // }\r\n        _paq.push([setCustomVariable, 10, \"referer\", referer, piwikdefault.page]);\r\n        _paq.push([\"setDocumentTitle\", document.domain + \"/\" + document.title]);\r\n        _paq.push([\"setCustomUrl\", url]);\r\n        try {\r\n            _paq.push([\"trackPageView\", url]);\r\n        } catch (error) { }\r\n    },\r\n    isUndefined: function (v) {\r\n        if (v !== \"undefined\") {\r\n            if (v !== \"\") {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    getReferrer: function () {\r\n        var referrer = \"\";\r\n        try {\r\n            referrer = window.top.document.referrer;\r\n        } catch (e) {\r\n            if (window.parent) {\r\n                try {\r\n                    referrer = window.parent.document.referrer;\r\n                } catch (e2) {\r\n                    referrer = \"\";\r\n                }\r\n            }\r\n        }\r\n        if (referrer === \"\") {\r\n            referrer = document.referrer;\r\n        }\r\n        return referrer;\r\n    },\r\n    getQueryStringRegExp: function (name) {\r\n        var reg = new RegExp(\"(^|\\\\?|&)\" + name + \"=([^&]*)(\\\\s|&|$)\", \"i\");\r\n        //if (reg.test(location.href)) {\r\n        if (reg.test(piwikdefault.url)) {\r\n            if (name === \"utm_kw\") {\r\n                return decodeURI(RegExp.$2.replace(/\\+/g, \" \"));\r\n            } else {\r\n                return RegExp.$2.replace(/\\+/g, \" \");\r\n            }\r\n        }\r\n        return \"non\";\r\n    },\r\n    loadpiwik: function () {\r\n        var hostfiler = function () {\r\n            var host = document.location.hostname;\r\n            var domain = [\"shenmeibaby.com\", \"shendad.com\", \"shenba.com\"];\r\n            var accessList = [\"test\"]; //排除列表，不跟踪的加入数组\r\n            var sum = 0;\r\n            for (var i = 0; i < domain.length; i++) {\r\n                var fordomain = domain[i];\r\n                if (host.indexOf(fordomain) != -1) {\r\n                    var str = host.slice(0, -(fordomain.length + 1));\r\n                    for (var k = 0; k < accessList.length; k++) {\r\n                        if (str === accessList[k]) {\r\n                            sum++;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (sum > 0) {\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        };\r\n        //     if (hostfilter()) {\r\n        //         var u = ((\"https:\" === document.location.protocol) ? \"https\" : \"http\") + \"://120.26.78.247:88/\";\r\n        //     } else {\r\n        //         var u = ((\"https:\" === document.location.protocol) ? \"https\" : \"http\") + \"://120.26.78.247:88/\";\r\n        //     }\r\n\r\n        var u = ((\"https:\" === document.location.protocol) ? \"https\" : \"http\") + \"://bi.shenba.com/\";\r\n        _paq.push([\"setTrackerUrl\", u + \"piwik.php\"]);\r\n        _paq.push([\"setSiteId\", piwikdefault.siteId]);\r\n        var d = document,\r\n            g = d.createElement(\"script\"),\r\n            s = d.getElementsByTagName(\"script\")[0];\r\n        g.type = \"text/javascript\";\r\n        g.defer = true;\r\n        g.async = true;\r\n        g.src = u + \"piwik.js\";\r\n        s.parentNode.insertBefore(g, s);\r\n    },\r\n    struc: function () {\r\n        this.init();\r\n        this.loadpiwik();\r\n    }\r\n};\r\npiwikstat.struc();\r\nvar piwikTracker = {\r\n    /**\r\n     * 跟踪\r\n     * piwikTracker.track(el,objAry[,baseDataStr])\r\n     * @el {Object} jquery封装的对象 像:$('selector')\r\n     * @objAry {Array}\r\n     * @baseDataStr {String} 基础数据字符串 如:register|button|1|1 如果设置该值, 则会增加基础的\"交互\"数据\r\n     * 如  var specialtrack =[{index:5,key:'age',value:age,scope:'page'}];\r\n           index: 自定义字段的索引 \r\n           key:   自定义字段的key\r\n           value: 自定义字段的值 \r\n           scope: 自定义字段的范围 默认:page\r\n     * @return 无\r\n     */\r\n    track: function (el, objAry, baseDataStr) {\r\n        if (this._isObjectType(\"Array\", objAry)) {\r\n            var thisobj;\r\n            for (var i = 0, len = objAry.length; i < len; i++) {\r\n                thisobj = objAry[i];\r\n                _paq.push([setCustomVariable, thisobj.index || \"\", thisobj.key || \"\", thisobj.value || \"\", thisobj.scope || piwikdefault.page]);\r\n            };\r\n            if (typeof baseDataStr !== \"undefined\") {\r\n                this._pushBase(baseDataStr);\r\n                try {\r\n                    _paq.push([\"trackContentInteraction\", el[0].tagName, \"click\", \"\", \"\"]);\r\n                } catch (error) {\r\n                }\r\n            }\r\n            else if (typeof (el).attr('data-myinteraction') !== \"undefined\") {\r\n                try {\r\n                    _paq.push([\"trackContentInteraction\", el[0].tagName, \"click\", \"\", \"\"]);\r\n                } catch (error) {\r\n                }\r\n            }\r\n            /* 删除跟踪变量 */\r\n            for (var j = 0; j <= 100; j++) {\r\n                _paq.push(['deleteCustomVariable', j, \"page\"]);\r\n            }\r\n        }\r\n    },\r\n    /*\r\n     * 基础交互数据 一般情况点击时 会发送以下索引的数据\r\n     */\r\n    _pushBase: function (datastr) {\r\n        var page = piwikdefault.page;\r\n        var data;\r\n        if (this._isObjectType(\"Array\", datastr)) {\r\n            data = datastr;\r\n        } else {\r\n            data = datastr.split(\"|\");\r\n        }\r\n        _paq.push([setCustomVariable, 6, page, data[0], page]);\r\n        _paq.push([setCustomVariable, 7, \"module\", data[1], page]);\r\n        _paq.push([setCustomVariable, 8, \"paging_number\", data[2], page]);\r\n        _paq.push([setCustomVariable, 9, \"position_1\", data[3], page]);\r\n        _paq.push([setCustomVariable, 10, \"referer\", piwikdefault.url, page]); \r\n    },\r\n    /*\r\n     * YAOLAN APP检测\r\n    */\r\n    yaoLanPiwik:function(){\r\n        var url = piwikdefault.url;\r\n\r\n        _paq.push([setCustomVariable, 6,\"utm_source\", \"YaoLan_YunYuApp\", piwikdefault.visit]);\r\n        _paq.push([setCustomVariable, 7,\"utm_medium\", \"non\", piwikdefault.visit]);\r\n        _paq.push([setCustomVariable, 8,\"utm_campaign\", \"non\", piwikdefault.visit]);\r\n        _paq.push([setCustomVariable, 9,\"utm_term\", \"non\", piwikdefault.visit]);\r\n        _paq.push([setCustomVariable, 10,\"utm_content\", \"non\", piwikdefault.visit]);\r\n\r\n        try {\r\n            _paq.push([\"trackPageView\",url]);\r\n        } catch (error) { }\r\n    },\r\n    /**\r\n     * private 发送跟踪内容\r\n     * @el {Object} jquery封装的对象 像:$('selector')\r\n     * @attrName {String} 元素的属性名,跟踪会跟踪attrName去区别获取跟踪的内容\r\n     * @return 无\r\n     */\r\n    _send: function (el, attrName) {\r\n\r\n        var trackAttr = 'interaction';\r\n        if (typeof attrName !== \"undefined\") {\r\n            trackAttr = attrName + trackAttr;\r\n        }\r\n        var $this = $(el);\r\n        var data = $this.data(trackAttr) || $this.attr(\"data-\" + trackAttr);\r\n        if (data != undefined) {\r\n            data = data.split(\"|\");\r\n            this._particularTracker.track($this, data);\r\n            this._pushBase(data);\r\n            if (attrName !== 'my') {\r\n                try {\r\n                    _paq.push([\"trackContentInteraction\", $this[0].tagName, \"click\", \"\", \"\"]);\r\n                } catch (error) { }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 特殊跟踪对象\r\n     * 主要针对特殊业务逻辑的跟踪\r\n     */\r\n    _particularTracker: {\r\n        track: function (el, data) {\r\n            //调用所有方法\r\n            var obj = piwikTracker._particularTracker;\r\n            for (var prop in obj) {\r\n                if (obj.hasOwnProperty(prop)) {\r\n                    if (prop !== \"track\") {\r\n                        //是Function\r\n                        if (piwikTracker._isObjectType(\"Function\", obj[prop])) {\r\n                            obj[prop](el, data);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 判断-javascript对象类型\r\n     * @param1 {javascript对象类型} Array|Boolean|Date|Math|Number|String|RegExp .....\r\n     * @param2 {Object}\r\n     * @return {Boolean}\r\n     */\r\n    _isObjectType: function (type, obj) {\r\n        return toString.call(obj).indexOf('[object ' + type) === 0;\r\n    }\r\n};\r\n\r\n$(document).ready(function () {\r\n    var $interaction = $(\"[data-interaction]\"),\r\n        $myinteraction = $(\"[data-myinteraction]\");\r\n    \r\n    //兼容低版本jquery:是否存在on函数\r\n    if (typeof $interaction.on == \"function\") {\r\n        $interaction.on(\"click\", function () {\r\n            piwikTracker._send($(this));\r\n        });\r\n        $myinteraction.on(\"click\", function () {\r\n            piwikTracker._send($(this), 'my');\r\n        });\r\n    } else {\r\n        //没有on函数就使用click方法\r\n        $interaction.click(function () {\r\n            piwikTracker._send($(this));\r\n        });\r\n        $myinteraction.click(function () {\r\n            piwikTracker._send($(this), 'my');\r\n        });\r\n    }\r\n});\r\n\r\nwindow.piwikTracker = piwikTracker;\r\n",
    "_base/docCookies.js": "/*\\\r\n|*|\r\n|*|  :: cookies.js ::\r\n|*|\r\n|*|  A complete cookies reader/writer framework with full unicode support.\r\n|*|\r\n|*|  Revision #1 - September 4, 2014\r\n|*|\r\n|*|  https://developer.mozilla.org/en-US/docs/Web/API/document.cookie\r\n|*|  https://developer.mozilla.org/User:fusionchess\r\n|*|\r\n|*|  This framework is released under the GNU Public License, version 3 or later.\r\n|*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html\r\n|*|\r\n|*|  Syntaxes:\r\n|*|\r\n|*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])\r\n|*|  * docCookies.getItem(name)\r\n|*|  * docCookies.removeItem(name[, path[, domain]])\r\n|*|  * docCookies.hasItem(name)\r\n|*|  * docCookies.keys()\r\n|*|\r\n\\*/\r\n\r\ndefine('_base/docCookies',function() {\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.base = sbLib.base || {};\r\n\r\n    var docCookies = {\r\n        getItem: function(sKey) {\r\n            if (!sKey) {\r\n                return null;\r\n            }\r\n            return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\r\n        },\r\n        setItem: function(sKey, sValue, vEnd, sPath, sDomain, bSecure) {\r\n            if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) {\r\n                return false;\r\n            }\r\n            var sExpires = \"\";\r\n            if (vEnd) {\r\n                switch (vEnd.constructor) {\r\n                    case Number:\r\n                        sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\r\n                        break;\r\n                    case String:\r\n                        sExpires = \"; expires=\" + vEnd;\r\n                        break;\r\n                    case Date:\r\n                        sExpires = \"; expires=\" + vEnd.toUTCString();\r\n                        break;\r\n                }\r\n            }\r\n            document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\r\n            return true;\r\n        },\r\n        removeItem: function(sKey, sPath, sDomain) {\r\n            if (!this.hasItem(sKey)) {\r\n                return false;\r\n            }\r\n            document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\r\n            return true;\r\n        },\r\n        hasItem: function(sKey) {\r\n            if (!sKey) {\r\n                return false;\r\n            }\r\n            return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\r\n        },\r\n        keys: function() {\r\n            var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\r\n            for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) {\r\n                aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]);\r\n            }\r\n            return aKeys;\r\n        },\r\n        delCookie: function(name) { //删除cookie\r\n            var self = this;\r\n            var exp = new Date();\r\n            exp.setTime(exp.getTime() - 1);\r\n            var cval = self.getItem(name);\r\n            if (cval !== null) document.cookie = name + \"=\" + cval + \"; path=/;expires=\" + exp.toGMTString();\r\n        }\r\n    };\r\n\r\n    sbLib.base.docCookies = docCookies;\r\n});\r\n",
    "_base/iScroll.js": "/**\r\n * 滚动 iScroll\r\n * 修改自 iScroll-lite\r\n * @see http://iscrolljs.com/#intro\r\n * @version 5.1.3\r\n */\r\ndefine('_base/iScroll',function() {\r\n    \"use strict\";\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.base = sbLib.base || {};\r\n\r\n    var rAF = window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n        window.oRequestAnimationFrame ||\r\n        window.msRequestAnimationFrame ||\r\n        function(callback) {\r\n            window.setTimeout(callback, 1000 / 60);\r\n        };\r\n\r\n    var utils = (function() {\r\n        var me = {};\r\n\r\n        var _elementStyle = document.createElement('div').style;\r\n        var _vendor = (function() {\r\n            var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\r\n                transform,\r\n                i = 0,\r\n                l = vendors.length;\r\n\r\n            for (; i < l; i++) {\r\n                transform = vendors[i] + 'ransform';\r\n                if (transform in _elementStyle) return vendors[i].substr(0, vendors[i].length - 1);\r\n            }\r\n\r\n            return false;\r\n        })();\r\n\r\n        function _prefixStyle(style) {\r\n            if (_vendor === false) return false;\r\n            if (_vendor === '') return style;\r\n            return _vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n        }\r\n\r\n        me.getTime = Date.now || function getTime() {\r\n            return new Date().getTime();\r\n        };\r\n\r\n        me.extend = function(target, obj) {\r\n            for (var i in obj) {\r\n                target[i] = obj[i];\r\n            }\r\n        };\r\n\r\n        me.addEvent = function(el, type, fn, capture) {\r\n            el.addEventListener(type, fn, !!capture);\r\n        };\r\n\r\n        me.removeEvent = function(el, type, fn, capture) {\r\n            el.removeEventListener(type, fn, !!capture);\r\n        };\r\n\r\n        me.prefixPointerEvent = function(pointerEvent) {\r\n            return window.MSPointerEvent ?\r\n                'MSPointer' + pointerEvent.charAt(9).toUpperCase() + pointerEvent.substr(10) :\r\n                pointerEvent;\r\n        };\r\n\r\n        me.momentum = function(current, start, time, lowerMargin, wrapperSize, deceleration) {\r\n            var distance = current - start,\r\n                speed = Math.abs(distance) / time,\r\n                destination,\r\n                duration;\r\n\r\n            deceleration = deceleration === undefined ? 0.0006 : deceleration;\r\n\r\n            destination = current + (speed * speed) / (2 * deceleration) * (distance < 0 ? -1 : 1);\r\n            duration = speed / deceleration;\r\n\r\n            if (destination < lowerMargin) {\r\n                destination = wrapperSize ? lowerMargin - (wrapperSize / 2.5 * (speed / 8)) : lowerMargin;\r\n                distance = Math.abs(destination - current);\r\n                duration = distance / speed;\r\n            } else if (destination > 0) {\r\n                destination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\r\n                distance = Math.abs(current) + destination;\r\n                duration = distance / speed;\r\n            }\r\n\r\n            return {\r\n                destination: Math.round(destination),\r\n                duration: duration\r\n            };\r\n        };\r\n\r\n        var _transform = _prefixStyle('transform');\r\n\r\n        me.extend(me, {\r\n            hasTransform: _transform !== false,\r\n            hasPerspective: _prefixStyle('perspective') in _elementStyle,\r\n            hasTouch: 'ontouchstart' in window,\r\n            hasPointer: window.PointerEvent || window.MSPointerEvent, // IE10 is prefixed\r\n            hasTransition: _prefixStyle('transition') in _elementStyle\r\n        });\r\n\r\n        // This should find all Android browsers lower than build 535.19 (both stock browser and webview)\r\n        me.isBadAndroid = /Android /.test(window.navigator.appVersion) && !(/Chrome\\/\\d/.test(window.navigator.appVersion));\r\n\r\n        me.extend(me.style = {}, {\r\n            transform: _transform,\r\n            transitionTimingFunction: _prefixStyle('transitionTimingFunction'),\r\n            transitionDuration: _prefixStyle('transitionDuration'),\r\n            transitionDelay: _prefixStyle('transitionDelay'),\r\n            transformOrigin: _prefixStyle('transformOrigin')\r\n        });\r\n\r\n        me.hasClass = function(e, c) {\r\n            var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\");\r\n            return re.test(e.className);\r\n        };\r\n\r\n        me.addClass = function(e, c) {\r\n            if (me.hasClass(e, c)) {\r\n                return;\r\n            }\r\n\r\n            var newclass = e.className.split(' ');\r\n            newclass.push(c);\r\n            e.className = newclass.join(' ');\r\n        };\r\n\r\n        me.removeClass = function(e, c) {\r\n            if (!me.hasClass(e, c)) {\r\n                return;\r\n            }\r\n\r\n            var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", 'g');\r\n            e.className = e.className.replace(re, ' ');\r\n        };\r\n\r\n        me.offset = function(el) {\r\n            var left = -el.offsetLeft,\r\n                top = -el.offsetTop;\r\n\r\n            // jshint -W084\r\n            while (el = el.offsetParent) {\r\n                left -= el.offsetLeft;\r\n                top -= el.offsetTop;\r\n            }\r\n            // jshint +W084\r\n\r\n            return {\r\n                left: left,\r\n                top: top\r\n            };\r\n        };\r\n\r\n        me.preventDefaultException = function(el, exceptions) {\r\n            for (var i in exceptions) {\r\n                if (exceptions[i].test(el[i])) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        me.extend(me.eventType = {}, {\r\n            touchstart: 1,\r\n            touchmove: 1,\r\n            touchend: 1,\r\n\r\n            mousedown: 2,\r\n            mousemove: 2,\r\n            mouseup: 2,\r\n\r\n            pointerdown: 3,\r\n            pointermove: 3,\r\n            pointerup: 3,\r\n\r\n            MSPointerDown: 3,\r\n            MSPointerMove: 3,\r\n            MSPointerUp: 3\r\n        });\r\n\r\n        me.extend(me.ease = {}, {\r\n            quadratic: {\r\n                style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n                fn: function(k) {\r\n                    return k * (2 - k);\r\n                }\r\n            },\r\n            circular: {\r\n                style: 'cubic-bezier(0.1, 0.57, 0.1, 1)', // Not properly \"circular\" but this looks better, it should be (0.075, 0.82, 0.165, 1)\r\n                fn: function(k) {\r\n                    return Math.sqrt(1 - (--k * k));\r\n                }\r\n            },\r\n            back: {\r\n                style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\r\n                fn: function(k) {\r\n                    var b = 4;\r\n                    return (k = k - 1) * k * ((b + 1) * k + b) + 1;\r\n                }\r\n            },\r\n            bounce: {\r\n                style: '',\r\n                fn: function(k) {\r\n                    if ((k /= 1) < (1 / 2.75)) {\r\n                        return 7.5625 * k * k;\r\n                    } else if (k < (2 / 2.75)) {\r\n                        return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\r\n                    } else if (k < (2.5 / 2.75)) {\r\n                        return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\r\n                    } else {\r\n                        return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\r\n                    }\r\n                }\r\n            },\r\n            elastic: {\r\n                style: '',\r\n                fn: function(k) {\r\n                    var f = 0.22,\r\n                        e = 0.4;\r\n\r\n                    if (k === 0) {\r\n                        return 0;\r\n                    }\r\n                    if (k == 1) {\r\n                        return 1;\r\n                    }\r\n\r\n                    return (e * Math.pow(2, -10 * k) * Math.sin((k - f / 4) * (2 * Math.PI) / f) + 1);\r\n                }\r\n            }\r\n        });\r\n\r\n        me.tap = function(e, eventName) {\r\n            var ev = document.createEvent('Event');\r\n            ev.initEvent(eventName, true, true);\r\n            ev.pageX = e.pageX;\r\n            ev.pageY = e.pageY;\r\n            e.target.dispatchEvent(ev);\r\n        };\r\n\r\n        me.click = function(e) {\r\n            var target = e.target,\r\n                ev;\r\n\r\n            if (!(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName)) {\r\n                ev = document.createEvent('MouseEvents');\r\n                ev.initMouseEvent('click', true, true, e.view, 1,\r\n                    target.screenX, target.screenY, target.clientX, target.clientY,\r\n                    e.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\r\n                    0, null);\r\n\r\n                ev._constructed = true;\r\n                target.dispatchEvent(ev);\r\n            }\r\n        };\r\n\r\n        return me;\r\n    })();\r\n\r\n    function iScroll(el, options) {\r\n        this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;\r\n        this.scroller = this.wrapper.children[0];\r\n        this.scrollerStyle = this.scroller.style; // cache style for better performance\r\n\r\n        this.options = {\r\n\r\n            // INSERT POINT: OPTIONS\r\n\r\n            startX: 0,\r\n            startY: 0,\r\n            scrollY: true,\r\n            directionLockThreshold: 5,\r\n            momentum: true,\r\n\r\n            bounce: true,\r\n            bounceTime: 600,\r\n            bounceEasing: '',\r\n\r\n            preventDefault: true,\r\n            preventDefaultException: {\r\n                tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/\r\n            },\r\n\r\n            HWCompositing: true,\r\n            useTransition: true,\r\n            useTransform: true\r\n        };\r\n\r\n        for (var i in options) {\r\n            this.options[i] = options[i];\r\n        }\r\n\r\n        // Normalize options\r\n        this.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';\r\n\r\n        this.options.useTransition = utils.hasTransition && this.options.useTransition;\r\n        this.options.useTransform = utils.hasTransform && this.options.useTransform;\r\n\r\n        this.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;\r\n        this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\r\n\r\n        // If you want eventPassthrough I have to lock one of the axes\r\n        this.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;\r\n        this.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;\r\n\r\n        // With eventPassthrough we also need lockDirection mechanism\r\n        this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\r\n        this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\r\n\r\n        this.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;\r\n\r\n        this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;\r\n\r\n        if (this.options.tap === true) {\r\n            this.options.tap = 'tap';\r\n        }\r\n\r\n        // INSERT POINT: NORMALIZATION\r\n\r\n        // Some defaults\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.directionX = 0;\r\n        this.directionY = 0;\r\n        this._events = {};\r\n\r\n        // INSERT POINT: DEFAULTS\r\n\r\n        this._init();\r\n        this.refresh();\r\n\r\n        this.scrollTo(this.options.startX, this.options.startY);\r\n        this.enable();\r\n    }\r\n\r\n    iScroll.prototype = {\r\n        version: '5.1.3',\r\n\r\n        _init: function() {\r\n            this._initEvents();\r\n\r\n            // INSERT POINT: _init\r\n\r\n        },\r\n\r\n        destroy: function() {\r\n            this._initEvents(true);\r\n\r\n            this._execEvent('destroy');\r\n        },\r\n\r\n        _transitionEnd: function(e) {\r\n            if (e.target != this.scroller || !this.isInTransition) {\r\n                return;\r\n            }\r\n\r\n            this._transitionTime();\r\n            if (!this.resetPosition(this.options.bounceTime)) {\r\n                this.isInTransition = false;\r\n                this._execEvent('scrollEnd');\r\n            }\r\n        },\r\n\r\n        _start: function(e) {\r\n            // React to left mouse button only\r\n            if (utils.eventType[e.type] != 1) {\r\n                if (e.button !== 0) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (!this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated)) {\r\n                return;\r\n            }\r\n\r\n            if (this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException)) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            var point = e.touches ? e.touches[0] : e,\r\n                pos;\r\n\r\n            this.initiated = utils.eventType[e.type];\r\n            this.moved = false;\r\n            this.distX = 0;\r\n            this.distY = 0;\r\n            this.directionX = 0;\r\n            this.directionY = 0;\r\n            this.directionLocked = 0;\r\n\r\n            this._transitionTime();\r\n\r\n            this.startTime = utils.getTime();\r\n\r\n            if (this.options.useTransition && this.isInTransition) {\r\n                this.isInTransition = false;\r\n                pos = this.getComputedPosition();\r\n                this._translate(Math.round(pos.x), Math.round(pos.y));\r\n                this._execEvent('scrollEnd');\r\n            } else if (!this.options.useTransition && this.isAnimating) {\r\n                this.isAnimating = false;\r\n                this._execEvent('scrollEnd');\r\n            }\r\n\r\n            this.startX = this.x;\r\n            this.startY = this.y;\r\n            this.absStartX = this.x;\r\n            this.absStartY = this.y;\r\n            this.pointX = point.pageX;\r\n            this.pointY = point.pageY;\r\n\r\n            this._execEvent('beforeScrollStart');\r\n        },\r\n\r\n        _move: function(e) {\r\n            if (!this.enabled || utils.eventType[e.type] !== this.initiated) {\r\n                return;\r\n            }\r\n\r\n            if (this.options.preventDefault) { // increases performance on Android? TODO: check!\r\n                e.preventDefault();\r\n            }\r\n\r\n            var point = e.touches ? e.touches[0] : e,\r\n                deltaX = point.pageX - this.pointX,\r\n                deltaY = point.pageY - this.pointY,\r\n                timestamp = utils.getTime(),\r\n                newX, newY,\r\n                absDistX, absDistY;\r\n\r\n            this.pointX = point.pageX;\r\n            this.pointY = point.pageY;\r\n\r\n            this.distX += deltaX;\r\n            this.distY += deltaY;\r\n            absDistX = Math.abs(this.distX);\r\n            absDistY = Math.abs(this.distY);\r\n\r\n            // We need to move at least 10 pixels for the scrolling to initiate\r\n            if (timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10)) {\r\n                return;\r\n            }\r\n\r\n            // If you are scrolling in one direction lock the other\r\n            if (!this.directionLocked && !this.options.freeScroll) {\r\n                if (absDistX > absDistY + this.options.directionLockThreshold) {\r\n                    this.directionLocked = 'h'; // lock horizontally\r\n                } else if (absDistY >= absDistX + this.options.directionLockThreshold) {\r\n                    this.directionLocked = 'v'; // lock vertically\r\n                } else {\r\n                    this.directionLocked = 'n'; // no lock\r\n                }\r\n            }\r\n\r\n            if (this.directionLocked == 'h') {\r\n                if (this.options.eventPassthrough == 'vertical') {\r\n                    e.preventDefault();\r\n                } else if (this.options.eventPassthrough == 'horizontal') {\r\n                    this.initiated = false;\r\n                    return;\r\n                }\r\n\r\n                deltaY = 0;\r\n            } else if (this.directionLocked == 'v') {\r\n                if (this.options.eventPassthrough == 'horizontal') {\r\n                    e.preventDefault();\r\n                } else if (this.options.eventPassthrough == 'vertical') {\r\n                    this.initiated = false;\r\n                    return;\r\n                }\r\n\r\n                deltaX = 0;\r\n            }\r\n\r\n            deltaX = this.hasHorizontalScroll ? deltaX : 0;\r\n            deltaY = this.hasVerticalScroll ? deltaY : 0;\r\n\r\n            newX = this.x + deltaX;\r\n            newY = this.y + deltaY;\r\n\r\n            // Slow down if outside of the boundaries\r\n            if (newX > 0 || newX < this.maxScrollX) {\r\n                newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\r\n            }\r\n            if (newY > 0 || newY < this.maxScrollY) {\r\n                newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\r\n            }\r\n\r\n            this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\r\n            this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\r\n\r\n            if (!this.moved) {\r\n                this._execEvent('scrollStart');\r\n            }\r\n\r\n            this.moved = true;\r\n\r\n            this._translate(newX, newY);\r\n\r\n            /* REPLACE START: _move */\r\n\r\n            if (timestamp - this.startTime > 300) {\r\n                this.startTime = timestamp;\r\n                this.startX = this.x;\r\n                this.startY = this.y;\r\n            }\r\n\r\n            /* REPLACE END: _move */\r\n\r\n        },\r\n\r\n        _end: function(e) {\r\n            if (!this.enabled || utils.eventType[e.type] !== this.initiated) {\r\n                return;\r\n            }\r\n\r\n            if (this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException)) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            var point = e.changedTouches ? e.changedTouches[0] : e,\r\n                momentumX,\r\n                momentumY,\r\n                duration = utils.getTime() - this.startTime,\r\n                newX = Math.round(this.x),\r\n                newY = Math.round(this.y),\r\n                distanceX = Math.abs(newX - this.startX),\r\n                distanceY = Math.abs(newY - this.startY),\r\n                time = 0,\r\n                easing = '';\r\n\r\n            this.isInTransition = 0;\r\n            this.initiated = 0;\r\n            this.endTime = utils.getTime();\r\n\r\n            // reset if we are outside of the boundaries\r\n            if (this.resetPosition(this.options.bounceTime)) {\r\n                return;\r\n            }\r\n\r\n            this.scrollTo(newX, newY); // ensures that the last position is rounded\r\n\r\n            // we scrolled less than 10 pixels\r\n            if (!this.moved) {\r\n                if (this.options.tap) {\r\n                    utils.tap(e, this.options.tap);\r\n                }\r\n\r\n                if (this.options.click) {\r\n                    utils.click(e);\r\n                }\r\n\r\n                this._execEvent('scrollCancel');\r\n                return;\r\n            }\r\n\r\n            if (this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100) {\r\n                this._execEvent('flick');\r\n                return;\r\n            }\r\n\r\n            // start momentum animation if needed\r\n            if (this.options.momentum && duration < 300) {\r\n                momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {\r\n                    destination: newX,\r\n                    duration: 0\r\n                };\r\n                momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {\r\n                    destination: newY,\r\n                    duration: 0\r\n                };\r\n                newX = momentumX.destination;\r\n                newY = momentumY.destination;\r\n                time = Math.max(momentumX.duration, momentumY.duration);\r\n                this.isInTransition = 1;\r\n            }\r\n\r\n            // INSERT POINT: _end\r\n\r\n            if (newX != this.x || newY != this.y) {\r\n                // change easing function when scroller goes out of the boundaries\r\n                if (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {\r\n                    easing = utils.ease.quadratic;\r\n                }\r\n\r\n                this.scrollTo(newX, newY, time, easing);\r\n                return;\r\n            }\r\n\r\n            this._execEvent('scrollEnd');\r\n        },\r\n\r\n        _resize: function() {\r\n            var that = this;\r\n\r\n            clearTimeout(this.resizeTimeout);\r\n\r\n            this.resizeTimeout = setTimeout(function() {\r\n                that.refresh();\r\n            }, this.options.resizePolling);\r\n        },\r\n\r\n        resetPosition: function(time) {\r\n            var x = this.x,\r\n                y = this.y;\r\n\r\n            time = time || 0;\r\n\r\n            if (!this.hasHorizontalScroll || this.x > 0) {\r\n                x = 0;\r\n            } else if (this.x < this.maxScrollX) {\r\n                x = this.maxScrollX;\r\n            }\r\n\r\n            if (!this.hasVerticalScroll || this.y > 0) {\r\n                y = 0;\r\n            } else if (this.y < this.maxScrollY) {\r\n                y = this.maxScrollY;\r\n            }\r\n\r\n            if (x == this.x && y == this.y) {\r\n                return false;\r\n            }\r\n\r\n            this.scrollTo(x, y, time, this.options.bounceEasing);\r\n\r\n            return true;\r\n        },\r\n\r\n        disable: function() {\r\n            this.enabled = false;\r\n        },\r\n\r\n        enable: function() {\r\n            this.enabled = true;\r\n        },\r\n\r\n        refresh: function() {\r\n            var rf = this.wrapper.offsetHeight; // Force reflow\r\n\r\n            this.wrapperWidth = this.wrapper.clientWidth;\r\n            this.wrapperHeight = this.wrapper.clientHeight;\r\n\r\n            /* REPLACE START: refresh */\r\n\r\n            this.scrollerWidth = this.scroller.offsetWidth;\r\n            this.scrollerHeight = this.scroller.offsetHeight;\r\n\r\n            this.maxScrollX = this.wrapperWidth - this.scrollerWidth;\r\n            this.maxScrollY = this.wrapperHeight - this.scrollerHeight;\r\n\r\n            /* REPLACE END: refresh */\r\n\r\n            this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;\r\n            this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;\r\n\r\n            if (!this.hasHorizontalScroll) {\r\n                this.maxScrollX = 0;\r\n                this.scrollerWidth = this.wrapperWidth;\r\n            }\r\n\r\n            if (!this.hasVerticalScroll) {\r\n                this.maxScrollY = 0;\r\n                this.scrollerHeight = this.wrapperHeight;\r\n            }\r\n\r\n            this.endTime = 0;\r\n            this.directionX = 0;\r\n            this.directionY = 0;\r\n\r\n            this.wrapperOffset = utils.offset(this.wrapper);\r\n\r\n            this._execEvent('refresh');\r\n\r\n            this.resetPosition();\r\n\r\n            // INSERT POINT: _refresh\r\n\r\n        },\r\n\r\n        on: function(type, fn) {\r\n            if (!this._events[type]) {\r\n                this._events[type] = [];\r\n            }\r\n\r\n            this._events[type].push(fn);\r\n        },\r\n\r\n        off: function(type, fn) {\r\n            if (!this._events[type]) {\r\n                return;\r\n            }\r\n\r\n            var index = this._events[type].indexOf(fn);\r\n\r\n            if (index > -1) {\r\n                this._events[type].splice(index, 1);\r\n            }\r\n        },\r\n\r\n        _execEvent: function(type) {\r\n            if (!this._events[type]) {\r\n                return;\r\n            }\r\n\r\n            var i = 0,\r\n                l = this._events[type].length;\r\n\r\n            if (!l) {\r\n                return;\r\n            }\r\n\r\n            for (; i < l; i++) {\r\n                this._events[type][i].apply(this, [].slice.call(arguments, 1));\r\n            }\r\n        },\r\n\r\n        scrollBy: function(x, y, time, easing) {\r\n            x = this.x + x;\r\n            y = this.y + y;\r\n            time = time || 0;\r\n\r\n            this.scrollTo(x, y, time, easing);\r\n        },\r\n\r\n        scrollTo: function(x, y, time, easing) {\r\n            easing = easing || utils.ease.circular;\r\n\r\n            this.isInTransition = this.options.useTransition && time > 0;\r\n\r\n            if (!time || (this.options.useTransition && easing.style)) {\r\n                this._transitionTimingFunction(easing.style);\r\n                this._transitionTime(time);\r\n                this._translate(x, y);\r\n            } else {\r\n                this._animate(x, y, time, easing.fn);\r\n            }\r\n        },\r\n\r\n        scrollToElement: function(el, time, offsetX, offsetY, easing) {\r\n            el = el.nodeType ? el : this.scroller.querySelector(el);\r\n\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            var pos = utils.offset(el);\r\n\r\n            pos.left -= this.wrapperOffset.left;\r\n            pos.top -= this.wrapperOffset.top;\r\n\r\n            // if offsetX/Y are true we center the element to the screen\r\n            if (offsetX === true) {\r\n                offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\r\n            }\r\n            if (offsetY === true) {\r\n                offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\r\n            }\r\n\r\n            pos.left -= offsetX || 0;\r\n            pos.top -= offsetY || 0;\r\n\r\n            pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\r\n            pos.top = pos.top > 0 ? 0 : pos.top < this.maxScrollY ? this.maxScrollY : pos.top;\r\n\r\n            time = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x - pos.left), Math.abs(this.y - pos.top)) : time;\r\n\r\n            this.scrollTo(pos.left, pos.top, time, easing);\r\n        },\r\n\r\n        _transitionTime: function(time) {\r\n            time = time || 0;\r\n\r\n            this.scrollerStyle[utils.style.transitionDuration] = time + 'ms';\r\n\r\n            if (!time && utils.isBadAndroid) {\r\n                this.scrollerStyle[utils.style.transitionDuration] = '0.001s';\r\n            }\r\n\r\n            // INSERT POINT: _transitionTime\r\n\r\n        },\r\n\r\n        _transitionTimingFunction: function(easing) {\r\n            this.scrollerStyle[utils.style.transitionTimingFunction] = easing;\r\n\r\n            // INSERT POINT: _transitionTimingFunction\r\n\r\n        },\r\n\r\n        _translate: function(x, y) {\r\n            if (this.options.useTransform) {\r\n\r\n                /* REPLACE START: _translate */\r\n\r\n                this.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;\r\n\r\n                /* REPLACE END: _translate */\r\n\r\n            } else {\r\n                x = Math.round(x);\r\n                y = Math.round(y);\r\n                this.scrollerStyle.left = x + 'px';\r\n                this.scrollerStyle.top = y + 'px';\r\n            }\r\n\r\n            this.x = x;\r\n            this.y = y;\r\n\r\n            // INSERT POINT: _translate\r\n\r\n        },\r\n\r\n        _initEvents: function(remove) {\r\n            var eventType = remove ? utils.removeEvent : utils.addEvent,\r\n                target = this.options.bindToWrapper ? this.wrapper : window;\r\n\r\n            eventType(window, 'orientationchange', this);\r\n            eventType(window, 'resize', this);\r\n\r\n            if (this.options.click) {\r\n                eventType(this.wrapper, 'click', this, true);\r\n            }\r\n\r\n            if (!this.options.disableMouse) {\r\n                eventType(this.wrapper, 'mousedown', this);\r\n                eventType(target, 'mousemove', this);\r\n                eventType(target, 'mousecancel', this);\r\n                eventType(target, 'mouseup', this);\r\n            }\r\n\r\n            if (utils.hasPointer && !this.options.disablePointer) {\r\n                eventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);\r\n                eventType(target, utils.prefixPointerEvent('pointermove'), this);\r\n                eventType(target, utils.prefixPointerEvent('pointercancel'), this);\r\n                eventType(target, utils.prefixPointerEvent('pointerup'), this);\r\n            }\r\n\r\n            if (utils.hasTouch && !this.options.disableTouch) {\r\n                eventType(this.wrapper, 'touchstart', this);\r\n                eventType(target, 'touchmove', this);\r\n                eventType(target, 'touchcancel', this);\r\n                eventType(target, 'touchend', this);\r\n            }\r\n\r\n            eventType(this.scroller, 'transitionend', this);\r\n            eventType(this.scroller, 'webkitTransitionEnd', this);\r\n            eventType(this.scroller, 'oTransitionEnd', this);\r\n            eventType(this.scroller, 'MSTransitionEnd', this);\r\n        },\r\n\r\n        getComputedPosition: function() {\r\n            var matrix = window.getComputedStyle(this.scroller, null),\r\n                x, y;\r\n\r\n            if (this.options.useTransform) {\r\n                matrix = matrix[utils.style.transform].split(')')[0].split(', ');\r\n                x = +(matrix[12] || matrix[4]);\r\n                y = +(matrix[13] || matrix[5]);\r\n            } else {\r\n                x = +matrix.left.replace(/[^-\\d.]/g, '');\r\n                y = +matrix.top.replace(/[^-\\d.]/g, '');\r\n            }\r\n\r\n            return {\r\n                x: x,\r\n                y: y\r\n            };\r\n        },\r\n\r\n        _animate: function(destX, destY, duration, easingFn) {\r\n            var that = this,\r\n                startX = this.x,\r\n                startY = this.y,\r\n                startTime = utils.getTime(),\r\n                destTime = startTime + duration;\r\n\r\n            function step() {\r\n                var now = utils.getTime(),\r\n                    newX, newY,\r\n                    easing;\r\n\r\n                if (now >= destTime) {\r\n                    that.isAnimating = false;\r\n                    that._translate(destX, destY);\r\n\r\n                    if (!that.resetPosition(that.options.bounceTime)) {\r\n                        that._execEvent('scrollEnd');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                now = (now - startTime) / duration;\r\n                easing = easingFn(now);\r\n                newX = (destX - startX) * easing + startX;\r\n                newY = (destY - startY) * easing + startY;\r\n                that._translate(newX, newY);\r\n\r\n                if (that.isAnimating) {\r\n                    rAF(step);\r\n                }\r\n            }\r\n\r\n            this.isAnimating = true;\r\n            step();\r\n        },\r\n        handleEvent: function(e) {\r\n            switch (e.type) {\r\n                case 'touchstart':\r\n                case 'pointerdown':\r\n                case 'MSPointerDown':\r\n                case 'mousedown':\r\n                    this._start(e);\r\n                    break;\r\n                case 'touchmove':\r\n                case 'pointermove':\r\n                case 'MSPointerMove':\r\n                case 'mousemove':\r\n                    this._move(e);\r\n                    break;\r\n                case 'touchend':\r\n                case 'pointerup':\r\n                case 'MSPointerUp':\r\n                case 'mouseup':\r\n                case 'touchcancel':\r\n                case 'pointercancel':\r\n                case 'MSPointerCancel':\r\n                case 'mousecancel':\r\n                    this._end(e);\r\n                    break;\r\n                case 'orientationchange':\r\n                case 'resize':\r\n                    this._resize();\r\n                    break;\r\n                case 'transitionend':\r\n                case 'webkitTransitionEnd':\r\n                case 'oTransitionEnd':\r\n                case 'MSTransitionEnd':\r\n                    this._transitionEnd(e);\r\n                    break;\r\n                case 'wheel':\r\n                case 'DOMMouseScroll':\r\n                case 'mousewheel':\r\n                    this._wheel(e);\r\n                    break;\r\n                case 'keydown':\r\n                    this._key(e);\r\n                    break;\r\n                case 'click':\r\n                    if (!e._constructed) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    iScroll.utils = utils;\r\n\r\n    sbLib.base.iScroll = iScroll;\r\n});\r\n",
    "_base/infiniteScroll.js": "/**\r\n * @module lib/infiniteScroll\r\n * @user pjg\r\n * @date 14-11-28\r\n *\r\n * @usage\r\n * @example\r\n * 初始化\r\n * lib.infiniteScroll.init({\r\n *      bufferPx: 40, // 距离低端px就触发onNear事件\r\n        time: 200, // 设置延迟触发onNear\r\n        onNear: null, // 滚到底 事件处理器\r\n        end: null, // 是否加载完了\r\n        onEnd: null, // 加载完了怎么办\r\n        onScroll: null // scroll 事件处理\r\n * });\r\n *\r\n * 关闭\r\n * lib.infiniteScroll.remove();\r\n *\r\n * 开启\r\n * lib.infiniteScroll.start();\r\n *\r\n */\r\n\r\ndefine('_base/infiniteScroll',function(){\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.base = sbLib.base || {};\r\n    var time = Date.now();\r\n\r\n    var infiniteScroll = {\r\n        defaultOpts: {\r\n            bufferPx: 40,\r\n            time: 200,\r\n            onNear: null,\r\n            onScroll: null,\r\n            end: null, // 是否加载完了\r\n            onEnd: null, // 加载完了怎么办\r\n        },\r\n\r\n        init: function(opts) {           \r\n            opts = opts || {};\r\n            this.options = $.extend(true, {}, this.defaultOpts, opts);\r\n            this.started = false;\r\n\r\n            this._addEvent();\r\n\r\n            return this;\r\n        },\r\n\r\n        remove: function () {\r\n            $(window).off('scroll', this.scrollHandler);\r\n            this.started = false;\r\n        },\r\n\r\n        start: function () {\r\n            var opts = this.options;\r\n            $(window).on('scroll', this.scrollHandler);\r\n            this.started = true;\r\n        },\r\n\r\n        triggerEnd: function () {\r\n            var opts = this.options;\r\n\r\n            this.remove();\r\n            opts.onEnd && opts.onEnd();\r\n        },\r\n\r\n        _addEvent: function () {\r\n            var that = this,\r\n                opts = this.options; \r\n            that.scrollHandler = function () {\r\n                that._handler();\r\n            }\r\n        },\r\n\r\n        _handler: function () {\r\n            var opts = this.options;\r\n\r\n            opts.onScroll && typeof opts.onScroll == 'function' && opts.onScroll.apply(null);\r\n\r\n            if (this._isNearBottom()) {\r\n                var diff = Date.now() - time;\r\n                if (diff < opts.time) {\r\n                    return;\r\n                } else {\r\n                    time = Date.now();\r\n                }\r\n                $.isFunction(opts.onNear) && opts.onNear.apply(null);\r\n\r\n                if ($.isFunction(opts.end) && opts.end()) {\r\n                    this.triggerEnd();\r\n                }\r\n            } else {\r\n                return;\r\n            }\r\n        },\r\n\r\n        _isNearBottom: function () {\r\n            var opts = this.options;\r\n            var $win = $(window);\r\n            var pxFromWinBottomToBottom = 0 + document.body.scrollHeight - $win.scrollTop() - $win.height();\r\n\r\n            return (pxFromWinBottomToBottom < opts.bufferPx);\r\n        }\r\n\r\n    };\r\n\r\n    \r\n    sbLib.base.infiniteScroll = infiniteScroll;\r\n});",
    "_base/layer.js": "/**\r\n @Name：layer mobile v1.5 弹层组件移动版\r\n @Author：贤心\r\n @Date：2014-09-24\r\n @Copyright：Sentsin Xu(贤心)\r\n @官网：http://sentsin.com/layui/layer\r\n @License：MIT\r\n */\r\n\r\ndefine('_base/layer',function(){\r\n    \"use strict\";\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.base = sbLib.base || {};\r\n\r\n    var win = window;\r\n    var path = ''; //所在路径，如果非模块加载不用配置\r\n    // path = path ? path : document.scripts[document.scripts.length-1].src.match(/[\\s\\S]*\\//)[0];\r\n\r\n    var doc = document, query = 'querySelectorAll', claname = 'getElementsByClassName', S = function(s){\r\n        return doc[query](s);\r\n    };\r\n\r\n    //默认配置\r\n    var config = {\r\n         type: 0,\r\n         shade: false,\r\n         shadeClose: false,\r\n         fixed: true,\r\n         anim: true\r\n    };\r\n\r\n    win.ready = {\r\n        extend: function(obj){\r\n            var newobj = JSON.parse(JSON.stringify(config));\r\n            for(var i in obj){\r\n                newobj[i] = obj[i];\r\n            }\r\n            return newobj;\r\n        },\r\n        timer: {},\r\n        end: {}\r\n    };\r\n\r\n    var index = 0, classs = ['layermbox'], Layer = function(options){\r\n        var that = this;\r\n        that.config = ready.extend(options);\r\n        that.view();\r\n    };\r\n\r\n    Layer.prototype.view = function(){\r\n        var that = this, config = that.config, layerbox = doc.createElement('div');\r\n\r\n        that.id = layerbox.id = classs[0] + index;\r\n        layerbox.setAttribute('class', classs[0] + ' ' + classs[0]+(config.type || 0));\r\n        layerbox.setAttribute('index', index);\r\n\r\n        var title = (function(){\r\n            var titype = typeof config.title === 'object';\r\n            return config.title\r\n            ? '<h3 style=\"'+ (titype ? config.title[1] : '') +'\">'+ (titype ? config.title[0] : config.title)  +'</h3><button class=\"layermend\"></button>'\r\n            : '';\r\n        }());\r\n\r\n        var button = (function(){\r\n            var btns = (config.btn || []).length, btndom;\r\n            if(btns === 0 || !config.btn){\r\n                return '';\r\n            }\r\n            btndom = '<span type=\"1\">'+ config.btn[0] +'</span>'\r\n            if(btns === 2){\r\n                btndom = '<span type=\"0\">'+ config.btn[1] +'</span>' + btndom;\r\n            }\r\n            return '<div class=\"layermbtn\">'+ btndom + '</div>';\r\n        }());\r\n\r\n        if(!config.fixed){\r\n            config.top = config.hasOwnProperty('top') ?  config.top : 100;\r\n            config.style = config.style || '';\r\n            config.style += ' top:'+ ( doc.body.scrollTop + config.top) + 'px';\r\n        }\r\n\r\n        if(config.type === 2){\r\n            config.content = '<i></i><i class=\"laymloadtwo\"></i><i></i><div>' + (config.content||'') + '</div>';\r\n        }\r\n\r\n        layerbox.innerHTML = (config.shade ? '<div '+ (typeof config.shade === 'string' ? 'style=\"'+ config.shade +'\"' : '') +' class=\"laymshade\"></div>' : '')\r\n        +'<div class=\"layermmain\" '+ (!config.fixed ? 'style=\"position:static;\"' : '') +'>'\r\n            +'<div class=\"section\">'\r\n                +'<div class=\"layermchild '+ (config.className ? config.className : '') +' '+ ((!config.type && !config.shade) ? 'layermborder ' : '') + (config.anim ? 'layermanim' : '') +'\" ' + ( config.style ? 'style=\"'+config.style+'\"' : '' ) +'>'\r\n                    + title\r\n                    +'<div class=\"layermcont\">'+ config.content +'</div>'\r\n                    + button\r\n                +'</div>'\r\n            +'</div>'\r\n        +'</div>';\r\n\r\n        if(!config.type || config.type === 2){\r\n            var dialogs = doc[claname](classs[0] + config.type), dialen = dialogs.length;\r\n            if(dialen >= 1){\r\n                layer.close(dialogs[0].getAttribute('index'))\r\n            }\r\n        }\r\n\r\n        document.body.appendChild(layerbox);\r\n        var elem = that.elem = S('#'+that.id)[0];\r\n        setTimeout(function(){\r\n            try{\r\n                elem.className = elem.className + ' layermshow';\r\n            }catch(e){\r\n                return;\r\n            }\r\n            config.success && config.success(elem);\r\n        }, 1);\r\n\r\n        that.index = index++;\r\n        that.action(config, elem);\r\n    };\r\n\r\n    Layer.prototype.action = function(config, elem){\r\n        var that = this;\r\n\r\n        //自动关闭\r\n        if(config.time){\r\n            ready.timer[that.index] = setTimeout(function(){\r\n                layer.close(that.index);\r\n            }, config.time*1000);\r\n        }\r\n\r\n        //关闭按钮\r\n        if(config.title){\r\n            elem[claname]('layermend')[0].onclick = function(){\r\n                config.cancel && config.cancel();\r\n                layer.close(that.index);\r\n            };\r\n        }\r\n\r\n        //确认取消\r\n        if(config.btn){\r\n            var btns = elem[claname]('layermbtn')[0].children, btnlen = btns.length;\r\n            for(var ii = 0; ii < btnlen; ii++){\r\n                // $(btns[ii]).on('click',function(){\r\n                //     var type = this.getAttribute('type');\r\n                //     if(type == 0){\r\n                //         config.no && config.no();\r\n                //         layer.close(that.index);\r\n                //     } else {\r\n                //         config.yes ? config.yes(that.index) : layer.close(that.index);\r\n                //     }\r\n                // });\r\n                btns[ii].onclick = function(){\r\n                    var type = this.getAttribute('type');\r\n                    if(type == 0){\r\n                        config.no && config.no();\r\n                        layer.close(that.index);\r\n                    } else {\r\n                        config.yes ? config.yes(that.index) : layer.close(that.index);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n\r\n        //点遮罩关闭\r\n        //在安卓三星中，型号Grand2（未测试其他，不过不支持多点触控的手机 这个问题应该普遍存在）；初始化时设置config中type:1 并且style中width小于clientWidth\r\n        //该情况下 安卓三星touch点击 会导致同页面其他layer无法显示 原因就是遮罩层的影响。\r\n        //解决方式 或者验证Android处理ShadeClose:false (或者提示用户自己处理);\r\n        if(config.shade && config.shadeClose){\r\n            var shade = elem[claname]('laymshade')[0];\r\n            $(shade).on('click',function(e){\r\n                layer.close(that.index, config.end);\r\n                return false;\r\n            }).on('touchmove',function(e){\r\n                layer.close(that.index, config.end);\r\n                return false;\r\n            });\r\n            // shade.onclick = function(){\r\n            //     layer.close(that.index, config.end);\r\n            // };\r\n            // shade.ontouchmove = function(){\r\n            //     layer.close(that.index, config.end);\r\n            // };\r\n        }\r\n\r\n        config.end && (ready.end[that.index] = config.end);\r\n    };\r\n\r\n    var layer = {\r\n        v: '1.5',\r\n        index: index,\r\n\r\n        //核心方法\r\n        open: function(options){\r\n            var o = new Layer(options || {});\r\n            return o.index;\r\n        },\r\n\r\n        //alert方法\r\n        alert: function(msg,callback){\r\n            var _self = this;\r\n\r\n            _self.open({\r\n                btn: ['确定'],\r\n                content: msg,\r\n                shadeClose: false,\r\n                yes: function(index){\r\n                    var cb = callback || function(){};\r\n\r\n                    cb(index);\r\n\r\n                    _self.close(index);\r\n                }\r\n            });\r\n        },\r\n\r\n        //tips 方法\r\n        tips: function(msg,time){\r\n            var _self = this;\r\n\r\n            _self.open({\r\n                style: 'width: auto; border:none; background: rgba(0, 0, 0, .8); font-size: 0.32rem; text-align: center; border-radius: .1rem; color:#fff;',\r\n                content: msg,\r\n                shade: false,\r\n                time: time || 2\r\n            });\r\n        },\r\n        close: function(index){\r\n            var ibox = S('#'+classs[0]+index)[0];\r\n            if(!ibox) return;\r\n            ibox.innerHTML = '';\r\n            doc.body.removeChild(ibox);\r\n            clearTimeout(ready.timer[index]);\r\n            delete ready.timer[index];\r\n            typeof ready.end[index] === 'function' && ready.end[index]();\r\n            delete ready.end[index];\r\n        },\r\n\r\n        //关闭所有layer层\r\n        closeAll: function(){\r\n            var boxs = doc[claname](classs[0]);\r\n            for(var i = 0, len = boxs.length; i < len; i++){\r\n                layer.close((boxs[0].getAttribute('index')|0));\r\n            }\r\n        }\r\n    };\r\n\r\n    sbLib.base.layer = layer;\r\n});\r\n",
    "_base/lazyLoad.js": "/**\r\n * img lazyloaded\r\n *\r\n * - background img\r\n * - img\r\n * To change this template use File | Settings | File Templates.\r\n *\r\n * @todo 替换error图片\r\n * @example\r\n *\r\n * how to use\r\n * Lazyload.init();\r\n * if inited\r\n * Lazyload.trigger();\r\n */\r\n\r\ndefine('_base/lazyLoad',function() {\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.base = sbLib.base || {};\r\n\r\n    var iPhone = navigator.appVersion.match(/(iPhone\\sOS)\\s([\\d_]+)/),\r\n        version = iPhone && iPhone[2].split('_');\r\n    version = version && parseFloat(version.length > 1 ? version.splice(0, 2).join(\".\") : version[0], 10);\r\n\r\n    var phoneType = version && (version < 6);\r\n\r\n    var LazyLoad = {\r\n        defaultOpts: {\r\n            loadHidden: true,\r\n            interval: 200,\r\n            threshold: 200,\r\n            errorImg: sbLib.getStaticUri.img('logo_err.png'),//'http://h5statics.shenba.com/assets/img/logo_err.png',\r\n            container: null\r\n        },\r\n        init: function(opts) {\r\n            this.options = $.extend(true, {}, this.defaultOpts, opts);\r\n            this.addEvent();\r\n            this.trigger();\r\n        },\r\n        addEvent: function() {\r\n            var self = this,\r\n                opts = this.options;\r\n\r\n            if (phoneType) {\r\n                var params = {},\r\n                    timeout = null;\r\n\r\n                $(window).on('touchstart', function(e) {\r\n                    params = {\r\n                        scrollY: window.scrollY,\r\n                        time: Date.now()\r\n                    };\r\n\r\n                    timeout && clearTimeout(timeout);\r\n                }).on('touchend', function(e) {\r\n                    if (e && e.changedTouches) {\r\n                        var dist = Math.abs(window.scrollY - params.scrollY);\r\n\r\n                        if (dist > opts.threshold) {\r\n                            var inter = Date.now() - params.time;\r\n\r\n                            timeout = setTimeout(function() {\r\n                                self.update();\r\n                                params = {};\r\n                                clearTimeout(timeout);\r\n                                timeout = null;\r\n                            }, inter > opts.interval ? 0 : 200);\r\n                        }\r\n\r\n                    } else {\r\n                        self.update();\r\n                    }\r\n                }).on(\"touchcancel\", function() {\r\n                    timeout && clearTimeout(timeout);\r\n                    params = {};\r\n                })\r\n            } else {\r\n                var $container = self.options.container ? $(self.options.container) : $(window);\r\n                $container.on('scroll', function() {\r\n                    self.update();\r\n                })\r\n            }\r\n        },\r\n        trigger: function() {\r\n            var self = this,\r\n                opts = this.options,\r\n                evtType = phoneType && \"touchend\" || \"scroll\";\r\n\r\n            self.prevlist && self.prevlist.each(function(index, item) {\r\n                item && (item.onerror = item.onload = null)\r\n            });\r\n            self.imglist = $(\".iLazy\");\r\n\r\n            // copy object trick way\r\n            self.prevlist = $.extend({}, true, self.imglist);\r\n            $(window).trigger(evtType);\r\n        },\r\n        inviewport: function(item, t) {\r\n            var offsetY = window.pageYOffset,\r\n                pageHeight = window.pageYOffset + window.innerHeight,\r\n                itemTop = item.offset().top;\r\n            return itemTop >= offsetY && itemTop + (t || -100) <= pageHeight;\r\n        },\r\n        // update img dom\r\n        update: function() {\r\n            var self = this;\r\n            var opts = this.options;\r\n            self.imglist.each(function(index, item) {\r\n                var hidden = !opts.loadHidden ? $(item).is(\":hidden\") : false;\r\n                if (item && self.inviewport($(item)) && !hidden) {\r\n                    var $item = $(item);\r\n                    var src = $item.attr('data-src');\r\n                    var isImg = $item[0].tagName.toLowerCase() === 'img';\r\n\r\n                    var img = new Image();\r\n                    img.src = src;\r\n\r\n                    img.onload = function() {\r\n                        self.imglist[index] = null;\r\n\r\n                        $item.removeClass('iLazy').removeAttr('data-src').addClass('isLoaded fadeIn animated');\r\n                        if (isImg) {\r\n                            $item.attr('src', src);\r\n                        } else {\r\n                            $item.css('background-image', 'url(' + src + ')');\r\n                        }\r\n                        img.onload = img.onerror = null;\r\n                        setTimeout(function(){\r\n                            $item.removeClass('fadeIn animated');\r\n                        },1000);\r\n                    }\r\n\r\n                    img.onerror = function() {\r\n                        self.imglist[index] = null;\r\n                        $item.removeClass('iLazy').removeAttr('data-src');\r\n                        if (isImg) {\r\n                            $item.attr('src', opts.errorImg);\r\n                        } else {\r\n                            $item.css('background-image', 'url(' + opts.errorImg + ')');\r\n                        }\r\n                        img.onload = img.onerror = null;\r\n                    }\r\n\r\n                } else {\r\n                    return;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    sbLib.base.lazyLoad = LazyLoad;\r\n});\r\n",
    "_base/storage.js": "/**\r\n * 本地存储实现，优先localstorage, 否则 cookie\r\n * @module lib\r\n * @name  storage\r\n * @author pangjg\r\n * @create 2015-5-16\r\n *\r\n */\r\n\r\ndefine('_base/storage',['_base/docCookies'],function () {\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.base = sbLib.base || {};\r\n    var docCookies = sbLib.base.docCookies;\r\n\r\n    var localStorage;\r\n    var DB = (function () {\r\n        var main = {\r\n            isLocalStorageOk: false,\r\n            prefix: 'm_sb_',\r\n            data: {},\r\n            init: function () {\r\n                this.checkLocalStorage();\r\n                this.setMethod();\r\n\r\n                return this;\r\n            },\r\n            checkLocalStorage: function () {\r\n                if ('localStorage' in window && window['localStorage'] !== null) {\r\n                    // ios7 暂时存在问题\r\n                    try{\r\n                        window.localStorage.setItem('test', 'test');\r\n                        window.localStorage.removeItem('test');\r\n\r\n                        this.isLocalStorageOk = true;\r\n                    } catch (e) {\r\n                        //console.error(e);\r\n                    }\r\n                }\r\n            },\r\n\r\n            setPrefix: function (prefix) {\r\n                this.prefix = prefix;\r\n            },\r\n\r\n            // 设置存储方式\r\n            setMethod: function (method) {\r\n                method = method || '';\r\n\r\n                if (this.isLocalStorageOk) {\r\n                    localStorage = method == 'cookie' ? docCookies : window.localStorage;\r\n                } else {\r\n                    localStorage = docCookies;\r\n                }\r\n            },\r\n\r\n            set: function (key, value) {\r\n                this.data[key] = value;\r\n\r\n                if (typeof value == 'object') {\r\n                    value = JSON.stringify(value);\r\n                }\r\n\r\n                //if (this.isLocalStorageOk) {\r\n                localStorage.setItem(this.prefix + key, value);\r\n                //}\r\n            },\r\n\r\n            get: function (key) {\r\n                var d = this.data[key];\r\n\r\n                if (typeof d == 'undefined') {\r\n                    d = localStorage.getItem(this.prefix + key);\r\n\r\n                    try {\r\n                        d = JSON.parse(d);\r\n                    } catch(e) {\r\n                        // do sth\r\n                    }\r\n                }\r\n                return d;\r\n            },\r\n\r\n            rm: function (key) {\r\n                if (key) {\r\n                    key = this.prefix + key;\r\n                    localStorage.removeItem(key);\r\n                }\r\n            }\r\n        };\r\n\r\n        return main.init();\r\n    })();\r\n\r\n    sbLib.base.storage = DB;\r\n});",
    "_base/swiper.js": "/**\r\n * Swiper 3.1.7\r\n * Most modern mobile touch slider and framework with hardware accelerated transitions\r\n *\r\n * http://www.idangero.us/swiper/\r\n *\r\n * Copyright 2015, Vladimir Kharlampidi\r\n * The iDangero.us\r\n * http://www.idangero.us/\r\n *\r\n * Licensed under MIT\r\n *\r\n * Released on: October 10, 2015\r\n */\r\ndefine('_base/swiper',function() {\r\n    \"use strict\";\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.base = sbLib.base || {};\r\n\r\n    function e(e) {\r\n        e.fn.swiper = function(a) {\r\n            var r;\r\n            return e(this).each(function() {\r\n                var e = new t(this, a);\r\n                r || (r = e)\r\n            }), r\r\n        }\r\n    }\r\n    var a, t = function(e, s) {\r\n        function i() {\r\n            return \"horizontal\" === w.params.direction\r\n        }\r\n\r\n        function n(e) {\r\n            return Math.floor(e)\r\n        }\r\n\r\n        function o() {\r\n            w.autoplayTimeoutId = setTimeout(function() {\r\n                w.params.loop ? (w.fixLoop(), w._slideNext()) : w.isEnd ? s.autoplayStopOnLast ? w.stopAutoplay() : w._slideTo(0) : w._slideNext()\r\n            }, w.params.autoplay)\r\n        }\r\n\r\n        function l(e, t) {\r\n            var r = a(e.target);\r\n            if (!r.is(t))\r\n                if (\"string\" == typeof t) r = r.parents(t);\r\n                else if (t.nodeType) {\r\n                var s;\r\n                return r.parents().each(function(e, a) {\r\n                    a === t && (s = t)\r\n                }), s ? t : void 0\r\n            }\r\n            return 0 === r.length ? void 0 : r[0]\r\n        }\r\n\r\n        function d(e, a) {\r\n            a = a || {};\r\n            var t = window.MutationObserver || window.WebkitMutationObserver,\r\n                r = new t(function(e) {\r\n                    e.forEach(function(e) {\r\n                        w.onResize(!0), w.emit(\"onObserverUpdate\", w, e)\r\n                    })\r\n                });\r\n            r.observe(e, {\r\n                attributes: \"undefined\" == typeof a.attributes ? !0 : a.attributes,\r\n                childList: \"undefined\" == typeof a.childList ? !0 : a.childList,\r\n                characterData: \"undefined\" == typeof a.characterData ? !0 : a.characterData\r\n            }), w.observers.push(r)\r\n        }\r\n\r\n        function p(e) {\r\n            e.originalEvent && (e = e.originalEvent);\r\n            var a = e.keyCode || e.charCode;\r\n            if (!w.params.allowSwipeToNext && (i() && 39 === a || !i() && 40 === a)) return !1;\r\n            if (!w.params.allowSwipeToPrev && (i() && 37 === a || !i() && 38 === a)) return !1;\r\n            if (!(e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || document.activeElement && document.activeElement.nodeName && (\"input\" === document.activeElement.nodeName.toLowerCase() || \"textarea\" === document.activeElement.nodeName.toLowerCase()))) {\r\n                if (37 === a || 39 === a || 38 === a || 40 === a) {\r\n                    var t = !1;\r\n                    if (w.container.parents(\".swiper-slide\").length > 0 && 0 === w.container.parents(\".swiper-slide-active\").length) return;\r\n                    var r = {\r\n                            left: window.pageXOffset,\r\n                            top: window.pageYOffset\r\n                        },\r\n                        s = window.innerWidth,\r\n                        n = window.innerHeight,\r\n                        o = w.container.offset();\r\n                    w.rtl && (o.left = o.left - w.container[0].scrollLeft);\r\n                    for (var l = [\r\n                            [o.left, o.top],\r\n                            [o.left + w.width, o.top],\r\n                            [o.left, o.top + w.height],\r\n                            [o.left + w.width, o.top + w.height]\r\n                        ], d = 0; d < l.length; d++) {\r\n                        var p = l[d];\r\n                        p[0] >= r.left && p[0] <= r.left + s && p[1] >= r.top && p[1] <= r.top + n && (t = !0)\r\n                    }\r\n                    if (!t) return\r\n                }\r\n                i() ? ((37 === a || 39 === a) && (e.preventDefault ? e.preventDefault() : e.returnValue = !1), (39 === a && !w.rtl || 37 === a && w.rtl) && w.slideNext(), (37 === a && !w.rtl || 39 === a && w.rtl) && w.slidePrev()) : ((38 === a || 40 === a) && (e.preventDefault ? e.preventDefault() : e.returnValue = !1), 40 === a && w.slideNext(), 38 === a && w.slidePrev())\r\n            }\r\n        }\r\n\r\n        function u(e) {\r\n            e.originalEvent && (e = e.originalEvent);\r\n            var a = w.mousewheel.event,\r\n                t = 0;\r\n            if (e.detail) t = -e.detail;\r\n            else if (\"mousewheel\" === a)\r\n                if (w.params.mousewheelForceToAxis)\r\n                    if (i()) {\r\n                        if (!(Math.abs(e.wheelDeltaX) > Math.abs(e.wheelDeltaY))) return;\r\n                        t = e.wheelDeltaX\r\n                    } else {\r\n                        if (!(Math.abs(e.wheelDeltaY) > Math.abs(e.wheelDeltaX))) return;\r\n                        t = e.wheelDeltaY\r\n                    } else t = e.wheelDelta;\r\n            else if (\"DOMMouseScroll\" === a) t = -e.detail;\r\n            else if (\"wheel\" === a)\r\n                if (w.params.mousewheelForceToAxis)\r\n                    if (i()) {\r\n                        if (!(Math.abs(e.deltaX) > Math.abs(e.deltaY))) return;\r\n                        t = -e.deltaX\r\n                    } else {\r\n                        if (!(Math.abs(e.deltaY) > Math.abs(e.deltaX))) return;\r\n                        t = -e.deltaY\r\n                    } else t = Math.abs(e.deltaX) > Math.abs(e.deltaY) ? -e.deltaX : -e.deltaY;\r\n            if (w.params.mousewheelInvert && (t = -t), w.params.freeMode) {\r\n                var r = w.getWrapperTranslate() + t * w.params.mousewheelSensitivity;\r\n                if (r > w.minTranslate() && (r = w.minTranslate()), r < w.maxTranslate() && (r = w.maxTranslate()), w.setWrapperTransition(0), w.setWrapperTranslate(r), w.updateProgress(), w.updateActiveIndex(), w.params.freeModeSticky && (clearTimeout(w.mousewheel.timeout), w.mousewheel.timeout = setTimeout(function() {\r\n                        w.slideReset()\r\n                    }, 300)), 0 === r || r === w.maxTranslate()) return\r\n            } else {\r\n                if ((new window.Date).getTime() - w.mousewheel.lastScrollTime > 60)\r\n                    if (0 > t)\r\n                        if (w.isEnd && !w.params.loop || w.animating) {\r\n                            if (w.params.mousewheelReleaseOnEdges) return !0\r\n                        } else w.slideNext();\r\n                else if (w.isBeginning && !w.params.loop || w.animating) {\r\n                    if (w.params.mousewheelReleaseOnEdges) return !0\r\n                } else w.slidePrev();\r\n                w.mousewheel.lastScrollTime = (new window.Date).getTime()\r\n            }\r\n            return w.params.autoplay && w.stopAutoplay(), e.preventDefault ? e.preventDefault() : e.returnValue = !1, !1\r\n        }\r\n\r\n        function c(e, t) {\r\n            e = a(e);\r\n            var r, s, n;\r\n            r = e.attr(\"data-swiper-parallax\") || \"0\", s = e.attr(\"data-swiper-parallax-x\"), n = e.attr(\"data-swiper-parallax-y\"), s || n ? (s = s || \"0\", n = n || \"0\") : i() ? (s = r, n = \"0\") : (n = r, s = \"0\"), s = s.indexOf(\"%\") >= 0 ? parseInt(s, 10) * t + \"%\" : s * t + \"px\", n = n.indexOf(\"%\") >= 0 ? parseInt(n, 10) * t + \"%\" : n * t + \"px\", e.transform(\"translate3d(\" + s + \", \" + n + \",0px)\")\r\n        }\r\n\r\n        function m(e) {\r\n            return 0 !== e.indexOf(\"on\") && (e = e[0] !== e[0].toUpperCase() ? \"on\" + e[0].toUpperCase() + e.substring(1) : \"on\" + e), e\r\n        }\r\n        if (!(this instanceof t)) return new t(e, s);\r\n        var f = {\r\n                direction: \"horizontal\",\r\n                touchEventsTarget: \"container\",\r\n                initialSlide: 0,\r\n                speed: 300,\r\n                autoplay: !1,\r\n                autoplayDisableOnInteraction: !0,\r\n                iOSEdgeSwipeDetection: !1,\r\n                iOSEdgeSwipeThreshold: 20,\r\n                freeMode: !1,\r\n                freeModeMomentum: !0,\r\n                freeModeMomentumRatio: 1,\r\n                freeModeMomentumBounce: !0,\r\n                freeModeMomentumBounceRatio: 1,\r\n                freeModeSticky: !1,\r\n                freeModeMinimumVelocity: .02,\r\n                setWrapperSize: !1,\r\n                virtualTranslate: !1,\r\n                effect: \"slide\",\r\n                coverflow: {\r\n                    rotate: 50,\r\n                    stretch: 0,\r\n                    depth: 100,\r\n                    modifier: 1,\r\n                    slideShadows: !0\r\n                },\r\n                cube: {\r\n                    slideShadows: !0,\r\n                    shadow: !0,\r\n                    shadowOffset: 20,\r\n                    shadowScale: .94\r\n                },\r\n                fade: {\r\n                    crossFade: !1\r\n                },\r\n                parallax: !1,\r\n                scrollbar: null,\r\n                scrollbarHide: !0,\r\n                scrollbarDraggable: !1,\r\n                scrollbarSnapOnRelease: !1,\r\n                keyboardControl: !1,\r\n                mousewheelControl: !1,\r\n                mousewheelReleaseOnEdges: !1,\r\n                mousewheelInvert: !1,\r\n                mousewheelForceToAxis: !1,\r\n                mousewheelSensitivity: 1,\r\n                hashnav: !1,\r\n                spaceBetween: 0,\r\n                slidesPerView: 1,\r\n                slidesPerColumn: 1,\r\n                slidesPerColumnFill: \"column\",\r\n                slidesPerGroup: 1,\r\n                centeredSlides: !1,\r\n                slidesOffsetBefore: 0,\r\n                slidesOffsetAfter: 0,\r\n                roundLengths: !1,\r\n                touchRatio: 1,\r\n                touchAngle: 45,\r\n                simulateTouch: !0,\r\n                shortSwipes: !0,\r\n                longSwipes: !0,\r\n                longSwipesRatio: .5,\r\n                longSwipesMs: 300,\r\n                followFinger: !0,\r\n                onlyExternal: !1,\r\n                threshold: 0,\r\n                touchMoveStopPropagation: !0,\r\n                pagination: null,\r\n                paginationElement: \"span\",\r\n                paginationClickable: !1,\r\n                paginationHide: !1,\r\n                paginationBulletRender: null,\r\n                resistance: !0,\r\n                resistanceRatio: .85,\r\n                nextButton: null,\r\n                prevButton: null,\r\n                watchSlidesProgress: !1,\r\n                watchSlidesVisibility: !1,\r\n                grabCursor: !1,\r\n                preventClicks: !0,\r\n                preventClicksPropagation: !0,\r\n                slideToClickedSlide: !1,\r\n                lazyLoading: !1,\r\n                lazyLoadingInPrevNext: !1,\r\n                lazyLoadingOnTransitionStart: !1,\r\n                preloadImages: !0,\r\n                updateOnImagesReady: !0,\r\n                loop: !1,\r\n                loopAdditionalSlides: 0,\r\n                loopedSlides: null,\r\n                control: void 0,\r\n                controlInverse: !1,\r\n                controlBy: \"slide\",\r\n                allowSwipeToPrev: !0,\r\n                allowSwipeToNext: !0,\r\n                swipeHandler: null,\r\n                noSwiping: !0,\r\n                noSwipingClass: \"swiper-no-swiping\",\r\n                slideClass: \"swiper-slide\",\r\n                slideActiveClass: \"swiper-slide-active\",\r\n                slideVisibleClass: \"swiper-slide-visible\",\r\n                slideDuplicateClass: \"swiper-slide-duplicate\",\r\n                slideNextClass: \"swiper-slide-next\",\r\n                slidePrevClass: \"swiper-slide-prev\",\r\n                wrapperClass: \"swiper-wrapper\",\r\n                bulletClass: \"swiper-pagination-bullet\",\r\n                bulletActiveClass: \"swiper-pagination-bullet-active\",\r\n                buttonDisabledClass: \"swiper-button-disabled\",\r\n                paginationHiddenClass: \"swiper-pagination-hidden\",\r\n                observer: !1,\r\n                observeParents: !1,\r\n                a11y: !1,\r\n                prevSlideMessage: \"Previous slide\",\r\n                nextSlideMessage: \"Next slide\",\r\n                firstSlideMessage: \"This is the first slide\",\r\n                lastSlideMessage: \"This is the last slide\",\r\n                paginationBulletMessage: \"Go to slide {{index}}\",\r\n                runCallbacksOnInit: !0\r\n            },\r\n            h = s && s.virtualTranslate;\r\n        s = s || {};\r\n        for (var g in f)\r\n            if (\"undefined\" == typeof s[g]) s[g] = f[g];\r\n            else if (\"object\" == typeof s[g])\r\n            for (var v in f[g]) \"undefined\" == typeof s[g][v] && (s[g][v] = f[g][v]);\r\n        var w = this;\r\n        if (w.params = s, w.classNames = [], \"undefined\" != typeof a && \"undefined\" != typeof r && (a = r), (\"undefined\" != typeof a || (a = \"undefined\" == typeof r ? window.Dom7 || window.Zepto || window.jQuery : r)) && (w.$ = a, w.container = a(e), 0 !== w.container.length)) {\r\n            if (w.container.length > 1) return void w.container.each(function() {\r\n                new t(this, s)\r\n            });\r\n            w.container[0].swiper = w, w.container.data(\"swiper\", w), w.classNames.push(\"swiper-container-\" + w.params.direction), w.params.freeMode && w.classNames.push(\"swiper-container-free-mode\"), w.support.flexbox || (w.classNames.push(\"swiper-container-no-flexbox\"), w.params.slidesPerColumn = 1), (w.params.parallax || w.params.watchSlidesVisibility) && (w.params.watchSlidesProgress = !0), [\"cube\", \"coverflow\"].indexOf(w.params.effect) >= 0 && (w.support.transforms3d ? (w.params.watchSlidesProgress = !0, w.classNames.push(\"swiper-container-3d\")) : w.params.effect = \"slide\"), \"slide\" !== w.params.effect && w.classNames.push(\"swiper-container-\" + w.params.effect), \"cube\" === w.params.effect && (w.params.resistanceRatio = 0, w.params.slidesPerView = 1, w.params.slidesPerColumn = 1, w.params.slidesPerGroup = 1, w.params.centeredSlides = !1, w.params.spaceBetween = 0, w.params.virtualTranslate = !0, w.params.setWrapperSize = !1), \"fade\" === w.params.effect && (w.params.slidesPerView = 1, w.params.slidesPerColumn = 1, w.params.slidesPerGroup = 1, w.params.watchSlidesProgress = !0, w.params.spaceBetween = 0, \"undefined\" == typeof h && (w.params.virtualTranslate = !0)), w.params.grabCursor && w.support.touch && (w.params.grabCursor = !1), w.wrapper = w.container.children(\".\" + w.params.wrapperClass), w.params.pagination && (w.paginationContainer = a(w.params.pagination), w.params.paginationClickable && w.paginationContainer.addClass(\"swiper-pagination-clickable\")), w.rtl = i() && (\"rtl\" === w.container[0].dir.toLowerCase() || \"rtl\" === w.container.css(\"direction\")), w.rtl && w.classNames.push(\"swiper-container-rtl\"), w.rtl && (w.wrongRTL = \"-webkit-box\" === w.wrapper.css(\"display\")), w.params.slidesPerColumn > 1 && w.classNames.push(\"swiper-container-multirow\"), w.device.android && w.classNames.push(\"swiper-container-android\"), w.container.addClass(w.classNames.join(\" \")), w.translate = 0, w.progress = 0, w.velocity = 0, w.lockSwipeToNext = function() {\r\n                w.params.allowSwipeToNext = !1\r\n            }, w.lockSwipeToPrev = function() {\r\n                w.params.allowSwipeToPrev = !1\r\n            }, w.lockSwipes = function() {\r\n                w.params.allowSwipeToNext = w.params.allowSwipeToPrev = !1\r\n            }, w.unlockSwipeToNext = function() {\r\n                w.params.allowSwipeToNext = !0\r\n            }, w.unlockSwipeToPrev = function() {\r\n                w.params.allowSwipeToPrev = !0\r\n            }, w.unlockSwipes = function() {\r\n                w.params.allowSwipeToNext = w.params.allowSwipeToPrev = !0\r\n            }, w.params.grabCursor && (w.container[0].style.cursor = \"move\", w.container[0].style.cursor = \"-webkit-grab\", w.container[0].style.cursor = \"-moz-grab\", w.container[0].style.cursor = \"grab\"), w.imagesToLoad = [], w.imagesLoaded = 0, w.loadImage = function(e, a, t, r, s) {\r\n                function i() {\r\n                    s && s()\r\n                }\r\n                var n;\r\n                e.complete && r ? i() : a ? (n = new window.Image, n.onload = i, n.onerror = i, t && (n.srcset = t), a && (n.src = a)) : i()\r\n            }, w.preloadImages = function() {\r\n                function e() {\r\n                    \"undefined\" != typeof w && null !== w && (void 0 !== w.imagesLoaded && w.imagesLoaded++, w.imagesLoaded === w.imagesToLoad.length && (w.params.updateOnImagesReady && w.update(), w.emit(\"onImagesReady\", w)))\r\n                }\r\n                w.imagesToLoad = w.container.find(\"img\");\r\n                for (var a = 0; a < w.imagesToLoad.length; a++) w.loadImage(w.imagesToLoad[a], w.imagesToLoad[a].currentSrc || w.imagesToLoad[a].getAttribute(\"src\"), w.imagesToLoad[a].srcset || w.imagesToLoad[a].getAttribute(\"srcset\"), !0, e)\r\n            }, w.autoplayTimeoutId = void 0, w.autoplaying = !1, w.autoplayPaused = !1, w.startAutoplay = function() {\r\n                return \"undefined\" != typeof w.autoplayTimeoutId ? !1 : w.params.autoplay ? w.autoplaying ? !1 : (w.autoplaying = !0, w.emit(\"onAutoplayStart\", w), void o()) : !1\r\n            }, w.stopAutoplay = function(e) {\r\n                w.autoplayTimeoutId && (w.autoplayTimeoutId && clearTimeout(w.autoplayTimeoutId), w.autoplaying = !1, w.autoplayTimeoutId = void 0, w.emit(\"onAutoplayStop\", w))\r\n            }, w.pauseAutoplay = function(e) {\r\n                w.autoplayPaused || (w.autoplayTimeoutId && clearTimeout(w.autoplayTimeoutId), w.autoplayPaused = !0, 0 === e ? (w.autoplayPaused = !1, o()) : w.wrapper.transitionEnd(function() {\r\n                    w && (w.autoplayPaused = !1, w.autoplaying ? o() : w.stopAutoplay())\r\n                }))\r\n            }, w.minTranslate = function() {\r\n                return -w.snapGrid[0]\r\n            }, w.maxTranslate = function() {\r\n                return -w.snapGrid[w.snapGrid.length - 1]\r\n            }, w.updateContainerSize = function() {\r\n                var e, a;\r\n                e = \"undefined\" != typeof w.params.width ? w.params.width : w.container[0].clientWidth, a = \"undefined\" != typeof w.params.height ? w.params.height : w.container[0].clientHeight, 0 === e && i() || 0 === a && !i() || (e = e - parseInt(w.container.css(\"padding-left\"), 10) - parseInt(w.container.css(\"padding-right\"), 10), a = a - parseInt(w.container.css(\"padding-top\"), 10) - parseInt(w.container.css(\"padding-bottom\"), 10), w.width = e, w.height = a, w.size = i() ? w.width : w.height)\r\n            }, w.updateSlidesSize = function() {\r\n                w.slides = w.wrapper.children(\".\" + w.params.slideClass), w.snapGrid = [], w.slidesGrid = [], w.slidesSizesGrid = [];\r\n                var e, a = w.params.spaceBetween,\r\n                    t = -w.params.slidesOffsetBefore,\r\n                    r = 0,\r\n                    s = 0;\r\n                \"string\" == typeof a && a.indexOf(\"%\") >= 0 && (a = parseFloat(a.replace(\"%\", \"\")) / 100 * w.size), w.virtualSize = -a, w.rtl ? w.slides.css({\r\n                    marginLeft: \"\",\r\n                    marginTop: \"\"\r\n                }) : w.slides.css({\r\n                    marginRight: \"\",\r\n                    marginBottom: \"\"\r\n                });\r\n                var o;\r\n                w.params.slidesPerColumn > 1 && (o = Math.floor(w.slides.length / w.params.slidesPerColumn) === w.slides.length / w.params.slidesPerColumn ? w.slides.length : Math.ceil(w.slides.length / w.params.slidesPerColumn) * w.params.slidesPerColumn, \"auto\" !== w.params.slidesPerView && \"row\" === w.params.slidesPerColumnFill && (o = Math.max(o, w.params.slidesPerView * w.params.slidesPerColumn)));\r\n                var l, d = w.params.slidesPerColumn,\r\n                    p = o / d,\r\n                    u = p - (w.params.slidesPerColumn * p - w.slides.length);\r\n                for (e = 0; e < w.slides.length; e++) {\r\n                    l = 0;\r\n                    var c = w.slides.eq(e);\r\n                    if (w.params.slidesPerColumn > 1) {\r\n                        var m, f, h;\r\n                        \"column\" === w.params.slidesPerColumnFill ? (f = Math.floor(e / d), h = e - f * d, (f > u || f === u && h === d - 1) && ++h >= d && (h = 0, f++), m = f + h * o / d, c.css({\r\n                            \"-webkit-box-ordinal-group\": m,\r\n                            \"-moz-box-ordinal-group\": m,\r\n                            \"-ms-flex-order\": m,\r\n                            \"-webkit-order\": m,\r\n                            order: m\r\n                        })) : (h = Math.floor(e / p), f = e - h * p), c.css({\r\n                            \"margin-top\": 0 !== h && w.params.spaceBetween && w.params.spaceBetween + \"px\"\r\n                        }).attr(\"data-swiper-column\", f).attr(\"data-swiper-row\", h)\r\n                    }\r\n                    \"none\" !== c.css(\"display\") && (\"auto\" === w.params.slidesPerView ? (l = i() ? c.outerWidth(!0) : c.outerHeight(!0), w.params.roundLengths && (l = n(l))) : (l = (w.size - (w.params.slidesPerView - 1) * a) / w.params.slidesPerView, w.params.roundLengths && (l = n(l)), i() ? w.slides[e].style.width = l + \"px\" : w.slides[e].style.height = l + \"px\"), w.slides[e].swiperSlideSize = l, w.slidesSizesGrid.push(l), w.params.centeredSlides ? (t = t + l / 2 + r / 2 + a, 0 === e && (t = t - w.size / 2 - a), Math.abs(t) < .001 && (t = 0), s % w.params.slidesPerGroup === 0 && w.snapGrid.push(t), w.slidesGrid.push(t)) : (s % w.params.slidesPerGroup === 0 && w.snapGrid.push(t), w.slidesGrid.push(t), t = t + l + a), w.virtualSize += l + a, r = l, s++)\r\n                }\r\n                w.virtualSize = Math.max(w.virtualSize, w.size) + w.params.slidesOffsetAfter;\r\n                var g;\r\n                if (w.rtl && w.wrongRTL && (\"slide\" === w.params.effect || \"coverflow\" === w.params.effect) && w.wrapper.css({\r\n                        width: w.virtualSize + w.params.spaceBetween + \"px\"\r\n                    }), (!w.support.flexbox || w.params.setWrapperSize) && (i() ? w.wrapper.css({\r\n                        width: w.virtualSize + w.params.spaceBetween + \"px\"\r\n                    }) : w.wrapper.css({\r\n                        height: w.virtualSize + w.params.spaceBetween + \"px\"\r\n                    })), w.params.slidesPerColumn > 1 && (w.virtualSize = (l + w.params.spaceBetween) * o, w.virtualSize = Math.ceil(w.virtualSize / w.params.slidesPerColumn) - w.params.spaceBetween, w.wrapper.css({\r\n                        width: w.virtualSize + w.params.spaceBetween + \"px\"\r\n                    }), w.params.centeredSlides)) {\r\n                    for (g = [], e = 0; e < w.snapGrid.length; e++) w.snapGrid[e] < w.virtualSize + w.snapGrid[0] && g.push(w.snapGrid[e]);\r\n                    w.snapGrid = g\r\n                }\r\n                if (!w.params.centeredSlides) {\r\n                    for (g = [], e = 0; e < w.snapGrid.length; e++) w.snapGrid[e] <= w.virtualSize - w.size && g.push(w.snapGrid[e]);\r\n                    w.snapGrid = g, Math.floor(w.virtualSize - w.size) > Math.floor(w.snapGrid[w.snapGrid.length - 1]) && w.snapGrid.push(w.virtualSize - w.size)\r\n                }\r\n                0 === w.snapGrid.length && (w.snapGrid = [0]), 0 !== w.params.spaceBetween && (i() ? w.rtl ? w.slides.css({\r\n                    marginLeft: a + \"px\"\r\n                }) : w.slides.css({\r\n                    marginRight: a + \"px\"\r\n                }) : w.slides.css({\r\n                    marginBottom: a + \"px\"\r\n                })), w.params.watchSlidesProgress && w.updateSlidesOffset()\r\n            }, w.updateSlidesOffset = function() {\r\n                for (var e = 0; e < w.slides.length; e++) w.slides[e].swiperSlideOffset = i() ? w.slides[e].offsetLeft : w.slides[e].offsetTop\r\n            }, w.updateSlidesProgress = function(e) {\r\n                if (\"undefined\" == typeof e && (e = w.translate || 0), 0 !== w.slides.length) {\r\n                    \"undefined\" == typeof w.slides[0].swiperSlideOffset && w.updateSlidesOffset();\r\n                    var a = -e;\r\n                    w.rtl && (a = e);\r\n                    w.container[0].getBoundingClientRect(), i() ? \"left\" : \"top\", i() ? \"right\" : \"bottom\";\r\n                    w.slides.removeClass(w.params.slideVisibleClass);\r\n                    for (var t = 0; t < w.slides.length; t++) {\r\n                        var r = w.slides[t],\r\n                            s = (a - r.swiperSlideOffset) / (r.swiperSlideSize + w.params.spaceBetween);\r\n                        if (w.params.watchSlidesVisibility) {\r\n                            var n = -(a - r.swiperSlideOffset),\r\n                                o = n + w.slidesSizesGrid[t],\r\n                                l = n >= 0 && n < w.size || o > 0 && o <= w.size || 0 >= n && o >= w.size;\r\n                            l && w.slides.eq(t).addClass(w.params.slideVisibleClass)\r\n                        }\r\n                        r.progress = w.rtl ? -s : s\r\n                    }\r\n                }\r\n            }, w.updateProgress = function(e) {\r\n                \"undefined\" == typeof e && (e = w.translate || 0);\r\n                var a = w.maxTranslate() - w.minTranslate();\r\n                0 === a ? (w.progress = 0, w.isBeginning = w.isEnd = !0) : (w.progress = (e - w.minTranslate()) / a, w.isBeginning = w.progress <= 0, w.isEnd = w.progress >= 1), w.isBeginning && w.emit(\"onReachBeginning\", w), w.isEnd && w.emit(\"onReachEnd\", w), w.params.watchSlidesProgress && w.updateSlidesProgress(e), w.emit(\"onProgress\", w, w.progress)\r\n            }, w.updateActiveIndex = function() {\r\n                var e, a, t, r = w.rtl ? w.translate : -w.translate;\r\n                for (a = 0; a < w.slidesGrid.length; a++) \"undefined\" != typeof w.slidesGrid[a + 1] ? r >= w.slidesGrid[a] && r < w.slidesGrid[a + 1] - (w.slidesGrid[a + 1] - w.slidesGrid[a]) / 2 ? e = a : r >= w.slidesGrid[a] && r < w.slidesGrid[a + 1] && (e = a + 1) : r >= w.slidesGrid[a] && (e = a);\r\n                (0 > e || \"undefined\" == typeof e) && (e = 0), t = Math.floor(e / w.params.slidesPerGroup), t >= w.snapGrid.length && (t = w.snapGrid.length - 1), e !== w.activeIndex && (w.snapIndex = t, w.previousIndex = w.activeIndex, w.activeIndex = e, w.updateClasses())\r\n            }, w.updateClasses = function() {\r\n                w.slides.removeClass(w.params.slideActiveClass + \" \" + w.params.slideNextClass + \" \" + w.params.slidePrevClass);\r\n                var e = w.slides.eq(w.activeIndex);\r\n                if (e.addClass(w.params.slideActiveClass), e.next(\".\" + w.params.slideClass).addClass(w.params.slideNextClass), e.prev(\".\" + w.params.slideClass).addClass(w.params.slidePrevClass), w.bullets && w.bullets.length > 0) {\r\n                    w.bullets.removeClass(w.params.bulletActiveClass);\r\n                    var t;\r\n                    w.params.loop ? (t = Math.ceil(w.activeIndex - w.loopedSlides) / w.params.slidesPerGroup, t > w.slides.length - 1 - 2 * w.loopedSlides && (t -= w.slides.length - 2 * w.loopedSlides), t > w.bullets.length - 1 && (t -= w.bullets.length)) : t = \"undefined\" != typeof w.snapIndex ? w.snapIndex : w.activeIndex || 0, w.paginationContainer.length > 1 ? w.bullets.each(function() {\r\n                        a(this).index() === t && a(this).addClass(w.params.bulletActiveClass)\r\n                    }) : w.bullets.eq(t).addClass(w.params.bulletActiveClass)\r\n                }\r\n                w.params.loop || (w.params.prevButton && (w.isBeginning ? (a(w.params.prevButton).addClass(w.params.buttonDisabledClass), w.params.a11y && w.a11y && w.a11y.disable(a(w.params.prevButton))) : (a(w.params.prevButton).removeClass(w.params.buttonDisabledClass), w.params.a11y && w.a11y && w.a11y.enable(a(w.params.prevButton)))), w.params.nextButton && (w.isEnd ? (a(w.params.nextButton).addClass(w.params.buttonDisabledClass), w.params.a11y && w.a11y && w.a11y.disable(a(w.params.nextButton))) : (a(w.params.nextButton).removeClass(w.params.buttonDisabledClass), w.params.a11y && w.a11y && w.a11y.enable(a(w.params.nextButton)))))\r\n            }, w.updatePagination = function() {\r\n                if (w.params.pagination && w.paginationContainer && w.paginationContainer.length > 0) {\r\n                    for (var e = \"\", a = w.params.loop ? Math.ceil((w.slides.length - 2 * w.loopedSlides) / w.params.slidesPerGroup) : w.snapGrid.length, t = 0; a > t; t++) e += w.params.paginationBulletRender ? w.params.paginationBulletRender(t, w.params.bulletClass) : \"<\" + w.params.paginationElement + ' class=\"' + w.params.bulletClass + '\"></' + w.params.paginationElement + \">\";\r\n                    w.paginationContainer.html(e), w.bullets = w.paginationContainer.find(\".\" + w.params.bulletClass), w.params.paginationClickable && w.params.a11y && w.a11y && w.a11y.initPagination()\r\n                }\r\n            }, w.update = function(e) {\r\n                function a() {\r\n                    r = Math.min(Math.max(w.translate, w.maxTranslate()), w.minTranslate()), w.setWrapperTranslate(r), w.updateActiveIndex(), w.updateClasses()\r\n                }\r\n                if (w.updateContainerSize(), w.updateSlidesSize(), w.updateProgress(), w.updatePagination(), w.updateClasses(), w.params.scrollbar && w.scrollbar && w.scrollbar.set(), e) {\r\n                    var t, r;\r\n                    w.controller && w.controller.spline && (w.controller.spline = void 0), w.params.freeMode ? a() : (t = (\"auto\" === w.params.slidesPerView || w.params.slidesPerView > 1) && w.isEnd && !w.params.centeredSlides ? w.slideTo(w.slides.length - 1, 0, !1, !0) : w.slideTo(w.activeIndex, 0, !1, !0), t || a())\r\n                }\r\n            }, w.onResize = function(e) {\r\n                var a = w.params.allowSwipeToPrev,\r\n                    t = w.params.allowSwipeToNext;\r\n                if (w.params.allowSwipeToPrev = w.params.allowSwipeToNext = !0, w.updateContainerSize(), w.updateSlidesSize(), (\"auto\" === w.params.slidesPerView || w.params.freeMode || e) && w.updatePagination(), w.params.scrollbar && w.scrollbar && w.scrollbar.set(), w.controller && w.controller.spline && (w.controller.spline = void 0), w.params.freeMode) {\r\n                    var r = Math.min(Math.max(w.translate, w.maxTranslate()), w.minTranslate());\r\n                    w.setWrapperTranslate(r), w.updateActiveIndex(), w.updateClasses()\r\n                } else w.updateClasses(), (\"auto\" === w.params.slidesPerView || w.params.slidesPerView > 1) && w.isEnd && !w.params.centeredSlides ? w.slideTo(w.slides.length - 1, 0, !1, !0) : w.slideTo(w.activeIndex, 0, !1, !0);\r\n                w.params.allowSwipeToPrev = a, w.params.allowSwipeToNext = t\r\n            };\r\n            var y = [\"mousedown\", \"mousemove\", \"mouseup\"];\r\n            window.navigator.pointerEnabled ? y = [\"pointerdown\", \"pointermove\", \"pointerup\"] : window.navigator.msPointerEnabled && (y = [\"MSPointerDown\", \"MSPointerMove\", \"MSPointerUp\"]), w.touchEvents = {\r\n                start: w.support.touch || !w.params.simulateTouch ? \"touchstart\" : y[0],\r\n                move: w.support.touch || !w.params.simulateTouch ? \"touchmove\" : y[1],\r\n                end: w.support.touch || !w.params.simulateTouch ? \"touchend\" : y[2]\r\n            }, (window.navigator.pointerEnabled || window.navigator.msPointerEnabled) && (\"container\" === w.params.touchEventsTarget ? w.container : w.wrapper).addClass(\"swiper-wp8-\" + w.params.direction), w.initEvents = function(e) {\r\n                var t = e ? \"off\" : \"on\",\r\n                    r = e ? \"removeEventListener\" : \"addEventListener\",\r\n                    i = \"container\" === w.params.touchEventsTarget ? w.container[0] : w.wrapper[0],\r\n                    n = w.support.touch ? i : document,\r\n                    o = w.params.nested ? !0 : !1;\r\n                w.browser.ie ? (i[r](w.touchEvents.start, w.onTouchStart, !1), n[r](w.touchEvents.move, w.onTouchMove, o), n[r](w.touchEvents.end, w.onTouchEnd, !1)) : (w.support.touch && (i[r](w.touchEvents.start, w.onTouchStart, !1), i[r](w.touchEvents.move, w.onTouchMove, o), i[r](w.touchEvents.end, w.onTouchEnd, !1)), !s.simulateTouch || w.device.ios || w.device.android || (i[r](\"mousedown\", w.onTouchStart, !1), document[r](\"mousemove\", w.onTouchMove, o), document[r](\"mouseup\", w.onTouchEnd, !1))), window[r](\"resize\", w.onResize), w.params.nextButton && (a(w.params.nextButton)[t](\"click\", w.onClickNext), w.params.a11y && w.a11y && a(w.params.nextButton)[t](\"keydown\", w.a11y.onEnterKey)), w.params.prevButton && (a(w.params.prevButton)[t](\"click\", w.onClickPrev), w.params.a11y && w.a11y && a(w.params.prevButton)[t](\"keydown\", w.a11y.onEnterKey)), w.params.pagination && w.params.paginationClickable && (a(w.paginationContainer)[t](\"click\", \".\" + w.params.bulletClass, w.onClickIndex), w.params.a11y && w.a11y && a(w.paginationContainer)[t](\"keydown\", \".\" + w.params.bulletClass, w.a11y.onEnterKey)), (w.params.preventClicks || w.params.preventClicksPropagation) && i[r](\"click\", w.preventClicks, !0)\r\n            }, w.attachEvents = function(e) {\r\n                w.initEvents()\r\n            }, w.detachEvents = function() {\r\n                w.initEvents(!0)\r\n            }, w.allowClick = !0, w.preventClicks = function(e) {\r\n                w.allowClick || (w.params.preventClicks && e.preventDefault(), w.params.preventClicksPropagation && w.animating && (e.stopPropagation(), e.stopImmediatePropagation()))\r\n            }, w.onClickNext = function(e) {\r\n                e.preventDefault(), (!w.isEnd || w.params.loop) && w.slideNext()\r\n            }, w.onClickPrev = function(e) {\r\n                e.preventDefault(), (!w.isBeginning || w.params.loop) && w.slidePrev()\r\n            }, w.onClickIndex = function(e) {\r\n                e.preventDefault();\r\n                var t = a(this).index() * w.params.slidesPerGroup;\r\n                w.params.loop && (t += w.loopedSlides), w.slideTo(t)\r\n            }, w.updateClickedSlide = function(e) {\r\n                var t = l(e, \".\" + w.params.slideClass),\r\n                    r = !1;\r\n                if (t)\r\n                    for (var s = 0; s < w.slides.length; s++) w.slides[s] === t && (r = !0);\r\n                if (!t || !r) return w.clickedSlide = void 0, void(w.clickedIndex = void 0);\r\n                if (w.clickedSlide = t, w.clickedIndex = a(t).index(), w.params.slideToClickedSlide && void 0 !== w.clickedIndex && w.clickedIndex !== w.activeIndex) {\r\n                    var i, n = w.clickedIndex;\r\n                    if (w.params.loop) {\r\n                        if (w.animating) return;\r\n                        i = a(w.clickedSlide).attr(\"data-swiper-slide-index\"), w.params.centeredSlides ? n < w.loopedSlides - w.params.slidesPerView / 2 || n > w.slides.length - w.loopedSlides + w.params.slidesPerView / 2 ? (w.fixLoop(), n = w.wrapper.children(\".\" + w.params.slideClass + '[data-swiper-slide-index=\"' + i + '\"]:not(.swiper-slide-duplicate)').eq(0).index(), setTimeout(function() {\r\n                            w.slideTo(n)\r\n                        }, 0)) : w.slideTo(n) : n > w.slides.length - w.params.slidesPerView ? (w.fixLoop(), n = w.wrapper.children(\".\" + w.params.slideClass + '[data-swiper-slide-index=\"' + i + '\"]:not(.swiper-slide-duplicate)').eq(0).index(), setTimeout(function() {\r\n                            w.slideTo(n)\r\n                        }, 0)) : w.slideTo(n)\r\n                    } else w.slideTo(n)\r\n                }\r\n            };\r\n            var b, T, x, S, C, M, E, P, z, I = \"input, select, textarea, button\",\r\n                k = Date.now(),\r\n                L = [];\r\n            w.animating = !1, w.touches = {\r\n                startX: 0,\r\n                startY: 0,\r\n                currentX: 0,\r\n                currentY: 0,\r\n                diff: 0\r\n            };\r\n            var D, B;\r\n            if (w.onTouchStart = function(e) {\r\n                    if (e.originalEvent && (e = e.originalEvent), D = \"touchstart\" === e.type, D || !(\"which\" in e) || 3 !== e.which) {\r\n                        if (w.params.noSwiping && l(e, \".\" + w.params.noSwipingClass)) return void(w.allowClick = !0);\r\n                        if (!w.params.swipeHandler || l(e, w.params.swipeHandler)) {\r\n                            var t = w.touches.currentX = \"touchstart\" === e.type ? e.targetTouches[0].pageX : e.pageX,\r\n                                r = w.touches.currentY = \"touchstart\" === e.type ? e.targetTouches[0].pageY : e.pageY;\r\n                            if (!(w.device.ios && w.params.iOSEdgeSwipeDetection && t <= w.params.iOSEdgeSwipeThreshold)) {\r\n                                if (b = !0, T = !1, S = void 0, B = void 0, w.touches.startX = t, w.touches.startY = r, x = Date.now(), w.allowClick = !0, w.updateContainerSize(), w.swipeDirection = void 0, w.params.threshold > 0 && (E = !1), \"touchstart\" !== e.type) {\r\n                                    var s = !0;\r\n                                    a(e.target).is(I) && (s = !1), document.activeElement && a(document.activeElement).is(I) && document.activeElement.blur(), s && e.preventDefault()\r\n                                }\r\n                                w.emit(\"onTouchStart\", w, e)\r\n                            }\r\n                        }\r\n                    }\r\n                }, w.onTouchMove = function(e) {\r\n                    if (e.originalEvent && (e = e.originalEvent), !(D && \"mousemove\" === e.type || e.preventedByNestedSwiper)) {\r\n                        if (w.params.onlyExternal) return w.allowClick = !1, void(b && (w.touches.startX = w.touches.currentX = \"touchmove\" === e.type ? e.targetTouches[0].pageX : e.pageX, w.touches.startY = w.touches.currentY = \"touchmove\" === e.type ? e.targetTouches[0].pageY : e.pageY, x = Date.now()));\r\n                        if (D && document.activeElement && e.target === document.activeElement && a(e.target).is(I)) return T = !0, void(w.allowClick = !1);\r\n                        if (w.emit(\"onTouchMove\", w, e), !(e.targetTouches && e.targetTouches.length > 1)) {\r\n                            if (w.touches.currentX = \"touchmove\" === e.type ? e.targetTouches[0].pageX : e.pageX, w.touches.currentY = \"touchmove\" === e.type ? e.targetTouches[0].pageY : e.pageY, \"undefined\" == typeof S) {\r\n                                var t = 180 * Math.atan2(Math.abs(w.touches.currentY - w.touches.startY), Math.abs(w.touches.currentX - w.touches.startX)) / Math.PI;\r\n                                S = i() ? t > w.params.touchAngle : 90 - t > w.params.touchAngle\r\n                            }\r\n                            if (S && w.emit(\"onTouchMoveOpposite\", w, e), \"undefined\" == typeof B && w.browser.ieTouch && (w.touches.currentX !== w.touches.startX || w.touches.currentY !== w.touches.startY) && (B = !0), b) {\r\n                                if (S) return void(b = !1);\r\n                                if (B || !w.browser.ieTouch) {\r\n                                    w.allowClick = !1, w.emit(\"onSliderMove\", w, e), e.preventDefault(), w.params.touchMoveStopPropagation && !w.params.nested && e.stopPropagation(), T || (s.loop && w.fixLoop(), M = w.getWrapperTranslate(), w.setWrapperTransition(0), w.animating && w.wrapper.trigger(\"webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd\"), w.params.autoplay && w.autoplaying && (w.params.autoplayDisableOnInteraction ? w.stopAutoplay() : w.pauseAutoplay()), z = !1, w.params.grabCursor && (w.container[0].style.cursor = \"move\", w.container[0].style.cursor = \"-webkit-grabbing\", w.container[0].style.cursor = \"-moz-grabbin\", w.container[0].style.cursor = \"grabbing\")), T = !0;\r\n                                    var r = w.touches.diff = i() ? w.touches.currentX - w.touches.startX : w.touches.currentY - w.touches.startY;\r\n                                    r *= w.params.touchRatio, w.rtl && (r = -r), w.swipeDirection = r > 0 ? \"prev\" : \"next\", C = r + M;\r\n                                    var n = !0;\r\n                                    if (r > 0 && C > w.minTranslate() ? (n = !1, w.params.resistance && (C = w.minTranslate() - 1 + Math.pow(-w.minTranslate() + M + r, w.params.resistanceRatio))) : 0 > r && C < w.maxTranslate() && (n = !1, w.params.resistance && (C = w.maxTranslate() + 1 - Math.pow(w.maxTranslate() - M - r, w.params.resistanceRatio))), n && (e.preventedByNestedSwiper = !0), !w.params.allowSwipeToNext && \"next\" === w.swipeDirection && M > C && (C = M), !w.params.allowSwipeToPrev && \"prev\" === w.swipeDirection && C > M && (C = M), w.params.followFinger) {\r\n                                        if (w.params.threshold > 0) {\r\n                                            if (!(Math.abs(r) > w.params.threshold || E)) return void(C = M);\r\n                                            if (!E) return E = !0, w.touches.startX = w.touches.currentX, w.touches.startY = w.touches.currentY, C = M, void(w.touches.diff = i() ? w.touches.currentX - w.touches.startX : w.touches.currentY - w.touches.startY)\r\n                                        }(w.params.freeMode || w.params.watchSlidesProgress) && w.updateActiveIndex(), w.params.freeMode && (0 === L.length && L.push({\r\n                                            position: w.touches[i() ? \"startX\" : \"startY\"],\r\n                                            time: x\r\n                                        }), L.push({\r\n                                            position: w.touches[i() ? \"currentX\" : \"currentY\"],\r\n                                            time: (new window.Date).getTime()\r\n                                        })), w.updateProgress(C), w.setWrapperTranslate(C)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }, w.onTouchEnd = function(e) {\r\n                    if (e.originalEvent && (e = e.originalEvent), w.emit(\"onTouchEnd\", w, e), b) {\r\n                        w.params.grabCursor && T && b && (w.container[0].style.cursor = \"move\", w.container[0].style.cursor = \"-webkit-grab\", w.container[0].style.cursor = \"-moz-grab\", w.container[0].style.cursor = \"grab\");\r\n                        var t = Date.now(),\r\n                            r = t - x;\r\n                        if (w.allowClick && (w.updateClickedSlide(e), w.emit(\"onTap\", w, e), 300 > r && t - k > 300 && (P && clearTimeout(P), P = setTimeout(function() {\r\n                                w && (w.params.paginationHide && w.paginationContainer.length > 0 && !a(e.target).hasClass(w.params.bulletClass) && w.paginationContainer.toggleClass(w.params.paginationHiddenClass), w.emit(\"onClick\", w, e))\r\n                            }, 300)), 300 > r && 300 > t - k && (P && clearTimeout(P), w.emit(\"onDoubleTap\", w, e))), k = Date.now(), setTimeout(function() {\r\n                                w && (w.allowClick = !0)\r\n                            }, 0), !b || !T || !w.swipeDirection || 0 === w.touches.diff || C === M) return void(b = T = !1);\r\n                        b = T = !1;\r\n                        var s;\r\n                        if (s = w.params.followFinger ? w.rtl ? w.translate : -w.translate : -C, w.params.freeMode) {\r\n                            if (s < -w.minTranslate()) return void w.slideTo(w.activeIndex);\r\n                            if (s > -w.maxTranslate()) return void(w.slides.length < w.snapGrid.length ? w.slideTo(w.snapGrid.length - 1) : w.slideTo(w.slides.length - 1));\r\n                            if (w.params.freeModeMomentum) {\r\n                                if (L.length > 1) {\r\n                                    var i = L.pop(),\r\n                                        n = L.pop(),\r\n                                        o = i.position - n.position,\r\n                                        l = i.time - n.time;\r\n                                    w.velocity = o / l, w.velocity = w.velocity / 2, Math.abs(w.velocity) < w.params.freeModeMinimumVelocity && (w.velocity = 0), (l > 150 || (new window.Date).getTime() - i.time > 300) && (w.velocity = 0)\r\n                                } else w.velocity = 0;\r\n                                L.length = 0;\r\n                                var d = 1e3 * w.params.freeModeMomentumRatio,\r\n                                    p = w.velocity * d,\r\n                                    u = w.translate + p;\r\n                                w.rtl && (u = -u);\r\n                                var c, m = !1,\r\n                                    f = 20 * Math.abs(w.velocity) * w.params.freeModeMomentumBounceRatio;\r\n                                if (u < w.maxTranslate()) w.params.freeModeMomentumBounce ? (u + w.maxTranslate() < -f && (u = w.maxTranslate() - f), c = w.maxTranslate(), m = !0, z = !0) : u = w.maxTranslate();\r\n                                else if (u > w.minTranslate()) w.params.freeModeMomentumBounce ? (u - w.minTranslate() > f && (u = w.minTranslate() + f), c = w.minTranslate(), m = !0, z = !0) : u = w.minTranslate();\r\n                                else if (w.params.freeModeSticky) {\r\n                                    var h, g = 0;\r\n                                    for (g = 0; g < w.snapGrid.length; g += 1)\r\n                                        if (w.snapGrid[g] > -u) {\r\n                                            h = g;\r\n                                            break\r\n                                        }\r\n                                    u = Math.abs(w.snapGrid[h] - u) < Math.abs(w.snapGrid[h - 1] - u) || \"next\" === w.swipeDirection ? w.snapGrid[h] : w.snapGrid[h - 1], w.rtl || (u = -u)\r\n                                }\r\n                                if (0 !== w.velocity) d = w.rtl ? Math.abs((-u - w.translate) / w.velocity) : Math.abs((u - w.translate) / w.velocity);\r\n                                else if (w.params.freeModeSticky) return void w.slideReset();\r\n                                w.params.freeModeMomentumBounce && m ? (w.updateProgress(c), w.setWrapperTransition(d), w.setWrapperTranslate(u), w.onTransitionStart(), w.animating = !0, w.wrapper.transitionEnd(function() {\r\n                                    w && z && (w.emit(\"onMomentumBounce\", w), w.setWrapperTransition(w.params.speed), w.setWrapperTranslate(c), w.wrapper.transitionEnd(function() {\r\n                                        w && w.onTransitionEnd()\r\n                                    }))\r\n                                })) : w.velocity ? (w.updateProgress(u), w.setWrapperTransition(d), w.setWrapperTranslate(u), w.onTransitionStart(), w.animating || (w.animating = !0, w.wrapper.transitionEnd(function() {\r\n                                    w && w.onTransitionEnd()\r\n                                }))) : w.updateProgress(u), w.updateActiveIndex()\r\n                            }\r\n                            return void((!w.params.freeModeMomentum || r >= w.params.longSwipesMs) && (w.updateProgress(), w.updateActiveIndex()))\r\n                        }\r\n                        var v, y = 0,\r\n                            S = w.slidesSizesGrid[0];\r\n                        for (v = 0; v < w.slidesGrid.length; v += w.params.slidesPerGroup) \"undefined\" != typeof w.slidesGrid[v + w.params.slidesPerGroup] ? s >= w.slidesGrid[v] && s < w.slidesGrid[v + w.params.slidesPerGroup] && (y = v, S = w.slidesGrid[v + w.params.slidesPerGroup] - w.slidesGrid[v]) : s >= w.slidesGrid[v] && (y = v, S = w.slidesGrid[w.slidesGrid.length - 1] - w.slidesGrid[w.slidesGrid.length - 2]);\r\n                        var E = (s - w.slidesGrid[y]) / S;\r\n                        if (r > w.params.longSwipesMs) {\r\n                            if (!w.params.longSwipes) return void w.slideTo(w.activeIndex);\r\n                            \"next\" === w.swipeDirection && (E >= w.params.longSwipesRatio ? w.slideTo(y + w.params.slidesPerGroup) : w.slideTo(y)), \"prev\" === w.swipeDirection && (E > 1 - w.params.longSwipesRatio ? w.slideTo(y + w.params.slidesPerGroup) : w.slideTo(y))\r\n                        } else {\r\n                            if (!w.params.shortSwipes) return void w.slideTo(w.activeIndex);\r\n                            \"next\" === w.swipeDirection && w.slideTo(y + w.params.slidesPerGroup), \"prev\" === w.swipeDirection && w.slideTo(y)\r\n                        }\r\n                    }\r\n                }, w._slideTo = function(e, a) {\r\n                    return w.slideTo(e, a, !0, !0)\r\n                }, w.slideTo = function(e, a, t, r) {\r\n                    \"undefined\" == typeof t && (t = !0), \"undefined\" == typeof e && (e = 0), 0 > e && (e = 0), w.snapIndex = Math.floor(e / w.params.slidesPerGroup), w.snapIndex >= w.snapGrid.length && (w.snapIndex = w.snapGrid.length - 1);\r\n                    var s = -w.snapGrid[w.snapIndex];\r\n                    w.params.autoplay && w.autoplaying && (r || !w.params.autoplayDisableOnInteraction ? w.pauseAutoplay(a) : w.stopAutoplay()), w.updateProgress(s);\r\n                    for (var n = 0; n < w.slidesGrid.length; n++) - Math.floor(100 * s) >= Math.floor(100 * w.slidesGrid[n]) && (e = n);\r\n                    if (!w.params.allowSwipeToNext && s < w.translate && s < w.minTranslate()) return !1;\r\n                    if (!w.params.allowSwipeToPrev && s > w.translate && s > w.maxTranslate() && (w.activeIndex || 0) !== e) return !1;\r\n                    if (\"undefined\" == typeof a && (a = w.params.speed), w.previousIndex = w.activeIndex || 0, w.activeIndex = e, s === w.translate) return w.updateClasses(), !1;\r\n                    w.updateClasses(), w.onTransitionStart(t);\r\n                    i() ? s : 0, i() ? 0 : s;\r\n                    return 0 === a ? (w.setWrapperTransition(0), w.setWrapperTranslate(s), w.onTransitionEnd(t)) : (w.setWrapperTransition(a), w.setWrapperTranslate(s), w.animating || (w.animating = !0, w.wrapper.transitionEnd(function() {\r\n                        w && w.onTransitionEnd(t)\r\n                    }))), !0\r\n                }, w.onTransitionStart = function(e) {\r\n                    \"undefined\" == typeof e && (e = !0), w.lazy && w.lazy.onTransitionStart(), e && (w.emit(\"onTransitionStart\", w), w.activeIndex !== w.previousIndex && w.emit(\"onSlideChangeStart\", w))\r\n                }, w.onTransitionEnd = function(e) {\r\n                    w.animating = !1, w.setWrapperTransition(0), \"undefined\" == typeof e && (e = !0), w.lazy && w.lazy.onTransitionEnd(), e && (w.emit(\"onTransitionEnd\", w), w.activeIndex !== w.previousIndex && w.emit(\"onSlideChangeEnd\", w)), w.params.hashnav && w.hashnav && w.hashnav.setHash()\r\n                }, w.slideNext = function(e, a, t) {\r\n                    if (w.params.loop) {\r\n                        if (w.animating) return !1;\r\n                        w.fixLoop();\r\n                        w.container[0].clientLeft;\r\n                        return w.slideTo(w.activeIndex + w.params.slidesPerGroup, a, e, t)\r\n                    }\r\n                    return w.slideTo(w.activeIndex + w.params.slidesPerGroup, a, e, t)\r\n                }, w._slideNext = function(e) {\r\n                    return w.slideNext(!0, e, !0)\r\n                }, w.slidePrev = function(e, a, t) {\r\n                    if (w.params.loop) {\r\n                        if (w.animating) return !1;\r\n                        w.fixLoop();\r\n                        w.container[0].clientLeft;\r\n                        return w.slideTo(w.activeIndex - 1, a, e, t)\r\n                    }\r\n                    return w.slideTo(w.activeIndex - 1, a, e, t)\r\n                }, w._slidePrev = function(e) {\r\n                    return w.slidePrev(!0, e, !0)\r\n                }, w.slideReset = function(e, a, t) {\r\n                    return w.slideTo(w.activeIndex, a, e)\r\n                }, w.setWrapperTransition = function(e, a) {\r\n                    w.wrapper.transition(e), \"slide\" !== w.params.effect && w.effects[w.params.effect] && w.effects[w.params.effect].setTransition(e), w.params.parallax && w.parallax && w.parallax.setTransition(e), w.params.scrollbar && w.scrollbar && w.scrollbar.setTransition(e), w.params.control && w.controller && w.controller.setTransition(e, a), w.emit(\"onSetTransition\", w, e)\r\n                }, w.setWrapperTranslate = function(e, a, t) {\r\n                    var r = 0,\r\n                        s = 0,\r\n                        o = 0;\r\n                    i() ? r = w.rtl ? -e : e : s = e, w.params.roundLengths && (r = n(r), s = n(s)), w.params.virtualTranslate || (w.support.transforms3d ? w.wrapper.transform(\"translate3d(\" + r + \"px, \" + s + \"px, \" + o + \"px)\") : w.wrapper.transform(\"translate(\" + r + \"px, \" + s + \"px)\")), w.translate = i() ? r : s, a && w.updateActiveIndex(), \"slide\" !== w.params.effect && w.effects[w.params.effect] && w.effects[w.params.effect].setTranslate(w.translate), w.params.parallax && w.parallax && w.parallax.setTranslate(w.translate), w.params.scrollbar && w.scrollbar && w.scrollbar.setTranslate(w.translate), w.params.control && w.controller && w.controller.setTranslate(w.translate, t), w.emit(\"onSetTranslate\", w, w.translate)\r\n                }, w.getTranslate = function(e, a) {\r\n                    var t, r, s, i;\r\n                    return \"undefined\" == typeof a && (a = \"x\"), w.params.virtualTranslate ? w.rtl ? -w.translate : w.translate : (s = window.getComputedStyle(e, null), window.WebKitCSSMatrix ? (r = s.transform || s.webkitTransform, r.split(\",\").length > 6 && (r = r.split(\", \").map(function(e) {\r\n                        return e.replace(\",\", \".\")\r\n                    }).join(\", \")), i = new window.WebKitCSSMatrix(\"none\" === r ? \"\" : r)) : (i = s.MozTransform || s.OTransform || s.MsTransform || s.msTransform || s.transform || s.getPropertyValue(\"transform\").replace(\"translate(\", \"matrix(1, 0, 0, 1,\"), t = i.toString().split(\",\")), \"x\" === a && (r = window.WebKitCSSMatrix ? i.m41 : 16 === t.length ? parseFloat(t[12]) : parseFloat(t[4])), \"y\" === a && (r = window.WebKitCSSMatrix ? i.m42 : 16 === t.length ? parseFloat(t[13]) : parseFloat(t[5])), w.rtl && r && (r = -r), r || 0)\r\n                }, w.getWrapperTranslate = function(e) {\r\n                    return \"undefined\" == typeof e && (e = i() ? \"x\" : \"y\"), w.getTranslate(w.wrapper[0], e)\r\n                }, w.observers = [], w.initObservers = function() {\r\n                    if (w.params.observeParents)\r\n                        for (var e = w.container.parents(), a = 0; a < e.length; a++) d(e[a]);\r\n                    d(w.container[0], {\r\n                        childList: !1\r\n                    }), d(w.wrapper[0], {\r\n                        attributes: !1\r\n                    })\r\n                }, w.disconnectObservers = function() {\r\n                    for (var e = 0; e < w.observers.length; e++) w.observers[e].disconnect();\r\n                    w.observers = []\r\n                }, w.createLoop = function() {\r\n                    w.wrapper.children(\".\" + w.params.slideClass + \".\" + w.params.slideDuplicateClass).remove();\r\n                    var e = w.wrapper.children(\".\" + w.params.slideClass);\r\n                    \"auto\" !== w.params.slidesPerView || w.params.loopedSlides || (w.params.loopedSlides = e.length), w.loopedSlides = parseInt(w.params.loopedSlides || w.params.slidesPerView, 10), w.loopedSlides = w.loopedSlides + w.params.loopAdditionalSlides, w.loopedSlides > e.length && (w.loopedSlides = e.length);\r\n                    var t, r = [],\r\n                        s = [];\r\n                    for (e.each(function(t, i) {\r\n                            var n = a(this);\r\n                            t < w.loopedSlides && s.push(i), t < e.length && t >= e.length - w.loopedSlides && r.push(i), n.attr(\"data-swiper-slide-index\", t)\r\n                        }), t = 0; t < s.length; t++) w.wrapper.append(a(s[t].cloneNode(!0)).addClass(w.params.slideDuplicateClass));\r\n                    for (t = r.length - 1; t >= 0; t--) w.wrapper.prepend(a(r[t].cloneNode(!0)).addClass(w.params.slideDuplicateClass))\r\n                }, w.destroyLoop = function() {\r\n                    w.wrapper.children(\".\" + w.params.slideClass + \".\" + w.params.slideDuplicateClass).remove(), w.slides.removeAttr(\"data-swiper-slide-index\")\r\n                }, w.fixLoop = function() {\r\n                    var e;\r\n                    w.activeIndex < w.loopedSlides ? (e = w.slides.length - 3 * w.loopedSlides + w.activeIndex, e += w.loopedSlides, w.slideTo(e, 0, !1, !0)) : (\"auto\" === w.params.slidesPerView && w.activeIndex >= 2 * w.loopedSlides || w.activeIndex > w.slides.length - 2 * w.params.slidesPerView) && (e = -w.slides.length + w.activeIndex + w.loopedSlides, e += w.loopedSlides, w.slideTo(e, 0, !1, !0))\r\n                }, w.appendSlide = function(e) {\r\n                    if (w.params.loop && w.destroyLoop(), \"object\" == typeof e && e.length)\r\n                        for (var a = 0; a < e.length; a++) e[a] && w.wrapper.append(e[a]);\r\n                    else w.wrapper.append(e);\r\n                    w.params.loop && w.createLoop(), w.params.observer && w.support.observer || w.update(!0)\r\n                }, w.prependSlide = function(e) {\r\n                    w.params.loop && w.destroyLoop();\r\n                    var a = w.activeIndex + 1;\r\n                    if (\"object\" == typeof e && e.length) {\r\n                        for (var t = 0; t < e.length; t++) e[t] && w.wrapper.prepend(e[t]);\r\n                        a = w.activeIndex + e.length\r\n                    } else w.wrapper.prepend(e);\r\n                    w.params.loop && w.createLoop(), w.params.observer && w.support.observer || w.update(!0), w.slideTo(a, 0, !1)\r\n                }, w.removeSlide = function(e) {\r\n                    w.params.loop && (w.destroyLoop(), w.slides = w.wrapper.children(\".\" + w.params.slideClass));\r\n                    var a, t = w.activeIndex;\r\n                    if (\"object\" == typeof e && e.length) {\r\n                        for (var r = 0; r < e.length; r++) a = e[r], w.slides[a] && w.slides.eq(a).remove(), t > a && t--;\r\n                        t = Math.max(t, 0)\r\n                    } else a = e, w.slides[a] && w.slides.eq(a).remove(), t > a && t--, t = Math.max(t, 0);\r\n                    w.params.loop && w.createLoop(), w.params.observer && w.support.observer || w.update(!0), w.params.loop ? w.slideTo(t + w.loopedSlides, 0, !1) : w.slideTo(t, 0, !1)\r\n                }, w.removeAllSlides = function() {\r\n                    for (var e = [], a = 0; a < w.slides.length; a++) e.push(a);\r\n                    w.removeSlide(e)\r\n                }, w.effects = {\r\n                    fade: {\r\n                        setTranslate: function() {\r\n                            for (var e = 0; e < w.slides.length; e++) {\r\n                                var a = w.slides.eq(e),\r\n                                    t = a[0].swiperSlideOffset,\r\n                                    r = -t;\r\n                                w.params.virtualTranslate || (r -= w.translate);\r\n                                var s = 0;\r\n                                i() || (s = r, r = 0);\r\n                                var n = w.params.fade.crossFade ? Math.max(1 - Math.abs(a[0].progress), 0) : 1 + Math.min(Math.max(a[0].progress, -1), 0);\r\n                                a.css({\r\n                                    opacity: n\r\n                                }).transform(\"translate3d(\" + r + \"px, \" + s + \"px, 0px)\")\r\n                            }\r\n                        },\r\n                        setTransition: function(e) {\r\n                            if (w.slides.transition(e), w.params.virtualTranslate && 0 !== e) {\r\n                                var a = !1;\r\n                                w.slides.transitionEnd(function() {\r\n                                    if (!a && w) {\r\n                                        a = !0, w.animating = !1;\r\n                                        for (var e = [\"webkitTransitionEnd\", \"transitionend\", \"oTransitionEnd\", \"MSTransitionEnd\", \"msTransitionEnd\"], t = 0; t < e.length; t++) w.wrapper.trigger(e[t])\r\n                                    }\r\n                                })\r\n                            }\r\n                        }\r\n                    },\r\n                    cube: {\r\n                        setTranslate: function() {\r\n                            var e, t = 0;\r\n                            w.params.cube.shadow && (i() ? (e = w.wrapper.find(\".swiper-cube-shadow\"), 0 === e.length && (e = a('<div class=\"swiper-cube-shadow\"></div>'), w.wrapper.append(e)), e.css({\r\n                                height: w.width + \"px\"\r\n                            })) : (e = w.container.find(\".swiper-cube-shadow\"), 0 === e.length && (e = a('<div class=\"swiper-cube-shadow\"></div>'), w.container.append(e))));\r\n                            for (var r = 0; r < w.slides.length; r++) {\r\n                                var s = w.slides.eq(r),\r\n                                    n = 90 * r,\r\n                                    o = Math.floor(n / 360);\r\n                                w.rtl && (n = -n, o = Math.floor(-n / 360));\r\n                                var l = Math.max(Math.min(s[0].progress, 1), -1),\r\n                                    d = 0,\r\n                                    p = 0,\r\n                                    u = 0;\r\n                                r % 4 === 0 ? (d = 4 * -o * w.size, u = 0) : (r - 1) % 4 === 0 ? (d = 0, u = 4 * -o * w.size) : (r - 2) % 4 === 0 ? (d = w.size + 4 * o * w.size, u = w.size) : (r - 3) % 4 === 0 && (d = -w.size, u = 3 * w.size + 4 * w.size * o), w.rtl && (d = -d), i() || (p = d, d = 0);\r\n                                var c = \"rotateX(\" + (i() ? 0 : -n) + \"deg) rotateY(\" + (i() ? n : 0) + \"deg) translate3d(\" + d + \"px, \" + p + \"px, \" + u + \"px)\";\r\n                                if (1 >= l && l > -1 && (t = 90 * r + 90 * l, w.rtl && (t = 90 * -r - 90 * l)), s.transform(c), w.params.cube.slideShadows) {\r\n                                    var m = i() ? s.find(\".swiper-slide-shadow-left\") : s.find(\".swiper-slide-shadow-top\"),\r\n                                        f = i() ? s.find(\".swiper-slide-shadow-right\") : s.find(\".swiper-slide-shadow-bottom\");\r\n                                    0 === m.length && (m = a('<div class=\"swiper-slide-shadow-' + (i() ? \"left\" : \"top\") + '\"></div>'), s.append(m)), 0 === f.length && (f = a('<div class=\"swiper-slide-shadow-' + (i() ? \"right\" : \"bottom\") + '\"></div>'), s.append(f));\r\n                                    s[0].progress;\r\n                                    m.length && (m[0].style.opacity = -s[0].progress), f.length && (f[0].style.opacity = s[0].progress)\r\n                                }\r\n                            }\r\n                            if (w.wrapper.css({\r\n                                    \"-webkit-transform-origin\": \"50% 50% -\" + w.size / 2 + \"px\",\r\n                                    \"-moz-transform-origin\": \"50% 50% -\" + w.size / 2 + \"px\",\r\n                                    \"-ms-transform-origin\": \"50% 50% -\" + w.size / 2 + \"px\",\r\n                                    \"transform-origin\": \"50% 50% -\" + w.size / 2 + \"px\"\r\n                                }), w.params.cube.shadow)\r\n                                if (i()) e.transform(\"translate3d(0px, \" + (w.width / 2 + w.params.cube.shadowOffset) + \"px, \" + -w.width / 2 + \"px) rotateX(90deg) rotateZ(0deg) scale(\" + w.params.cube.shadowScale + \")\");\r\n                                else {\r\n                                    var h = Math.abs(t) - 90 * Math.floor(Math.abs(t) / 90),\r\n                                        g = 1.5 - (Math.sin(2 * h * Math.PI / 360) / 2 + Math.cos(2 * h * Math.PI / 360) / 2),\r\n                                        v = w.params.cube.shadowScale,\r\n                                        y = w.params.cube.shadowScale / g,\r\n                                        b = w.params.cube.shadowOffset;\r\n                                    e.transform(\"scale3d(\" + v + \", 1, \" + y + \") translate3d(0px, \" + (w.height / 2 + b) + \"px, \" + -w.height / 2 / y + \"px) rotateX(-90deg)\")\r\n                                }\r\n                            var T = w.isSafari || w.isUiWebView ? -w.size / 2 : 0;\r\n                            w.wrapper.transform(\"translate3d(0px,0,\" + T + \"px) rotateX(\" + (i() ? 0 : t) + \"deg) rotateY(\" + (i() ? -t : 0) + \"deg)\")\r\n                        },\r\n                        setTransition: function(e) {\r\n                            w.slides.transition(e).find(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").transition(e), w.params.cube.shadow && !i() && w.container.find(\".swiper-cube-shadow\").transition(e)\r\n                        }\r\n                    },\r\n                    coverflow: {\r\n                        setTranslate: function() {\r\n                            for (var e = w.translate, t = i() ? -e + w.width / 2 : -e + w.height / 2, r = i() ? w.params.coverflow.rotate : -w.params.coverflow.rotate, s = w.params.coverflow.depth, n = 0, o = w.slides.length; o > n; n++) {\r\n                                var l = w.slides.eq(n),\r\n                                    d = w.slidesSizesGrid[n],\r\n                                    p = l[0].swiperSlideOffset,\r\n                                    u = (t - p - d / 2) / d * w.params.coverflow.modifier,\r\n                                    c = i() ? r * u : 0,\r\n                                    m = i() ? 0 : r * u,\r\n                                    f = -s * Math.abs(u),\r\n                                    h = i() ? 0 : w.params.coverflow.stretch * u,\r\n                                    g = i() ? w.params.coverflow.stretch * u : 0;\r\n                                Math.abs(g) < .001 && (g = 0), Math.abs(h) < .001 && (h = 0), Math.abs(f) < .001 && (f = 0), Math.abs(c) < .001 && (c = 0), Math.abs(m) < .001 && (m = 0);\r\n                                var v = \"translate3d(\" + g + \"px,\" + h + \"px,\" + f + \"px)  rotateX(\" + m + \"deg) rotateY(\" + c + \"deg)\";\r\n                                if (l.transform(v), l[0].style.zIndex = -Math.abs(Math.round(u)) + 1, w.params.coverflow.slideShadows) {\r\n                                    var y = i() ? l.find(\".swiper-slide-shadow-left\") : l.find(\".swiper-slide-shadow-top\"),\r\n                                        b = i() ? l.find(\".swiper-slide-shadow-right\") : l.find(\".swiper-slide-shadow-bottom\");\r\n                                    0 === y.length && (y = a('<div class=\"swiper-slide-shadow-' + (i() ? \"left\" : \"top\") + '\"></div>'), l.append(y)), 0 === b.length && (b = a('<div class=\"swiper-slide-shadow-' + (i() ? \"right\" : \"bottom\") + '\"></div>'), l.append(b)), y.length && (y[0].style.opacity = u > 0 ? u : 0), b.length && (b[0].style.opacity = -u > 0 ? -u : 0)\r\n                                }\r\n                            }\r\n                            if (w.browser.ie) {\r\n                                var T = w.wrapper[0].style;\r\n                                T.perspectiveOrigin = t + \"px 50%\"\r\n                            }\r\n                        },\r\n                        setTransition: function(e) {\r\n                            w.slides.transition(e).find(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").transition(e)\r\n                        }\r\n                    }\r\n                }, w.lazy = {\r\n                    initialImageLoaded: !1,\r\n                    loadImageInSlide: function(e, t) {\r\n                        if (\"undefined\" != typeof e && (\"undefined\" == typeof t && (t = !0), 0 !== w.slides.length)) {\r\n                            var r = w.slides.eq(e),\r\n                                s = r.find(\".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)\");\r\n                            !r.hasClass(\"swiper-lazy\") || r.hasClass(\"swiper-lazy-loaded\") || r.hasClass(\"swiper-lazy-loading\") || (s = s.add(r[0])), 0 !== s.length && s.each(function() {\r\n                                var e = a(this);\r\n                                e.addClass(\"swiper-lazy-loading\");\r\n                                var s = e.attr(\"data-background\"),\r\n                                    i = e.attr(\"data-src\"),\r\n                                    n = e.attr(\"data-srcset\");\r\n                                w.loadImage(e[0], i || s, n, !1, function() {\r\n                                    if (s ? (e.css(\"background-image\", \"url(\" + s + \")\"), e.removeAttr(\"data-background\")) : (n && (e.attr(\"srcset\", n), e.removeAttr(\"data-srcset\")), i && (e.attr(\"src\", i), e.removeAttr(\"data-src\"))), e.addClass(\"swiper-lazy-loaded\").removeClass(\"swiper-lazy-loading\"), r.find(\".swiper-lazy-preloader, .preloader\").remove(), w.params.loop && t) {\r\n                                        var a = r.attr(\"data-swiper-slide-index\");\r\n                                        if (r.hasClass(w.params.slideDuplicateClass)) {\r\n                                            var o = w.wrapper.children('[data-swiper-slide-index=\"' + a + '\"]:not(.' + w.params.slideDuplicateClass + \")\");\r\n                                            w.lazy.loadImageInSlide(o.index(), !1)\r\n                                        } else {\r\n                                            var l = w.wrapper.children(\".\" + w.params.slideDuplicateClass + '[data-swiper-slide-index=\"' + a + '\"]');\r\n                                            w.lazy.loadImageInSlide(l.index(), !1)\r\n                                        }\r\n                                    }\r\n                                    w.emit(\"onLazyImageReady\", w, r[0], e[0])\r\n                                }), w.emit(\"onLazyImageLoad\", w, r[0], e[0])\r\n                            })\r\n                        }\r\n                    },\r\n                    load: function() {\r\n                        var e;\r\n                        if (w.params.watchSlidesVisibility) w.wrapper.children(\".\" + w.params.slideVisibleClass).each(function() {\r\n                            w.lazy.loadImageInSlide(a(this).index())\r\n                        });\r\n                        else if (w.params.slidesPerView > 1)\r\n                            for (e = w.activeIndex; e < w.activeIndex + w.params.slidesPerView; e++) w.slides[e] && w.lazy.loadImageInSlide(e);\r\n                        else w.lazy.loadImageInSlide(w.activeIndex);\r\n                        if (w.params.lazyLoadingInPrevNext)\r\n                            if (w.params.slidesPerView > 1) {\r\n                                for (e = w.activeIndex + w.params.slidesPerView; e < w.activeIndex + w.params.slidesPerView + w.params.slidesPerView; e++) w.slides[e] && w.lazy.loadImageInSlide(e);\r\n                                for (e = w.activeIndex - w.params.slidesPerView; e < w.activeIndex; e++) w.slides[e] && w.lazy.loadImageInSlide(e)\r\n                            } else {\r\n                                var t = w.wrapper.children(\".\" + w.params.slideNextClass);\r\n                                t.length > 0 && w.lazy.loadImageInSlide(t.index());\r\n                                var r = w.wrapper.children(\".\" + w.params.slidePrevClass);\r\n                                r.length > 0 && w.lazy.loadImageInSlide(r.index())\r\n                            }\r\n                    },\r\n                    onTransitionStart: function() {\r\n                        w.params.lazyLoading && (w.params.lazyLoadingOnTransitionStart || !w.params.lazyLoadingOnTransitionStart && !w.lazy.initialImageLoaded) && w.lazy.load()\r\n                    },\r\n                    onTransitionEnd: function() {\r\n                        w.params.lazyLoading && !w.params.lazyLoadingOnTransitionStart && w.lazy.load()\r\n                    }\r\n                }, w.scrollbar = {\r\n                    isTouched: !1,\r\n                    setDragPosition: function(e) {\r\n                        var a = w.scrollbar,\r\n                            t = i() ? \"touchstart\" === e.type || \"touchmove\" === e.type ? e.targetTouches[0].pageX : e.pageX || e.clientX : \"touchstart\" === e.type || \"touchmove\" === e.type ? e.targetTouches[0].pageY : e.pageY || e.clientY,\r\n                            r = t - a.track.offset()[i() ? \"left\" : \"top\"] - a.dragSize / 2,\r\n                            s = -w.minTranslate() * a.moveDivider,\r\n                            n = -w.maxTranslate() * a.moveDivider;\r\n                        s > r ? r = s : r > n && (r = n), r = -r / a.moveDivider, w.updateProgress(r), w.setWrapperTranslate(r, !0)\r\n                    },\r\n                    dragStart: function(e) {\r\n                        var a = w.scrollbar;\r\n                        a.isTouched = !0, e.preventDefault(), e.stopPropagation(), a.setDragPosition(e), clearTimeout(a.dragTimeout), a.track.transition(0), w.params.scrollbarHide && a.track.css(\"opacity\", 1), w.wrapper.transition(100), a.drag.transition(100), w.emit(\"onScrollbarDragStart\", w)\r\n                    },\r\n                    dragMove: function(e) {\r\n                        var a = w.scrollbar;\r\n                        a.isTouched && (e.preventDefault ? e.preventDefault() : e.returnValue = !1, a.setDragPosition(e), w.wrapper.transition(0), a.track.transition(0), a.drag.transition(0), w.emit(\"onScrollbarDragMove\", w))\r\n                    },\r\n                    dragEnd: function(e) {\r\n                        var a = w.scrollbar;\r\n                        a.isTouched && (a.isTouched = !1, w.params.scrollbarHide && (clearTimeout(a.dragTimeout), a.dragTimeout = setTimeout(function() {\r\n                            a.track.css(\"opacity\", 0), a.track.transition(400)\r\n                        }, 1e3)), w.emit(\"onScrollbarDragEnd\", w), w.params.scrollbarSnapOnRelease && w.slideReset())\r\n                    },\r\n                    enableDraggable: function() {\r\n                        var e = w.scrollbar,\r\n                            t = w.support.touch ? e.track : document;\r\n                        a(e.track).on(w.touchEvents.start, e.dragStart), a(t).on(w.touchEvents.move, e.dragMove), a(t).on(w.touchEvents.end, e.dragEnd)\r\n                    },\r\n                    disableDraggable: function() {\r\n                        var e = w.scrollbar,\r\n                            t = w.support.touch ? e.track : document;\r\n                        a(e.track).off(w.touchEvents.start, e.dragStart), a(t).off(w.touchEvents.move, e.dragMove), a(t).off(w.touchEvents.end, e.dragEnd)\r\n                    },\r\n                    set: function() {\r\n                        if (w.params.scrollbar) {\r\n                            var e = w.scrollbar;\r\n                            e.track = a(w.params.scrollbar), e.drag = e.track.find(\".swiper-scrollbar-drag\"), 0 === e.drag.length && (e.drag = a('<div class=\"swiper-scrollbar-drag\"></div>'), e.track.append(e.drag)), e.drag[0].style.width = \"\", e.drag[0].style.height = \"\", e.trackSize = i() ? e.track[0].offsetWidth : e.track[0].offsetHeight, e.divider = w.size / w.virtualSize, e.moveDivider = e.divider * (e.trackSize / w.size), e.dragSize = e.trackSize * e.divider, i() ? e.drag[0].style.width = e.dragSize + \"px\" : e.drag[0].style.height = e.dragSize + \"px\", e.divider >= 1 ? e.track[0].style.display = \"none\" : e.track[0].style.display = \"\", w.params.scrollbarHide && (e.track[0].style.opacity = 0)\r\n                        }\r\n                    },\r\n                    setTranslate: function() {\r\n                        if (w.params.scrollbar) {\r\n                            var e, a = w.scrollbar,\r\n                                t = (w.translate || 0, a.dragSize);\r\n                            e = (a.trackSize - a.dragSize) * w.progress, w.rtl && i() ? (e = -e, e > 0 ? (t = a.dragSize - e, e = 0) : -e + a.dragSize > a.trackSize && (t = a.trackSize + e)) : 0 > e ? (t = a.dragSize + e, e = 0) : e + a.dragSize > a.trackSize && (t = a.trackSize - e), i() ? (w.support.transforms3d ? a.drag.transform(\"translate3d(\" + e + \"px, 0, 0)\") : a.drag.transform(\"translateX(\" + e + \"px)\"), a.drag[0].style.width = t + \"px\") : (w.support.transforms3d ? a.drag.transform(\"translate3d(0px, \" + e + \"px, 0)\") : a.drag.transform(\"translateY(\" + e + \"px)\"), a.drag[0].style.height = t + \"px\"), w.params.scrollbarHide && (clearTimeout(a.timeout), a.track[0].style.opacity = 1, a.timeout = setTimeout(function() {\r\n                                a.track[0].style.opacity = 0, a.track.transition(400)\r\n                            }, 1e3))\r\n                        }\r\n                    },\r\n                    setTransition: function(e) {\r\n                        w.params.scrollbar && w.scrollbar.drag.transition(e)\r\n                    }\r\n                }, w.controller = {\r\n                    LinearSpline: function(e, a) {\r\n                        this.x = e, this.y = a, this.lastIndex = e.length - 1;\r\n                        var t, r;\r\n                        this.x.length;\r\n                        this.interpolate = function(e) {\r\n                            return e ? (r = s(this.x, e), t = r - 1, (e - this.x[t]) * (this.y[r] - this.y[t]) / (this.x[r] - this.x[t]) + this.y[t]) : 0\r\n                        };\r\n                        var s = function() {\r\n                            var e, a, t;\r\n                            return function(r, s) {\r\n                                for (a = -1, e = r.length; e - a > 1;) r[t = e + a >> 1] <= s ? a = t : e = t;\r\n                                return e\r\n                            }\r\n                        }()\r\n                    },\r\n                    getInterpolateFunction: function(e) {\r\n                        w.controller.spline || (w.controller.spline = w.params.loop ? new w.controller.LinearSpline(w.slidesGrid, e.slidesGrid) : new w.controller.LinearSpline(w.snapGrid, e.snapGrid))\r\n                    },\r\n                    setTranslate: function(e, a) {\r\n                        function r(a) {\r\n                            e = a.rtl && \"horizontal\" === a.params.direction ? -w.translate : w.translate, \"slide\" === w.params.controlBy && (w.controller.getInterpolateFunction(a), i = -w.controller.spline.interpolate(-e)), i && \"container\" !== w.params.controlBy || (s = (a.maxTranslate() - a.minTranslate()) / (w.maxTranslate() - w.minTranslate()), i = (e - w.minTranslate()) * s + a.minTranslate()), w.params.controlInverse && (i = a.maxTranslate() - i), a.updateProgress(i), a.setWrapperTranslate(i, !1, w), a.updateActiveIndex()\r\n                        }\r\n                        var s, i, n = w.params.control;\r\n                        if (w.isArray(n))\r\n                            for (var o = 0; o < n.length; o++) n[o] !== a && n[o] instanceof t && r(n[o]);\r\n                        else n instanceof t && a !== n && r(n)\r\n                    },\r\n                    setTransition: function(e, a) {\r\n                        function r(a) {\r\n                            a.setWrapperTransition(e, w), 0 !== e && (a.onTransitionStart(), a.wrapper.transitionEnd(function() {\r\n                                i && (a.params.loop && \"slide\" === w.params.controlBy && a.fixLoop(), a.onTransitionEnd())\r\n                            }))\r\n                        }\r\n                        var s, i = w.params.control;\r\n                        if (w.isArray(i))\r\n                            for (s = 0; s < i.length; s++) i[s] !== a && i[s] instanceof t && r(i[s]);\r\n                        else i instanceof t && a !== i && r(i)\r\n                    }\r\n                }, w.hashnav = {\r\n                    init: function() {\r\n                        if (w.params.hashnav) {\r\n                            w.hashnav.initialized = !0;\r\n                            var e = document.location.hash.replace(\"#\", \"\");\r\n                            if (e)\r\n                                for (var a = 0, t = 0, r = w.slides.length; r > t; t++) {\r\n                                    var s = w.slides.eq(t),\r\n                                        i = s.attr(\"data-hash\");\r\n                                    if (i === e && !s.hasClass(w.params.slideDuplicateClass)) {\r\n                                        var n = s.index();\r\n                                        w.slideTo(n, a, w.params.runCallbacksOnInit, !0)\r\n                                    }\r\n                                }\r\n                        }\r\n                    },\r\n                    setHash: function() {\r\n                        w.hashnav.initialized && w.params.hashnav && (document.location.hash = w.slides.eq(w.activeIndex).attr(\"data-hash\") || \"\")\r\n                    }\r\n                }, w.disableKeyboardControl = function() {\r\n                    a(document).off(\"keydown\", p)\r\n                }, w.enableKeyboardControl = function() {\r\n                    a(document).on(\"keydown\", p)\r\n                }, w.mousewheel = {\r\n                    event: !1,\r\n                    lastScrollTime: (new window.Date).getTime()\r\n                }, w.params.mousewheelControl) {\r\n                try {\r\n                    new window.WheelEvent(\"wheel\"), w.mousewheel.event = \"wheel\"\r\n                } catch (G) {}\r\n                w.mousewheel.event || void 0 === document.onmousewheel || (w.mousewheel.event = \"mousewheel\"), w.mousewheel.event || (w.mousewheel.event = \"DOMMouseScroll\")\r\n            }\r\n            w.disableMousewheelControl = function() {\r\n                return w.mousewheel.event ? (w.container.off(w.mousewheel.event, u), !0) : !1\r\n            }, w.enableMousewheelControl = function() {\r\n                return w.mousewheel.event ? (w.container.on(w.mousewheel.event, u), !0) : !1\r\n            }, w.parallax = {\r\n                setTranslate: function() {\r\n                    w.container.children(\"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]\").each(function() {\r\n                        c(this, w.progress)\r\n                    }), w.slides.each(function() {\r\n                        var e = a(this);\r\n                        e.find(\"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]\").each(function() {\r\n                            var a = Math.min(Math.max(e[0].progress, -1), 1);\r\n                            c(this, a)\r\n                        })\r\n                    })\r\n                },\r\n                setTransition: function(e) {\r\n                    \"undefined\" == typeof e && (e = w.params.speed), w.container.find(\"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]\").each(function() {\r\n                        var t = a(this),\r\n                            r = parseInt(t.attr(\"data-swiper-parallax-duration\"), 10) || e;\r\n                        0 === e && (r = 0), t.transition(r)\r\n                    })\r\n                }\r\n            }, w._plugins = [];\r\n            for (var O in w.plugins) {\r\n                var A = w.plugins[O](w, w.params[O]);\r\n                A && w._plugins.push(A)\r\n            }\r\n            return w.callPlugins = function(e) {\r\n                for (var a = 0; a < w._plugins.length; a++) e in w._plugins[a] && w._plugins[a][e](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])\r\n            }, w.emitterEventListeners = {}, w.emit = function(e) {\r\n                w.params[e] && w.params[e](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\r\n                var a;\r\n                if (w.emitterEventListeners[e])\r\n                    for (a = 0; a < w.emitterEventListeners[e].length; a++) w.emitterEventListeners[e][a](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\r\n                w.callPlugins && w.callPlugins(e, arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])\r\n            }, w.on = function(e, a) {\r\n                return e = m(e), w.emitterEventListeners[e] || (w.emitterEventListeners[e] = []), w.emitterEventListeners[e].push(a), w\r\n            }, w.off = function(e, a) {\r\n                var t;\r\n                if (e = m(e), \"undefined\" == typeof a) return w.emitterEventListeners[e] = [], w;\r\n                if (w.emitterEventListeners[e] && 0 !== w.emitterEventListeners[e].length) {\r\n                    for (t = 0; t < w.emitterEventListeners[e].length; t++) w.emitterEventListeners[e][t] === a && w.emitterEventListeners[e].splice(t, 1);\r\n                    return w\r\n                }\r\n            }, w.once = function(e, a) {\r\n                e = m(e);\r\n                var t = function() {\r\n                    a(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]), w.off(e, t)\r\n                };\r\n                return w.on(e, t), w\r\n            }, w.a11y = {\r\n                makeFocusable: function(e) {\r\n                    return e.attr(\"tabIndex\", \"0\"), e\r\n                },\r\n                addRole: function(e, a) {\r\n                    return e.attr(\"role\", a), e\r\n                },\r\n                addLabel: function(e, a) {\r\n                    return e.attr(\"aria-label\", a), e\r\n                },\r\n                disable: function(e) {\r\n                    return e.attr(\"aria-disabled\", !0), e\r\n                },\r\n                enable: function(e) {\r\n                    return e.attr(\"aria-disabled\", !1), e\r\n                },\r\n                onEnterKey: function(e) {\r\n                    13 === e.keyCode && (a(e.target).is(w.params.nextButton) ? (w.onClickNext(e), w.isEnd ? w.a11y.notify(w.params.lastSlideMessage) : w.a11y.notify(w.params.nextSlideMessage)) : a(e.target).is(w.params.prevButton) && (w.onClickPrev(e), w.isBeginning ? w.a11y.notify(w.params.firstSlideMessage) : w.a11y.notify(w.params.prevSlideMessage)), a(e.target).is(\".\" + w.params.bulletClass) && a(e.target)[0].click())\r\n                },\r\n                liveRegion: a('<span class=\"swiper-notification\" aria-live=\"assertive\" aria-atomic=\"true\"></span>'),\r\n                notify: function(e) {\r\n                    var a = w.a11y.liveRegion;\r\n                    0 !== a.length && (a.html(\"\"), a.html(e))\r\n                },\r\n                init: function() {\r\n                    if (w.params.nextButton) {\r\n                        var e = a(w.params.nextButton);\r\n                        w.a11y.makeFocusable(e), w.a11y.addRole(e, \"button\"), w.a11y.addLabel(e, w.params.nextSlideMessage)\r\n                    }\r\n                    if (w.params.prevButton) {\r\n                        var t = a(w.params.prevButton);\r\n                        w.a11y.makeFocusable(t), w.a11y.addRole(t, \"button\"), w.a11y.addLabel(t, w.params.prevSlideMessage)\r\n                    }\r\n                    a(w.container).append(w.a11y.liveRegion)\r\n                },\r\n                initPagination: function() {\r\n                    w.params.pagination && w.params.paginationClickable && w.bullets && w.bullets.length && w.bullets.each(function() {\r\n                        var e = a(this);\r\n                        w.a11y.makeFocusable(e), w.a11y.addRole(e, \"button\"), w.a11y.addLabel(e, w.params.paginationBulletMessage.replace(/{{index}}/, e.index() + 1))\r\n                    })\r\n                },\r\n                destroy: function() {\r\n                    w.a11y.liveRegion && w.a11y.liveRegion.length > 0 && w.a11y.liveRegion.remove()\r\n                }\r\n            }, w.init = function() {\r\n                w.params.loop && w.createLoop(), w.updateContainerSize(), w.updateSlidesSize(), w.updatePagination(), w.params.scrollbar && w.scrollbar && (w.scrollbar.set(), w.params.scrollbarDraggable && w.scrollbar.enableDraggable()), \"slide\" !== w.params.effect && w.effects[w.params.effect] && (w.params.loop || w.updateProgress(), w.effects[w.params.effect].setTranslate()), w.params.loop ? w.slideTo(w.params.initialSlide + w.loopedSlides, 0, w.params.runCallbacksOnInit) : (w.slideTo(w.params.initialSlide, 0, w.params.runCallbacksOnInit), 0 === w.params.initialSlide && (w.parallax && w.params.parallax && w.parallax.setTranslate(), w.lazy && w.params.lazyLoading && (w.lazy.load(), w.lazy.initialImageLoaded = !0))), w.attachEvents(), w.params.observer && w.support.observer && w.initObservers(), w.params.preloadImages && !w.params.lazyLoading && w.preloadImages(), w.params.autoplay && w.startAutoplay(), w.params.keyboardControl && w.enableKeyboardControl && w.enableKeyboardControl(), w.params.mousewheelControl && w.enableMousewheelControl && w.enableMousewheelControl(), w.params.hashnav && w.hashnav && w.hashnav.init(), w.params.a11y && w.a11y && w.a11y.init(), w.emit(\"onInit\", w)\r\n            }, w.cleanupStyles = function() {\r\n                w.container.removeClass(w.classNames.join(\" \")).removeAttr(\"style\"), w.wrapper.removeAttr(\"style\"), w.slides && w.slides.length && w.slides.removeClass([w.params.slideVisibleClass, w.params.slideActiveClass, w.params.slideNextClass, w.params.slidePrevClass].join(\" \")).removeAttr(\"style\").removeAttr(\"data-swiper-column\").removeAttr(\"data-swiper-row\"), w.paginationContainer && w.paginationContainer.length && w.paginationContainer.removeClass(w.params.paginationHiddenClass), w.bullets && w.bullets.length && w.bullets.removeClass(w.params.bulletActiveClass), w.params.prevButton && a(w.params.prevButton).removeClass(w.params.buttonDisabledClass), w.params.nextButton && a(w.params.nextButton).removeClass(w.params.buttonDisabledClass), w.params.scrollbar && w.scrollbar && (w.scrollbar.track && w.scrollbar.track.length && w.scrollbar.track.removeAttr(\"style\"), w.scrollbar.drag && w.scrollbar.drag.length && w.scrollbar.drag.removeAttr(\"style\"))\r\n            }, w.destroy = function(e, a) {\r\n                w.detachEvents(), w.stopAutoplay(), w.params.scrollbar && w.scrollbar && w.params.scrollbarDraggable && w.scrollbar.disableDraggable(), w.params.loop && w.destroyLoop(), a && w.cleanupStyles(), w.disconnectObservers(), w.params.keyboardControl && w.disableKeyboardControl && w.disableKeyboardControl(), w.params.mousewheelControl && w.disableMousewheelControl && w.disableMousewheelControl(), w.params.a11y && w.a11y && w.a11y.destroy(), w.emit(\"onDestroy\"), e !== !1 && (w = null)\r\n            }, w.init(), w\r\n        }\r\n    };\r\n    t.prototype = {\r\n        isSafari: function() {\r\n            var e = navigator.userAgent.toLowerCase();\r\n            return e.indexOf(\"safari\") >= 0 && e.indexOf(\"chrome\") < 0 && e.indexOf(\"android\") < 0\r\n        }(),\r\n        isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),\r\n        isArray: function(e) {\r\n            return \"[object Array]\" === Object.prototype.toString.apply(e)\r\n        },\r\n        browser: {\r\n            ie: window.navigator.pointerEnabled || window.navigator.msPointerEnabled,\r\n            ieTouch: window.navigator.msPointerEnabled && window.navigator.msMaxTouchPoints > 1 || window.navigator.pointerEnabled && window.navigator.maxTouchPoints > 1\r\n        },\r\n        device: function() {\r\n            var e = navigator.userAgent,\r\n                a = e.match(/(Android);?[\\s\\/]+([\\d.]+)?/),\r\n                t = e.match(/(iPad).*OS\\s([\\d_]+)/),\r\n                r = e.match(/(iPod)(.*OS\\s([\\d_]+))?/),\r\n                s = !t && e.match(/(iPhone\\sOS)\\s([\\d_]+)/);\r\n            return {\r\n                ios: t || s || r,\r\n                android: a\r\n            }\r\n        }(),\r\n        support: {\r\n            touch: window.Modernizr && Modernizr.touch === !0 || function() {\r\n                return !!(\"ontouchstart\" in window || window.DocumentTouch && document instanceof DocumentTouch)\r\n            }(),\r\n            transforms3d: window.Modernizr && Modernizr.csstransforms3d === !0 || function() {\r\n                var e = document.createElement(\"div\").style;\r\n                return \"webkitPerspective\" in e || \"MozPerspective\" in e || \"OPerspective\" in e || \"MsPerspective\" in e || \"perspective\" in e\r\n            }(),\r\n            flexbox: function() {\r\n                for (var e = document.createElement(\"div\").style, a = \"alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient\".split(\" \"), t = 0; t < a.length; t++)\r\n                    if (a[t] in e) return !0\r\n            }(),\r\n            observer: function() {\r\n                return \"MutationObserver\" in window || \"WebkitMutationObserver\" in window\r\n            }()\r\n        },\r\n        plugins: {}\r\n    };\r\n    for (var r = (function() {\r\n            var e = function(e) {\r\n                    var a = this,\r\n                        t = 0;\r\n                    for (t = 0; t < e.length; t++) a[t] = e[t];\r\n                    return a.length = e.length, this\r\n                },\r\n                a = function(a, t) {\r\n                    var r = [],\r\n                        s = 0;\r\n                    if (a && !t && a instanceof e) return a;\r\n                    if (a)\r\n                        if (\"string\" == typeof a) {\r\n                            var i, n, o = a.trim();\r\n                            if (o.indexOf(\"<\") >= 0 && o.indexOf(\">\") >= 0) {\r\n                                var l = \"div\";\r\n                                for (0 === o.indexOf(\"<li\") && (l = \"ul\"), 0 === o.indexOf(\"<tr\") && (l = \"tbody\"), (0 === o.indexOf(\"<td\") || 0 === o.indexOf(\"<th\")) && (l = \"tr\"), 0 === o.indexOf(\"<tbody\") && (l = \"table\"), 0 === o.indexOf(\"<option\") && (l = \"select\"), n = document.createElement(l), n.innerHTML = a, s = 0; s < n.childNodes.length; s++) r.push(n.childNodes[s])\r\n                            } else\r\n                                for (i = t || \"#\" !== a[0] || a.match(/[ .<>:~]/) ? (t || document).querySelectorAll(a) : [document.getElementById(a.split(\"#\")[1])], s = 0; s < i.length; s++) i[s] && r.push(i[s])\r\n                        } else if (a.nodeType || a === window || a === document) r.push(a);\r\n                    else if (a.length > 0 && a[0].nodeType)\r\n                        for (s = 0; s < a.length; s++) r.push(a[s]);\r\n                    return new e(r)\r\n                };\r\n            return e.prototype = {\r\n                addClass: function(e) {\r\n                    if (\"undefined\" == typeof e) return this;\r\n                    for (var a = e.split(\" \"), t = 0; t < a.length; t++)\r\n                        for (var r = 0; r < this.length; r++) this[r].classList.add(a[t]);\r\n                    return this\r\n                },\r\n                removeClass: function(e) {\r\n                    for (var a = e.split(\" \"), t = 0; t < a.length; t++)\r\n                        for (var r = 0; r < this.length; r++) this[r].classList.remove(a[t]);\r\n                    return this\r\n                },\r\n                hasClass: function(e) {\r\n                    return this[0] ? this[0].classList.contains(e) : !1\r\n                },\r\n                toggleClass: function(e) {\r\n                    for (var a = e.split(\" \"), t = 0; t < a.length; t++)\r\n                        for (var r = 0; r < this.length; r++) this[r].classList.toggle(a[t]);\r\n                    return this\r\n                },\r\n                attr: function(e, a) {\r\n                    if (1 === arguments.length && \"string\" == typeof e) return this[0] ? this[0].getAttribute(e) : void 0;\r\n                    for (var t = 0; t < this.length; t++)\r\n                        if (2 === arguments.length) this[t].setAttribute(e, a);\r\n                        else\r\n                            for (var r in e) this[t][r] = e[r], this[t].setAttribute(r, e[r]);\r\n                    return this\r\n                },\r\n                removeAttr: function(e) {\r\n                    for (var a = 0; a < this.length; a++) this[a].removeAttribute(e);\r\n                    return this\r\n                },\r\n                data: function(e, a) {\r\n                    if (\"undefined\" == typeof a) {\r\n                        if (this[0]) {\r\n                            var t = this[0].getAttribute(\"data-\" + e);\r\n                            return t ? t : this[0].dom7ElementDataStorage && e in this[0].dom7ElementDataStorage ? this[0].dom7ElementDataStorage[e] : void 0\r\n                        }\r\n                        return void 0\r\n                    }\r\n                    for (var r = 0; r < this.length; r++) {\r\n                        var s = this[r];\r\n                        s.dom7ElementDataStorage || (s.dom7ElementDataStorage = {}), s.dom7ElementDataStorage[e] = a\r\n                    }\r\n                    return this\r\n                },\r\n                transform: function(e) {\r\n                    for (var a = 0; a < this.length; a++) {\r\n                        var t = this[a].style;\r\n                        t.webkitTransform = t.MsTransform = t.msTransform = t.MozTransform = t.OTransform = t.transform = e\r\n                    }\r\n                    return this\r\n                },\r\n                transition: function(e) {\r\n                    \"string\" != typeof e && (e += \"ms\");\r\n                    for (var a = 0; a < this.length; a++) {\r\n                        var t = this[a].style;\r\n                        t.webkitTransitionDuration = t.MsTransitionDuration = t.msTransitionDuration = t.MozTransitionDuration = t.OTransitionDuration = t.transitionDuration = e\r\n                    }\r\n                    return this\r\n                },\r\n                on: function(e, t, r, s) {\r\n                    function i(e) {\r\n                        var s = e.target;\r\n                        if (a(s).is(t)) r.call(s, e);\r\n                        else\r\n                            for (var i = a(s).parents(), n = 0; n < i.length; n++) a(i[n]).is(t) && r.call(i[n], e)\r\n                    }\r\n                    var n, o, l = e.split(\" \");\r\n                    for (n = 0; n < this.length; n++)\r\n                        if (\"function\" == typeof t || t === !1)\r\n                            for (\"function\" == typeof t && (r = arguments[1], s = arguments[2] || !1), o = 0; o < l.length; o++) this[n].addEventListener(l[o], r, s);\r\n                        else\r\n                            for (o = 0; o < l.length; o++) this[n].dom7LiveListeners || (this[n].dom7LiveListeners = []), this[n].dom7LiveListeners.push({\r\n                                listener: r,\r\n                                liveListener: i\r\n                            }), this[n].addEventListener(l[o], i, s);\r\n                    return this\r\n                },\r\n                off: function(e, a, t, r) {\r\n                    for (var s = e.split(\" \"), i = 0; i < s.length; i++)\r\n                        for (var n = 0; n < this.length; n++)\r\n                            if (\"function\" == typeof a || a === !1) \"function\" == typeof a && (t = arguments[1], r = arguments[2] || !1), this[n].removeEventListener(s[i], t, r);\r\n                            else if (this[n].dom7LiveListeners)\r\n                        for (var o = 0; o < this[n].dom7LiveListeners.length; o++) this[n].dom7LiveListeners[o].listener === t && this[n].removeEventListener(s[i], this[n].dom7LiveListeners[o].liveListener, r);\r\n                    return this\r\n                },\r\n                once: function(e, a, t, r) {\r\n                    function s(n) {\r\n                        t(n), i.off(e, a, s, r)\r\n                    }\r\n                    var i = this;\r\n                    \"function\" == typeof a && (a = !1, t = arguments[1], r = arguments[2]), i.on(e, a, s, r)\r\n                },\r\n                trigger: function(e, a) {\r\n                    for (var t = 0; t < this.length; t++) {\r\n                        var r;\r\n                        try {\r\n                            r = new window.CustomEvent(e, {\r\n                                detail: a,\r\n                                bubbles: !0,\r\n                                cancelable: !0\r\n                            })\r\n                        } catch (s) {\r\n                            r = document.createEvent(\"Event\"), r.initEvent(e, !0, !0), r.detail = a\r\n                        }\r\n                        this[t].dispatchEvent(r)\r\n                    }\r\n                    return this\r\n                },\r\n                transitionEnd: function(e) {\r\n                    function a(i) {\r\n                        if (i.target === this)\r\n                            for (e.call(this, i), t = 0; t < r.length; t++) s.off(r[t], a)\r\n                    }\r\n                    var t, r = [\"webkitTransitionEnd\", \"transitionend\", \"oTransitionEnd\", \"MSTransitionEnd\", \"msTransitionEnd\"],\r\n                        s = this;\r\n                    if (e)\r\n                        for (t = 0; t < r.length; t++) s.on(r[t], a);\r\n                    return this\r\n                },\r\n                width: function() {\r\n                    return this[0] === window ? window.innerWidth : this.length > 0 ? parseFloat(this.css(\"width\")) : null\r\n                },\r\n                outerWidth: function(e) {\r\n                    return this.length > 0 ? e ? this[0].offsetWidth + parseFloat(this.css(\"margin-right\")) + parseFloat(this.css(\"margin-left\")) : this[0].offsetWidth : null\r\n                },\r\n                height: function() {\r\n                    return this[0] === window ? window.innerHeight : this.length > 0 ? parseFloat(this.css(\"height\")) : null\r\n                },\r\n                outerHeight: function(e) {\r\n                    return this.length > 0 ? e ? this[0].offsetHeight + parseFloat(this.css(\"margin-top\")) + parseFloat(this.css(\"margin-bottom\")) : this[0].offsetHeight : null\r\n                },\r\n                offset: function() {\r\n                    if (this.length > 0) {\r\n                        var e = this[0],\r\n                            a = e.getBoundingClientRect(),\r\n                            t = document.body,\r\n                            r = e.clientTop || t.clientTop || 0,\r\n                            s = e.clientLeft || t.clientLeft || 0,\r\n                            i = window.pageYOffset || e.scrollTop,\r\n                            n = window.pageXOffset || e.scrollLeft;\r\n                        return {\r\n                            top: a.top + i - r,\r\n                            left: a.left + n - s\r\n                        }\r\n                    }\r\n                    return null\r\n                },\r\n                css: function(e, a) {\r\n                    var t;\r\n                    if (1 === arguments.length) {\r\n                        if (\"string\" != typeof e) {\r\n                            for (t = 0; t < this.length; t++)\r\n                                for (var r in e) this[t].style[r] = e[r];\r\n                            return this\r\n                        }\r\n                        if (this[0]) return window.getComputedStyle(this[0], null).getPropertyValue(e)\r\n                    }\r\n                    if (2 === arguments.length && \"string\" == typeof e) {\r\n                        for (t = 0; t < this.length; t++) this[t].style[e] = a;\r\n                        return this\r\n                    }\r\n                    return this\r\n                },\r\n                each: function(e) {\r\n                    for (var a = 0; a < this.length; a++) e.call(this[a], a, this[a]);\r\n                    return this\r\n                },\r\n                html: function(e) {\r\n                    if (\"undefined\" == typeof e) return this[0] ? this[0].innerHTML : void 0;\r\n                    for (var a = 0; a < this.length; a++) this[a].innerHTML = e;\r\n                    return this\r\n                },\r\n                is: function(t) {\r\n                    if (!this[0]) return !1;\r\n                    var r, s;\r\n                    if (\"string\" == typeof t) {\r\n                        var i = this[0];\r\n                        if (i === document) return t === document;\r\n                        if (i === window) return t === window;\r\n                        if (i.matches) return i.matches(t);\r\n                        if (i.webkitMatchesSelector) return i.webkitMatchesSelector(t);\r\n                        if (i.mozMatchesSelector) return i.mozMatchesSelector(t);\r\n                        if (i.msMatchesSelector) return i.msMatchesSelector(t);\r\n                        for (r = a(t), s = 0; s < r.length; s++)\r\n                            if (r[s] === this[0]) return !0;\r\n                        return !1\r\n                    }\r\n                    if (t === document) return this[0] === document;\r\n                    if (t === window) return this[0] === window;\r\n                    if (t.nodeType || t instanceof e) {\r\n                        for (r = t.nodeType ? [t] : t, s = 0; s < r.length; s++)\r\n                            if (r[s] === this[0]) return !0;\r\n                        return !1\r\n                    }\r\n                    return !1\r\n                },\r\n                index: function() {\r\n                    if (this[0]) {\r\n                        for (var e = this[0], a = 0; null !== (e = e.previousSibling);) 1 === e.nodeType && a++;\r\n                        return a\r\n                    }\r\n                    return void 0\r\n                },\r\n                eq: function(a) {\r\n                    if (\"undefined\" == typeof a) return this;\r\n                    var t, r = this.length;\r\n                    return a > r - 1 ? new e([]) : 0 > a ? (t = r + a, new e(0 > t ? [] : [this[t]])) : new e([this[a]])\r\n                },\r\n                append: function(a) {\r\n                    var t, r;\r\n                    for (t = 0; t < this.length; t++)\r\n                        if (\"string\" == typeof a) {\r\n                            var s = document.createElement(\"div\");\r\n                            for (s.innerHTML = a; s.firstChild;) this[t].appendChild(s.firstChild)\r\n                        } else if (a instanceof e)\r\n                        for (r = 0; r < a.length; r++) this[t].appendChild(a[r]);\r\n                    else this[t].appendChild(a);\r\n                    return this\r\n                },\r\n                prepend: function(a) {\r\n                    var t, r;\r\n                    for (t = 0; t < this.length; t++)\r\n                        if (\"string\" == typeof a) {\r\n                            var s = document.createElement(\"div\");\r\n                            for (s.innerHTML = a, r = s.childNodes.length - 1; r >= 0; r--) this[t].insertBefore(s.childNodes[r], this[t].childNodes[0])\r\n                        } else if (a instanceof e)\r\n                        for (r = 0; r < a.length; r++) this[t].insertBefore(a[r], this[t].childNodes[0]);\r\n                    else this[t].insertBefore(a, this[t].childNodes[0]);\r\n                    return this\r\n                },\r\n                insertBefore: function(e) {\r\n                    for (var t = a(e), r = 0; r < this.length; r++)\r\n                        if (1 === t.length) t[0].parentNode.insertBefore(this[r], t[0]);\r\n                        else if (t.length > 1)\r\n                        for (var s = 0; s < t.length; s++) t[s].parentNode.insertBefore(this[r].cloneNode(!0), t[s])\r\n                },\r\n                insertAfter: function(e) {\r\n                    for (var t = a(e), r = 0; r < this.length; r++)\r\n                        if (1 === t.length) t[0].parentNode.insertBefore(this[r], t[0].nextSibling);\r\n                        else if (t.length > 1)\r\n                        for (var s = 0; s < t.length; s++) t[s].parentNode.insertBefore(this[r].cloneNode(!0), t[s].nextSibling)\r\n                },\r\n                next: function(t) {\r\n                    return new e(this.length > 0 ? t ? this[0].nextElementSibling && a(this[0].nextElementSibling).is(t) ? [this[0].nextElementSibling] : [] : this[0].nextElementSibling ? [this[0].nextElementSibling] : [] : [])\r\n                },\r\n                nextAll: function(t) {\r\n                    var r = [],\r\n                        s = this[0];\r\n                    if (!s) return new e([]);\r\n                    for (; s.nextElementSibling;) {\r\n                        var i = s.nextElementSibling;\r\n                        t ? a(i).is(t) && r.push(i) : r.push(i), s = i\r\n                    }\r\n                    return new e(r)\r\n                },\r\n                prev: function(t) {\r\n                    return new e(this.length > 0 ? t ? this[0].previousElementSibling && a(this[0].previousElementSibling).is(t) ? [this[0].previousElementSibling] : [] : this[0].previousElementSibling ? [this[0].previousElementSibling] : [] : [])\r\n                },\r\n                prevAll: function(t) {\r\n                    var r = [],\r\n                        s = this[0];\r\n                    if (!s) return new e([]);\r\n                    for (; s.previousElementSibling;) {\r\n                        var i = s.previousElementSibling;\r\n                        t ? a(i).is(t) && r.push(i) : r.push(i), s = i\r\n                    }\r\n                    return new e(r)\r\n                },\r\n                parent: function(e) {\r\n                    for (var t = [], r = 0; r < this.length; r++) e ? a(this[r].parentNode).is(e) && t.push(this[r].parentNode) : t.push(this[r].parentNode);\r\n                    return a(a.unique(t))\r\n                },\r\n                parents: function(e) {\r\n                    for (var t = [], r = 0; r < this.length; r++)\r\n                        for (var s = this[r].parentNode; s;) e ? a(s).is(e) && t.push(s) : t.push(s), s = s.parentNode;\r\n                    return a(a.unique(t))\r\n                },\r\n                find: function(a) {\r\n                    for (var t = [], r = 0; r < this.length; r++)\r\n                        for (var s = this[r].querySelectorAll(a), i = 0; i < s.length; i++) t.push(s[i]);\r\n                    return new e(t)\r\n                },\r\n                children: function(t) {\r\n                    for (var r = [], s = 0; s < this.length; s++)\r\n                        for (var i = this[s].childNodes, n = 0; n < i.length; n++) t ? 1 === i[n].nodeType && a(i[n]).is(t) && r.push(i[n]) : 1 === i[n].nodeType && r.push(i[n]);\r\n                    return new e(a.unique(r))\r\n                },\r\n                remove: function() {\r\n                    for (var e = 0; e < this.length; e++) this[e].parentNode && this[e].parentNode.removeChild(this[e]);\r\n                    return this\r\n                },\r\n                add: function() {\r\n                    var e, t, r = this;\r\n                    for (e = 0; e < arguments.length; e++) {\r\n                        var s = a(arguments[e]);\r\n                        for (t = 0; t < s.length; t++) r[r.length] = s[t], r.length++\r\n                    }\r\n                    return r\r\n                }\r\n            }, a.fn = e.prototype, a.unique = function(e) {\r\n                for (var a = [], t = 0; t < e.length; t++) - 1 === a.indexOf(e[t]) && a.push(e[t]);\r\n                return a\r\n            }, a\r\n        }()), s = [\"jQuery\", \"Zepto\", \"Dom7\"], i = 0; i < s.length; i++) window[s[i]] && e(window[s[i]]);\r\n    var n;\r\n    n = \"undefined\" == typeof r ? window.Dom7 || window.Zepto || window.jQuery : r, n && (\"transitionEnd\" in n.fn || (n.fn.transitionEnd = function(e) {\r\n        function a(i) {\r\n            if (i.target === this)\r\n                for (e.call(this, i), t = 0; t < r.length; t++) s.off(r[t], a)\r\n        }\r\n        var t, r = [\"webkitTransitionEnd\", \"transitionend\", \"oTransitionEnd\", \"MSTransitionEnd\", \"msTransitionEnd\"],\r\n            s = this;\r\n        if (e)\r\n            for (t = 0; t < r.length; t++) s.on(r[t], a);\r\n        return this\r\n    }), \"transform\" in n.fn || (n.fn.transform = function(e) {\r\n        for (var a = 0; a < this.length; a++) {\r\n            var t = this[a].style;\r\n            t.webkitTransform = t.MsTransform = t.msTransform = t.MozTransform = t.OTransform = t.transform = e\r\n        }\r\n        return this\r\n    }), \"transition\" in n.fn || (n.fn.transition = function(e) {\r\n        \"string\" != typeof e && (e += \"ms\");\r\n        for (var a = 0; a < this.length; a++) {\r\n            var t = this[a].style;\r\n            t.webkitTransitionDuration = t.MsTransitionDuration = t.msTransitionDuration = t.MozTransitionDuration = t.OTransitionDuration = t.transitionDuration = e\r\n        }\r\n        return this\r\n    }));\r\n\r\n    sbLib.base.swiper = t;\r\n});\r\n",
    "_common/ajaxData.js": "/**\r\n * @description ajax请求数据(默认get)\r\n * @ajaxData(param1[,param2])\r\n * @param1 {Object}    $.ajax() settings对象\r\n * @param2 {Function}  fn(data)请求成功时的回调函数\r\n *                     data:返回的\"内容\"\r\n * @author ccw\r\n */\r\ndefine('_common/ajaxData',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n\r\n    function ajaxData(options, cb) {\r\n        var defaults = {\r\n            type: 'get',\r\n            success: function(data) {\r\n                if (typeof cb === \"function\")\r\n                    cb(data);\r\n            },\r\n            cache: false,\r\n            dataType: 'json'\r\n        };\r\n        if (!options.url) {\r\n            var curl = location.protocol + \"//\" + location.host;\r\n            options.url = curl + '/proxy?domain=' + options.domain + '&act=' + options.act + '&op=' + options.op;\r\n        }\r\n        var option = $.extend({}, defaults, options);\r\n        $.ajax(option);\r\n    }\r\n    sbLib.common.ajaxData = ajaxData;\r\n});\r\n",
    "_common/checkAgent.js": "/**\r\n * @fileOverview 检查手机系统\r\n * @author pjg\r\n * @description 检查手机系统\r\n */\r\ndefine('_common/checkAgent',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    /* 检查手机系统 */\r\n    function checkAgent() {\r\n        var os;\r\n        var UA = navigator.userAgent;\r\n        if (/(iPhone)/i.test(UA)) {\r\n            os = 'iPhone';\r\n            if (/(YaoLanExpect)/i.test(UA)) os = 'iPhone_YaoLan';\r\n        } else if (/(iOS)/i.test(UA)) {\r\n            os = 'iOS';\r\n            if (/(YaoLanExpect)/i.test(UA)) os = 'iOS_YaoLan';\r\n        } else if (/(Android)/i.test(UA)) {\r\n            os = 'Android';\r\n            if (/(YaoLanExpect)/i.test(UA)) os = 'Android_YaoLan';\r\n        } else {\r\n            os = '';\r\n        }\r\n        return os;\r\n    }\r\n    sbLib.common.checkAgent = checkAgent;\r\n});\r\n",
    "_common/checkLogin.js": "/**\r\n * @fileOverview 根据结果判断是否登录\r\n * @author yy\r\n * @description 根据结果判断是否登录\r\n */\r\ndefine('_common/checkLogin',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n\r\n    function checkLogin(result) {\r\n        var _data = result.data || {};\r\n        var state = parseInt(_data.login, 10);\r\n        if (~~result.code == 12021 || state === 0) { //请求成功\r\n            var _href = window.location.href;\r\n            var _url = location.protocol + \"//\" + location.host;\r\n            _url = _url + '/auth/index.html?';\r\n            window.location.href = _url + 'backUrl=' + encodeURIComponent(_href);\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n    sbLib.common.checkLogin = checkLogin;\r\n});\r\n",
    "_common/checkMember.js": "/**\r\n * @fileOverview 检测用户是否登录\r\n * @author yy\r\n * @description 检测用户是否登录\r\n * @return {Boolean} 是否已登录\r\n */\r\n define('_common/checkMember',['_base/docCookies'],function(){\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.common = sbLib.common || {};\r\n\r\n    Cookie = sbLib.base.docCookies;\r\n\r\n    function checkMember() {\r\n        var key = Cookie.getItem('key');\r\n        if (!!key) {\r\n            return true;\r\n        } else {\r\n            var _href = location.href;\r\n            var _url = location.protocol + \"//\" + location.host;\r\n            _url = _url +'/auth/index.html?';\r\n            window.location.href = _url + 'backUrl=' + encodeURIComponent(_href);\r\n            return false;\r\n        }\r\n    }\r\n    sbLib.common.checkMember = checkMember;\r\n });\r\n",
    "_common/delUserCookie.js": "/**\r\n * @fileOverview cookies 操作\r\n * @author yy\r\n * @description user cookies 操作\r\n */\r\n define('_common/delUserCookie',['_base/docCookies'],function(){\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.common = sbLib.common || {};\r\n    var Cookie = sbLib.base.docCookies;\r\n\r\n    function delUserCookie(result,type) {\r\n        Cookie.delCookie('key');\r\n        Cookie.removeItem(\"key\", '/', '.shenba.com');\r\n        Cookie.removeItem(\"username\", '/', '.shenba.com');\r\n        Cookie.removeItem(\"memberid\", '/', '.shenba.com');\r\n        Cookie.removeItem('yaolan_login', '/', '.shenba.com');\r\n        Cookie.removeItem('yaolan_appUserInfo', '/', '.shenba.com');\r\n        Cookie.removeItem('F088_user_name', '/', '.shenba.com');\r\n    }\r\n\r\n    sbLib.common.delUserCookie = delUserCookie;\r\n });\r\n",
    "_common/getDomain.js": "/**\r\n * @fileOverview 检查环境\r\n * @author yy\r\n * @description 检查是哪个环境（local test rc www）\r\n */\r\ndefine('_common/getDomain',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    // 检查环境\r\n    function getDomain() {\r\n        return location.host.replace('h5.shenba.com', '').replace('m.shenba.com', '');\r\n    }\r\n\r\n    sbLib.common.getDomain = getDomain;\r\n});\r\n",
    "_common/getQueryString.js": "/**\r\n * @fileOverview 获取某个查询\r\n * @author yy\r\n * @description 从url中 获取某个查询\r\n */\r\ndefine('_common/getQueryString',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    var win = window;\r\n\r\n    /*获取某个查询*/\r\n    function GetQueryString(name) {\r\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n        var r = win.location.search.substr(1).match(reg);\r\n        if (r !== null) return unescape(r[2]);\r\n        return null;\r\n    }\r\n\r\n    sbLib.common.getQueryString = GetQueryString;\r\n});\r\n",
    "_common/goTop.js": "/**\r\n * @fileOverview 回到顶部\r\n * @author yy\r\n * @description 回到顶部执行模块\r\n */\r\ndefine('_common/goTop',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    var exports = {\r\n        //回到顶部方法\r\n        tpl: '<span class=\"icon icon-top go-top\" id=\"goTop\"></span>',\r\n        goTop: function() {\r\n            var _self = exports,\r\n                _topElem;\r\n\r\n            _self.$body.append(_self.tpl);\r\n\r\n            _topElem = $('#goTop');\r\n\r\n            _topElem.on('touchend', function(e) {\r\n                _self.$win.scrollTop(0);\r\n                e.preventDefault();\r\n            });\r\n\r\n            function checkTop() {\r\n                var _top = _self.$win.scrollTop();\r\n\r\n                if (_top > 20) {\r\n                    _topElem.addClass('show');\r\n                } else {\r\n                    _topElem.removeClass('show');\r\n                }\r\n            }\r\n\r\n            _self.$win.on('scroll', function() {\r\n                checkTop();\r\n            });\r\n\r\n            checkTop();\r\n\r\n        },\r\n        // tap事件之后触发一个蒙层，解决点击穿透的问题\r\n        tapFix: function(){\r\n            var _self = exports;\r\n            var $maskTpl = $(\"<div class='tap-mask'> <div>\");\r\n            $maskTpl.appendTo(_self.$body)\r\n            setTimeout(function(){\r\n                _self.$body.remove($maskTpl);\r\n            },350)\r\n        },\r\n        $win: $(window),\r\n        $body: $('body')\r\n    };\r\n\r\n    sbLib.common.goTop = exports.goTop;\r\n});\r\n",
    "_common/historyState.js": "/**\r\n * @fileOverview history状态控制模块\r\n * @author pjg\r\n * @description history控制模块,可动态改变地址栏，并作出相应操作\r\n * @eg:\r\n *  sbLib.common.historyState.init({\r\n *  \ttitle: document.title,\r\n *  \turl: location.href,\r\n *  \tchanged: function(){\r\n *  \t\t//do something\r\n *  \t}\r\n *  });\r\n */\r\ndefine('_common/historyState',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    /**\r\n     * 是否为微信\r\n     * @return {Boolean} true=微信\r\n     */\r\n    var historyState = {\r\n        init: function(opt) {\r\n            var _opt = {};\r\n            _opt.title = opt.title || document.title;\r\n            _opt.url = opt.url || location.href.toString();\r\n            _opt.changed = opt.changed || function(){};\r\n            historyState._state(_opt.title, _opt.url);\r\n            historyState._listen(_opt.changed);\r\n        },\r\n        _state: function(title, url) { //无刷新改变URL\r\n            if (window.history.pushState) {\r\n                window.history.pushState({\r\n                    title: title,\r\n                    url: url\r\n                }, title, url);\r\n            } else {\r\n                location.href = url;\r\n            }\r\n            document.title = title;\r\n        },\r\n        _listen: function(changed) { //监听地址\r\n            window.addEventListener('popstate', function(e) {\r\n                if (e.state) {\r\n                    //根据url值进行相应操作\r\n                    changed && changed(e.state.url)\r\n                }\r\n            }, false);\r\n        }\r\n    };\r\n\r\n    sbLib.common.historyState = historyState;\r\n});\r\n",
    "_common/isEmptyObject.js": "/**\r\n * @description 判断一个对象是否为空\r\n * @author PJG\r\n */\r\n define('_common/isEmptyObject',function(){\r\n     var sbLib = window.sbLib || (window.sbLib = {});\r\n     sbLib.common = sbLib.common || {};\r\n    function isEmptyObject(obj) {\r\n        for(var name in obj){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    sbLib.common.isEmptyObject = isEmptyObject;\r\n});\r\n",
    "_common/isShenBaApp.js": "/**\r\n * @fileOverview 判断是否是神爸的app\r\n * @author pjg\r\n * @description 判断是否是神爸的app\r\n */\r\ndefine('_common/isShenBaApp',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n\r\n    function isShenBaApp() {\r\n        var os;\r\n        var UA = navigator.userAgent;\r\n        if (/(ShenBaApp_Android)/i.test(UA)) {\r\n            os = 'Android_ShenBa';\r\n        } else if (/(ShenBaApp_ios)/i.test(UA)) {\r\n            os = 'iOS_ShenBa';\r\n        } else {\r\n            os = '';\r\n        };\r\n        return os;\r\n    }\r\n\r\n    sbLib.common.isShenBaApp = isShenBaApp;\r\n});\r\n",
    "_common/isWeixin.js": "/**\r\n * @fileOverview 判断是否微信打开\r\n * @author yy\r\n * @description 判断是否微信打开\r\n * @return {Boolean} true=微信\r\n */\r\ndefine('_common/isWeixin',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    /**\r\n     * 是否为微信\r\n     * @return {Boolean} true=微信\r\n     */\r\n    function isWeixin() {\r\n        var ua = navigator.userAgent.toLowerCase();\r\n        if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    sbLib.common.isWeixin = isWeixin;\r\n});\r\n",
    "_common/isYaoLanApp.js": "/**\r\n * @fileOverview 判断是否是神爸的app\r\n * @author pjg\r\n * @description 判断是否是神爸的app\r\n */\r\ndefine('_common/isYaoLanApp',['_common/checkAgent'],function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n\r\n    /*判断是否是摇篮App*/\r\n    function isYaoLanApp() {\r\n        var res = sbLib.common.checkAgent();\r\n        if (res !== '' && res.indexOf('_YaoLan') > 0) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    sbLib.common.isYaoLanApp = isYaoLanApp;\r\n});\r\n",
    "_common/objectCallFunction.js": "/* 模块通用 */\r\ndefine('_common/objectCallFunction',function () {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    /**\r\n     * 对象-调用对象自身函数\r\n     * @param1 {Object} 调用的对象\r\n     * @params {arguments} 调用的对象的方法名\r\n     */\r\n    var objectCallFunction = function (obj) {\r\n        var fn;\r\n        for (var i = 1; i < arguments.length; i++) {\r\n            fn = obj[arguments[i]];\r\n            if (typeof fn === 'function') {\r\n                fn();\r\n            }\r\n        }\r\n    };\r\n\r\n    sbLib.common.objectCallFunction = objectCallFunction;\r\n});\r\n",
    "_common/outIframe.js": "/**\r\n * @description 跳出iframe\r\n * @author hzl\r\n */\r\n define('_common/outIframe',function(){\r\n     var sbLib = window.sbLib || (window.sbLib = {});\r\n     sbLib.common = sbLib.common || {};\r\n    function outIframe() {\r\n        try{\r\n            var href = $(\"#iframe\")[0].contentWindow.location.href;\r\n            // console.log(href);\r\n            if(parent && parent.goToWin){\r\n                parent.goToWin();\r\n            }\r\n        }catch(e){}\r\n    }\r\n    sbLib.common.outIframe = outIframe;\r\n});\r\n",
    "_common/setObjVariable.js": "/* 模块通用 */\r\ndefine('_common/setObjVariable',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    /*\r\n     * 设置变量 将指定setStr转换为obj.$xxx的变量\r\n     * --------通常转换为固定的元素id或一系列的类\r\n     * @param1 {Object} Javascript简单对象\r\n     * @param2 {String} 转换的字符串,号分割  如\"a,b,c,d\"\r\n     * @param3 {String} 过滤字符串\r\n                        如:$(\"#mybutton1\") 如果该参数为\"my\"\r\n                        则:obj.$button1为转换的变量,否则为obj.$mybutton1\r\n     */\r\n    var setObjVariable = function(obj, setStr, filter) {\r\n        if (setStr != undefined) {\r\n            if (typeof setStr == \"string\") {\r\n                setStr = setStr.split(',');\r\n                var tag = '#';\r\n                for (var i = 0; i < setStr.length; i++) {\r\n                    var rpoptoin = setStr[i];\r\n                    if (filter) {\r\n                        rpoptoin = rpoptoin.replace(filter, '');\r\n                    }\r\n                    if (setStr[i].indexOf('.') >= 0) {\r\n                        rpoptoin = rpoptoin.replace(/\\./ig, '');\r\n                        tag = '';\r\n                    }\r\n                    obj[\"$\" + rpoptoin] = $(tag + setStr[i]);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    sbLib.common.setObjVariable = setObjVariable;\r\n});\r\n",
    "_common/setUserCookie.js": "/**\r\n * @fileOverview cookies 操作\r\n * @author yy\r\n * @description user cookies 操作\r\n */\r\n define('_common/setUserCookie',['_base/docCookies'],function(){\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.common = sbLib.common || {};\r\n    var Cookie = sbLib.base.docCookies;\r\n\r\n    // 写入用户信息到cookie\r\n    function setUserCookie(userData, time) {\r\n        if (userData.accessToken === '') return false;\r\n        var _time = time || 43200;\r\n        Cookie.setItem(\"username\", userData.user, _time, '/', '.shenba.com');\r\n        Cookie.setItem(\"key\", userData.accessToken, _time, '/', '.shenba.com');\r\n        Cookie.setItem(\"memberid\", userData.member_id, _time, '/', '.shenba.com');\r\n    }\r\n\r\n    sbLib.common.setUserCookie = setUserCookie;\r\n });\r\n",
    "_common/tapFix.js": "/**\r\n * @fileOverview tapFix\r\n * @author pjg\r\n * @description 修复tap事件的穿透问题\r\n */\r\ndefine('_common/tapFix',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    var main = {\r\n        //回到顶部方法\r\n        tpl: '<div class=\"tap-mask\"> <div>',\r\n        $body: $('body'),\r\n        // tap事件之后触发一个蒙层，解决点击穿透的问题\r\n        tapFix: function() {\r\n            var _self = main;\r\n            var $tpl = $(_self.tpl);\r\n            $tpl.appendTo(_self.$body);\r\n            setTimeout(function() {\r\n                // console.log($tpl);\r\n                // $tpl.remove();\r\n            }, 350);\r\n        }\r\n    };\r\n\r\n    sbLib.common.tapFix = main.tapFix;\r\n});\r\n",
    "_common/tplBottomBar.js": "/**\r\n * @fileOverview 底部图标渲染\r\n * @author YY/PJG\r\n * @description 底部图标渲染\r\n */\r\n\r\ndefine('_common/tplBottomBar',['vmcore','_tpl/bottomBar','_base/storage'],function(vmcore, iTpl) {\r\n\r\n    var iconsData = [{\r\n        targetUrl: \"/\",\r\n        title: \"首页\",\r\n        class: \"icon-my-home\",\r\n        bgImg: \"\",\r\n        flag: \"index\"\r\n    }, {}, {}, {\r\n        targetUrl: \"/cart/index.html\",\r\n        title: \"购物车\",\r\n        class: \"icon-cart\",\r\n        bgImg: \"\",\r\n        flag: \"cart\"\r\n    }, {\r\n        targetUrl: \"/user/index.html\",\r\n        title: \"我的\",\r\n        class: \"icon-mama\",\r\n        bgImg: \"\",\r\n        flag: \"user\"\r\n    }];\r\n    function toArray(obj) {\r\n      return Array.prototype.slice.call(obj);\r\n    }\r\n    var main = {\r\n        href: window.location.href,\r\n        /*\r\n         * @description 初始化方法\r\n         */\r\n        init: function() {\r\n            var _self = main,\r\n                _icons = sbLib.base.storage.get('ficons') || [],\r\n                _shenbaApp = sbLib.common.isShenBaApp();\r\n            if (_shenbaApp === 'Android_ShenBa' || _shenbaApp === 'iOS_ShenBa') {\r\n                return false;\r\n            }\r\n\r\n            //判断更新数据的条件 如果是没有保存数据或者带有 data-reicon=1 的都会进行重新请求数据\r\n            if (!_icons.length || $('body').attr('data-reicon') == 1) {\r\n                _self.getData();\r\n            } else if (!$('body').hasClass('no-footer')) {\r\n                _self.changeData(_icons);\r\n                _self.tplBar();\r\n            }\r\n        },\r\n        /*\r\n         * @description 获取数据\r\n         */\r\n        getData: function() {\r\n            var _self = main;\r\n\r\n            sbLib.common.ajaxData({\r\n                domain: \"pc\",\r\n                act: \"index\",\r\n                op: \"button\"\r\n            }, function(result) {\r\n                var _result = result || {\r\n                        code: 0,\r\n                        data: {\r\n                            icons: []\r\n                        }\r\n                    }, //如果不存在则定义一个对象code:0可以往下执行\r\n                    _code = parseInt(_result.code, 10),\r\n                    _icons;\r\n                if (_code !== 0) return false;\r\n\r\n                _icons = _result.data.icons || [];\r\n\r\n                _self.changeData(_icons);\r\n\r\n                sbLib.base.storage.set(\"ficons\", JSON.stringify(_icons));\r\n                //渲染\r\n                _self.tplBar();\r\n            });\r\n        },\r\n        /*\r\n         * @description 渲染数据\r\n         */\r\n        tplBar: function() {\r\n            vmcore.templateCache[\"bottomBar.html\"] = iTpl.main;\r\n            _VM_.bottomBar = vmcore.define({\r\n                $id: 'bottomBar',\r\n                tpl: 'bottomBar.html',\r\n                list: iconsData,\r\n                cartCount: cartCount || 0\r\n            });\r\n\r\n            vmcore.scan('', _VM_.bottomBar);\r\n            $('body').css('padding-bottom', '1rem');\r\n            // debugger\r\n            $('#goTop').css({\r\n                'bottom': '1.25rem'\r\n            });\r\n        },\r\n        getModeName: function() {\r\n            var _mode = $('body').attr('data-icon') || '';\r\n            // 按钮选中状态判断\r\n            if (_mode) {\r\n                return _mode;\r\n            } else {\r\n                switch (true) {\r\n                    case (main.href.indexOf('/user/') > -1):\r\n                        _mode = 'user';\r\n                        break;\r\n                    case (main.href.indexOf('/product_list.html') > -1):\r\n                        var special_id = sbLib.common.getQueryString('special_id')\r\n                        _mode = 'list' + special_id;\r\n                        break;\r\n                    case (main.href.indexOf('/auth/') > -1):\r\n                        _mode = 'user';\r\n                        break;\r\n                    case (main.href.indexOf('/cart/') > -1):\r\n                        _mode = 'cart';\r\n                        break;\r\n                }\r\n                return _mode;\r\n            }\r\n\r\n\r\n        },\r\n        getListFlag:function(url){\r\n            params = sbLib.common.urlParse(url).params\r\n            if(params&&params.special_id){\r\n                return 'list' + params.special_id;\r\n            }else{\r\n                return ''\r\n            }\r\n        },\r\n        /*\r\n         * @description 转换数据\r\n         * @param {Array} icons 图标数据\r\n         */\r\n        changeData: function(icons) {\r\n            var _self = main,\r\n                _mode = _self.getModeName();\r\n            if (icons.length > 3) {\r\n                // 改变 2 3位置的数据，1 4 5位置是固定的\r\n                iconsData[1] = icons[3];\r\n                iconsData[1]['flag'] = _self.getListFlag(iconsData[1].targetUrl);\r\n                iconsData[2] = icons[4];\r\n                iconsData[2]['flag'] = _self.getListFlag(iconsData[2].targetUrl);\r\n            }\r\n\r\n            $.each(iconsData, function(index, item) {\r\n                var _class = \"\",\r\n                    _title = item.title;\r\n\r\n                item.active = _mode === item.flag ? true : false;\r\n\r\n                //如果_mode 不存在 则判断url\r\n                if (!_mode) {\r\n                    if (_self.href.indexOf(item.targetUrl) > -1) {\r\n                        item.active = true;\r\n                    }\r\n                }\r\n\r\n                //判断是否为 字体图标\r\n                if (!item.class) {\r\n                    item.class = ' no-font';\r\n                    //判断是否为激活状态 激活状态下使用 iconUrl 否则使用 imageUrl\r\n                    if (item.active) {\r\n                        item.bgImg = \"url(\" + item.iconUrl + \")\";\r\n                    } else {\r\n                        item.bgImg = \"url(\" + item.imageUrl + \")\";\r\n                    }\r\n                }\r\n\r\n                // 替换为默认图标\r\n                if (item.title.indexOf('纸尿裤') != -1) {\r\n                    item.class = ' icon-diaper';\r\n                    item.bgImg = '';\r\n                }\r\n                if (item.title.indexOf('宝宝') != -1) {\r\n                    item.class = ' icon-baby';\r\n                    item.bgImg = '';\r\n                }\r\n\r\n                //判断是否有title  如果没有title则为显示大图标\r\n                if (_title === '0' || !_title) {\r\n                    item.class += ' big-icon';\r\n                    item.title = \"\";\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n    };\r\n\r\n    sbLib.common.tplBottomBar = main;\r\n});\r\n",
    "_common/urlParse.js": "/**\r\n * @fileOverview url解析函数\r\n *\r\n * @param  {String} url 需要解析的url\r\n * @return {Object} url被解析后的参数对象\r\n */\r\ndefine('_common/urlParse',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {}),doc = document;\r\n    sbLib.common = sbLib.common || {};\r\n    function urlParse(url) {\r\n        var a = doc.createElement('a');\r\n        a.href = url;\r\n        return {\r\n            source: a.href,\r\n            protocol: a.protocol.replace(':', ''),\r\n            host: a.hostname,\r\n            port: a.port,\r\n            query: a.search.replace('?', ''),\r\n            params: (function() {\r\n                var ret = {},\r\n                    seg = a.search.replace(/^\\?/, '').split('&'),\r\n                    len = seg.length,\r\n                    i = 0,\r\n                    s;\r\n                for (; i < len; i++) {\r\n                    if (!seg[i]) {\r\n                        continue;\r\n                    }\r\n                    s = seg[i].split('=');\r\n                    ret[s[0]] = s[1];\r\n                }\r\n                return ret;\r\n            })(),\r\n            file: (a.pathname.match(/\\/([^\\/?#]+)$/i) || [, ''])[1],\r\n            hash: a.hash.replace('#', ''),\r\n            path: a.pathname.replace(/^([^\\/])/, '/$1'),\r\n            relative: (a.href.match(/tps?:\\/\\/[^\\/]+(.+)/) || [, ''])[1],\r\n            segments: a.pathname.replace(/^\\//, '').split('/')\r\n        };\r\n    }\r\n\r\n    sbLib.common.urlParse = urlParse;\r\n});\r\n",
    "_common/wxGetSign.js": "/**\r\n * @fileOverview 微信操作\r\n * @author yy\r\n * @description 微信操作\r\n */\r\ndefine('_common/wxGetSign',function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    // 微信分享的数据\r\n    var wxData = {\r\n        title: $('title').html(),\r\n        desc: $('title').html(),\r\n        link: '',\r\n        imgUrl: '',\r\n        type: '',\r\n        dataUrl: '',\r\n        success: function() {\r\n            console.log('data');\r\n\r\n            exports.closeTips();\r\n        }\r\n    };\r\n    // 配置数据\r\n    var wxConfigData = {\r\n        debug: false, //调试的时候最好设为true，它每一步都会alert数据出来，让你知道出了什么问题\r\n        appId: 'wx49b0da63eb8a0232',\r\n        timestamp: 1438134491, //随便填写一串数字\r\n        nonceStr: 'bCIV44Ta73aLhiLg', //随便一字符串\r\n        signature: '', //**这个要到服务器获取**\r\n        jsApiList: [ //用到的功能，自定义\r\n            'checkJsApi',\r\n            'onMenuShareTimeline',\r\n            'onMenuShareAppMessage',\r\n            'onMenuShareQQ',\r\n            'onMenuShareWeibo',\r\n            'hideOptionMenu',\r\n            'showOptionMenu'\r\n        ]\r\n    };\r\n\r\n    var exports = {\r\n        //初始化方法\r\n        init: function() {\r\n            var _self = this;\r\n            _self.getSign();\r\n        },\r\n        initEvent: function() {\r\n            var _self = this;\r\n            // 配置参数\r\n            wx.config(wxConfigData);\r\n            // 分享\r\n            wx.ready(function() {\r\n                _self.addShare();\r\n            });\r\n            wx.error(function(res) {\r\n                console.log(res);\r\n            });\r\n        },\r\n        /*\r\n         * @description 获取sign\r\n         */\r\n        getSign: function() {\r\n            var data1 = {},\r\n                _self = this;\r\n            data1[\"timestamp\"] = wxConfigData[\"timestamp\"];\r\n            data1[\"nonceStr\"] = wxConfigData[\"nonceStr\"];\r\n            data1[\"url\"] = encodeURIComponent(location.href.split('#')[0]);\r\n\r\n            return $.post(\"/service/getWeiXinSignature?ran=\" + Math.random(), data1, function(res) {\r\n                // 返回{sign:xxx}\r\n                var _data = eval(\"(\" + res + \")\");\r\n                if (_data[\"sign\"]) {\r\n                    // 获取签名成功，初始化分享\r\n                    wxConfigData[\"signature\"] = _data[\"sign\"];\r\n                    _self.initEvent();\r\n                }\r\n            });\r\n        },\r\n        /*\r\n         * @description 分享绑定\r\n         * @param {Object} data 分享数据\r\n         */\r\n        addShare: function(data) {\r\n            var _data = $.extend(wxData, data);\r\n\r\n            wx.onMenuShareTimeline(wxData);\r\n            wx.onMenuShareAppMessage(wxData);\r\n            wx.onMenuShareQQ(wxData);\r\n            wx.onMenuShareWeibo(wxData);\r\n        },\r\n        _elem: null,\r\n\r\n        /*\r\n         * @description 初始化\r\n         */\r\n        initTips: function() {\r\n            var _html = '<div class=\"wx-guide\"><div class=\"con\"></div></div>',\r\n                _elem = $(_html),\r\n                _self = this;\r\n\r\n            if (!_self._elem) {\r\n                $('body').append(_elem);\r\n                _self._elem = _elem;\r\n                _self._elem.on('click', function() {\r\n                    _self.closeTips();\r\n                });\r\n            }\r\n        },\r\n        /*\r\n         * @description 遮罩层显示\r\n         */\r\n        showTips: function() {\r\n            if (this._elem) {\r\n                this._elem.show();\r\n            }\r\n\r\n        },\r\n        /*\r\n         * @description 遮罩层隐藏\r\n         */\r\n        closeTips: function() {\r\n            if (this._elem) {\r\n                this._elem.hide();\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    //执行，获取签名\r\n    sbLib.common.wxGetSign = exports;\r\n})\r\n",
    "_common/yaoLan.js": "/**\r\n * @fileOverview 摇篮js\r\n * @author PJG\r\n * @description 摇篮js\r\n */\r\ndefine('_common/yaoLan',['_base/docCookies','_common/delUserCookie','_common/isYaoLanApp'],function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.common = sbLib.common || {};\r\n    Cookie = sbLib.base.docCookies;\r\n    var yaoLan = {\r\n        /*判断是否是摇篮App*/\r\n        isYaoLanApp: sbLib.common.isYaoLanApp,\r\n        // 删除用户cookie\r\n        delUserCookie: sbLib.common.delUserCookie,\r\n        /*摇篮APP JDK api*/\r\n        ylApi: window.yl || {},\r\n        /*全新的H5代理封装*/\r\n        newProxy: function() {\r\n            if (!arguments[0]) {　　\r\n                return false;　　\r\n            }\r\n            var oArgs = arguments[0];\r\n            var op = oArgs.data.op;\r\n            if (!op) {\r\n                alert('缺少参数');\r\n                return false;\r\n            }\r\n            var _url = \"/proxy\";\r\n            $.ajax({\r\n                url: _url,\r\n                type: oArgs.type || 'GET',\r\n                data: oArgs.data,\r\n                dataType: oArgs.dataType || \"json\",\r\n                async: oArgs.async || false,\r\n                success: function(res) {\r\n                    oArgs.success && oArgs.success(res);\r\n                },\r\n                error: function() {\r\n                    oArgs.error && oArgs.error(res);\r\n                }\r\n            });\r\n        },\r\n        // 新代理的POST封装\r\n        _post: function(datas, cb) {\r\n            var _opt = {};\r\n            _opt.type = 'POST';\r\n            _opt.data = datas;\r\n            _opt.success = cb;\r\n            yaoLan.newProxy(_opt);\r\n        },\r\n        // 新代理的GET封装\r\n        _get: function(datas, cb) {\r\n            var _opt = {};\r\n            _opt.data = datas;\r\n            _opt.success = cb;\r\n            yaoLan.newProxy(_opt);\r\n        },\r\n        // 获取摇篮app用户信息\r\n        getYaoLanUserInfo: function(uid, cb) {\r\n            var _datas = {\r\n                domain: 'passports',\r\n                act: 'ylpassport',\r\n                op: 'login',\r\n                userid: uid\r\n            };\r\n            yaoLan._get(_datas, function(result) {\r\n                cb && cb(result);\r\n            });\r\n        },\r\n        // 写入用户信息到cookie\r\n        setUserCookie: function(userData, time) {\r\n            if (userData.accessToken === '') return false;\r\n            var _time = time || 43200;\r\n            Cookie.setItem(\"username\", userData.user, _time, '/', '.shenba.com');\r\n            Cookie.setItem(\"key\", userData.accessToken, _time, '/', '.shenba.com');\r\n            Cookie.setItem(\"memberid\", userData.member_id, _time, '/', '.shenba.com');\r\n        },\r\n        // 写入摇篮APP的用户信息到cookie\r\n        setYaoLanAppUserInfo: function(info) {\r\n            var _info = JSON.stringify(info);\r\n            Cookie.setItem(\"ylAppNickName\", info.NickName, 43200, '/', '.shenba.com');\r\n            Cookie.setItem(\"yaolan_appUserInfo\", _info, 43200, '/', '.shenba.com');\r\n        },\r\n        // 读取摇篮APP的用户信息到cookie\r\n        getYaoLanAppUserInfo: function() {\r\n            var _info = Cookie.getItem('yaolan_appUserInfo');\r\n            return _info ? JSON.parse(_info) : _info;\r\n        },\r\n        // 写入用户信息到cookie\r\n        setYaoLanUserInfo: function(uid) {\r\n            yaoLan.getYaoLanUserInfo(uid, function(res) {\r\n                if (res && res.code === '00000') {\r\n                    //登录成功将用户信息写入cookie\r\n                    var __data = res.data;\r\n                    yaoLan.setUserCookie(__data.sb_user);\r\n                    if (__data.yl_info.code === '0') {\r\n                        var _ylInfo = __data.yl_info.data;\r\n                        yaoLan.setYaoLanAppUserInfo(_ylInfo);\r\n                    }\r\n                    return true;\r\n                } else {\r\n                    location.reload();\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        // 检查摇篮用户信息\r\n        _reqTimes: 0,\r\n        checkYaoLanAppUser: function(cb) {\r\n            var _cb = cb || function() {};\r\n            var _ylApi = window.yl || {};\r\n            var _uid;\r\n            var _checkTimer;\r\n            if (_reqTimes == 5) return false;\r\n            try {\r\n                _ylApi.isEnter(function(data) {\r\n                    // _alert(\"App是否登录:\" + data); // 打印回调信息\r\n                    if (!!data) { // 已登录,尝试通过JDK的API获取用户ID\r\n                        _ylApi.getAppUserId(function(Uid) {\r\n                            // setYaoLanUserInfo(Uid);\r\n                            _uid = Uid;\r\n                            yaoLan.getYaoLanUserInfo(_uid, function(res) {\r\n                                if (res && res.code === '00000') {\r\n                                    //登录成功将用户信息写入cookie\r\n                                    var __data = res.data;\r\n                                    yaoLan.setUserCookie(__data.sb_user);\r\n                                    if (__data.yl_info.code === '0') {\r\n                                        var _ylInfo = __data.yl_info.data;\r\n                                        yaoLan.setYaoLanAppUserInfo(_ylInfo);\r\n                                    }\r\n                                    clearTimeout(_checkTimer);\r\n                                    _cb(res);\r\n                                } else {\r\n                                    yaolan.delUserCookie();\r\n                                    yaoLan._reqTimes++;\r\n                                    _checkTimer = setTimeout(function(){\r\n                                        yaoLan.checkYaoLanAppUser(cb);\r\n                                    }, 250)\r\n                                }\r\n                            });\r\n                        });\r\n                        return true;\r\n                    } else { // 未登录，调用JDK登录接口\r\n                        yaolan.delUserCookie();\r\n                        _ylApi.goToEnter(function() {\r\n                            location.reload();\r\n                        });\r\n                    }\r\n                });\r\n\r\n            } catch (e) {\r\n                console.log(e);\r\n                yaoLan._reqTimes++\r\n                yaoLan.checkYaoLanAppUser(cb);\r\n            }\r\n        },\r\n        // 检查用户\r\n        checkMember: function() {\r\n            var key = Cookie.getItem('key');\r\n            if (!!key) {\r\n                yaoLan.isYaoLanApp() && yaoLan.checkYaoLanAppUser();\r\n                return true;\r\n            } else {\r\n                if (yaoLan.isYaoLanApp()) {\r\n                    yaoLan.checkYaoLanAppUser();\r\n                } else {\r\n                    yaoLan.delUserCookie(); // add by yy\r\n                    var _href = window.location.href;\r\n                    location.href = WapSiteUrl + '/member/login.html?backUrl=' + encodeURIComponent(_href);\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n    //执行，获取签名\r\n    sbLib.common.yaoLan = yaoLan;\r\n})\r\n",
    "_data/adress.js": "\r\n/**\r\n * @fileOverview 修改收货人信息的数据接口\r\n * @author PJG\r\n * @description 修改收货人信息的数据接口\r\n */\r\ndefine('_data/adress',['app/_common'],function() {\r\n  var exports, sbLib, _ajaxData;\r\n  sbLib = window.sbLib || (window.sbLib = {});\r\n  sbLib.data = sbLib.data || {};\r\n  _ajaxData = function() {\r\n    var opt;\r\n    if (arguments.length === 1) {\r\n      opt = arguments[0];\r\n      return sbLib.common.ajaxData({\r\n        domain: opt.domain || 'my',\r\n        act: opt.act,\r\n        op: opt.op,\r\n        data: opt.data,\r\n        type: opt.type || 'get',\r\n        success: opt.succ,\r\n        failure: opt.fail\r\n      });\r\n    }\r\n  };\r\n  exports = {\r\n    myAddress: function(data, succ, fail) {\r\n      return _ajaxData({\r\n        act: 'users',\r\n        op: 'myAddress',\r\n        data: data,\r\n        succ: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        fail: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    infoAddress: function(data, succ, fail) {\r\n      return _ajaxData({\r\n        act: 'users',\r\n        op: 'infoAddress',\r\n        type: 'get',\r\n        data: data,\r\n        succ: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        fail: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    saveAddress: function(data, succ, fail) {\r\n      return _ajaxData({\r\n        act: 'users',\r\n        op: 'saveAddress',\r\n        type: 'post',\r\n        data: data,\r\n        succ: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        fail: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    deleteAddress: function(data, succ, fail) {\r\n      return _ajaxData({\r\n        act: 'users',\r\n        op: 'deleteAddress',\r\n        type: 'post',\r\n        data: data,\r\n        succ: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        fail: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    saveAddressIdentity: function(data, succ, fail) {\r\n      return _ajaxData({\r\n        act: 'users',\r\n        op: 'saveAddressIdentity',\r\n        type: 'post',\r\n        data: data,\r\n        succ: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        fail: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    defaultAddress: function(data, succ, fail) {\r\n      return _ajaxData({\r\n        act: 'users',\r\n        op: 'defaultAddress',\r\n        type: 'post',\r\n        data: data,\r\n        succ: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        fail: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    areaInfo: function(data, succ, fail) {\r\n      return _ajaxData({\r\n        domain: 'passports',\r\n        act: 'login',\r\n        op: 'areaInfo',\r\n        data: data,\r\n        succ: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        fail: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    area: function(data, succ, fail) {\r\n      return _ajaxData({\r\n        domain: 'passports',\r\n        act: 'login',\r\n        op: 'area',\r\n        data: data,\r\n        succ: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        fail: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return sbLib.data.adress = exports;\r\n});\r\n",
    "_data/cart.js": "\r\n/**\r\n * @fileOverview 购物车数据接口\r\n * @author PJG\r\n * @description cart域下的相关数据请求\r\n */\r\ndefine('_data/cart',['app/_common'],function() {\r\n  var exports, sbLib, _ajaxData;\r\n  sbLib = window.sbLib || (window.sbLib = {});\r\n  sbLib.data = sbLib.data || {};\r\n  _ajaxData = function() {\r\n    var argu;\r\n    argu = arguments;\r\n    if (argu.length > 4) {\r\n      return sbLib.common.ajaxData({\r\n        domain: 'cart',\r\n        act: argu[1],\r\n        op: argu[2],\r\n        type: 'post',\r\n        data: argu[0],\r\n        success: function(res) {\r\n          return argu[3] && argu[3](res);\r\n        },\r\n        failure: function(res) {\r\n          return argu[4] && argu[4](res);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  exports = {\r\n    list: function(data, succ, fail) {\r\n      return _ajaxData(data, 'v1.3/cart', 'list', succ, fail || function() {});\r\n    },\r\n    check: function(data, succ, fail) {\r\n      return _ajaxData(data, 'v1.3/cart', 'check', succ, fail || function() {});\r\n    },\r\n    edit: function(data, succ, fail) {\r\n      return _ajaxData(data, 'cart', 'edit', succ, fail || function() {});\r\n    },\r\n    remove: function(data, succ, fail) {\r\n      return _ajaxData(data, 'cart', 'remove', succ, fail || function() {});\r\n    },\r\n    checkCoupon: function(data, succ, fail) {\r\n      return _ajaxData(data, 'v1.3/cart', 'checkCoupon', succ, fail || function() {});\r\n    },\r\n    confirm: function(data, succ, fail) {\r\n      return _ajaxData(data, 'v1.3/cart', 'confirm', succ, fail || function() {});\r\n    },\r\n    getPaymentList: function(data, succ, fail) {\r\n      return _ajaxData(data, 'tool', 'payment_list', succ, fail || function() {});\r\n    },\r\n    redPacket: function(data, succ, fail) {\r\n      return sbLib.common.ajaxData({\r\n        domain: \"my\",\r\n        act: \"users\",\r\n        op: \"redPacket\",\r\n        type: \"get\",\r\n        data: data,\r\n        success: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        failure: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    activeRedPacket: function(data, succ, fail) {\r\n      return sbLib.common.ajaxData({\r\n        domain: \"my\",\r\n        act: \"redpacket\",\r\n        op: \"activeRedPacket\",\r\n        type: \"post\",\r\n        data: data,\r\n        success: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        failure: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    },\r\n    activeCoupon: function(data, succ, fail) {\r\n      return sbLib.common.ajaxData({\r\n        domain: \"my\",\r\n        act: \"coupon\",\r\n        op: \"activeCoupon\",\r\n        type: \"post\",\r\n        data: data,\r\n        success: function(res) {\r\n          return succ && succ(res);\r\n        },\r\n        failure: function(res) {\r\n          return fail && fail(res);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return sbLib.data.cart = exports;\r\n});\r\n",
    "_data/redPacket.js": "\r\n/**\r\n * @fileOverview 购物车数据接口\r\n * @author PJG\r\n * @description cart域下的相关数据请求\r\n */\r\ndefine('_data/redPacket',['app/_common'],function() {\r\n  var exports, sbLib, _ajaxData;\r\n  sbLib = window.sbLib || (window.sbLib = {});\r\n  sbLib.data = sbLib.data || {};\r\n  _ajaxData = function() {\r\n    var argu;\r\n    argu = arguments;\r\n    if (argu.length > 4) {\r\n      return sbLib.common.ajaxData({\r\n        domain: 'my',\r\n        act: argu[1],\r\n        op: argu[2],\r\n        data: argu[0],\r\n        type: 'post',\r\n        success: function(res) {\r\n          return argu[3] && argu[3](res);\r\n        },\r\n        failure: function(res) {\r\n          return argu[4] && argu[4](res);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  exports = {\r\n    redPacket: function(data, succ, fail) {\r\n      return _ajaxData(data, 'users', 'redPacket', succ, fail || function() {});\r\n    }\r\n  };\r\n  return sbLib.data.redPacket = exports;\r\n});\r\n",
    "_data/refund.js": "\r\n/**\r\n * @fileOverview 退货退款获取数据接口\r\n * @author LJL\r\n * @description 退货退款相关逻辑,通过exports的各个属性来执行对应的数据请求\r\n */\r\ndefine('_data/refund',['app/_common'],function() {\r\n  var exports, sbCom, sbLib;\r\n  sbLib = window.sbLib || (window.sbLib = {});\r\n  sbLib.data = sbLib.data || {};\r\n  sbCom = sbLib.common;\r\n  exports = {\r\n    refunds: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'refund',\r\n        op: 'index'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      return sbCom.ajaxData(_opt, function(data) {\r\n        var _cb;\r\n        sbCom.checkLogin(data);\r\n        _cb = cb || function() {};\r\n        return _cb(data);\r\n      });\r\n    },\r\n    refundView: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'refund',\r\n        op: 'view'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      return sbCom.ajaxData(_opt, function(data) {\r\n        var _cb;\r\n        sbCom.checkLogin(data);\r\n        _cb = cb || function() {};\r\n        return _cb(data);\r\n      });\r\n    },\r\n    addRefund: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'refund',\r\n        op: 'addRefund'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      return sbCom.ajaxData(_opt, function(data) {\r\n        var _cb;\r\n        _cb = cb || function() {};\r\n        return _cb(data);\r\n      });\r\n    },\r\n    addRefundExe: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'refund',\r\n        op: 'addRefundExe',\r\n        type: 'post'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      return sbCom.ajaxData(_opt, function(data) {\r\n        var _cb;\r\n        sbCom.checkLogin(data);\r\n        _cb = cb || function() {};\r\n        return _cb(data);\r\n      });\r\n    },\r\n    addReturn: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'return',\r\n        op: 'addReturn'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      return sbCom.ajaxData(_opt, function(data) {\r\n        var _cb;\r\n        sbCom.checkLogin(data);\r\n        _cb = cb || function() {};\r\n        return _cb(data);\r\n      });\r\n    },\r\n    addReturnExe: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'return',\r\n        op: 'addReturnExe',\r\n        type: 'post'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      return sbCom.ajaxData(_opt, function(data) {\r\n        var _cb;\r\n        sbCom.checkLogin(data);\r\n        _cb = cb || function() {};\r\n        return _cb(data);\r\n      });\r\n    },\r\n    returnView: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'return',\r\n        op: 'view'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      return sbCom.ajaxData(_opt, function(data) {\r\n        var _cb;\r\n        sbCom.checkLogin(data);\r\n        _cb = cb || function() {};\r\n        return _cb(data);\r\n      });\r\n    },\r\n    ship: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'return',\r\n        op: 'ship',\r\n        type: 'post'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      return sbCom.ajaxData(_opt, function(data) {\r\n        var _cb;\r\n        sbCom.checkLogin(data);\r\n        _cb = cb || function() {};\r\n        return _cb(data);\r\n      });\r\n    }\r\n  };\r\n  return sbLib.data.refund = exports;\r\n});\r\n",
    "_mods/ccweditor.js": "/* h5 版 编辑器 */\r\ndefine('_mods/ccweditor',['app/_common','_base/docCookies'],function () {\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.mods = sbLib.mods || {},\r\n    sbCom = sbLib.common;\r\n    Cookies = sbLib.base.docCookies;\r\n\r\n    var goodIdAry = [],\r\n    showGoodIdAry = [];\r\n    var patterns = [/goods_id=\\d+/],\r\n        $imgpos,\r\n        $cropwrap,\r\n        $cropwraptab,\r\n        isshow = false,\r\n        serverTime;\r\n    var backUrl = encodeURIComponent(location.href);\r\n\r\n    /* 字符串转date型 */\r\n    function stringToDate(sTime) {\r\n        if (sTime && sTime.indexOf('-') >= 4 && sTime.indexOf(':') >= 13) {\r\n            var fullDate = sTime.split(\" \")[0].split(\"-\");\r\n            var fullTime = sTime.split(\" \")[1].split(\":\");\r\n            return new Date(fullDate[0], fullDate[1] - 1, fullDate[2], (fullTime[0] !== null ? fullTime[0] : 0), (fullTime[1] !== null ? fullTime[1] : 0), (fullTime[2] !== null ? fullTime[2] : 0));\r\n        } else if (/^\\d+$/.test(sTime)) {\r\n            if (sTime.length === 10) {//如果只是10位 则只计算到了秒  Date对象是计算到毫秒\r\n                sTime = sTime + \"000\";\r\n            }\r\n            return new Date(parseInt(sTime, 10));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @description 页面上下文,该方法主要用于访问页面的共享数据\r\n     * @author ccw\r\n     * @return {Object}\r\n     */\r\n    function pageContext() {\r\n        var key = Cookies.getItem('key');\r\n        var islogin = true;\r\n        if (key === '') {\r\n            islogin = false;\r\n        }\r\n        var useragent = sbCom.isShenBaApp();\r\n        var _pageContext = {\r\n            /* 用户信息 */\r\n            user: {\r\n                /* 用户名 */\r\n                username: Cookies.getItem('useranme'),\r\n                /* 用户key */\r\n                key: key,\r\n                /* 用户memberid */\r\n                memberid: Cookies.getItem('memberid'),\r\n                /* 用户代理 */\r\n                userAgent: useragent,\r\n                /* 是否登陆 */\r\n                isLogin: islogin\r\n            }\r\n        };\r\n        return _pageContext;\r\n    }\r\n    /**\r\n     * @description 获取优惠券\r\n     * @author ccw\r\n     */\r\n    function getCoupon() {\r\n        var pagecontext = pageContext().user;\r\n        var couponid = Cookies.getItem(\"couponid\");\r\n        /* 判断登陆 */\r\n        if (!pagecontext.isLogin) {\r\n            switch (pagecontext.userAgent) {\r\n                case 'Android_ShenBa':\r\n                    ShenBaJsInterface.wapCallAppLogin();\r\n                    break;\r\n                case 'iOS_ShenBa':\r\n                    window.location = \"shenba://login?isfromwap=1\";\r\n                    break;\r\n                default:\r\n                    /* 不是case,默认h5 */\r\n                    location.href = \"/auth/index.html?backUrl=\" + backUrl;\r\n                    break;\r\n            }\r\n        } else {\r\n            /* 获取优惠券 */\r\n            var query = {\r\n                url: buildDataUrl(\"my\", \"coupon\", \"receiveCoupon\"),\r\n                data: {\r\n                    coupon_ids: couponid,\r\n                    client: \"h5\",\r\n                    key: pagecontext.key\r\n                }\r\n            };\r\n            sbCom.ajaxData(query, function(response) {\r\n                var code = response.code;\r\n                /* 获取成功 */\r\n                if (code === '00000') {\r\n                    Cookies.delCookie('couponid');\r\n                    //location.href = WapSiteUrl + '/member/myCoupons.html?usedStatus=A';\r\n                    alert(\"优惠券领取成功\");\r\n                } else if (code === '60004') {\r\n                    /* 没有登陆-由于某些原因有可能还没登陆 */\r\n                    location.href = \"/auth/index.html?backUrl=\" + backUrl;\r\n                } else {\r\n                    alert(response.desc);\r\n                    /*location.href = WapSiteUrl + '/member/couponError.html';*/\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    var ccweditor = {\r\n        /* cropwrap事件 */\r\n        cropWrapEvent: function () {\r\n            $cropwrap.each(function () {\r\n                var timenow = serverTime * 1000;\r\n                var $this = $(this);\r\n                var showdate = stringToDate($this.attr('showdate'));\r\n                var hidedate = stringToDate($this.attr('hidedate'));\r\n                /* 没有设置 开始,结束时间 */\r\n                if (showdate === undefined && hidedate === undefined) {\r\n                    isshow = true;\r\n                } else {\r\n                    if (showdate != undefined && hidedate === undefined) {\r\n                        if (new Date(showdate) < timenow) {\r\n                            isshow = true;\r\n                        }\r\n                    }\r\n                    if (hidedate != undefined && showdate === undefined) {\r\n                        if (timenow < new Date(hidedate)) {\r\n                            isshow = true;\r\n                        }\r\n                    }\r\n                    if (showdate != undefined && hidedate != undefined) {\r\n                        isshow = new Date(showdate) < timenow && timenow < new Date(hidedate);\r\n                    }\r\n                }\r\n                if (isshow) {\r\n                    $this.find('img').show();\r\n                } else {\r\n                    $this.hide();\r\n                    $this.find('img').hide();\r\n                }\r\n                //$this.removeAttr('showdate').removeAttr('hidedate');\r\n                ccweditor.countdownEvent($this);\r\n            });\r\n        },\r\n        /* 容器事件*/\r\n        tabContainerEvent: function () {\r\n            $(\".tabcontainer\").each(function () {\r\n                var $this = $(this);\r\n                var $alltab = $('[tabcontainer=\"' + $this.attr('id') + '\"][tabname]');\r\n                $this.append($alltab);\r\n            });\r\n        },\r\n        /* 图片热点事件 */\r\n        imgPosEvent: function () {\r\n            $imgpos.each(function (i) {\r\n                var $this = $(this);\r\n                /* 显示a标签 */\r\n                if ($this[0].tagName === \"A\" || $this.attr(\"linktype\") === \"countdown\") {\r\n                    $this.css(\"display\", \"block!important\");\r\n                } else {\r\n                    $this.css(\"display\", \"none\");\r\n                }\r\n                var str = $this.attr(\"href\");\r\n                if (str) {\r\n                    for (var k = 0; k < patterns.length; k++) {\r\n                        if (patterns[k].test(str)) {\r\n                            str = str.toString();\r\n                            str = str.match(patterns[k]);\r\n                        } else {\r\n                            str = null;\r\n                        }\r\n                    }\r\n                    if (str != null) {\r\n                        str = str.toString().match(/\\d+/);\r\n                        if ($this.attr(\"linkicon\") == undefined) {\r\n                            if (str != null) {\r\n                                goodIdAry.push(str);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                // console.log(goodIdAry);\r\n                /* 如果是最后一个,则显示图片tip */\r\n                if (i === ($imgpos.length - 1)) {\r\n                    ccweditor.showGoodPicTip();\r\n                }\r\n            });\r\n        },\r\n        /* 切换图片事件 */\r\n        trnpicEvent: function () {\r\n            $('.cropwrap img').each(function () {\r\n                var $this = $(this);\r\n                if ($this.attr(\"trnpic\") != undefined) {\r\n                    /* 切换图片src */\r\n                    var trnpic = $this.attr(\"trnpic\").split(\",\");\r\n                    /* 切换图片时间 */\r\n                    var trndate = $this.attr(\"trndate\").split(\",\");\r\n                    if (trndate !== \"\") {\r\n                        $this.hide();\r\n                        var timeNow = serverTime * 1000;\r\n                        var timeNowDate = new Date(timeNow);\r\n                        var timeNowHour = timeNowDate.getHours();\r\n                        for (var i = 0; i < trnpic.length; i++) {\r\n                            //如果设定的小时等于当前的小时 并且 当前图片src不等于切换图片的src\r\n                            if (parseInt(trndate[i]) === timeNowHour && $this.attr(\"src\") !== trnpic[i]) {\r\n                                $this.attr(\"src\", trnpic[i]);\r\n                            }\r\n                        }\r\n                        $this.show();\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /* 倒计时事件 */\r\n        countdownEvent: function (cropwrap) {\r\n            var timeDistance; //时间差\r\n            var $this = cropwrap;\r\n            var startdate = $this.attr(\"startdate\");\r\n            var enddate = $this.attr(\"enddate\");\r\n            var dayhours = $this.attr(\"dayhours\");\r\n            $this.removeAttr('dayhours');\r\n            if (startdate != undefined) {\r\n                startdate = stringToDate(startdate);\r\n            }\r\n            if (enddate != undefined) {\r\n                enddate = stringToDate(enddate);\r\n            }\r\n            $this.data('startdate', startdate).data('enddate', enddate);\r\n            $this.removeAttr('startdate').removeAttr('enddate');\r\n\r\n            var $countdown = $this.find(\".imgpos[linktype='countdown']\");\r\n            $countdown.each(function () {\r\n                var $this = $(this);\r\n                var html = '';\r\n                var iscdsuffix = false;\r\n                if ($this.attr(\"cdsuffix\") === 'true') {\r\n                    html += \"<span class='edh'></span>\" + \"<span>时</span>\";\r\n                    html += \"<span class='edm'></span>\" + \"<span>分</span>\";\r\n                    html += \"<span class='eds'></span>\" + \"<span>秒</span>\";\r\n                    iscdsuffix = true;\r\n                } else {\r\n                    html += \"<span class='edh'></span>\";\r\n                    html += \"<span class='edm'></span>\";\r\n                    html += \"<span class='eds'></span>\";\r\n                    $this.data('cdsuffix', 'false');\r\n                }\r\n                html += \"<span class='edtip'></span>\";\r\n\r\n                $this.removeAttr('cdsuffix');\r\n                $this.html(html);\r\n                $this.data('cdsuffix', iscdsuffix);\r\n            });\r\n            $this.data('time', serverTime);\r\n            var $hour = $this.find(\".edh\"),\r\n            $minute = $this.find(\".edm\"),\r\n            $tip = $this.find(\".edtip\"),\r\n            $second = $this.find(\".eds\");\r\n\r\n            function countDown() {\r\n                var timenow = $this.data('time') * 1000;\r\n                var cdsuffix = $hour.parent().data(\"cdsuffix\");\r\n                var tip = '';\r\n                if (startdate != undefined) {\r\n                    startdate = new Date($this.data('startdate'));\r\n                }\r\n                if (enddate != undefined) {\r\n                    enddate = new Date($this.data('enddate'));\r\n                }\r\n                if (startdate > timenow && timenow < enddate || startdate > timenow && enddate == undefined) {\r\n                    tip = '后开始';\r\n                    timeDistance = startdate - timenow;\r\n                }\r\n                else if (startdate == undefined && timenow <= enddate || timenow <= enddate) {\r\n                    tip = '后结束 ';\r\n                    timeDistance = enddate - timenow;\r\n                }\r\n\r\n                var day, hour, minute, second, maxhour;\r\n                if (timeDistance >= 0) {\r\n                    // 相减的差数换算成天数\r\n                    day = Math.floor(timeDistance / 86400000);\r\n                    timeDistance -= day * 86400000;\r\n                    // 相减的差数换算成小时\r\n                    hour = Math.floor(timeDistance / 3600000);\r\n                    //alert(intHour)\r\n                    timeDistance -= hour * 3600000;\r\n                    // 相减的差数换算成分钟\r\n                    minute = Math.floor(timeDistance / 60000);\r\n                    timeDistance -= minute * 60000;\r\n                    // 相减的差数换算成秒数\r\n                    second = Math.floor(timeDistance / 1000); //判断小时小于10时，前面加0进行占位\r\n                    if (hour < 10)\r\n                        hour = \"0\" + hour;\r\n                    // 判断分钟小于10时，前面加0进行占位\r\n                    if (minute < 10)\r\n                        minute = \"0\" + minute;\r\n                    // 判断秒数小于10时，前面加0进行占位\r\n                    if (second < 10)\r\n                        second = \"0\" + second;\r\n                    //转换后:最大小时\r\n                    maxhour = parseInt(hour) + (day * 24);\r\n                    //如果剩余天数大于1,并且开启天数转换\r\n                    //if (day > 0 && dayhours === \"true\" && maxhour >= 24) {\r\n                    if (day > 0 && maxhour >= 24) {\r\n                        $hour.html(day + \"天\" + hour);\r\n                        //if (cdsuffix === 'true') {\r\n                        //    $hour.html(day + \"天\" + hour);\r\n                        //} else {\r\n                        //    $hour.html(day + \"天 \" + hour + ' ');\r\n                        //}\r\n                    } else {\r\n                        $hour.html(maxhour);\r\n                        //intHour = parseInt(intHour) + (intDay * 24);\r\n                        //if (cdsuffix === 'true') {\r\n                        //    $hour.html(maxhour);\r\n                        //} else {\r\n                        //    $hour.html(maxhour + ':');\r\n                        //}\r\n                    }\r\n                    $tip.html(' '+ tip);\r\n                    $minute.html(minute);\r\n                    $second.html(second);\r\n                    //if (cdsuffix === 'true') {\r\n                    //    $tip.html(tip);\r\n                    //    $minute.html(minute);\r\n                    //    $second.html(second);\r\n                    //} else {\r\n                    //    $tip.html(tip + ' ');\r\n                    //    $minute.html(minute);\r\n                    //    $second.html(second);\r\n                    //}\r\n\r\n                    var time = cropwrap.data('time') + 1;\r\n                    cropwrap.data('time', time);\r\n                    /* 多实例 所以必须 以此命名 */\r\n                    cropwrap['cdtimeout'] = setTimeout(countDown, 1000);\r\n\r\n                } else {\r\n                    if (typeof cropwrap['cdtimeout'] != \"undefined\")\r\n                        clearTimeout(cropwrap['cdtimeout']);\r\n                    $this.find(\".imgpos[linktype='countdown']\").remove();\r\n                }\r\n            }\r\n            countDown();\r\n        },\r\n        /* tab事件 */\r\n        tabEvent: function () {\r\n            var $tabtarget = $('div[tabtarget]');\r\n            $tabtarget.css('display', 'block');\r\n            var clickhover = function (obj) {\r\n                var $this = obj;\r\n                var tabtarget = $this.attr('tabtarget');\r\n                var $tab = $('div[tabname=\"' + tabtarget + '\"]');\r\n                var $tabcontainer = $(\"#\" + $tab.attr('tabcontainer'));\r\n                var $containertab = $tabcontainer.find('div[tabname=\"' + tabtarget + '\"]');\r\n                if ($containertab.length === 0) {\r\n                    $tabcontainer.append($tab);\r\n                }\r\n                $tabcontainer.find('div').hide();\r\n                $tab.show();\r\n                $tab.find('img,div').show();\r\n            }\r\n            $tabtarget.each(function () {\r\n                var $this = $(this);\r\n                var tabaction = $this.attr('tabaction');\r\n                if (tabaction === 'click') {\r\n                    $this.on('click', function () {\r\n                        clickhover($(this));\r\n                    });\r\n                }\r\n                else if (tabaction === 'hover') {\r\n                    $this.on('mouseover', function () {\r\n                        clickhover($(this));\r\n                    });\r\n                }\r\n            });\r\n\r\n        },\r\n        /* 图片导航事件 */\r\n        picNavEvent: function() {\r\n            $(window).scroll(function() {\r\n                var $picnav = $('.cropwrap[nav=true]');\r\n                $picnav.each(function() {\r\n                    var $this = $(this);\r\n                    var $img = $this.find('img');\r\n                    if ($this.offset().top <= $(window).scrollTop()) {\r\n                        $picnav.find('img').css('position', '');\r\n                        $img.css({ position: 'fixed', top: 41 });\r\n                    } else {\r\n                        if ($img.css('position')) {\r\n                            $img.css('position', '');\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        /* 显示商品图片提示 */\r\n        showGoodPicTip: function () {\r\n            if (goodIdAry.length === 0)\r\n                return false;\r\n            //var url = buildDataUrl('pc', 'index', 'getgoods_storage');\r\n            var url = '/proxy';\r\n            var goodsId = goodIdAry.toString();\r\n            // url += \"&goods_id=\" + goodsId;\r\n            var query = {\r\n                url: url,\r\n                data: {\r\n                    domain:'pc',\r\n                    act: 'index',\r\n                    op: 'getgoods_storage',\r\n                    goods_id: goodsId\r\n                }\r\n            };\r\n\r\n            /* 请求是否显示图片id的商品 */\r\n            sbCom.ajaxData(query, function (response) {\r\n                var json = response;\r\n                if (json.data != undefined) {\r\n                    var jsondata = json.data;\r\n                    if (jsondata.status === 1) {\r\n                        if (jsondata.list != undefined) {\r\n                            var jsonlist = jsondata.list;\r\n                            var i = 0, len = 0;\r\n                            for (i = 0, len = jsonlist.length; i < len; i++) {\r\n                                /* 如果数量大于1则存储 */\r\n                                if (jsonlist[i].goods_storage <= 0) {\r\n                                    if (jsonlist[i].goods_id !== \"\")\r\n                                        showGoodIdAry.push(jsonlist[i].goods_id);\r\n                                }\r\n                            };\r\n                            /* 遍历需要显示的id数组 */\r\n                            for (i = 0, len = showGoodIdAry.length; i < len; i++) {\r\n                                $(\".imgpos\").each(function () {\r\n                                    var $this = $(this);\r\n                                    var href = $this.attr(\"href\");\r\n                                    /* add by yy 临时保存匹配结果 */\r\n                                    var match = '';\r\n                                    if (href) {\r\n                                        for (var j = 0; j < patterns.length; j++) {\r\n                                            if (patterns[j].test(href.toString())) {\r\n                                                match = href.toString().match(/\\d+/);\r\n                                                if (match && match[0] === showGoodIdAry[i]) {\r\n                                                    $this.children(\"b\").css(\"display\", \"block\");\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                            };\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /* 优惠券事件 */\r\n        couponEvent: function () {\r\n            $('.cropwrap .imgpos[linktype=\"button\"]').on('click', function () {\r\n                Cookies.setItem('couponid', $(this).data('id'), 432000,'/', '.shenba.com');\r\n                getCoupon();\r\n            });\r\n        },\r\n        /* dom缓存 */\r\n        domCache: function () {\r\n            $imgpos = $(\".imgpos\");\r\n            $cropwrap = $('.cropwrap');\r\n            $cropwraptab = $('.cropwraptab');\r\n            serverTime = stringToDate($('div[data-nowtime]').data('nowtime')) / 1000 || new Date().getTime() / 1000;\r\n        },\r\n        /**\r\n         * 对象-调用对象自身函数\r\n         * @param1 {Object} 调用的对象\r\n         * @params {arguments} 调用的对象的方法名\r\n         */\r\n        objectCallFunction: function (obj) {\r\n            var fn;\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                fn = obj[arguments[i]];\r\n                if (typeof fn === 'function') {\r\n                    fn();\r\n                }\r\n            }\r\n        },\r\n        /* 构造方法 */\r\n        struc: function () {\r\n            $(document).ready(function () {\r\n                ccweditor.objectCallFunction(ccweditor, 'domCache', 'cropWrapEvent', 'tabContainerEvent', 'tabEvent', 'picNavEvent', 'couponEvent','imgPosEvent');\r\n            });\r\n        }\r\n    };\r\n    sbLib.mods.ccweditor = ccweditor;\r\n    // return ccweditor;\r\n});\r\n",
    "_mods/spnav.js": "/**\r\n * @fileOverview 专场导航控制模块\r\n * @author pjg\r\n */\r\ndefine('_mods/spnav',function() {\r\n    var sbLib = window.sbLib || (window.sbLib={});\r\n    sbLib.mods = sbLib.mods || {};\r\n    var main = {\r\n        init: function() {\r\n            var navOpenBtn = $('#spNavOpen'),\r\n                navMainBody = $('#spNavMain');\r\n            if (navOpenBtn && navMainBody) {\r\n                navOpenBtn.show()\r\n                    .addClass('show')\r\n                    .on('tap',function(e) {\r\n                        //console.log(e);\r\n                        navOpenBtn.hide().removeClass('show');\r\n                        navMainBody.show().addClass('show');\r\n                        e.stopPropagation();\r\n                    });\r\n                $(document).on('tap','body',function(e) {\r\n                    //console.log(e);\r\n                    navMainBody.hide().removeClass('show');\r\n                    navOpenBtn.show().addClass('show');\r\n                    e.stopPropagation();\r\n                });\r\n            }\r\n        }\r\n    };\r\n    sbLib.mods.spnav = main;\r\n    // return main;\r\n});\r\n",
    "_mods/timer.js": "\r\n/*\r\n * @fileOverview 倒计时处理模块\r\n * @author pjg\r\n * @description 页面中包含有倒计时，可应用此模块进行处理\r\n */\r\ndefine('_mods/timer',['_pulgins/countdown'],function() {\r\n  var init, sbLib;\r\n  sbLib = window.sbLib || (window.sbLib = {});\r\n  sbLib.mods = sbLib.mods || {};\r\n  init = function() {\r\n    var $endTime;\r\n    $endTime = $('.time-end');\r\n    return $endTime.cd({\r\n      unStartFn: function(el, obj) {\r\n        var str;\r\n        if (obj.dd > 1) {\r\n          str = \"<small>\" + obj.dd + \"</small>天<small>\" + obj.hh + \"</small>时\";\r\n        } else if (obj.hh > 0) {\r\n          str = \"<small>\" + obj.hh + \"</small>时<small>\" + obj.mm + \"</small>分\";\r\n        } else {\r\n          str = \"<small>\" + obj.mm + \"</small>分<small>\" + ss + \"</small>秒\";\r\n        }\r\n        str = str + \"后开始\";\r\n        return el.html(str);\r\n      },\r\n      countingFn: function(el, obj) {\r\n        var str;\r\n        str = '';\r\n        if (obj.dd > 0) {\r\n          str = \"<small>\" + obj.dd + \"</small>天<small>\" + obj.hh + \"</small>时\";\r\n        } else if (obj.hh > 0) {\r\n          str = \"<small>\" + obj.hh + \"</small>时<small>\" + obj.mm + \"</small>分<small>\" + obj.ss + \"</small>秒\";\r\n        } else {\r\n          str = \"<small>\" + obj.mm + \"</small>分<small>\" + obj.ss + \"</small>秒\";\r\n        }\r\n        return el.html(\"剩\" + str);\r\n      },\r\n      endHtml: '专场已结束',\r\n      callback: function() {\r\n        return $('.time-wrap').show();\r\n      }\r\n    });\r\n  };\r\n  sbLib.mods.timer = init;\r\n  return init;\r\n});\r\n",
    "_pulgins/countdown.js": "\r\n/*\r\n *@fileOverview     倒计时插件\r\n *@author           sz\r\n *@description      一个通用的倒计时插件，可对单个元素的或多个元素的jq对象或对象使用，并分别计算倒计时。\r\n *@date             2015-10-16\r\n *@param1           {object} 传参为一个对象，具体说明如下\r\n *@return           {number} 返回一个数字作为倒计时状态说明： 0为未开始，1为进行中，2为已结束\r\n *\r\n *   $(selector).cd({\r\n *      nowTime:                //  {string || Date} 当前时间，优先读取$(selector)的data-nowTime属性，默认为当前计算机时间\r\n *      startTime:              //  {string} 开始时间，优先读取$(selector)的data-startTime属性，必填，格式为'2010-04-01 00:00:00'\r\n *      endTime:                //  {string} 结束时间，优先读取$(selector)的data-endTime属性，必填，格式为'2010-04-01 00:00:00'\r\n *      unStartHtml:            //  {string} 倒计时未开始时显示的内容 示例： '还有dd天hh时mm分ss秒ds开始'\r\n *      countingHtml:           //  {string} 倒计时进行中显示的内容\r\n *      endHtml:                //  {string} 倒计时结束时显示的内容\r\n *      isDeciSecond:           //  {true || false} 是否启用十分之一秒，默认为true\r\n *      callback:               //  {function} 回调函数，获取当前倒计时状态，并作为参数传递，\r\n *                                  例：callback(status){\r\n *                                          checkStatus(status);\r\n *                                      }\r\n *      endCall:                //  {function} 回调函数，倒计时结束后执行的方法\r\n *   });\r\n *\r\n */\r\ndefine('_pulgins/countdown',function() {\r\n\r\n  /*默认值 */\r\n  var cd, defaults;\r\n  defaults = {\r\n    nowTime: new Date(),\r\n    startTime: '',\r\n    endTime: '',\r\n    unStartHtml: '还有 dd天hh时mm分ss秒ds 开始',\r\n    unStartFn: null,\r\n    countingHtml: '剩余 dd天hh时mm分ss秒ds 结束',\r\n    countingFn: null,\r\n    endHtml: '已结束',\r\n    isDeciSecond: true,\r\n    callback: function() {},\r\n    endCall: function() {}\r\n  };\r\n\r\n  /*挂载为jq插件 */\r\n  $.fn.cd = function(options) {\r\n    return this.each(function(index, item) {\r\n      return new cd($(item), options);\r\n    });\r\n  };\r\n\r\n  /*倒计时插件主体 */\r\n  cd = function(el, options) {\r\n\r\n    /*开关，防止单个元素重复添加倒计时 */\r\n    var obj, settings, _attrEndTime, _attrNowTime, _attrStartTime, _callback, _countingFn, _countingHtml, _endCall, _endHtml, _isDeciSecond, _unStartFn, _unStartHtml;\r\n    if (el.data('isCD') === 1) {\r\n      return false;\r\n    } else {\r\n      el.data('isCD', 1);\r\n    }\r\n    obj = this;\r\n    settings = $.extend({}, defaults, options || {});\r\n    obj.el = el;\r\n    _attrNowTime = el.attr('data-nowTime');\r\n    _attrStartTime = el.attr('data-startTime');\r\n    _attrEndTime = el.attr('data-endTime');\r\n    _unStartHtml = settings.unStartHtml;\r\n    _unStartFn = settings.unStartFn;\r\n    _countingHtml = settings.countingHtml;\r\n    _countingFn = settings.countingFn;\r\n    _endHtml = settings.endHtml;\r\n    _isDeciSecond = settings.isDeciSecond;\r\n    _callback = settings.callback;\r\n    _endCall = settings.endCall;\r\n    if (_attrNowTime === void 0) {\r\n      obj.nowTime = settings.nowTime;\r\n    } else {\r\n      obj.nowTime = _attrNowTime;\r\n    }\r\n    if (_attrStartTime === void 0) {\r\n      obj.startTime = settings.startTime;\r\n    } else {\r\n      obj.startTime = _attrStartTime;\r\n    }\r\n    if (_attrEndTime === void 0) {\r\n      obj.endTime = settings.endTime;\r\n    } else {\r\n      obj.endTime = _attrEndTime;\r\n    }\r\n\r\n    /*合并对象 */\r\n    $.extend(obj, {\r\n      init: function() {\r\n        var status, _endTime, _html, _nowTime, _self, _startTime;\r\n        _self = this;\r\n        status = 0;\r\n\r\n        /*判断时间数据类型，如果非时间对象，则进行转换 */\r\n        if (obj.nowTime instanceof Date) {\r\n          _nowTime = obj.nowTime;\r\n        } else {\r\n          _nowTime = _self.stringToDate(obj.nowTime || new Date());\r\n        }\r\n        if (obj.startTime instanceof Date) {\r\n          _startTime = obj.startTime;\r\n        } else {\r\n          _startTime = _self.stringToDate(obj.startTime);\r\n        }\r\n        if (obj.endTime instanceof Date) {\r\n          _endTime = obj.endTime;\r\n        } else {\r\n          _endTime = _self.stringToDate(obj.endTime);\r\n        }\r\n\r\n        /*判断倒计时状态（未开始｜进行中｜已结束） */\r\n        if (Date.parse(_nowTime) < Date.parse(_startTime)) {\r\n          _self.cd(_nowTime, _startTime.getTime(), _isDeciSecond, function(date) {\r\n            var _html;\r\n            if (_unStartFn !== null) {\r\n              return _unStartFn(el, date);\r\n            } else {\r\n              _html = _unStartHtml;\r\n              _html = obj.format(_html, date);\r\n              return el.html(_html);\r\n            }\r\n          });\r\n          status = 0;\r\n        } else if (Date.parse(_startTime) < Date.parse(_nowTime) && Date.parse(_nowTime) < Date.parse(_endTime)) {\r\n          _self.cd(_nowTime, _endTime.getTime(), _isDeciSecond, function(date) {\r\n            var _html;\r\n            if (_countingFn !== null) {\r\n              return _countingFn(el, date);\r\n            } else {\r\n              _html = _countingHtml;\r\n              _html = obj.format(_html, date);\r\n              return el.html(_html);\r\n            }\r\n          }, function() {\r\n            var _html;\r\n            _html = _endHtml;\r\n            el.html(_endHtml);\r\n            return _endCall();\r\n          });\r\n          status = 1;\r\n        } else if (typeof _startTime === 'undefined' && Date.parse(_nowTime) < Date.parse(_endTime)) {\r\n          _self.cd(_nowTime, _endTime.getTime(), _isDeciSecond, function(date) {\r\n            var _html;\r\n            if (_countingFn !== null) {\r\n              return _countingFn(el, date);\r\n            } else {\r\n              _html = _countingHtml;\r\n              _html = obj.format(_html, date);\r\n              return el.html(_html);\r\n            }\r\n          }, function() {\r\n            var _html;\r\n            _html = _endHtml;\r\n            el.html(_endHtml);\r\n            return _endCall();\r\n          });\r\n          status = 1;\r\n        } else if (Date.parse(_nowTime) > Date.parse(_endTime)) {\r\n          _html = _endHtml;\r\n          el.html(_endHtml);\r\n          status = 2;\r\n          if (_endCall) {\r\n            _endCall();\r\n          }\r\n        } else {\r\n          _html = _endHtml;\r\n          el.html(_endHtml);\r\n          status = 2;\r\n        }\r\n        return _callback(status);\r\n      },\r\n\r\n      /*\r\n       * 通用-倒计时\r\n       * @param1 {Date} 计时开始时间\r\n       * @param2 {Number} 计时结束时间(应该是该时间的秒)\r\n       * @param3 {Boolean} 是否启用十分之一秒\r\n       * @param4 {Function} 当次计算完\r\n       * @param5 {Function} 当次超时完\r\n       */\r\n      cd: function(startDate, endDate, isDeciSecond, onCounted, onOverTime) {\r\n        var countSize, dd, distance, ds, funnyCountDown, hh, mm, ss, timeobj, totalhour, _onOverTime;\r\n        if (startDate instanceof Date) {\r\n          distance = endDate - startDate.getTime();\r\n          if (distance >= 0) {\r\n            dd = Math.floor(distance / 86400000);\r\n            distance -= dd * 86400000;\r\n            hh = Math.floor(distance / 3600000);\r\n            distance -= hh * 3600000;\r\n            mm = Math.floor(distance / 60000);\r\n            distance -= mm * 60000;\r\n            ss = Math.floor(distance / 1000);\r\n            distance -= ss * 1000;\r\n            ds = Math.floor(distance / 100);\r\n            if (mm < 10) {\r\n              mm = \"0\" + mm;\r\n            }\r\n            if (ss < 10) {\r\n              ss = \"0\" + ss;\r\n            }\r\n            totalhour = parseInt(hh) + (dd * 24);\r\n            timeobj = {\r\n              dd: dd,\r\n              hh: hh,\r\n              mm: mm,\r\n              ss: ss,\r\n              ds: ds,\r\n              totalhours: totalhour\r\n            };\r\n            if (onCounted) {\r\n              onCounted(timeobj);\r\n            }\r\n            if (isDeciSecond === true) {\r\n              countSize = 100;\r\n            } else {\r\n              countSize = 1000;\r\n            }\r\n            funnyCountDown = setTimeout(function() {\r\n              if (onCounted) {\r\n                return obj.cd(startDate, endDate, isDeciSecond, onCounted, onOverTime);\r\n              } else {\r\n                return obj.cd(startDate, endDate);\r\n              }\r\n            }, countSize);\r\n            return endDate -= countSize;\r\n          } else {\r\n            if (typeof funnyCountDown !== \"undefined\") {\r\n              clearTimeout(funnyCountDown);\r\n              _onOverTime = onOverTime;\r\n              if (_onOverTime) {\r\n                return _onOverTime();\r\n              }\r\n            } else {\r\n              clearTimeout(funnyCountDown);\r\n              _onOverTime = onOverTime;\r\n              if (_onOverTime) {\r\n                return _onOverTime();\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n\r\n      /*字符串转date型 */\r\n      stringToDate: function(sTime) {\r\n        var fullDate, fullTime, _hour, _minite, _regExp, _second;\r\n        _regExp = /^\\d+$/;\r\n        sTime = sTime + '';\r\n        if (sTime && sTime.indexOf('-') >= 4 && sTime.indexOf(':') >= 13) {\r\n          fullDate = sTime.split(\" \")[0].split(\"-\");\r\n          fullTime = sTime.split(\" \")[1].split(\":\");\r\n          if (fullTime[0]) {\r\n            _hour = fullTime[0];\r\n          } else {\r\n            _hour = 0;\r\n          }\r\n          if (fullTime[1]) {\r\n            _minite = fullTime[1];\r\n          } else {\r\n            _minite = 0;\r\n          }\r\n          if (fullTime[2]) {\r\n            _second = fullTime[2];\r\n          } else {\r\n            _second = 0;\r\n          }\r\n          return new Date(fullDate[0], fullDate[1] - 1, fullDate[2], _hour, _minite, _second);\r\n        } else if (_regExp.test(sTime)) {\r\n          if (sTime.length === 10) {\r\n            sTime = sTime + '000';\r\n          }\r\n          return new Date(parseInt(sTime, 10));\r\n        }\r\n      },\r\n\r\n      /*日期时间格式转换 */\r\n      format: function(string, date) {\r\n        var dd, ds, hh, mm, replacer, ss;\r\n        replacer = function(patternPart, result) {\r\n          return string = string.replace(patternPart, result);\r\n        };\r\n        dd = date.dd;\r\n        hh = date.hh;\r\n        mm = date.mm;\r\n        ss = date.ss;\r\n        ds = date.ds;\r\n        replacer(/dd/g, dd);\r\n        replacer(/hh/g, hh);\r\n        replacer(/mm/g, mm);\r\n        replacer(/ss/g, ss);\r\n        replacer(/ds/g, ds);\r\n        return string;\r\n      }\r\n    });\r\n    return obj.init();\r\n  };\r\n  return $.fn;\r\n});\r\n",
    "_pulgins/form.js": "/*!\r\n * jQuery Form Plugin\r\n * version: 3.51.0-2014.06.20\r\n * Requires jQuery v1.5 or later\r\n * Copyright (c) 2014 M. Alsup\r\n * Examples and documentation at: http://malsup.com/jquery/form/\r\n * Project repository: https://github.com/malsup/form\r\n * Dual licensed under the MIT and GPL licenses.\r\n * https://github.com/malsup/form#copyright-and-license\r\n */\r\n/*global ActiveXObject */\r\ndefine('_pulgins/form',function() {\r\n    \"use strict\";\r\n\r\n    /*\r\n        Usage Note:\r\n        -----------\r\n        Do not use both ajaxSubmit and ajaxForm on the same form.  These\r\n        functions are mutually exclusive.  Use ajaxSubmit if you want\r\n        to bind your own submit handler to the form.  For example,\r\n        $(document).ready(function() {\r\n            $('#myForm').on('submit', function(e) {\r\n                e.preventDefault(); // <-- important\r\n                $(this).ajaxSubmit({\r\n                    target: '#output'\r\n                });\r\n            });\r\n        });\r\n        Use ajaxForm when you want the plugin to manage all the event binding\r\n        for you.  For example,\r\n        $(document).ready(function() {\r\n            $('#myForm').ajaxForm({\r\n                target: '#output'\r\n            });\r\n        });\r\n        You can also use ajaxForm with delegation (requires jQuery v1.7+), so the\r\n        form does not have to exist when you invoke ajaxForm:\r\n        $('#myForm').ajaxForm({\r\n            delegation: true,\r\n            target: '#output'\r\n        });\r\n        When using ajaxForm, the ajaxSubmit function will be invoked for you\r\n        at the appropriate time.\r\n    */\r\n\r\n    /**\r\n     * Feature detection\r\n     */\r\n    var feature = {};\r\n    feature.fileapi = $(\"<input type='file'/>\").get(0).files !== undefined;\r\n    feature.formdata = window.FormData !== undefined;\r\n\r\n    var hasProp = !!$.fn.prop;\r\n\r\n    // attr2 uses prop when it can but checks the return type for\r\n    // an expected string.  this accounts for the case where a form\r\n    // contains inputs with names like \"action\" or \"method\"; in those\r\n    // cases \"prop\" returns the element\r\n    $.fn.attr2 = function() {\r\n        if (!hasProp) {\r\n            return this.attr.apply(this, arguments);\r\n        }\r\n        var val = this.prop.apply(this, arguments);\r\n        if ((val && val.jquery) || typeof val === 'string') {\r\n            return val;\r\n        }\r\n        return this.attr.apply(this, arguments);\r\n    };\r\n\r\n    /**\r\n     * ajaxSubmit() provides a mechanism for immediately submitting\r\n     * an HTML form using AJAX.\r\n     */\r\n    $.fn.ajaxSubmit = function(options) {\r\n        /*jshint scripturl:true */\r\n\r\n        // fast fail if nothing selected (http://dev.jquery.com/ticket/2752)\r\n        if (!this.length) {\r\n            log('ajaxSubmit: skipping submit process - no element selected');\r\n            return this;\r\n        }\r\n\r\n        var method, action, url, $form = this;\r\n\r\n        if (typeof options == 'function') {\r\n            options = {\r\n                success: options\r\n            };\r\n        } else if (options === undefined) {\r\n            options = {};\r\n        }\r\n\r\n        method = options.type || this.attr2('method');\r\n        action = options.url || this.attr2('action');\r\n\r\n        url = (typeof action === 'string') ? $.trim(action) : '';\r\n        url = url || window.location.href || '';\r\n        if (url) {\r\n            // clean url (don't include hash vaue)\r\n            url = (url.match(/^([^#]+)/) || [])[1];\r\n        }\r\n\r\n        options = $.extend(true, {\r\n            url: url,\r\n            success: $.ajaxSettings.success,\r\n            type: method || $.ajaxSettings.type,\r\n            iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'\r\n        }, options);\r\n\r\n        // hook for manipulating the form data before it is extracted;\r\n        // convenient for use with rich editors like tinyMCE or FCKEditor\r\n        var veto = {};\r\n        this.trigger('form-pre-serialize', [this, options, veto]);\r\n        if (veto.veto) {\r\n            log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');\r\n            return this;\r\n        }\r\n\r\n        // provide opportunity to alter form data before it is serialized\r\n        if (options.beforeSerialize && options.beforeSerialize(this, options) === false) {\r\n            log('ajaxSubmit: submit aborted via beforeSerialize callback');\r\n            return this;\r\n        }\r\n\r\n        var traditional = options.traditional;\r\n        if (traditional === undefined) {\r\n            traditional = $.ajaxSettings.traditional;\r\n        }\r\n\r\n        var elements = [];\r\n        var qx, a = this.formToArray(options.semantic, elements);\r\n        if (options.data) {\r\n            options.extraData = options.data;\r\n            qx = $.param(options.data, traditional);\r\n        }\r\n\r\n        // give pre-submit callback an opportunity to abort the submit\r\n        if (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {\r\n            log('ajaxSubmit: submit aborted via beforeSubmit callback');\r\n            return this;\r\n        }\r\n\r\n        // fire vetoable 'validate' event\r\n        this.trigger('form-submit-validate', [a, this, options, veto]);\r\n        if (veto.veto) {\r\n            log('ajaxSubmit: submit vetoed via form-submit-validate trigger');\r\n            return this;\r\n        }\r\n\r\n        var q = $.param(a, traditional);\r\n        if (qx) {\r\n            q = (q ? (q + '&' + qx) : qx);\r\n        }\r\n        if (options.type.toUpperCase() == 'GET') {\r\n            options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;\r\n            options.data = null; // data is null for 'get'\r\n        } else {\r\n            options.data = q; // data is the query string for 'post'\r\n        }\r\n\r\n        var callbacks = [];\r\n        if (options.resetForm) {\r\n            callbacks.push(function() {\r\n                $form.resetForm();\r\n            });\r\n        }\r\n        if (options.clearForm) {\r\n            callbacks.push(function() {\r\n                $form.clearForm(options.includeHidden);\r\n            });\r\n        }\r\n\r\n        // perform a load on the target only if dataType is not provided\r\n        if (!options.dataType && options.target) {\r\n            var oldSuccess = options.success || function() {};\r\n            callbacks.push(function(data) {\r\n                var fn = options.replaceTarget ? 'replaceWith' : 'html';\r\n                $(options.target)[fn](data).each(oldSuccess, arguments);\r\n            });\r\n        } else if (options.success) {\r\n            callbacks.push(options.success);\r\n        }\r\n\r\n        options.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg\r\n            var context = options.context || this; // jQuery 1.4+ supports scope context\r\n            for (var i = 0, max = callbacks.length; i < max; i++) {\r\n                callbacks[i].apply(context, [data, status, xhr || $form, $form]);\r\n            }\r\n        };\r\n\r\n        if (options.error) {\r\n            var oldError = options.error;\r\n            options.error = function(xhr, status, error) {\r\n                var context = options.context || this;\r\n                oldError.apply(context, [xhr, status, error, $form]);\r\n            };\r\n        }\r\n\r\n        if (options.complete) {\r\n            var oldComplete = options.complete;\r\n            options.complete = function(xhr, status) {\r\n                var context = options.context || this;\r\n                oldComplete.apply(context, [xhr, status, $form]);\r\n            };\r\n        }\r\n\r\n        // are there files to upload?\r\n\r\n        // [value] (issue #113), also see comment:\r\n        // https://github.com/malsup/form/commit/588306aedba1de01388032d5f42a60159eea9228#commitcomment-2180219\r\n        var fileInputs = $('input[type=file]:enabled', this).filter(function() {\r\n            return $(this).val() !== '';\r\n        });\r\n\r\n        var hasFileInputs = fileInputs.length > 0;\r\n        var mp = 'multipart/form-data';\r\n        var multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);\r\n\r\n        var fileAPI = feature.fileapi && feature.formdata;\r\n        log(\"fileAPI :\" + fileAPI);\r\n        var shouldUseFrame = (hasFileInputs || multipart) && !fileAPI;\r\n\r\n        var jqxhr;\r\n\r\n        // options.iframe allows user to force iframe mode\r\n        // 06-NOV-09: now defaulting to iframe mode if file input is detected\r\n        if (options.iframe !== false && (options.iframe || shouldUseFrame)) {\r\n            // hack to fix Safari hang (thanks to Tim Molendijk for this)\r\n            // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d\r\n            if (options.closeKeepAlive) {\r\n                $.get(options.closeKeepAlive, function() {\r\n                    jqxhr = fileUploadIframe(a);\r\n                });\r\n            } else {\r\n                jqxhr = fileUploadIframe(a);\r\n            }\r\n        } else if ((hasFileInputs || multipart) && fileAPI) {\r\n            jqxhr = fileUploadXhr(a);\r\n        } else {\r\n            jqxhr = $.ajax(options);\r\n        }\r\n\r\n        $form.data('jqxhr', '').data('jqxhr', jqxhr);\r\n\r\n        // clear element array\r\n        for (var k = 0; k < elements.length; k++) {\r\n            elements[k] = null;\r\n        }\r\n\r\n        // fire 'notify' event\r\n        this.trigger('form-submit-notify', [this, options]);\r\n        return this;\r\n\r\n        // utility fn for deep serialization\r\n        function deepSerialize(extraData) {\r\n            var serialized = $.param(extraData, options.traditional).split('&');\r\n            var len = serialized.length;\r\n            var result = [];\r\n            var i, part;\r\n            for (i = 0; i < len; i++) {\r\n                // #252; undo param space replacement\r\n                serialized[i] = serialized[i].replace(/\\+/g, ' ');\r\n                part = serialized[i].split('=');\r\n                // #278; use array instead of object storage, favoring array serializations\r\n                result.push([decodeURIComponent(part[0]), decodeURIComponent(part[1])]);\r\n            }\r\n            return result;\r\n        }\r\n\r\n        // XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)\r\n        function fileUploadXhr(a) {\r\n            var formdata = new FormData();\r\n\r\n            for (var i = 0; i < a.length; i++) {\r\n                formdata.append(a[i].name, a[i].value);\r\n            }\r\n\r\n            if (options.extraData) {\r\n                var serializedData = deepSerialize(options.extraData);\r\n                for (i = 0; i < serializedData.length; i++) {\r\n                    if (serializedData[i]) {\r\n                        formdata.append(serializedData[i][0], serializedData[i][1]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            options.data = null;\r\n\r\n            var s = $.extend(true, {}, $.ajaxSettings, options, {\r\n                contentType: false,\r\n                processData: false,\r\n                cache: false,\r\n                type: method || 'POST'\r\n            });\r\n\r\n            if (options.uploadProgress) {\r\n                // workaround because jqXHR does not expose upload property\r\n                s.xhr = function() {\r\n                    var xhr = $.ajaxSettings.xhr();\r\n                    if (xhr.upload) {\r\n                        xhr.upload.addEventListener('progress', function(event) {\r\n                            var percent = 0;\r\n                            var position = event.loaded || event.position; /*event.position is deprecated*/\r\n                            var total = event.total;\r\n                            if (event.lengthComputable) {\r\n                                percent = Math.ceil(position / total * 100);\r\n                            }\r\n                            options.uploadProgress(event, position, total, percent);\r\n                        }, false);\r\n                    }\r\n                    return xhr;\r\n                };\r\n            }\r\n\r\n            s.data = null;\r\n            var beforeSend = s.beforeSend;\r\n            s.beforeSend = function(xhr, o) {\r\n                //Send FormData() provided by user\r\n                if (options.formData) {\r\n                    o.data = options.formData;\r\n                } else {\r\n                    o.data = formdata;\r\n                }\r\n                if (beforeSend) {\r\n                    beforeSend.call(this, xhr, o);\r\n                }\r\n            };\r\n            return $.ajax(s);\r\n        }\r\n\r\n        // private function for handling file uploads (hat tip to YAHOO!)\r\n        function fileUploadIframe(a) {\r\n            var form = $form[0],\r\n                el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;\r\n            var deferred = $.Deferred();\r\n\r\n            // #341\r\n            deferred.abort = function(status) {\r\n                xhr.abort(status);\r\n            };\r\n\r\n            if (a) {\r\n                // ensure that every serialized input is still enabled\r\n                for (i = 0; i < elements.length; i++) {\r\n                    el = $(elements[i]);\r\n                    if (hasProp) {\r\n                        el.prop('disabled', false);\r\n                    } else {\r\n                        el.removeAttr('disabled');\r\n                    }\r\n                }\r\n            }\r\n\r\n            s = $.extend(true, {}, $.ajaxSettings, options);\r\n            s.context = s.context || s;\r\n            id = 'jqFormIO' + (new Date().getTime());\r\n            if (s.iframeTarget) {\r\n                $io = $(s.iframeTarget);\r\n                n = $io.attr2('name');\r\n                if (!n) {\r\n                    $io.attr2('name', id);\r\n                } else {\r\n                    id = n;\r\n                }\r\n            } else {\r\n                $io = $('<iframe name=\"' + id + '\" src=\"' + s.iframeSrc + '\" />');\r\n                $io.css({\r\n                    position: 'absolute',\r\n                    top: '-1000px',\r\n                    left: '-1000px'\r\n                });\r\n            }\r\n            io = $io[0];\r\n\r\n\r\n            xhr = { // mock object\r\n                aborted: 0,\r\n                responseText: null,\r\n                responseXML: null,\r\n                status: 0,\r\n                statusText: 'n/a',\r\n                getAllResponseHeaders: function() {},\r\n                getResponseHeader: function() {},\r\n                setRequestHeader: function() {},\r\n                abort: function(status) {\r\n                    var e = (status === 'timeout' ? 'timeout' : 'aborted');\r\n                    log('aborting upload... ' + e);\r\n                    this.aborted = 1;\r\n\r\n                    try { // #214, #257\r\n                        if (io.contentWindow.document.execCommand) {\r\n                            io.contentWindow.document.execCommand('Stop');\r\n                        }\r\n                    } catch (ignore) {}\r\n\r\n                    $io.attr('src', s.iframeSrc); // abort op in progress\r\n                    xhr.error = e;\r\n                    if (s.error) {\r\n                        s.error.call(s.context, xhr, e, status);\r\n                    }\r\n                    if (g) {\r\n                        $.event.trigger(\"ajaxError\", [xhr, s, e]);\r\n                    }\r\n                    if (s.complete) {\r\n                        s.complete.call(s.context, xhr, e);\r\n                    }\r\n                }\r\n            };\r\n\r\n            g = s.global;\r\n            // trigger ajax global events so that activity/block indicators work like normal\r\n            if (g && 0 === $.active++) {\r\n                $.event.trigger(\"ajaxStart\");\r\n            }\r\n            if (g) {\r\n                $.event.trigger(\"ajaxSend\", [xhr, s]);\r\n            }\r\n\r\n            if (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {\r\n                if (s.global) {\r\n                    $.active--;\r\n                }\r\n                deferred.reject();\r\n                return deferred;\r\n            }\r\n            if (xhr.aborted) {\r\n                deferred.reject();\r\n                return deferred;\r\n            }\r\n\r\n            // add submitting element to data if we know it\r\n            sub = form.clk;\r\n            if (sub) {\r\n                n = sub.name;\r\n                if (n && !sub.disabled) {\r\n                    s.extraData = s.extraData || {};\r\n                    s.extraData[n] = sub.value;\r\n                    if (sub.type == \"image\") {\r\n                        s.extraData[n + '.x'] = form.clk_x;\r\n                        s.extraData[n + '.y'] = form.clk_y;\r\n                    }\r\n                }\r\n            }\r\n\r\n            var CLIENT_TIMEOUT_ABORT = 1;\r\n            var SERVER_ABORT = 2;\r\n\r\n            function getDoc(frame) {\r\n                /* it looks like contentWindow or contentDocument do not\r\n                 * carry the protocol property in ie8, when running under ssl\r\n                 * frame.document is the only valid response document, since\r\n                 * the protocol is know but not on the other two objects. strange?\r\n                 * \"Same origin policy\" http://en.wikipedia.org/wiki/Same_origin_policy\r\n                 */\r\n\r\n                var doc = null;\r\n\r\n                // IE8 cascading access check\r\n                try {\r\n                    if (frame.contentWindow) {\r\n                        doc = frame.contentWindow.document;\r\n                    }\r\n                } catch (err) {\r\n                    // IE8 access denied under ssl & missing protocol\r\n                    log('cannot get iframe.contentWindow document: ' + err);\r\n                }\r\n\r\n                if (doc) { // successful getting content\r\n                    return doc;\r\n                }\r\n\r\n                try { // simply checking may throw in ie8 under ssl or mismatched protocol\r\n                    doc = frame.contentDocument ? frame.contentDocument : frame.document;\r\n                } catch (err) {\r\n                    // last attempt\r\n                    log('cannot get iframe.contentDocument: ' + err);\r\n                    doc = frame.document;\r\n                }\r\n                return doc;\r\n            }\r\n\r\n            // Rails CSRF hack (thanks to Yvan Barthelemy)\r\n            var csrf_token = $('meta[name=csrf-token]').attr('content');\r\n            var csrf_param = $('meta[name=csrf-param]').attr('content');\r\n            if (csrf_param && csrf_token) {\r\n                s.extraData = s.extraData || {};\r\n                s.extraData[csrf_param] = csrf_token;\r\n            }\r\n\r\n            // take a breath so that pending repaints get some cpu time before the upload starts\r\n            function doSubmit() {\r\n                // make sure form attrs are set\r\n                var t = $form.attr2('target'),\r\n                    a = $form.attr2('action'),\r\n                    mp = 'multipart/form-data',\r\n                    et = $form.attr('enctype') || $form.attr('encoding') || mp;\r\n\r\n                // update form attrs in IE friendly way\r\n                form.setAttribute('target', id);\r\n                if (!method || /post/i.test(method)) {\r\n                    form.setAttribute('method', 'POST');\r\n                }\r\n                if (a != s.url) {\r\n                    form.setAttribute('action', s.url);\r\n                }\r\n\r\n                // ie borks in some cases when setting encoding\r\n                if (!s.skipEncodingOverride && (!method || /post/i.test(method))) {\r\n                    $form.attr({\r\n                        encoding: 'multipart/form-data',\r\n                        enctype: 'multipart/form-data'\r\n                    });\r\n                }\r\n\r\n                // support timout\r\n                if (s.timeout) {\r\n                    timeoutHandle = setTimeout(function() {\r\n                        timedOut = true;\r\n                        cb(CLIENT_TIMEOUT_ABORT);\r\n                    }, s.timeout);\r\n                }\r\n\r\n                // look for server aborts\r\n                function checkState() {\r\n                    try {\r\n                        var state = getDoc(io).readyState;\r\n                        log('state = ' + state);\r\n                        if (state && state.toLowerCase() == 'uninitialized') {\r\n                            setTimeout(checkState, 50);\r\n                        }\r\n                    } catch (e) {\r\n                        log('Server abort: ', e, ' (', e.name, ')');\r\n                        cb(SERVER_ABORT);\r\n                        if (timeoutHandle) {\r\n                            clearTimeout(timeoutHandle);\r\n                        }\r\n                        timeoutHandle = undefined;\r\n                    }\r\n                }\r\n\r\n                // add \"extra\" data to form if provided in options\r\n                var extraInputs = [];\r\n                try {\r\n                    if (s.extraData) {\r\n                        for (var n in s.extraData) {\r\n                            if (s.extraData.hasOwnProperty(n)) {\r\n                                // if using the $.param format that allows for multiple values with the same name\r\n                                if ($.isPlainObject(s.extraData[n]) && s.extraData[n].hasOwnProperty('name') && s.extraData[n].hasOwnProperty('value')) {\r\n                                    extraInputs.push(\r\n                                        $('<input type=\"hidden\" name=\"' + s.extraData[n].name + '\">').val(s.extraData[n].value)\r\n                                        .appendTo(form)[0]);\r\n                                } else {\r\n                                    extraInputs.push(\r\n                                        $('<input type=\"hidden\" name=\"' + n + '\">').val(s.extraData[n])\r\n                                        .appendTo(form)[0]);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (!s.iframeTarget) {\r\n                        // add iframe to doc and submit the form\r\n                        $io.appendTo('body');\r\n                    }\r\n                    if (io.attachEvent) {\r\n                        io.attachEvent('onload', cb);\r\n                    } else {\r\n                        io.addEventListener('load', cb, false);\r\n                    }\r\n                    setTimeout(checkState, 15);\r\n\r\n                    try {\r\n                        form.submit();\r\n                    } catch (err) {\r\n                        // just in case form has element with name/id of 'submit'\r\n                        var submitFn = document.createElement('form').submit;\r\n                        submitFn.apply(form);\r\n                    }\r\n                } finally {\r\n                    // reset attrs and remove \"extra\" input elements\r\n                    form.setAttribute('action', a);\r\n                    form.setAttribute('enctype', et); // #380\r\n                    if (t) {\r\n                        form.setAttribute('target', t);\r\n                    } else {\r\n                        $form.removeAttr('target');\r\n                    }\r\n                    $(extraInputs).remove();\r\n                }\r\n            }\r\n\r\n            if (s.forceSync) {\r\n                doSubmit();\r\n            } else {\r\n                setTimeout(doSubmit, 10); // this lets dom updates render\r\n            }\r\n\r\n            var data, doc, domCheckCount = 50,\r\n                callbackProcessed;\r\n\r\n            function cb(e) {\r\n                if (xhr.aborted || callbackProcessed) {\r\n                    return;\r\n                }\r\n\r\n                doc = getDoc(io);\r\n                if (!doc) {\r\n                    log('cannot access response document');\r\n                    e = SERVER_ABORT;\r\n                }\r\n                if (e === CLIENT_TIMEOUT_ABORT && xhr) {\r\n                    xhr.abort('timeout');\r\n                    deferred.reject(xhr, 'timeout');\r\n                    return;\r\n                } else if (e == SERVER_ABORT && xhr) {\r\n                    xhr.abort('server abort');\r\n                    deferred.reject(xhr, 'error', 'server abort');\r\n                    return;\r\n                }\r\n\r\n                if (!doc || doc.location.href == s.iframeSrc) {\r\n                    // response not received yet\r\n                    if (!timedOut) {\r\n                        return;\r\n                    }\r\n                }\r\n                if (io.detachEvent) {\r\n                    io.detachEvent('onload', cb);\r\n                } else {\r\n                    io.removeEventListener('load', cb, false);\r\n                }\r\n\r\n                var status = 'success',\r\n                    errMsg;\r\n                try {\r\n                    if (timedOut) {\r\n                        throw 'timeout';\r\n                    }\r\n\r\n                    var isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);\r\n                    log('isXml=' + isXml);\r\n                    if (!isXml && window.opera && (doc.body === null || !doc.body.innerHTML)) {\r\n                        if (--domCheckCount) {\r\n                            // in some browsers (Opera) the iframe DOM is not always traversable when\r\n                            // the onload callback fires, so we loop a bit to accommodate\r\n                            log('requeing onLoad callback, DOM not available');\r\n                            setTimeout(cb, 250);\r\n                            return;\r\n                        }\r\n                        // let this fall through because server response could be an empty document\r\n                        //log('Could not access iframe DOM after mutiple tries.');\r\n                        //throw 'DOMException: not available';\r\n                    }\r\n\r\n                    //log('response detected');\r\n                    var docRoot = doc.body ? doc.body : doc.documentElement;\r\n                    xhr.responseText = docRoot ? docRoot.innerHTML : null;\r\n                    xhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;\r\n                    if (isXml) {\r\n                        s.dataType = 'xml';\r\n                    }\r\n                    xhr.getResponseHeader = function(header) {\r\n                        var headers = {\r\n                            'content-type': s.dataType\r\n                        };\r\n                        return headers[header.toLowerCase()];\r\n                    };\r\n                    // support for XHR 'status' & 'statusText' emulation :\r\n                    if (docRoot) {\r\n                        xhr.status = Number(docRoot.getAttribute('status')) || xhr.status;\r\n                        xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;\r\n                    }\r\n\r\n                    var dt = (s.dataType || '').toLowerCase();\r\n                    var scr = /(json|script|text)/.test(dt);\r\n                    if (scr || s.textarea) {\r\n                        // see if user embedded response in textarea\r\n                        var ta = doc.getElementsByTagName('textarea')[0];\r\n                        if (ta) {\r\n                            xhr.responseText = ta.value;\r\n                            // support for XHR 'status' & 'statusText' emulation :\r\n                            xhr.status = Number(ta.getAttribute('status')) || xhr.status;\r\n                            xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;\r\n                        } else if (scr) {\r\n                            // account for browsers injecting pre around json response\r\n                            var pre = doc.getElementsByTagName('pre')[0];\r\n                            var b = doc.getElementsByTagName('body')[0];\r\n                            if (pre) {\r\n                                xhr.responseText = pre.textContent ? pre.textContent : pre.innerText;\r\n                            } else if (b) {\r\n                                xhr.responseText = b.textContent ? b.textContent : b.innerText;\r\n                            }\r\n                        }\r\n                    } else if (dt == 'xml' && !xhr.responseXML && xhr.responseText) {\r\n                        xhr.responseXML = toXml(xhr.responseText);\r\n                    }\r\n\r\n                    try {\r\n                        data = httpData(xhr, dt, s);\r\n                    } catch (err) {\r\n                        status = 'parsererror';\r\n                        xhr.error = errMsg = (err || status);\r\n                    }\r\n                } catch (err) {\r\n                    log('error caught: ', err);\r\n                    status = 'error';\r\n                    xhr.error = errMsg = (err || status);\r\n                }\r\n\r\n                if (xhr.aborted) {\r\n                    log('upload aborted');\r\n                    status = null;\r\n                }\r\n\r\n                if (xhr.status) { // we've set xhr.status\r\n                    status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';\r\n                }\r\n\r\n                // ordering of these callbacks/triggers is odd, but that's how $.ajax does it\r\n                if (status === 'success') {\r\n                    if (s.success) {\r\n                        s.success.call(s.context, data, 'success', xhr);\r\n                    }\r\n                    deferred.resolve(xhr.responseText, 'success', xhr);\r\n                    if (g) {\r\n                        $.event.trigger(\"ajaxSuccess\", [xhr, s]);\r\n                    }\r\n                } else if (status) {\r\n                    if (errMsg === undefined) {\r\n                        errMsg = xhr.statusText;\r\n                    }\r\n                    if (s.error) {\r\n                        s.error.call(s.context, xhr, status, errMsg);\r\n                    }\r\n                    deferred.reject(xhr, 'error', errMsg);\r\n                    if (g) {\r\n                        $.event.trigger(\"ajaxError\", [xhr, s, errMsg]);\r\n                    }\r\n                }\r\n\r\n                if (g) {\r\n                    $.event.trigger(\"ajaxComplete\", [xhr, s]);\r\n                }\r\n\r\n                if (g && !--$.active) {\r\n                    $.event.trigger(\"ajaxStop\");\r\n                }\r\n\r\n                if (s.complete) {\r\n                    s.complete.call(s.context, xhr, status);\r\n                }\r\n\r\n                callbackProcessed = true;\r\n                if (s.timeout) {\r\n                    clearTimeout(timeoutHandle);\r\n                }\r\n\r\n                // clean up\r\n                setTimeout(function() {\r\n                    if (!s.iframeTarget) {\r\n                        $io.remove();\r\n                    } else { //adding else to clean up existing iframe response.\r\n                        $io.attr('src', s.iframeSrc);\r\n                    }\r\n                    xhr.responseXML = null;\r\n                }, 100);\r\n            }\r\n\r\n            var toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)\r\n                if (window.ActiveXObject) {\r\n                    doc = new ActiveXObject('Microsoft.XMLDOM');\r\n                    doc.async = 'false';\r\n                    doc.loadXML(s);\r\n                } else {\r\n                    doc = (new DOMParser()).parseFromString(s, 'text/xml');\r\n                }\r\n                return (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;\r\n            };\r\n            var parseJSON = $.parseJSON || function(s) {\r\n                /*jslint evil:true */\r\n                return window['eval']('(' + s + ')');\r\n            };\r\n\r\n            var httpData = function(xhr, type, s) { // mostly lifted from jq1.4.4\r\n\r\n                var ct = xhr.getResponseHeader('content-type') || '',\r\n                    xml = type === 'xml' || !type && ct.indexOf('xml') >= 0,\r\n                    data = xml ? xhr.responseXML : xhr.responseText;\r\n\r\n                if (xml && data.documentElement.nodeName === 'parsererror') {\r\n                    if ($.error) {\r\n                        $.error('parsererror');\r\n                    }\r\n                }\r\n                if (s && s.dataFilter) {\r\n                    data = s.dataFilter(data, type);\r\n                }\r\n                if (typeof data === 'string') {\r\n                    if (type === 'json' || !type && ct.indexOf('json') >= 0) {\r\n                        data = parseJSON(data);\r\n                    } else if (type === \"script\" || !type && ct.indexOf(\"javascript\") >= 0) {\r\n                        $.globalEval(data);\r\n                    }\r\n                }\r\n                return data;\r\n            };\r\n\r\n            return deferred;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * ajaxForm() provides a mechanism for fully automating form submission.\r\n     *\r\n     * The advantages of using this method instead of ajaxSubmit() are:\r\n     *\r\n     * 1: This method will include coordinates for <input type=\"image\" /> elements (if the element\r\n     *    is used to submit the form).\r\n     * 2. This method will include the submit element's name/value data (for the element that was\r\n     *    used to submit the form).\r\n     * 3. This method binds the submit() method to the form for you.\r\n     *\r\n     * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely\r\n     * passes the options argument along after properly binding events for submit elements and\r\n     * the form itself.\r\n     */\r\n    $.fn.ajaxForm = function(options) {\r\n        options = options || {};\r\n        options.delegation = options.delegation && $.isFunction($.fn.on);\r\n\r\n        // in jQuery 1.3+ we can fix mistakes with the ready state\r\n        if (!options.delegation && this.length === 0) {\r\n            var o = {\r\n                s: this.selector,\r\n                c: this.context\r\n            };\r\n            if (!$.isReady && o.s) {\r\n                log('DOM not ready, queuing ajaxForm');\r\n                $(function() {\r\n                    $(o.s, o.c).ajaxForm(options);\r\n                });\r\n                return this;\r\n            }\r\n            // is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()\r\n            log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));\r\n            return this;\r\n        }\r\n\r\n        if (options.delegation) {\r\n            $(document)\r\n                .off('submit.form-plugin', this.selector, doAjaxSubmit)\r\n                .off('click.form-plugin', this.selector, captureSubmittingElement)\r\n                .on('submit.form-plugin', this.selector, options, doAjaxSubmit)\r\n                .on('click.form-plugin', this.selector, options, captureSubmittingElement);\r\n            return this;\r\n        }\r\n\r\n        return this.ajaxFormUnbind()\r\n            .bind('submit.form-plugin', options, doAjaxSubmit)\r\n            .bind('click.form-plugin', options, captureSubmittingElement);\r\n    };\r\n\r\n    // private event handlers\r\n    function doAjaxSubmit(e) {\r\n        /*jshint validthis:true */\r\n        var options = e.data;\r\n        if (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed\r\n            e.preventDefault();\r\n            $(e.target).ajaxSubmit(options); // #365\r\n        }\r\n    }\r\n\r\n    function captureSubmittingElement(e) {\r\n        /*jshint validthis:true */\r\n        var target = e.target;\r\n        var $el = $(target);\r\n        if (!($el.is(\"[type=submit],[type=image]\"))) {\r\n            // is this a child element of the submit el?  (ex: a span within a button)\r\n            var t = $el.closest('[type=submit]');\r\n            if (t.length === 0) {\r\n                return;\r\n            }\r\n            target = t[0];\r\n        }\r\n        var form = this;\r\n        form.clk = target;\r\n        if (target.type == 'image') {\r\n            if (e.offsetX !== undefined) {\r\n                form.clk_x = e.offsetX;\r\n                form.clk_y = e.offsetY;\r\n            } else if (typeof $.fn.offset == 'function') {\r\n                var offset = $el.offset();\r\n                form.clk_x = e.pageX - offset.left;\r\n                form.clk_y = e.pageY - offset.top;\r\n            } else {\r\n                form.clk_x = e.pageX - target.offsetLeft;\r\n                form.clk_y = e.pageY - target.offsetTop;\r\n            }\r\n        }\r\n        // clear form vars\r\n        setTimeout(function() {\r\n            form.clk = form.clk_x = form.clk_y = null;\r\n        }, 100);\r\n    }\r\n\r\n\r\n    // ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm\r\n    $.fn.ajaxFormUnbind = function() {\r\n        return this.unbind('submit.form-plugin click.form-plugin');\r\n    };\r\n\r\n    /**\r\n     * formToArray() gathers form element data into an array of objects that can\r\n     * be passed to any of the following ajax functions: $.get, $.post, or load.\r\n     * Each object in the array has both a 'name' and 'value' property.  An example of\r\n     * an array for a simple login form might be:\r\n     *\r\n     * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]\r\n     *\r\n     * It is this array that is passed to pre-submit callback functions provided to the\r\n     * ajaxSubmit() and ajaxForm() methods.\r\n     */\r\n    $.fn.formToArray = function(semantic, elements) {\r\n        var a = [];\r\n        if (this.length === 0) {\r\n            return a;\r\n        }\r\n\r\n        var form = this[0];\r\n        var formId = this.attr('id');\r\n        var els = semantic ? form.getElementsByTagName('*') : form.elements;\r\n        var els2;\r\n\r\n        if (els && !/MSIE [678]/.test(navigator.userAgent)) { // #390\r\n            els = $(els).get(); // convert to standard array\r\n        }\r\n\r\n        // #386; account for inputs outside the form which use the 'form' attribute\r\n        if (formId) {\r\n            //els2 = $(':input[form=\"' + formId + '\"]').get(); // hat tip @thet\r\n            els2 = $('#' + formId + ' input').get();\r\n            if (els2.length) {\r\n                els = (els || []).concat(els2);\r\n            }\r\n        }\r\n\r\n        if (!els || !els.length) {\r\n            return a;\r\n        }\r\n\r\n        var i, j, n, v, el, max, jmax;\r\n        for (i = 0, max = els.length; i < max; i++) {\r\n            el = els[i];\r\n            n = el.name;\r\n            if (!n || el.disabled) {\r\n                continue;\r\n            }\r\n\r\n            if (semantic && form.clk && el.type == \"image\") {\r\n                // handle image inputs on the fly when semantic == true\r\n                if (form.clk == el) {\r\n                    a.push({\r\n                        name: n,\r\n                        value: $(el).val(),\r\n                        type: el.type\r\n                    });\r\n                    a.push({\r\n                        name: n + '.x',\r\n                        value: form.clk_x\r\n                    }, {\r\n                        name: n + '.y',\r\n                        value: form.clk_y\r\n                    });\r\n                }\r\n                continue;\r\n            }\r\n\r\n            v = $.fieldValue(el, true);\r\n            if (v && v.constructor == Array) {\r\n                if (elements) {\r\n                    elements.push(el);\r\n                }\r\n                for (j = 0, jmax = v.length; j < jmax; j++) {\r\n                    a.push({\r\n                        name: n,\r\n                        value: v[j]\r\n                    });\r\n                }\r\n            } else if (feature.fileapi && el.type == 'file') {\r\n                if (elements) {\r\n                    elements.push(el);\r\n                }\r\n                var files = el.files;\r\n                if (files.length) {\r\n                    for (j = 0; j < files.length; j++) {\r\n                        a.push({\r\n                            name: n,\r\n                            value: files[j],\r\n                            type: el.type\r\n                        });\r\n                    }\r\n                } else {\r\n                    // #180\r\n                    a.push({\r\n                        name: n,\r\n                        value: '',\r\n                        type: el.type\r\n                    });\r\n                }\r\n            } else if (v !== null && typeof v != 'undefined') {\r\n                if (elements) {\r\n                    elements.push(el);\r\n                }\r\n                a.push({\r\n                    name: n,\r\n                    value: v,\r\n                    type: el.type,\r\n                    required: el.required\r\n                });\r\n            }\r\n        }\r\n\r\n        if (!semantic && form.clk) {\r\n            // input type=='image' are not found in elements array! handle it here\r\n            var $input = $(form.clk),\r\n                input = $input[0];\r\n            n = input.name;\r\n            if (n && !input.disabled && input.type == 'image') {\r\n                a.push({\r\n                    name: n,\r\n                    value: $input.val()\r\n                });\r\n                a.push({\r\n                    name: n + '.x',\r\n                    value: form.clk_x\r\n                }, {\r\n                    name: n + '.y',\r\n                    value: form.clk_y\r\n                });\r\n            }\r\n        }\r\n        return a;\r\n    };\r\n\r\n    /**\r\n     * Serializes form data into a 'submittable' string. This method will return a string\r\n     * in the format: name1=value1&amp;name2=value2\r\n     */\r\n    $.fn.formSerialize = function(semantic) {\r\n        //hand off to jQuery.param for proper encoding\r\n        return $.param(this.formToArray(semantic));\r\n    };\r\n\r\n    /**\r\n     * Serializes all field elements in the jQuery object into a query string.\r\n     * This method will return a string in the format: name1=value1&amp;name2=value2\r\n     */\r\n    $.fn.fieldSerialize = function(successful) {\r\n        var a = [];\r\n        this.each(function() {\r\n            var n = this.name;\r\n            if (!n) {\r\n                return;\r\n            }\r\n            var v = $.fieldValue(this, successful);\r\n            if (v && v.constructor == Array) {\r\n                for (var i = 0, max = v.length; i < max; i++) {\r\n                    a.push({\r\n                        name: n,\r\n                        value: v[i]\r\n                    });\r\n                }\r\n            } else if (v !== null && typeof v != 'undefined') {\r\n                a.push({\r\n                    name: this.name,\r\n                    value: v\r\n                });\r\n            }\r\n        });\r\n        //hand off to jQuery.param for proper encoding\r\n        return $.param(a);\r\n    };\r\n\r\n    /**\r\n     * Returns the value(s) of the element in the matched set.  For example, consider the following form:\r\n     *\r\n     *  <form><fieldset>\r\n     *      <input name=\"A\" type=\"text\" />\r\n     *      <input name=\"A\" type=\"text\" />\r\n     *      <input name=\"B\" type=\"checkbox\" value=\"B1\" />\r\n     *      <input name=\"B\" type=\"checkbox\" value=\"B2\"/>\r\n     *      <input name=\"C\" type=\"radio\" value=\"C1\" />\r\n     *      <input name=\"C\" type=\"radio\" value=\"C2\" />\r\n     *  </fieldset></form>\r\n     *\r\n     *  var v = $('input[type=text]').fieldValue();\r\n     *  // if no values are entered into the text inputs\r\n     *  v == ['','']\r\n     *  // if values entered into the text inputs are 'foo' and 'bar'\r\n     *  v == ['foo','bar']\r\n     *\r\n     *  var v = $('input[type=checkbox]').fieldValue();\r\n     *  // if neither checkbox is checked\r\n     *  v === undefined\r\n     *  // if both checkboxes are checked\r\n     *  v == ['B1', 'B2']\r\n     *\r\n     *  var v = $('input[type=radio]').fieldValue();\r\n     *  // if neither radio is checked\r\n     *  v === undefined\r\n     *  // if first radio is checked\r\n     *  v == ['C1']\r\n     *\r\n     * The successful argument controls whether or not the field element must be 'successful'\r\n     * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).\r\n     * The default value of the successful argument is true.  If this value is false the value(s)\r\n     * for each element is returned.\r\n     *\r\n     * Note: This method *always* returns an array.  If no valid value can be determined the\r\n     *    array will be empty, otherwise it will contain one or more values.\r\n     */\r\n    $.fn.fieldValue = function(successful) {\r\n        for (var val = [], i = 0, max = this.length; i < max; i++) {\r\n            var el = this[i];\r\n            var v = $.fieldValue(el, successful);\r\n            if (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {\r\n                continue;\r\n            }\r\n            if (v.constructor == Array) {\r\n                $.merge(val, v);\r\n            } else {\r\n                val.push(v);\r\n            }\r\n        }\r\n        return val;\r\n    };\r\n\r\n    /**\r\n     * Returns the value of the field element.\r\n     */\r\n    $.fieldValue = function(el, successful) {\r\n        var n = el.name,\r\n            t = el.type,\r\n            tag = el.tagName.toLowerCase();\r\n        if (successful === undefined) {\r\n            successful = true;\r\n        }\r\n\r\n        if (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||\r\n                (t == 'checkbox' || t == 'radio') && !el.checked ||\r\n                (t == 'submit' || t == 'image') && el.form && el.form.clk != el ||\r\n                tag == 'select' && el.selectedIndex == -1)) {\r\n            return null;\r\n        }\r\n\r\n        if (tag == 'select') {\r\n            var index = el.selectedIndex;\r\n            if (index < 0) {\r\n                return null;\r\n            }\r\n            var a = [],\r\n                ops = el.options;\r\n            var one = (t == 'select-one');\r\n            var max = (one ? index + 1 : ops.length);\r\n            for (var i = (one ? index : 0); i < max; i++) {\r\n                var op = ops[i];\r\n                if (op.selected) {\r\n                    var v = op.value;\r\n                    if (!v) { // extra pain for IE...\r\n                        v = (op.attributes && op.attributes.value && !(op.attributes.value.specified)) ? op.text : op.value;\r\n                    }\r\n                    if (one) {\r\n                        return v;\r\n                    }\r\n                    a.push(v);\r\n                }\r\n            }\r\n            return a;\r\n        }\r\n        return $(el).val();\r\n    };\r\n\r\n    /**\r\n     * Clears the form data.  Takes the following actions on the form's input fields:\r\n     *  - input text fields will have their 'value' property set to the empty string\r\n     *  - select elements will have their 'selectedIndex' property set to -1\r\n     *  - checkbox and radio inputs will have their 'checked' property set to false\r\n     *  - inputs of type submit, button, reset, and hidden will *not* be effected\r\n     *  - button elements will *not* be effected\r\n     */\r\n    $.fn.clearForm = function(includeHidden) {\r\n        return this.each(function() {\r\n            $('input,select,textarea', this).clearFields(includeHidden);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Clears the selected form elements.\r\n     */\r\n    $.fn.clearFields = $.fn.clearInputs = function(includeHidden) {\r\n        var re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list\r\n        return this.each(function() {\r\n            var t = this.type,\r\n                tag = this.tagName.toLowerCase();\r\n            if (re.test(t) || tag == 'textarea') {\r\n                this.value = '';\r\n            } else if (t == 'checkbox' || t == 'radio') {\r\n                this.checked = false;\r\n            } else if (tag == 'select') {\r\n                this.selectedIndex = -1;\r\n            } else if (t == \"file\") {\r\n                if (/MSIE/.test(navigator.userAgent)) {\r\n                    $(this).replaceWith($(this).clone(true));\r\n                } else {\r\n                    $(this).val('');\r\n                }\r\n            } else if (includeHidden) {\r\n                // includeHidden can be the value true, or it can be a selector string\r\n                // indicating a special test; for example:\r\n                //  $('#myForm').clearForm('.special:hidden')\r\n                // the above would clean hidden inputs that have the class of 'special'\r\n                if ((includeHidden === true && /hidden/.test(t)) ||\r\n                    (typeof includeHidden == 'string' && $(this).is(includeHidden))) {\r\n                    this.value = '';\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Resets the form data.  Causes all form elements to be reset to their original value.\r\n     */\r\n    $.fn.resetForm = function() {\r\n        return this.each(function() {\r\n            // guard against an input with the name of 'reset'\r\n            // note that IE reports the reset function as an 'object'\r\n            if (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {\r\n                this.reset();\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Enables or disables any matching elements.\r\n     */\r\n    $.fn.enable = function(b) {\r\n        if (b === undefined) {\r\n            b = true;\r\n        }\r\n        return this.each(function() {\r\n            this.disabled = !b;\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Checks/unchecks any matching checkboxes or radio buttons and\r\n     * selects/deselects and matching option elements.\r\n     */\r\n    $.fn.selected = function(select) {\r\n        if (select === undefined) {\r\n            select = true;\r\n        }\r\n        return this.each(function() {\r\n            var t = this.type;\r\n            if (t == 'checkbox' || t == 'radio') {\r\n                this.checked = select;\r\n            } else if (this.tagName.toLowerCase() == 'option') {\r\n                var $sel = $(this).parent('select');\r\n                if (select && $sel[0] && $sel[0].type == 'select-one') {\r\n                    // deselect all other options\r\n                    $sel.find('option').selected(false);\r\n                }\r\n                this.selected = select;\r\n            }\r\n        });\r\n    };\r\n\r\n    // expose debug var\r\n    $.fn.ajaxSubmit.debug = true;\r\n\r\n    // helper fn for console logging\r\n    function log() {\r\n        if (!$.fn.ajaxSubmit.debug) {\r\n            return;\r\n        }\r\n        var msg = '[jquery.form] ' + Array.prototype.join.call(arguments, '');\r\n        if (window.console && window.console.log) {\r\n            window.console.log(msg);\r\n        } else if (window.opera && window.opera.postError) {\r\n            window.opera.postError(msg);\r\n        }\r\n    }\r\n\r\n});\r\n",
    "_pulgins/sValid.js": "/**\r\n * sValid,验证\r\n * @module _pulgins/sValid\r\n * @name sValid\r\n *\r\n */\r\ndefine('_pulgins/sValid',function() {\r\n    $.extend($, {\r\n        sValid: function(validelement) {\r\n            var $this = $.sValid;\r\n            var sElement = $this.settings.sElement;\r\n            for (var i = 0; i < sElement.length; i++) {\r\n                var element = sElement[i];\r\n                var sEl = $(\"#\" + element).length > 0 ? $(\"#\" + element) : $(\".\" + element);\r\n                for (var j = 0; j < sEl.length; j++) {\r\n                    /* 兼容只验证某个元素 ccw*/\r\n                    if (typeof validelement !== \"undefined\") {\r\n                        if (sEl[0] === validelement[0]) {\r\n                            $this.check(element, sEl[j]);\r\n                        }\r\n                    } else {\r\n                        $this.check(element, sEl[j]);\r\n                    }\r\n                }\r\n            }\r\n            $this.callBackData();\r\n            var cEid = $this.errorFiles.eId;\r\n            var cEmsg = $this.errorFiles.eMsg;\r\n            var cErules = $this.errorFiles.eRules;\r\n            var isVlided = false;\r\n            if (cEid.length > 0) {\r\n                isVlided = false;\r\n            } else {\r\n                isVlided = true;\r\n            }\r\n            $this.settings.callback.apply(this, [cEid, cEmsg, cErules]);\r\n            $this.destroyData();\r\n            return isVlided;\r\n        }\r\n    });\r\n    //sValid\r\n    $.extend($.sValid, {\r\n        defaults: {\r\n            rules: {},\r\n            messages: {},\r\n            callback: function() {}\r\n        },\r\n        init: function(options) {\r\n            //初始化控件参数\r\n            var opt = $.extend({}, this.defaults, options);\r\n            var rules = opt.rules;\r\n            var messages = opt.messages;\r\n            var sElement = [];\r\n            $.map(rules, function(item, idx) {\r\n                sElement.push(idx);\r\n            });\r\n            this.settings = {};\r\n            this.settings[\"sElement\"] = sElement;\r\n            this.settings[\"sRules\"] = rules;\r\n            this.settings[\"sMessages\"] = messages;\r\n            this.settings['callback'] = opt.callback;\r\n        },\r\n        optional: function(element) {\r\n            var val = this.elementValue(element);\r\n            return !this.methods.required.call(this, val, element);\r\n        },\r\n        methods: {\r\n            required: function(value, element) {\r\n                if (element.nodeName.toLowerCase() === \"select\") {\r\n                    var val = $(element).val();\r\n                    return val && val.length > 0;\r\n                }\r\n                return $.trim(value).length > 0;\r\n            },\r\n            maxlength: function(value, element, param) {\r\n                var length = $.trim(value).length;\r\n                return this.optional(element) || length <= param;\r\n            },\r\n            minlength: function(value, element, param) {\r\n                var length = $.trim(value).length;\r\n                return this.optional(element) || length >= param;\r\n            },\r\n            //是否是合法数字（包括正数、负数）\r\n            number: function(value, element, param) {\r\n                return this.optional(element) || /^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test(value);\r\n            },\r\n            digits: function(value, element, param) {\r\n                return this.optional(element) || /^\\d+$/.test(value);\r\n            },\r\n            email: function(value, element, param) {\r\n                return this.optional(element) || /^[a-z0-9-]{1,30}@[a-z0-9-]{1,65}(\\.[a-z0-9-]{1,65})*$/.test(value);\r\n            },\r\n            /*\r\n               手机\r\n               by ccw\r\n            */\r\n            phone: function (value, element, param) {\r\n                return this.optional(element) || /^(13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])\\d{8}$/.test(value);\r\n            },\r\n            /*\r\n               密码由8-20位字符组成，要求数字、字母和符号两种以上组合\r\n               by ccw\r\n            */\r\n            password: function (value, element, param) {\r\n\r\n                return this.optional(element) || /(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^.{8,20}$/.test(value);\r\n            },\r\n            /*\r\n               邮箱手机\r\n               by ccw\r\n            */\r\n            emailphone: function (value, element, param) {\r\n                return this.optional(element) || (/^[a-z0-9-]{1,30}@[a-z0-9-]{1,65}(\\.[a-z0-9-]{1,65})*$/.test(value) || /^(13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])\\d{8}$/.test(value));\r\n            },\r\n            /*\r\n               电话号码\r\n               by LJL\r\n            */\r\n            telephone: function(value, element, param){\r\n                return this.optional(element) || /^\\d{3,4}-\\d{7,8}(-\\d{3,4})?$/.test(value);\r\n            },\r\n            /*\r\n                验证两次密码(不太灵活)\r\n                by LJL\r\n             */\r\n            equalTo:function(value, element, param){\r\n                if($('#retPassword').val() != $('#retPasswordOk').val()){\r\n                    return false;\r\n                }else{\r\n                    return true;\r\n                }\r\n            },\r\n            /*\r\n                验证身份证\r\n            */\r\n            isIdCardNo:function(value, element, param){\r\n                return this.optional(element) || isIdCardNo(value);\r\n            },\r\n            /*\r\n                身份证姓名\r\n            */\r\n            chcharacter: function(value, element, param){\r\n                var name = /^[\\u4E00-\\u9FA5]+$/;\r\n                return this.optional(element) || (name.test(value));\r\n            },\r\n            /*\r\n                银行卡简易版\r\n            */\r\n            bankCard: function(value, element, param){\r\n                // var value = value.replace(/\\s/g,'');\r\n                // var regx = /^(\\d{16}|\\d{19})$/;\r\n                // return this.optional(element) || (regx.test(value));\r\n\r\n                //http://cdn.jsdelivr.net/jquery.validation/1.14.0/jquery.validate.js\r\n                if ( this.optional( element ) ) {\r\n                    return \"dependency-mismatch\";\r\n                }\r\n                // accept only spaces, digits and dashes\r\n                if ( /[^0-9 \\-]+/.test( value ) ) {\r\n                    return false;\r\n                }\r\n                var nCheck = 0,\r\n                    nDigit = 0,\r\n                    bEven = false,\r\n                    n, cDigit;\r\n\r\n                value = value.replace( /\\D/g, \"\" );\r\n\r\n                // Basing min and max length on\r\n                // http://developer.ean.com/general_info/Valid_Credit_Card_Types\r\n                if ( value.length < 16 || value.length > 19 ) {\r\n                    return false;\r\n                }\r\n\r\n                for ( n = value.length - 1; n >= 0; n--) {\r\n                    cDigit = value.charAt( n );\r\n                    nDigit = parseInt( cDigit, 10 );\r\n                    if ( bEven ) {\r\n                        if ( ( nDigit *= 2 ) > 9 ) {\r\n                            nDigit -= 9;\r\n                        }\r\n                    }\r\n                    nCheck += nDigit;\r\n                    bEven = !bEven;\r\n                }\r\n\r\n                return ( nCheck % 10 ) === 0;\r\n            }\r\n        },\r\n        elementValue: function(element) {\r\n            var type = $(element).attr(\"type\");\r\n            var value = $(element).val();\r\n            if (typeof value === \"string\") {\r\n                return value.replace(/\\r/g, \"\");\r\n            }\r\n            return value;\r\n        },\r\n        rulesFormat: {\r\n            required: true,\r\n            email: true\r\n        },\r\n        errorFiles: {\r\n            eId: [],\r\n            eRules: {},\r\n            eMsg: {}\r\n        },\r\n        check: function(element, mEl) {\r\n            var settingsRules = [];\r\n            var methods = this.methods;\r\n            var rules = this.settings[\"sRules\"];\r\n            var mVal = this.elementValue.call(this, mEl);\r\n            var mParam = \"\";\r\n            var errorFiles = this.errorFiles;\r\n            var errRules = [];\r\n            //rules\r\n            if (typeof rules[element] === \"string\") {\r\n                if ($.inArray(rules[element], settingsRules) < 0) {\r\n                    settingsRules.push(rules[element]);\r\n                }\r\n            } else {\r\n                $.each(rules[element], function(idx, item) {\r\n                    if ($.inArray(idx, settingsRules) < 0) {\r\n                        settingsRules.push(idx);\r\n                        if (idx == \"maxlength\" || idx == \"minlength\") {\r\n                            mParam = parseInt(item);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            //checked\r\n            for (var i = 0; i < settingsRules.length; i++) {\r\n                if (!methods[settingsRules[i]].call(this, mVal, mEl, mParam)) {\r\n                    errRules.push(settingsRules[i]);\r\n                    errorFiles['eRules'][element] = errRules;\r\n                    if ($.inArray(element, errorFiles['eId']) < 0) {\r\n                        errorFiles['eId'].push(element);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        callBackData: function() {\r\n            var errorFiles = this.errorFiles;\r\n            var errId = errorFiles.eId;\r\n            var eMsg = errorFiles.eMsg;\r\n            var eRules = errorFiles.eRules;\r\n            var sMessages = this.settings.sMessages;\r\n            for (var i = 0; i < errId.length; i++) {\r\n                if (typeof sMessages[errId[i]] === \"string\") {\r\n                    eMsg[errId[i] + \"_\" + eRules[errId[i]]] = sMessages[errId[i]];\r\n                } else {\r\n                    if ($.isArray(eRules[errId[i]])) {\r\n                        for (var j = 0; j < eRules[errId[i]].length; j++) {\r\n                            eMsg[errId[i] + \"_\" + eRules[errId[i]][j]] = sMessages[errId[i]][eRules[errId[i]][j]];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        destroyData: function() {\r\n            this.errorFiles = {\r\n                eId: [],\r\n                eRules: {},\r\n                eMsg: {}\r\n            };\r\n        }\r\n    });\r\n\r\n\r\n    /*身份证验证方法 开始 */\r\n        /*去掉字符串头尾空格*/\r\n        function trim(str) {\r\n            return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n        }\r\n\r\n        var Wi = [ 7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2, 1 ];    // 加权因子\r\n        var ValideCode = [ 1, 0, 10, 9, 8, 7, 6, 5, 4, 3, 2 ];                  // 身份证验证位值.10代表X\r\n        function isIdCardNo(idCard) {\r\n            idCard = trim(idCard.replace(/ /g, \"\"));                            //去掉字符串头尾空格\r\n            if (idCard.length == 15) {\r\n                return isValidityBrithBy15IdCard(idCard);                       //进行15位身份证的验证\r\n            } else if (idCard.length == 18) {\r\n                var a_idCard = idCard.split(\"\");                                // 得到身份证数组\r\n                if(isValidityBrithBy18IdCard(idCard)&&isTrueValidateCodeBy18IdCard(a_idCard)){   //进行18位身份证的基本验证和第18位的验证\r\n                    return true;\r\n                }else {\r\n                    return false;\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 判断身份证号码为18位时最后的验证位是否正确\r\n         * @param a_idCard 身份证号码数组\r\n         * @return\r\n         */\r\n        function isTrueValidateCodeBy18IdCard(a_idCard) {\r\n            var sum = 0;                                // 声明加权求和变量\r\n            if (a_idCard[17].toLowerCase() == 'x') {\r\n                a_idCard[17] = 10;                      // 将最后位为x的验证码替换为10方便后续操作\r\n            }\r\n            for ( var i = 0; i < 17; i++) {\r\n                sum += Wi[i] * a_idCard[i];             // 加权求和\r\n            }\r\n            valCodePosition = sum % 11;                 // 得到验证码所位置\r\n            if (a_idCard[17] == ValideCode[valCodePosition]) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n          * 验证18位数身份证号码中的生日是否是有效生日\r\n          * @param idCard 18位书身份证字符串\r\n          * @return\r\n          */\r\n        function isValidityBrithBy18IdCard(idCard18){\r\n            var year =  idCard18.substring(6,10);\r\n            var month = idCard18.substring(10,12);\r\n            var day = idCard18.substring(12,14);\r\n            var temp_date = new Date(year,parseFloat(month)-1,parseFloat(day));\r\n            // 这里用getFullYear()获取年份，避免千年虫问题\r\n            if(temp_date.getFullYear()!=parseFloat(year) || temp_date.getMonth()!=parseFloat(month)-1 || temp_date.getDate()!=parseFloat(day)){\r\n                    return false;\r\n            }else{\r\n                return true;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 验证15位数身份证号码中的生日是否是有效生日\r\n         * @param idCard15 15位书身份证字符串\r\n         * @return\r\n         */\r\n        function isValidityBrithBy15IdCard(idCard15){\r\n            var year =  idCard15.substring(6,8);\r\n            var month = idCard15.substring(8,10);\r\n            var day = idCard15.substring(10,12);\r\n            var temp_date = new Date(year,parseFloat(month)-1,parseFloat(day));\r\n            // 对于老身份证中的你年龄则不需考虑千年虫问题而使用getYear()方法\r\n            if(temp_date.getYear()!=parseFloat(year) || temp_date.getMonth()!=parseFloat(month)-1 || temp_date.getDate()!=parseFloat(day)){\r\n                      return false;\r\n              }else{\r\n                  return true;\r\n              }\r\n        }\r\n    /* 身份证验证方法 结束 */\r\n});\r\n",
    "_pulgins/slider.js": "/**\r\n * @fileoverview slider组件 (支持translate3d)\r\n * @name  slider\r\n */\r\ndefine('_pulgins/slider',function(){\r\n    var win = window;\r\n    var lib = {};\r\n    var //isAndroid = (/android/gi).test(navigator.appVersion),\r\n        // $ = win['Zepto'] || win['$'],\r\n        hasTransform = function() { // 判断浏览器是否支持transform（仅webkit）\r\n            var ret = ('WebkitTransform' in document.documentElement.style) ? true : false;\r\n            return ret;\r\n        },\r\n        has3d = function() { // 判断浏览器是否支持3d效果（仅webkit）\r\n            var style,\r\n                ret = false,\r\n                div = document.createElement('div'),\r\n                \r\n                mStyle = document.documentElement.style;\r\n            style = ['&#173;', '<style id=\"smodernizr\">', '@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}', '</style>'].join('');\r\n            div.id = 'modernizr';\r\n            div.innerHTML += style;\r\n            document.body.appendChild(div);\r\n            if ('WebkitPerspective' in mStyle && 'webkitPerspective' in mStyle) {\r\n                ret = (div.offsetLeft === 9 && div.offsetHeight === 3);\r\n            }\r\n            div.parentNode.removeChild(div);\r\n            return ret;\r\n        },\r\n\r\n        gv1 = has3d ? 'translate3d(' : 'translate(',\r\n        gv2 = has3d ? ',0)' : ')';\r\n\r\n    var TouchSlider = function(container, options) {\r\n        if (!container) return null;\r\n        if (options) options.container = container; //container会覆盖options内的container\r\n        else options = typeof container == 'string' ? {\r\n            'container': container\r\n        } : container;\r\n        $.extend(this, {\r\n            container: \".slider\", //大容器，包含面板元素、触发元素、上下页等\r\n            wrap: null, //滑动显示区域，默认为container的第一个子元素。（该元素固定宽高overflow为hidden，否则无法滑动）\r\n            panel: null, //面板元素，默认为wrap的第一个子元素\r\n            trigger: null, //触发元素，也可理解为状态元素\r\n            activeTriggerCls: 'sel', //触发元素内子元素的激活样式\r\n            hasTrigger: false, //是否需要触发事件，例tab页签就需要click触发\r\n            steps: 0, //步长，每次滑动的距离\r\n            left: 0, //panel初始的x坐标\r\n            visible: 1, //每次滑动几个panels，默认1\r\n            margin: 0, //面板元素内子元素间的间距\r\n            curIndex: 0, //初始化在哪个panels上，默认0为第一个\r\n            duration: 300, //动画持续时间\r\n            //easing : 'ease-out', //动画公式\r\n            loop: false, //动画循环\r\n            play: false, //动画自动播放\r\n            interval: 5000, //播放间隔时间，play为true时才有效\r\n            useTransform: has3d ? true : false, //以translate方式动画，安卓现在也支持了\r\n\r\n            lazy: '.lazyimg', //图片延时加载属性\r\n            lazyIndex: 1, //默认加载到第几屏\r\n            callback: null, //动画结束后触发\r\n\r\n            prev: null, //上一页\r\n            next: null, //下一页\r\n            activePnCls: 'none' //prev和next在头尾时的样式\r\n        }, options);\r\n\r\n        this.findEl() && this.init() && this.increaseEvent();\r\n    };\r\n    $.extend(TouchSlider.prototype, {\r\n        reset: function(options) {\r\n            if (this.loop) {\r\n                this._oldLoop = true; //保存之前的值，init需要处理\r\n            }\r\n            $.extend(this, options || {});\r\n            this.init();\r\n        },\r\n        findEl: function() {\r\n            var container = this.container = $(this.container);\r\n            if (!container.length) {\r\n                return null;\r\n            }\r\n\r\n            this.wrap = this.wrap && container.find(this.wrap) || container.children().first();\r\n            if (!this.wrap.length) {\r\n                return null;\r\n            }\r\n\r\n            this.panel = this.panel && container.find(this.panel) || this.wrap.children().first();\r\n            if (!this.panel.length) {\r\n                return null;\r\n            }\r\n\r\n            this.panels = this.panel.children();\r\n            if (!this.panels.length) { //对于没有图片的元素，直接隐藏\r\n                this.container.hide();\r\n                return null;\r\n            }\r\n\r\n            this.trigger = this.trigger && container.find(this.trigger);\r\n            this.prev = this.prev && container.find(this.prev);\r\n            this.next = this.next && container.find(this.next);\r\n\r\n            return this;\r\n        },\r\n        init: function() {\r\n            var wrap = this.wrap,\r\n                panel = this.panel,\r\n                panels = this.panels,\r\n                trigger = this.trigger,\r\n                len = this.len = panels.length, //子元素的个数\r\n                margin = this.margin,\r\n                allWidth = 0, //滑动容器的宽度\r\n                status = this.visible, //每次切换多少个panels\r\n                useTransform = this.useTransform = hasTransform ? this.useTransform : false; //不支持直接false\r\n\r\n            this.steps = this.steps || wrap.width(); //滑动步长，默认wrap的宽度\r\n            panels.each(function(n, item) {\r\n                allWidth += item.offsetWidth;\r\n            });\r\n\r\n            if (margin && typeof margin == 'number') {\r\n                allWidth += (len - 1) * margin; //总宽度增加\r\n                this.steps += margin; //步长增加margin\r\n            }\r\n\r\n            if (status > 1) {\r\n                this.loop = false;\r\n            } //如果一页显示的子元素超出1个，或设置了步长，则不支持循环；若自动播放，则只支持一次\r\n\r\n            //初始位置为了计算卡片内偏移\r\n            var initLeft = this.left;\r\n            initLeft -= this.curIndex * this.steps;\r\n            this.setCoord(panel, initLeft);\r\n            if (useTransform) {\r\n                if (has3d) {\r\n                    wrap.css({\r\n                        '-webkit-transform': 'translateZ(0)'\r\n                    }); //防止ios6下滑动会有顿感\r\n                }\r\n                panel.css({\r\n                    '-webkit-backface-visibility': 'hidden'\r\n                });\r\n                //panels.css({'-webkit-transform':gv1+'0,0'+gv2});\r\n            }\r\n\r\n            var pages = this._pages = Math.ceil(len / status); //总页数\r\n            //初始坐标参数\r\n            this._minpage = 0; //最小页\r\n            this._maxpage = this._pages - 1; //最大页\r\n\r\n            this.loadImg();\r\n            this.updateArrow();\r\n            if (pages <= 1) { //如果没超出一页，则不需要滑动\r\n                this.getImg(panels[0]); //存在一页的则显示第一页\r\n                trigger && trigger.hide();\r\n                return null;\r\n            }\r\n\r\n            if (this._oldLoop) { //之前已经复制过的删除\r\n                var oldpanels = panel.children();\r\n                oldpanels.eq(oldpanels.length - 2).remove();\r\n                oldpanels.eq(oldpanels.length - 1).remove();\r\n            }\r\n            if (this.loop) { //复制首尾以便循环\r\n                panel.append(panels[0].cloneNode(true));\r\n                var lastp = panels[len - 1].cloneNode(true);\r\n                panel.append(lastp);\r\n                this.getImg(lastp);\r\n                lastp.style.cssText += 'position:relative;left:' + (-this.steps * (len + 2)) + 'px;';\r\n                allWidth += panels[0].offsetWidth;\r\n                allWidth += panels[len - 1].offsetWidth;\r\n            }\r\n            panel.css('width', allWidth);\r\n            if (trigger && trigger.length) { //如果触发容器存在，触发容器无子元素则添加子元素\r\n                var temp = '',\r\n                    childstu = trigger.children();\r\n                if (!childstu.length) {\r\n                    for (var i = 0; i < pages; i++) {\r\n                        temp += '<span' + (i == this.curIndex ? \" class=\" + this.activeTriggerCls + \"\" : \"\") + '></span>';\r\n                    }\r\n                    trigger.html(temp);\r\n                }\r\n                this.triggers = trigger.children();\r\n                this.triggerSel = this.triggers[this.curIndex]; //当前状态元素\r\n            } else {\r\n                this.hasTrigger = false;\r\n            }\r\n            this.slideTo(this.curIndex);\r\n\r\n            return this;\r\n        },\r\n        increaseEvent: function() {\r\n            var that = this,\r\n                _panel = that.wrap[0], //外层容器\r\n                prev = that.prev,\r\n                next = that.next,\r\n                triggers = that.triggers;\r\n            if (_panel.addEventListener) {\r\n                _panel.addEventListener('touchstart', that, false);\r\n                _panel.addEventListener('touchmove', that, false);\r\n                _panel.addEventListener('touchend', that, false);\r\n                _panel.addEventListener('webkitTransitionEnd', that, false);\r\n                _panel.addEventListener('msTransitionEnd', that, false);\r\n                _panel.addEventListener('oTransitionEnd', that, false);\r\n                _panel.addEventListener('transitionend', that, false);\r\n            }\r\n            if (that.play) {\r\n                that.begin();\r\n            }\r\n            if (prev && prev.length) {\r\n                prev.on('click', function(e) {\r\n                    that.backward.call(that, e);\r\n                });\r\n            }\r\n            if (next && next.length) {\r\n                next.on('click', function(e) {\r\n                    that.forward.call(that, e);\r\n                });\r\n            }\r\n            if (that.hasTrigger && triggers) {\r\n                triggers.each(function(n, item) {\r\n                    $(item).on('click', function() {\r\n                        that.slideTo(n);\r\n                    });\r\n                });\r\n            }\r\n        },\r\n        handleEvent: function(e) {\r\n            switch (e.type) {\r\n                case 'touchstart':\r\n                    this.start(e);\r\n                    break;\r\n                case 'touchmove':\r\n                    this.move(e);\r\n                    break;\r\n                case 'touchend':\r\n                case 'touchcancel':\r\n                    this.end(e);\r\n                    break;\r\n                case 'webkitTransitionEnd':\r\n                case 'msTransitionEnd':\r\n                case 'oTransitionEnd':\r\n                case 'transitionend':\r\n                    this.transitionEnd(e);\r\n                    break;\r\n            }\r\n        },\r\n        loadImg: function(n) { //判断加载哪屏图片\r\n            n = n || 0;\r\n            //不考虑循环时候复制的元素\r\n            if (n < this._minpage) n = this._maxpage;\r\n            else if (n > this._maxpage) n = this._minpage;\r\n\r\n            var status = this.visible,\r\n                lazyIndex = this.lazyIndex - 1,\r\n                maxIndex = lazyIndex + n;\r\n            if (maxIndex > this._maxpage) return;\r\n            maxIndex += 1; //补上,for里判断没有=\r\n            var start = (n && (lazyIndex + n) || n) * status,\r\n                end = maxIndex * status,\r\n                panels = this.panels;\r\n            end = Math.min(panels.length, end) + 1;\r\n            for (var i = start; i < end; i++) {\r\n                this.getImg(panels[i]);\r\n            }\r\n        },\r\n        getImg: function(obj) { //加载图片\r\n            if (!obj) return;\r\n            obj = $(obj);\r\n            if (obj.attr('l')) {\r\n                return;\r\n            } //已加载\r\n            var that = this,\r\n                lazy = that.lazy,\r\n                cls = 'img' + lazy;\r\n            lazy = lazy.replace(/^\\.|#/g, '');\r\n            obj.find(cls).each(function(n, item) {\r\n                var nobj = $(item);\r\n                src = nobj.attr('dataimg');\r\n                if (src) {\r\n                    nobj.attr('src', src).removeAttr('dataimg').removeClass(lazy);\r\n                }\r\n            });\r\n            obj.attr('l', '1');\r\n        },\r\n        start: function(e) { //触摸开始\r\n            var et = e.touches[0];\r\n            //if(this._isScroll){return;}  //滑动未停止，则返回\r\n            this._movestart = undefined;\r\n            this._disX = 0;\r\n            this._coord = {\r\n                x: et.pageX,\r\n                y: et.pageY\r\n            };\r\n        },\r\n        move: function(e) {\r\n            if (e.touches.length > 1 || e.scale && e.scale !== 1) return;\r\n            var et = e.touches[0],\r\n                disX = this._disX = et.pageX - this._coord.x,\r\n                initLeft = this.left,\r\n                tmleft;\r\n            if (typeof this._movestart == 'undefined') { //第一次执行touchmove\r\n                this._movestart = !!(this._movestart || Math.abs(disX) < Math.abs(et.pageY - this._coord.y));\r\n            }\r\n            if (!this._movestart) { //不是上下\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this.stop();\r\n                if (!this.loop) { //不循环\r\n                    disX = disX / ((!this.curIndex && disX > 0 || this.curIndex == this._maxpage && disX < 0) ? (Math.abs(disX) / this.steps + 1) : 1); //增加阻力\r\n                }\r\n                tmleft = initLeft - this.curIndex * this.steps + disX;\r\n                this.setCoord(this.panel, tmleft);\r\n                this._disX = disX;\r\n                //this._left = tmleft;\r\n            } else {\r\n                // 上下，默认的浏览器行为\r\n                //e.preventDefault();\r\n            }\r\n        },\r\n        end: function(e) {\r\n            if (!this._movestart) { //如果执行了move\r\n                var distance = this._disX;\r\n                if (distance < -10) {\r\n                    e.preventDefault();\r\n                    this.forward();\r\n                } else if (distance > 10) {\r\n                    e.preventDefault();\r\n                    this.backward();\r\n                }\r\n                distance = null;\r\n            }\r\n        },\r\n        backward: function(e) {\r\n            if (e && e.preventDefault) {\r\n                e.preventDefault();\r\n            }\r\n            var cur = this.curIndex,\r\n                minp = this._minpage;\r\n            cur -= 1;\r\n            if (cur < minp) {\r\n                if (!this.loop) {\r\n                    cur = minp;\r\n                } else {\r\n                    cur = minp - 1;\r\n                }\r\n            }\r\n            this.slideTo(cur);\r\n            this.callback && this.callback(Math.max(cur, minp), -1);\r\n        },\r\n        forward: function(e) {\r\n            if (e && e.preventDefault) {\r\n                e.preventDefault();\r\n            }\r\n            var cur = this.curIndex,\r\n                maxp = this._maxpage;\r\n            cur += 1;\r\n            if (cur > maxp) {\r\n                if (!this.loop) {\r\n                    cur = maxp;\r\n                } else {\r\n                    cur = maxp + 1;\r\n                }\r\n            }\r\n            this.slideTo(cur);\r\n            this.callback && this.callback(Math.min(cur, maxp), 1);\r\n        },\r\n        setCoord: function(obj, x) {\r\n            this.useTransform && obj.css(\"-webkit-transform\", gv1 + x + 'px,0' + gv2) || obj.css(\"left\", x);\r\n        },\r\n        slideTo: function(cur, duration) {\r\n            cur = cur || 0;\r\n            this.curIndex = cur; //保存当前屏数\r\n            var panel = this.panel,\r\n                style = panel[0].style,\r\n                scrollx = this.left - cur * this.steps;\r\n            style.webkitTransitionDuration = style.MozTransitionDuration = style.msTransitionDuration = style.OTransitionDuration = style.transitionDuration = (duration || this.duration) + 'ms';\r\n            this.setCoord(panel, scrollx);\r\n            this.loadImg(cur);\r\n        },\r\n        transitionEnd: function() {\r\n            var panel = this.panel,\r\n                style = panel[0].style,\r\n                loop = this.loop,\r\n                cur = this.curIndex;\r\n            if (loop) { //把curIndex和坐标重置\r\n                if (cur > this._maxpage) {\r\n                    this.curIndex = 0;\r\n                } else if (cur < this._minpage) {\r\n                    this.curIndex = this._maxpage;\r\n                }\r\n                this.setCoord(panel, this.left - this.curIndex * this.steps);\r\n            }\r\n            if (!loop && cur == this._maxpage) { //不循环的，只播放一次\r\n                this.stop();\r\n                this.play = false;\r\n            } else {\r\n                this.begin();\r\n            }\r\n            this.update();\r\n            this.updateArrow();\r\n            style.webkitTransitionDuration = style.MozTransitionDuration = style.msTransitionDuration = style.OTransitionDuration = style.transitionDuration = 0;\r\n            //this._isScroll = false;\r\n            this.onTransitionEnd && this.onTransitionEnd.call(this);\r\n        },\r\n        update: function() {\r\n            var triggers = this.triggers,\r\n                cls = this.activeTriggerCls,\r\n                curIndex = this.curIndex;\r\n            if (triggers && triggers[curIndex]) {\r\n                this.triggerSel && (this.triggerSel.className = '');\r\n                triggers[curIndex].className = cls;\r\n                this.triggerSel = triggers[curIndex];\r\n            }\r\n        },\r\n        updateArrow: function() { //左右箭头状态\r\n            var prev = this.prev,\r\n                next = this.next;\r\n            if (!prev || !prev.length || !next || !next.length) return;\r\n            if (this.loop) return; //循环不需要隐藏\r\n            var cur = this.curIndex,\r\n                cls = this.activePnCls;\r\n            cur <= 0 && prev.addClass(cls) || prev.removeClass(cls);\r\n            //console.log(cur,this._maxpage);\r\n            cur >= this._maxpage && next.addClass(cls) || next.removeClass(cls);\r\n        },\r\n        begin: function() {\r\n            var that = this;\r\n            if (that.play && !that._playTimer) { //自动播放\r\n                that.stop();\r\n                that._playTimer = setInterval(function() {\r\n                    that.forward();\r\n                }, that.interval);\r\n            }\r\n        },\r\n        stop: function() {\r\n            var that = this;\r\n            if (that.play && that._playTimer) {\r\n                clearInterval(that._playTimer);\r\n                that._playTimer = null;\r\n            }\r\n        },\r\n        destroy: function() {\r\n            var that = this,\r\n                _panel = that.wrap[0],\r\n                prev = that.prev,\r\n                next = that.next,\r\n                triggers = that.triggers;\r\n            if (_panel.removeEventListener) {\r\n                _panel.removeEventListener('touchstart', that, false);\r\n                _panel.removeEventListener('touchmove', that, false);\r\n                _panel.removeEventListener('touchend', that, false);\r\n                _panel.removeEventListener('webkitTransitionEnd', that, false);\r\n                _panel.removeEventListener('msTransitionEnd', that, false);\r\n                _panel.removeEventListener('oTransitionEnd', that, false);\r\n                _panel.removeEventListener('transitionend', that, false);\r\n            }\r\n            if (prev && prev.length) prev.off('click');\r\n            if (next && next.length) next.off('click');\r\n            if (that.hasTrigger && triggers) {\r\n                triggers.each(function(n, item) {\r\n                    $(item).off('click');\r\n                });\r\n            }\r\n        },\r\n        // 去掉了原$.fn.slider方法，改用这个方法\r\n        attachTo: function(obj, options) {\r\n            obj = $(obj);\r\n            return obj.each(function(n, item) {\r\n                if (!item.getAttribute('l')) {\r\n                    item.setAttribute('l', true);\r\n                    TouchSlider.cache.push(new TouchSlider(item, options));\r\n                }\r\n            });\r\n        }\r\n    });\r\n    TouchSlider.cache = [];\r\n    /*$.fn.slider = function(options){\r\n        return this.each(function(n,item){\r\n            if(!item.getAttribute('l')){\r\n                item.setAttribute('l',true);\r\n                TouchSlider.cache.push(new TouchSlider(item,options));\r\n            }\r\n        });\r\n    }*/\r\n    TouchSlider.destroy = function() {\r\n        var cache = TouchSlider.cache,\r\n            len = cache.length;\r\n        //console.log(TouchSlider.cache);\r\n        if (len < 1) {\r\n            return;\r\n        }\r\n        for (var i = 0; i < len; i++) {\r\n            cache[i].destroy();\r\n        }\r\n        TouchSlider.cache = [];\r\n        //console.log(TouchSlider.cache);\r\n    };\r\n\r\n    $.slider = TouchSlider;\r\n\r\n});\r\n",
    "_pulgins/touch.js": "/**\r\n * @module lib/touch\r\n * @copyright  2010-2014 Thomas Fuchs\r\n * @info  Zepto.js may be freely distributed under the MIT license.\r\n */\r\n\r\ndefine('_pulgins/touch',function() {\r\n    var touch = {},\r\n        touchTimeout, tapTimeout, swipeTimeout, longTapTimeout,\r\n        longTapDelay = 750,\r\n        gesture\r\n\r\n    function swipeDirection(x1, x2, y1, y2) {\r\n        return Math.abs(x1 - x2) >=\r\n            Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'Left' : 'Right') : (y1 - y2 > 0 ? 'Up' : 'Down')\r\n    }\r\n\r\n    function longTap() {\r\n        longTapTimeout = null\r\n        if (touch.last) {\r\n            touch.el.trigger('longTap')\r\n            touch = {}\r\n        }\r\n    }\r\n\r\n    function cancelLongTap() {\r\n        if (longTapTimeout) clearTimeout(longTapTimeout)\r\n        longTapTimeout = null\r\n    }\r\n\r\n    function cancelAll() {\r\n        if (touchTimeout) clearTimeout(touchTimeout)\r\n        if (tapTimeout) clearTimeout(tapTimeout)\r\n        if (swipeTimeout) clearTimeout(swipeTimeout)\r\n        if (longTapTimeout) clearTimeout(longTapTimeout)\r\n        touchTimeout = tapTimeout = swipeTimeout = longTapTimeout = null\r\n        touch = {}\r\n    }\r\n\r\n    function isPrimaryTouch(event) {\r\n        return (event.pointerType == 'touch' ||\r\n            event.pointerType == event.MSPOINTER_TYPE_TOUCH) && event.isPrimary\r\n    }\r\n\r\n    function isPointerEventType(e, type) {\r\n        return (e.type == 'pointer' + type ||\r\n            e.type.toLowerCase() == 'mspointer' + type)\r\n    }\r\n\r\n    $(document).ready(function() {\r\n        var now, delta, deltaX = 0,\r\n            deltaY = 0,\r\n            firstTouch, _isPointerType\r\n\r\n        if ('MSGesture' in window) {\r\n            gesture = new MSGesture()\r\n            gesture.target = document.body\r\n        }\r\n\r\n        $(document)\r\n            .bind('MSGestureEnd', function(e) {\r\n                var swipeDirectionFromVelocity =\r\n                    e.velocityX > 1 ? 'Right' : e.velocityX < -1 ? 'Left' : e.velocityY > 1 ? 'Down' : e.velocityY < -1 ? 'Up' : null;\r\n                if (swipeDirectionFromVelocity) {\r\n                    touch.el.trigger('swipe')\r\n                    touch.el.trigger('swipe' + swipeDirectionFromVelocity)\r\n                }\r\n            })\r\n            .on('touchstart MSPointerDown pointerdown', function(e) {\r\n                if ((_isPointerType = isPointerEventType(e, 'down')) &&\r\n                    !isPrimaryTouch(e)) return\r\n                firstTouch = _isPointerType ? e : e.touches[0]\r\n                if (e.touches && e.touches.length === 1 && touch.x2) {\r\n                    // Clear out touch movement data if we have it sticking around\r\n                    // This can occur if touchcancel doesn't fire due to preventDefault, etc.\r\n                    touch.x2 = undefined\r\n                    touch.y2 = undefined\r\n                }\r\n                now = Date.now()\r\n                delta = now - (touch.last || now)\r\n                touch.el = $('tagName' in firstTouch.target ?\r\n                    firstTouch.target : firstTouch.target.parentNode)\r\n                touchTimeout && clearTimeout(touchTimeout)\r\n                touch.x1 = firstTouch.pageX\r\n                touch.y1 = firstTouch.pageY\r\n                if (delta > 0 && delta <= 250) touch.isDoubleTap = true\r\n                touch.last = now\r\n                longTapTimeout = setTimeout(longTap, longTapDelay)\r\n                    // adds the current touch contact for IE gesture recognition\r\n                if (gesture && _isPointerType) gesture.addPointer(e.pointerId);\r\n            })\r\n            .on('touchmove MSPointerMove pointermove', function(e) {\r\n                if ((_isPointerType = isPointerEventType(e, 'move')) &&\r\n                    !isPrimaryTouch(e)) return\r\n                firstTouch = _isPointerType ? e : e.touches[0]\r\n                cancelLongTap()\r\n                touch.x2 = firstTouch.pageX\r\n                touch.y2 = firstTouch.pageY\r\n\r\n                deltaX += Math.abs(touch.x1 - touch.x2)\r\n                deltaY += Math.abs(touch.y1 - touch.y2)\r\n            })\r\n            .on('touchend MSPointerUp pointerup', function(e) {\r\n                if ((_isPointerType = isPointerEventType(e, 'up')) &&\r\n                    !isPrimaryTouch(e)) return\r\n                cancelLongTap()\r\n\r\n                // swipe\r\n                if ((touch.x2 && Math.abs(touch.x1 - touch.x2) > 30) ||\r\n                    (touch.y2 && Math.abs(touch.y1 - touch.y2) > 30))\r\n\r\n                    swipeTimeout = setTimeout(function() {\r\n                    touch.el.trigger('swipe')\r\n                    touch.el.trigger('swipe' + (swipeDirection(touch.x1, touch.x2, touch.y1, touch.y2)))\r\n                    touch = {}\r\n                }, 0)\r\n\r\n                // normal tap\r\n                else if ('last' in touch)\r\n                // don't fire tap when delta position changed by more than 30 pixels,\r\n                // for instance when moving to a point and back to origin\r\n                    if (deltaX < 30 && deltaY < 30) {\r\n                        // delay by one tick so we can cancel the 'tap' event if 'scroll' fires\r\n                        // ('tap' fires before 'scroll')\r\n                        tapTimeout = setTimeout(function() {\r\n\r\n                            // trigger universal 'tap' with the option to cancelTouch()\r\n                            // (cancelTouch cancels processing of single vs double taps for faster 'tap' response)\r\n                            var event = $.Event('tap')\r\n                            event.cancelTouch = cancelAll\r\n                            touch.el.trigger(event)\r\n\r\n                            // trigger double tap immediately\r\n                            if (touch.isDoubleTap) {\r\n                                if (touch.el) touch.el.trigger('doubleTap')\r\n                                touch = {}\r\n                            }\r\n\r\n                            // trigger single tap after 250ms of inactivity\r\n                            else {\r\n                                touchTimeout = setTimeout(function() {\r\n                                    touchTimeout = null\r\n                                    if (touch.el) touch.el.trigger('singleTap')\r\n                                    touch = {}\r\n                                }, 250)\r\n                            }\r\n                        }, 0)\r\n                    } else {\r\n                        touch = {}\r\n                    }\r\n                deltaX = deltaY = 0\r\n\r\n            })\r\n            // when the browser window loses focus,\r\n            // for example when a modal dialog is shown,\r\n            // cancel all ongoing events\r\n            .on('touchcancel MSPointerCancel pointercancel', cancelAll)\r\n\r\n        // scrolling the window indicates intention of the user\r\n        // to scroll, not tap or swipe, so cancel all ongoing events\r\n        $(window).on('scroll', cancelAll)\r\n    });\r\n    ['swipe', 'swipeLeft', 'swipeRight', 'swipeUp', 'swipeDown',\r\n        'doubleTap', 'tap', 'singleTap', 'longTap'\r\n    ].forEach(function(eventName) {\r\n        $.fn[eventName] = function(callback) {\r\n            return this.on(eventName, callback)\r\n        }\r\n    });\r\n    return $.fn;\r\n})\r\n",
    "_tpl/adress.js": "define('_tpl/adress',function(){return {\"edit\":\"<div class=\\\"tap-mask\\\" vm-class-show=\\\"isShowPop\\\"></div><div class=\\\"pop-box edit-adress\\\" vm-class-show=\\\"isShowPop\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"openPopBox('adress_main',3,0)\\\"></span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"adress-from scroller\\\" id=\\\"adressFrom\\\"><div class=\\\"from-box\\\" id=\\\"fromBox\\\"><span class=\\\"error_area\\\" id=\\\"error\\\"></span><p class=\\\"form-input form-item-username\\\"><label class=\\\"text-label text-label-username\\\" for=\\\"username\\\">收货人</label><input type=\\\"text\\\" id=\\\"username\\\" name=\\\"username\\\" class=\\\"text-input\\\" maxlength=\\\"60\\\" placeholder=\\\"请输入收货人姓名\\\" vm-duplex=\\\"adressEditing.true_name\\\"></p><p class=\\\"form-input form-item-username\\\"><label class=\\\"text-label text-label-mobile\\\" for=\\\"mobile\\\">手机号</label><input type=\\\"tel\\\" id=\\\"mobile\\\" name=\\\"mobile\\\" class=\\\"text-input\\\" maxlength=\\\"13\\\" placeholder=\\\"请输入收货人手机号\\\" vm-duplex=\\\"adressEditing.mob_phone\\\"></p><p class=\\\"form-input form-address\\\"><label class=\\\"text-label text-label-address\\\">省市区</label><select class=\\\"select provinces\\\" id=\\\"provinces\\\" name=\\\"provinces\\\" vm-duplex=\\\"areasList.provinces.cur_id\\\" data-duplex-changed=\\\"selectChange\\\"><option vm-repeat-opt=\\\"areasList.provinces.val\\\" vm-attr-value=\\\"opt.area_id\\\" vm-attr-selected=\\\"areasList.provinces.cur_id==opt.area_id\\\">{{opt.area_name}}</option></select><lable class=\\\"label-area\\\" for=\\\"provinces\\\">{{areasList.provinces.key}}</lable><select class=\\\"select cities\\\" id=\\\"cities\\\" name=\\\"cities\\\" vm-duplex=\\\"areasList.cities.cur_id\\\" data-duplex-changed=\\\"selectChange\\\"><option vm-repeat-opt=\\\"areasList.cities.val\\\" vm-attr-value=\\\"opt.area_id\\\" vm-attr-selected=\\\"areasList.cities.cur_id==opt.area_id\\\">{{opt.area_name}}</option></select><lable class=\\\"label-area\\\" for=\\\"cities\\\">{{areasList.cities.key}}</lable><select class=\\\"select counties\\\" id=\\\"counties\\\" name=\\\"counties\\\" vm-duplex=\\\"areasList.counties.cur_id\\\" data-duplex-changed=\\\"selectChange\\\"><option vm-repeat-opt=\\\"areasList.counties.val\\\" vm-attr-value=\\\"opt.area_id\\\" vm-attr-selected=\\\"areasList.counties.cur_id==opt.area_id\\\">{{opt.area_name}}</option></select><lable class=\\\"label-area\\\" for=\\\"counties\\\">{{areasList.counties.key}}</lable><select class=\\\"select streets\\\" id=\\\"streets\\\" name=\\\"streets\\\" vm-duplex=\\\"areasList.streets.cur_id\\\" data-duplex-changed=\\\"selectChange\\\"><option vm-repeat-opt=\\\"areasList.streets.val\\\" vm-attr-value=\\\"opt.area_id\\\" vm-attr-selected=\\\"areasList.streets.cur_id==opt.area_id\\\">{{opt.area_name}}</option></select><lable class=\\\"label-area\\\" for=\\\"streets\\\">{{areasList.streets.key}}</lable></p><p class=\\\"form-input\\\"><label class=\\\"text-label text-label-verifyCode\\\" for=\\\"address\\\">详细地址</label><input type=\\\"text\\\" id=\\\"address\\\" name=\\\"address\\\" class=\\\"text-input\\\" vm-duplex=\\\"adressEditing.address\\\" placeholder=\\\"请输入详细地址\\\" autocomplete=\\\"off\\\"></p><p class=\\\"form-input\\\"><label class=\\\"text-label text-label-verifyCode \\\" for=\\\"identity\\\">身份证</label><input type=\\\"text\\\" id=\\\"identity\\\" name=\\\"identity\\\" class=\\\"text-input\\\" vm-duplex=\\\"adressEditing.identity\\\" placeholder=\\\"如果您购买的是海外商品，请填写\\\" autocomplete=\\\"off\\\" maxlength=\\\"18\\\"></p><p class=\\\"form-switch\\\"><label for=\\\"switch\\\">设为默认</label><input id=\\\"switch\\\" name=\\\"switch\\\" class=\\\"mui-switch mui-switch-anim\\\" vm-duplex-checked=\\\"adressEditing.is_default\\\" type=\\\"checkbox\\\"></p><p class=\\\"form-submit\\\"><input type=\\\"submit\\\" value=\\\"提交\\\" class=\\\"button-full\\\" vm-on-click=\\\"submitAddress\\\" vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"hoverEnd\\\"></p><span class=\\\"txt-tips\\\">应海关要求，收货人姓名必须与身份证姓名一致</span></div></div></div></div>\",\"main\":\"<div class=\\\"tap-mask\\\" vm-class-show=\\\"isShowPop\\\"></div><div class=\\\"pop-box user-adress\\\" vm-class-show=\\\"isShowPop\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"closePopBox()\\\"></span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"adress-add\\\"><span class=\\\"ico-arrow fr\\\" vm-on-touchend=\\\"addAddress('')\\\"><i class=\\\"right\\\"></i></span><span class=\\\"text\\\" vm-on-touchend=\\\"addAddress('')\\\"><i class=\\\"ico-add\\\"></i>新增地址</span></div><div class=\\\"adress-list scroller\\\" id=\\\"adressList\\\"><div><ul><li vm-repeat=\\\"addresses\\\"><div class=\\\"base-info\\\"><span class=\\\"section-status fr\\\" vm-on-touchend=\\\"choiceAddress(el.address_id)\\\"><i class=\\\"icon icon-noselect\\\" vm-class-icon-select=\\\"el.address_id==address_info.address_id\\\"></i></span><span>{{el.true_name}}</span><span>{{el.mob_phone}}</span></div><div class=\\\"extend-info\\\"><p class=\\\"adress\\\"><span class=\\\"default\\\" vm-if=\\\"el.is_default==1\\\">默认</span>{{el.area_info}}&nbsp;{{el.address}} </p><p class=\\\"identity-card\\\" vm-if=\\\"el.identity!=''\\\"><span>身份证:</span>{{el.identity}}</p></div><div class=\\\"edit-info\\\"><span class=\\\"btn-delete\\\" vm-on-touchend=\\\"delAddress(el.address_id)\\\">删除</span><span class=\\\"btn-edit\\\" vm-on-touchend=\\\"editAddress($index)\\\">编辑</span></div></li></ul></div></div></div></div>\"};});",
    "_tpl/bottomBar.js": "define('_tpl/bottomBar',function(){return {\"main\":\"<ul class=\\\"bottom-bar\\\"><li vm-repeat=\\\"list\\\" vm-class-active=\\\"el.active\\\"><a vm-attr-href=\\\"{{el.targetUrl}}\\\"><i vm-class=\\\"icon {{el.class}}\\\" vm-css-background-image=\\\"el.bgImg\\\"></i><span class=\\\"badge\\\" vm-if=\\\"el.flag == 'cart' && cartCount > 0\\\"><em id=\\\"barCartCount\\\">{{cartCount}}</em></span><span class=\\\"text\\\" vm-if=\\\"el.title\\\">{{el.title}}</span></a></li></ul>\"};});",
    "_tpl/cart.js": "define('_tpl/cart',function(){return {\"coupon\":\"<div class=\\\"tap-mask\\\" vm-class-show=\\\"isRendered\\\"></div><div class=\\\"pop-box special hidden\\\" vm-class-show=\\\"!isRendered\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"hidePop\\\"></span><span class=\\\"hd-right\\\" vm-if=\\\"isShowHdRight\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"special-list scroller\\\" id=\\\"specialList\\\"><ul><li vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"hoverEnd\\\"><a href=\\\"javascript:;\\\"><span class=\\\"ico-arrow fr\\\"><i class=\\\"right\\\"></i></span>爱他美婴儿奶粉专场1</a></li><li vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"hoverEnd\\\"><a href=\\\"javascript:;\\\"><span class=\\\"ico-arrow fr\\\"><i class=\\\"right\\\"></i></span>爱他美婴儿奶粉专场2</a></li><li vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"hoverEnd\\\"><a href=\\\"javascript:;\\\"><span class=\\\"ico-arrow fr\\\"><i class=\\\"right\\\"></i></span>爱他美婴儿奶粉专场3</a></li></ul></div></div></div><div class=\\\"pop-box user-card hidden\\\" vm-class-show=\\\"!isRendered\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"hidePop\\\"></span><span class=\\\"hd-right\\\" vm-if=\\\"isShowHdRight\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"adress-add\\\"><span class=\\\"ico-arrow fr\\\"><i class=\\\"right\\\"></i></span><span class=\\\"text\\\"><i class=\\\"ico-add\\\"></i>新增地址</span></div><div class=\\\"adress-list scroller\\\" id=\\\"adressList\\\"><ul><li><div class=\\\"base-info\\\"><span>李龙碧</span><span>15099991643</span></div><div class=\\\"extend-info\\\"><p class=\\\"adress\\\"><span class=\\\"default hidden\\\">默认</span>广东广州市海珠区赤岗街道&nbsp;上渡路雅乐街雅景苑景江阁25号801 </p></div><div class=\\\"edit-info\\\"><span class=\\\"btn-edit\\\">编辑</span></div></li><li><div class=\\\"base-info\\\"><span>李龙碧</span><span>15099991643</span></div><div class=\\\"extend-info\\\"><p class=\\\"adress\\\"><span class=\\\"default\\\">默认</span>广东广州市海珠区赤岗街道&nbsp;上渡路雅乐街雅景苑景江阁25号801 </p><p class=\\\"identity-card\\\"><span>身份证:</span>445122198808173512</p></div><div class=\\\"edit-info\\\"><span class=\\\"btn-edit\\\">编辑</span></div></li></ul></div></div></div><div class=\\\"pop-box edit-adress hidden\\\" vm-class-show=\\\"!isRendered\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"hidePop\\\"></span><span class=\\\"hd-right\\\" vm-if=\\\"isShowHdRight\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"adress-from scroller\\\" id=\\\"adressFrom\\\"><div class=\\\"from-box\\\" id=\\\"fromBox\\\"><span class=\\\"error_area\\\" id=\\\"error\\\"></span><p class=\\\"form-input form-item-username\\\"><label class=\\\"text-label text-label-username\\\" for=\\\"username\\\">收货人</label><input type=\\\"text\\\" name=\\\"username\\\" class=\\\"text-input\\\" maxlength=\\\"60\\\" placeholder=\\\"请输入收货人姓名\\\" value=\\\"\\\" id=\\\"userName\\\"><span class=\\\"input-clearValue\\\"></span></p><p class=\\\"form-input form-item-username\\\"><label class=\\\"text-label text-label-mobile\\\" for=\\\"mobile\\\">手机号</label><input type=\\\"tel\\\" name=\\\"mobile\\\" class=\\\"text-input\\\" maxlength=\\\"13\\\" placeholder=\\\"请输入收货人手机号\\\" value=\\\"\\\" id=\\\"mobile\\\"><span class=\\\"input-clearValue\\\"></span></p><p class=\\\"form-input form-address\\\"><label class=\\\"text-label text-label-address\\\" for=\\\"adress\\\">省市区</label><select class=\\\"select provinces\\\"><option value=\\\"110000\\\">北京</option><option value=\\\"120000\\\">天津</option><option value=\\\"130000\\\">河北</option><option value=\\\"140000\\\">山西</option><option value=\\\"150000\\\">内蒙古</option><option value=\\\"210000\\\">辽宁</option><option value=\\\"220000\\\">吉林</option><option value=\\\"230000\\\">黑龙江</option><option value=\\\"310000\\\">上海</option><option value=\\\"320000\\\">江苏</option><option value=\\\"330000\\\">浙江</option><option value=\\\"340000\\\">安徽</option><option value=\\\"350000\\\">福建</option><option value=\\\"360000\\\">江西</option><option value=\\\"370000\\\">山东</option><option value=\\\"410000\\\">河南</option><option value=\\\"420000\\\">湖北</option><option value=\\\"430000\\\">湖南</option><option value=\\\"440000\\\">广东</option><option value=\\\"450000\\\">广西</option><option value=\\\"460000\\\">海南</option><option value=\\\"500000\\\">重庆</option><option value=\\\"510000\\\">四川</option><option value=\\\"520000\\\">贵州</option><option value=\\\"530000\\\">云南</option><option value=\\\"540000\\\">西藏</option><option value=\\\"610000\\\">陕西</option><option value=\\\"620000\\\">甘肃</option><option value=\\\"630000\\\">青海</option><option value=\\\"640000\\\">宁夏</option><option value=\\\"650000\\\">新疆</option></select><lable class=\\\"label-area\\\">省</lable><select class=\\\"select cities\\\"><option value=\\\"440100\\\">广州</option><option value=\\\"440200\\\">韶关</option><option value=\\\"440300\\\">深圳</option><option value=\\\"440400\\\">珠海</option><option value=\\\"440500\\\">汕头</option><option value=\\\"440600\\\">佛山</option><option value=\\\"440700\\\">江门</option><option value=\\\"440800\\\">湛江</option><option value=\\\"440900\\\">茂名</option><option value=\\\"441200\\\">肇庆</option><option value=\\\"441300\\\">惠州</option><option value=\\\"441400\\\">梅州</option><option value=\\\"441500\\\">汕尾</option><option value=\\\"441600\\\">河源</option><option value=\\\"441700\\\">阳江</option><option value=\\\"441800\\\">清远</option><option value=\\\"441900\\\">东莞</option><option value=\\\"442000\\\">中山</option><option value=\\\"445100\\\">潮州</option><option value=\\\"445200\\\">揭阳</option><option value=\\\"445300\\\">云浮</option></select><lable class=\\\"label-area\\\">市</lable><select class=\\\"select counties\\\"><option value=\\\"440103\\\">荔湾</option><option value=\\\"440104\\\">越秀</option><option value=\\\"440105\\\">海珠</option><option value=\\\"440106\\\">天河</option><option value=\\\"440111\\\">白云</option><option value=\\\"440112\\\">黄埔</option><option value=\\\"440113\\\">番禺</option><option value=\\\"440114\\\">花都</option><option value=\\\"440115\\\">南沙</option><option value=\\\"440116\\\">萝岗</option><option value=\\\"440183\\\">增城</option><option value=\\\"440184\\\">从化</option><option value=\\\"440188\\\">东山</option><option value=\\\"440189\\\">其它</option></select><label class=\\\"label-area\\\">区/县</label><select class=\\\"select streets\\\"><option value=\\\"440103\\\">荔湾</option><option value=\\\"440104\\\">越秀</option><option value=\\\"440105\\\">海珠</option><option value=\\\"440106\\\">天河</option><option value=\\\"440111\\\">白云</option><option value=\\\"440112\\\">黄埔</option><option value=\\\"440113\\\">番禺</option><option value=\\\"440114\\\">花都</option><option value=\\\"440115\\\">南沙</option><option value=\\\"440116\\\">萝岗</option><option value=\\\"440183\\\">增城</option><option value=\\\"440184\\\">从化</option><option value=\\\"440188\\\">东山</option><option value=\\\"440189\\\">其它</option></select><label class=\\\"label-area\\\">街</label></p><p class=\\\"form-input\\\"><label class=\\\"text-label text-label-verifyCode \\\" for=\\\"address\\\">详细地址</label><input type=\\\"text\\\" name=\\\"address\\\" class=\\\"text-input\\\" value=\\\"\\\" placeholder=\\\"请输入详细地址\\\" autocomplete=\\\"off\\\"><span class=\\\"input-clearValue\\\"></span></p><p class=\\\"form-input\\\"><label class=\\\"text-label text-label-verifyCode \\\" for=\\\"address\\\">身份证</label><input type=\\\"text\\\" name=\\\"address\\\" class=\\\"text-input\\\" value=\\\"\\\" placeholder=\\\"如果您购买的是海外商品，请填写\\\" autocomplete=\\\"off\\\" maxlength=\\\"18\\\"><span class=\\\"input-clearValue\\\"></span></p><p class=\\\"form-switch\\\"><label for=\\\"switch\\\">设为默认</label><input name=\\\"switch\\\" class=\\\"mui-switch mui-switch-anim\\\" type=\\\"checkbox\\\" checked></p><p class=\\\"form-submit\\\"><input type=\\\"submit\\\" value=\\\"提交\\\" id=\\\"submit\\\" class=\\\"button-full button-full-disabled\\\"></p><span class=\\\"txt-tips\\\">应海关要求，收货人姓名与身份证号码姓名一致，否则海关不予发货</span></div></div></div></div><div class=\\\"pop-box coupon\\\" vm-class-show=\\\"isRendered\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"hidePop\\\"></span><span class=\\\"hd-right\\\" vm-if=\\\"!isShowHdRight\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-nav\\\"><ul><li>可使用</li><li>不可使用</li></ul></div><div class=\\\"pop-bd container\\\"><div class=\\\"coupon scroller\\\" id=\\\"couponList\\\"><ul><li class=\\\"coupon-item\\\"><a href=\\\"\\\" class=\\\"coupon-link\\\"><div class=\\\"coupon-con\\\"><div class=\\\"price\\\"><span class=\\\"rmb\\\">&yen;</span><strong class=\\\"count\\\">10.00</strong></div><div class=\\\"spceial-info\\\"><p class=\\\"name\\\">爱他美奶粉专场优惠劵</p><span class=\\\"line\\\"><i class=\\\"round\\\"></i></span><p class=\\\"full\\\">满{300}元可用</p></div><span class=\\\"go-special\\\"><i class=\\\"icon-directing\\\"></i></span></div></a><div class=\\\"coupon-standard\\\"><div class=\\\"stand-hd\\\"><span class=\\\"use-time\\\">有效期至: 2016-03-15 00:00</span></div></div></li></ul></div></div><div class=\\\"pop-ft\\\"><div class=\\\"action-bar\\\"><span class=\\\"section\\\"><i class=\\\"icon icon-noselect\\\"></i>全选</span><span class=\\\"act-txt\\\">已选<em>0</em>张优惠券&nbsp;&nbsp;共<em>0.00</em>元</span><span class=\\\"act-btn\\\"> 立即使用 </span></div></div></div><div class=\\\"pop-box bouns hidden\\\" vm-class-show=\\\"!isRendered\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"hidePop\\\"></span><span class=\\\"hd-right\\\" vm-if=\\\"!isShowHdRight\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"bouns-list scroller\\\" id=\\\"bounsList\\\"><ul><li class=\\\"list-items\\\"><div class=\\\"section\\\"><i class=\\\"icon icon-select\\\"></i></div><div class=\\\"money\\\"><span>&yen;<em class=\\\"money\\\">5.00</em></span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">88分享红包</p><p class=\\\"h6\\\">有效期：<span>2015-08-01—2015-08-07</span></p></div></li><li class=\\\"list-items\\\"><div class=\\\"section\\\"><i class=\\\"icon icon-select\\\"></i></div><div class=\\\"money\\\"><span>&yen;<em class=\\\"money\\\">5.00</em></span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">88分享红包</p><p class=\\\"h6\\\">有效期：<span>2015-08-01—2015-08-07</span></p></div></li><li class=\\\"list-items\\\"><div class=\\\"section\\\"><i class=\\\"icon icon-select\\\"></i></div><div class=\\\"money\\\"><span>&yen;<em class=\\\"money\\\">5.00</em></span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">88分享红包</p><p class=\\\"h6\\\">有效期：<span>2015-08-01—2015-08-07</span></p></div></li><li class=\\\"list-items\\\"><div class=\\\"section\\\"><i class=\\\"icon icon-select\\\"></i></div><div class=\\\"money\\\"><span>&yen;<em class=\\\"money\\\">5.00</em></span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">88分享红包</p><p class=\\\"h6\\\">有效期：<span>2015-08-01—2015-08-07</span></p></div></li><li class=\\\"list-items\\\"><div class=\\\"section\\\"><i class=\\\"icon icon-select\\\"></i></div><div class=\\\"money\\\"><span>&yen;<em class=\\\"money\\\">5.00</em></span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">88分享红包</p><p class=\\\"h6\\\">有效期：<span>2015-08-01—2015-08-07</span></p></div></li><li class=\\\"list-items\\\"><div class=\\\"section\\\"><i class=\\\"icon icon-select\\\"></i></div><div class=\\\"money\\\"><span>&yen;<em class=\\\"money\\\">5.00</em></span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">88分享红包</p><p class=\\\"h6\\\">有效期：<span>2015-08-01—2015-08-07</span></p></div></li><li class=\\\"list-items\\\"><div class=\\\"section\\\"><i class=\\\"icon icon-select\\\"></i></div><div class=\\\"money\\\"><span>&yen;<em class=\\\"money\\\">5.00</em></span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">88分享红包</p><p class=\\\"h6\\\">有效期：<span>2015-08-01—2015-08-07</span></p></div></li><li class=\\\"list-items\\\"><div class=\\\"section\\\"><i class=\\\"icon icon-select\\\"></i></div><div class=\\\"money\\\"><span>&yen;<em class=\\\"money\\\">5.00</em></span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">88分享红包</p><p class=\\\"h6\\\">有效期：<span>2015-08-01—2015-08-07</span></p></div></li></ul></div></div><div class=\\\"pop-ft\\\"><div class=\\\"action-bar\\\"><span class=\\\"section\\\"><i class=\\\"icon icon-noselect\\\"></i>全选</span><span class=\\\"act-txt\\\">已选<em>0</em>个&nbsp;&nbsp;共<em>0.00</em>元</span><span class=\\\"act-btn\\\"> 立即使用 </span></div></div></div><div class=\\\"pop-box activation hidden\\\" vm-class-show=\\\"!isRendered\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"hidePop\\\"></span><span class=\\\"hd-right\\\" vm-if=\\\"isShowHdRight\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"card-active scroller\\\" id=\\\"cardActive\\\"><div class=\\\"card-input\\\"><span class=\\\"input\\\"><input type=\\\"text\\\" name=\\\"card-active\\\" placeholder=\\\"输入红包码(输入多个用“,”分开)\\\"></span><span class=\\\"btn\\\">激活</span></div></div></div></div><div class=\\\"pop-box activation hidden\\\" vm-class-show=\\\"!isRendered\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"hidePop\\\"></span><span class=\\\"hd-right\\\" vm-if=\\\"isShowHdRight\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"card-active scroller\\\" id=\\\"cardActive\\\"><div class=\\\"card-input\\\"><span class=\\\"input\\\"><input type=\\\"text\\\" name=\\\"card-active\\\" placeholder=\\\"输入券码(输入多个用“,”分开)\\\"></span><span class=\\\"btn\\\">激活</span></div></div></div></div>\",\"itemList\":\"<ul class=\\\"item-list\\\"><li class=\\\"item\\\" vm-repeat=\\\"store_cart_list\\\"><div class=\\\"item-hd\\\"><div class=\\\"tit border-b\\\"><span class=\\\"section-status\\\" vm-on-touchend=\\\"selectAll($index,el.all_checked)\\\"><i class=\\\"icon icon-noselect\\\" vm-class=\\\"icon-select:el.all_checked\\\"></i></span><span class=\\\"shop-name\\\">由 {{el.store_info.store_name}} 发货</span></div><div class=\\\"coupon-tips\\\" vm-if=\\\"el.promotion\\\"><div class=\\\"border-b\\\" vm-repeat-nojoin=\\\"el.promotion.nojoined\\\"><a vm-attr-href=\\\"nojoin.link\\\"><span class=\\\"ico-arrow fr\\\"><i class=\\\"right\\\"></i></span><p class=\\\"text\\\"><span class=\\\"ico\\\"><img vm-attr-src=\\\"nojoin.icon\\\" vm-attr-alt=\\\"nojoin.zh_name\\\"></span>{{nojoin.desc}}可参加&nbsp;{{nojoin.name}}</p></a></div><div class=\\\"border-b\\\" vm-repeat-joined=\\\"el.promotion.joined\\\"><p class=\\\"text\\\"><span class=\\\"ico\\\"><img vm-attr-src=\\\"joined.icon\\\" vm-attr-alt=\\\"joined.zh_name\\\"></span>{{joined.desc}}&nbsp;{{joined.name}}</p></div></div></div><div class=\\\"item-bd\\\"><ul class=\\\"goods-box\\\"><li class=\\\"goods border-b\\\" vm-repeat-goods=\\\"el.goods_list\\\" vm-attr-data-gid=\\\"goods.goods_id\\\" vm-attr-data-num=\\\"goods.goods_num\\\"><div class=\\\"goods-tips\\\"><span class=\\\"cart-tips\\\" vm-if=\\\"goods.goods_state == 0\\\"><i class=\\\"ico-warning\\\"></i>该商品已下架，欢迎选购其他商品！ </span><span class=\\\"cart-tips\\\" vm-if=\\\"goods.goods_state==1 && message!=''\\\"><i class=\\\"ico-warning\\\"></i>{{message}} </span><span class=\\\"cart-tips\\\" vm-if=\\\"goods.goods_state == 20\\\"><i class=\\\"ico-warning\\\"></i>该商品库存不足！ </span><span class=\\\"cart-tips\\\" vm-if=\\\"goods.goods_state == 30\\\"><i class=\\\"ico-warning\\\"></i>该商品尚未开始售卖，欢迎选购其他商品！ </span><span class=\\\"cart-tips\\\" vm-if=\\\"goods.goods_state == 40\\\"><i class=\\\"ico-warning\\\"></i>该商品售卖已结束，欢迎选购其他商品！ </span><span class=\\\"cart-tips\\\" vm-if=\\\"goods.goods_state == 50\\\"><i class=\\\"ico-warning\\\"></i>该商品已被抢光，欢迎选购其他商品！ </span></div><div class=\\\"good-detail\\\"><div class=\\\"bd-left\\\"><span class=\\\"section-status\\\" vm-if=\\\"goods.goods_state == 1\\\" vm-on-touchend=\\\"select(goods.cart_id,goods.is_checked)\\\"><i class=\\\"icon icon-noselect\\\" vm-class=\\\"icon-select:goods.is_checked==1\\\"></i></span><a vm-attr-href=\\\"'/product_detail.html?goods_id=' + goods.goods_id\\\" class=\\\"img\\\"><span class=\\\"seckill-txt\\\" vm-if=\\\"goods.activities\\\" vm-repeat-act=\\\"goods.activities\\\">{{act.name}}</span><span class=\\\"seckill-txt\\\" vm-if=\\\"goods.is_foreign == 1\\\">海外购</span><img vm-attr-src=\\\"goods.goods_image_url\\\" alt=\\\"\\\"></a></div><div class=\\\"bd-right\\\"><div class=\\\"goods-info\\\"><span class=\\\"name\\\" vm-attr-href=\\\"'/product_detail.html?goods_id=' + goods.goods_id\\\">{{goods.goods_name}}</span><span class=\\\"price\\\"><em class=\\\"price-now\\\">{{goods.phone_price|currency}}</em><del class=\\\"price-market\\\">{{goods.goods_marketprice|currency}}</del></span></div><div class=\\\"goods-spec\\\"><p class=\\\"size\\\">{{goods.goods_spec_str}}</p></div><div class=\\\"num\\\"><span class=\\\"goods-del\\\" vm-on-click=\\\"removeGoods(goods.cart_id)\\\"><i class=\\\"icon icon-delete\\\"></i></span><div class=\\\"btn-group\\\"><div class=\\\"reduce\\\" vm-class-disable=\\\"goods.goods_num <= 1\\\" vm-on-touchend=\\\"editGoods(goods.cart_id,goods.goods_num,0)\\\"></div><div class=\\\"count\\\">{{goods.goods_num}}</div><div class=\\\"increase\\\" vm-on-touchend=\\\"editGoods(goods.cart_id,goods.goods_num,1)\\\"></div></div></div><div class=\\\"storage-tips\\\" vm-if=\\\"goods.goods_state == 1 && goods.goods_storage<=20\\\"><span>库存仅剩 {{goods.goods_storage}} 件</span></div></div></div></li><li class=\\\"goods border-b\\\" vm-if=\\\"el.gifts.length\\\" vm-repeat-gifts=\\\"el.gifts\\\"><div class=\\\"good-detail\\\"><div class=\\\"bd-left\\\"><span class=\\\"section-status\\\"><i class=\\\"icon\\\"></i></span><a vm-attr-href=\\\"'/product_detail.html?goods_id=' + gifts.goods_id\\\" class=\\\"img\\\"><span class=\\\"seckill-txt\\\">赠品</span><img vm-attr-src=\\\"gifts.goods_image_url\\\" alt=\\\"\\\"></a></div><div class=\\\"bd-right\\\"><div class=\\\"goods-info\\\"><span class=\\\"name\\\" vm-attr-href=\\\"'/product_detail.html?goods_id=' + gifts.goods_id\\\">{{gifts.goods_name}}</span><span class=\\\"price\\\"><em class=\\\"price-now\\\">{{gifts.phone_price|currency}}</em><del class=\\\"price-market\\\">{{gifts.goods_marketprice|currency}}</del></span></div><div class=\\\"goods-spec\\\"><p class=\\\"size\\\">{{gifts.goods_spec_str}}</p></div><div class=\\\"num\\\"><div class=\\\"btn-group\\\"><div class=\\\"reduce disable\\\"></div><div class=\\\"count\\\">{{gifts.goods_num}}</div><div class=\\\"increase disable\\\"></div></div></div><div class=\\\"storage-tips\\\" vm-if=\\\"gifts.goods_storage<=20\\\"><span>库存仅剩 {{gifts.goods_storage}} 件</span></div></div></div></li></ul></div><div class=\\\"item-ft\\\"><span class=\\\"coupon-info\\\" vm-if=\\\"~~el.store_redu_total > 0\\\">已优惠: <em class=\\\"num\\\">{{el.store_redu_total|currency}}</em></span><span class=\\\"cost-info\\\">应付: <em class=\\\"cost\\\">{{el.store_goods_total|currency}}</em></span></div></li></ul>\",\"main\":\"<div class=\\\"cart-scroller scroller\\\" id=\\\"cartScroller\\\" vm-if=\\\"store_cart_list.length > 0\\\"><div class=\\\"scroll-box\\\"><div class=\\\"scroll-item item-box\\\" id=\\\"itemBox\\\" vm-include-src=\\\"itemListTpl\\\" data-include-rendered=\\\"render\\\"></div><div class=\\\"scroll-item user-info\\\" id=\\\"userInfo\\\" vm-include-src=\\\"userInfoTpl\\\" data-include-rendered=\\\"render\\\"></div><div class=\\\"scroll-item user-settlement\\\" id=\\\"userSettlement\\\" vm-include-src=\\\"settlelistTpl\\\" data-include-rendered=\\\"render\\\"></div></div></div><div class=\\\"pay-action\\\" id=\\\"payAction\\\" vm-if=\\\"store_cart_list.length > 0\\\"><div class=\\\"select-all\\\"><span class=\\\"section-status\\\" vm-on-touchend=\\\"selectTotal(all_checked)\\\"><i class=\\\"icon icon-noselect\\\" vm-class=\\\"icon-select:all_checked==1\\\"></i></span>全选 </div><div class=\\\"cost-info\\\"><span class=\\\"cost\\\">总计: <em>{{ pay_amount|currency }}</em></span><span vm-if=\\\"promotion_total!='0.00'\\\">为您节省: <em>{{ promotion_total|currency }}</em></span><span vm-if=\\\"promotion_total=='0.00'\\\">共选择了 <em>{{checked_goods_count}}</em> 件商品</span></div><div class=\\\"pay-now\\\"><span class=\\\"btn-paynow\\\" vm-class-disable=\\\"checked_goods_count==0\\\" vm-on-touchstart=\\\"hoverStart()\\\" vm-on-touchend=\\\"payNow()\\\">结算</span></div></div><div class=\\\"overlay\\\" vm-if=\\\"isGet && message != ''\\\" vm-class-show=\\\"message != ''\\\"><div class=\\\"info-box\\\"><div class=\\\"bd\\\"><div class=\\\"close-overlay\\\" vm-on-touchend=\\\"closeInfoBox()\\\"><i class=\\\"icon icon-closeX\\\"></i></div><p class=\\\"desc\\\"><i class=\\\"ico-info\\\"></i><span>您选择的商品</span></p><p>{{message}}</p><span class=\\\"btn-got-it\\\" vm-on-touchend=\\\"closeInfoBox()\\\" vm-on-touchstart=\\\"hoverStart\\\">我知道了</span></div></div></div><div class=\\\"no-record\\\" vm-if=\\\"store_cart_list.length==0\\\"><p>暂无记录</p><a href=\\\"/\\\" class=\\\"button button-white\\\" vm-if=\\\"store_cart_list.length==0\\\" vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"hoverEnd\\\">立即去购物</a></div>\",\"settlelist\":\"<ul class=\\\"settle-list\\\"><li class=\\\"freight\\\"><span class=\\\"ico-arrow fr hide\\\"><i class=\\\"right\\\"></i></span><span class=\\\"key\\\">运费</span><span class=\\\"value\\\">{{freight_total=='0.00' ? '(卖家包邮)' : ''}}&nbsp;<em class=\\\"price-color\\\">{{freight_total|currency}}</em></span></li><li class=\\\"coupon reduce\\\" vm-if=\\\"redu_total!='0.00'\\\"><span class=\\\"ico-arrow fr hide\\\"><i class=\\\"right\\\"></i></span><span class=\\\"key\\\">满减</span><span class=\\\"value\\\">满减优惠&nbsp;<em class=\\\"price-color\\\">{{redu_total|currency}}</em></span></li><li class=\\\"coupon discount\\\" vm-if=\\\"fold_total!='0.00'\\\"><span class=\\\"ico-arrow fr hide\\\"><i class=\\\"right\\\"></i></span><span class=\\\"key\\\">满折</span><span class=\\\"value\\\">满减优惠&nbsp;<em class=\\\"price-color\\\">&nbsp;{{fold_total|currency}}</em></span></li><li class=\\\"coupon\\\"><span class=\\\"ico-arrow fr\\\" vm-on-touchend=\\\"getCoupon()\\\" ><i class=\\\"right\\\"></i></span><span class=\\\"key\\\">优惠劵</span><span class=\\\"value\\\" vm-on-touchend=\\\"getCoupon()\\\">{{pay_amount_coupon == '0.00' ? '选择使用优惠券' : '已使用优惠券'}}&nbsp;<em class=\\\"price-color\\\" vm-if=\\\"pay_amount_coupon!='0.00'\\\">{{pay_amount_coupon|currency}}</em></span></li><li class=\\\"red-pakects\\\"><span class=\\\"ico-arrow fr\\\" vm-on-touchend=\\\"getRedPacket()\\\"><i class=\\\"right\\\"></i></span><span class=\\\"key\\\">红包</span><span class=\\\"value\\\" vm-on-touchend=\\\"getRedPacket()\\\">{{red_packet_total == '0.00' ? '选择使用红包' : '已使用红包'}}&nbsp;<em class=\\\"price-color\\\" vm-if=\\\"red_packet_total!='0.00'&&red_packet_total!='-0.00'\\\">{{red_packet_total|currency}}</em></span></li><li class=\\\"payment\\\"><div class=\\\"pay-hd\\\"><span class=\\\"key\\\">支付方式</span></div><ul class=\\\"pay-items\\\" vm-each=\\\"payment_list\\\"><li class=\\\"pay\\\" vm-if=\\\"el.is_show\\\"><span class=\\\"section-status\\\" vm-on-touchend=\\\"setPayType(el.payment_code)\\\"><i class=\\\"icon icon-noselect\\\" vm-class-icon-select=\\\"payType==el.payment_code\\\"></i></span><div class=\\\"pay-info\\\"><span class=\\\"ico\\\" vm-class=\\\"ico-{{el.payment_code}}\\\" vm-on-touchend=\\\"setPayType(el.payment_code)\\\"></span><span class=\\\"txt\\\" vm-on-touchend=\\\"setPayType(el.payment_code)\\\">{{el.payment_name}}</span></div></li></ul></li></ul>\",\"userInfo\":\"<div class=\\\"info-hd\\\"><strong class=\\\"tit border-b\\\">收货人信息</strong></div><div class=\\\"info-bd\\\"><div class=\\\"base-info\\\"><span>{{address_info.true_name}}</span><span>{{address_info.mob_phone}}</span></div><div class=\\\"extend-info\\\"><span class=\\\"ico-arrow fr\\\" vm-on-touchend=\\\"openPopBox('adress_main',3,0)\\\"><i class=\\\"right\\\"></i></span><p class=\\\"adress\\\"><span class=\\\"default\\\" vm-if=\\\"address_info.is_default == '1'\\\">默认</span>{{address_info.area_info}}&nbsp;{{address_info.address}} </p><p class=\\\"identity-card\\\">{{ address_info.identity }}</p><span class=\\\"cart-tips\\\" vm-if=\\\"address_info.identity == '' && is_foreign == 1\\\"><i class=\\\"ico-warning\\\"></i>海外购商品需要填写身份证信息</span></div></div>\"};});",
    "_tpl/cartPop.js": "define('_tpl/cartPop',function(){return {\"activation\":\"<div class=\\\"tap-mask\\\" vm-class-show=\\\"isShowPop\\\" vm-on-touchmove=\\\"touchMoveEnd\\\"></div><div class=\\\"pop-box activation\\\" vm-if=\\\"activeType==1\\\" vm-class-show=\\\"isShowPop\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"getCoupon()\\\"></span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"card-active scroller\\\" id=\\\"cardActive\\\"><div class=\\\"card-input\\\"><span class=\\\"input\\\"><input type=\\\"text\\\" name=\\\"card-active\\\" vm-duplex-string=\\\"coupon_codes\\\" placeholder=\\\"请输入券码(输入多个用“,”分开)\\\"></span><span class=\\\"btn\\\" vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"activeCoupon()\\\">激活</span></div></div></div></div><div class=\\\"pop-box activation\\\" vm-if=\\\"activeType==2\\\" vm-class-show=\\\"isShowPop\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"getRedPacket()\\\"></span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"card-active scroller\\\" id=\\\"cardActive\\\"><div class=\\\"card-input\\\"><span class=\\\"input\\\"><input type=\\\"text\\\" name=\\\"card-active\\\" vm-duplex-string=\\\"red_packet_code\\\" placeholder=\\\"请输入红包码\\\"></span><span class=\\\"btn\\\" vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"activeRedPacket()\\\" >激活</span></div></div></div></div>\",\"bouns\":\"<div class=\\\"tap-mask\\\" vm-class-show=\\\"isShowPop\\\"></div><div class=\\\"pop-box bouns\\\" vm-class-show=\\\"isShowPop\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"closePopBox()\\\"></span><span class=\\\"hd-right\\\" vm-on-touchend=\\\"openPopBox('pop_activation',7,2)\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"bouns-list scroller\\\" id=\\\"bounsList\\\"><ul><li class=\\\"list-items\\\" vm-if=\\\"red_packet_all.length != 0\\\" vm-repeat=\\\"red_packet_all\\\"><div class=\\\"section\\\" vm-on-touchend=\\\"checkRedPacket(el.red_packet_id,$index)\\\"><i class=\\\"icon icon-noselect\\\" vm-class-icon-select=\\\"el.is_checked\\\"></i></div><div class=\\\"money\\\" vm-on-touchend=\\\"checkRedPacket(el.red_packet_id,$index)\\\"><span>{{el.money|currency}}</span></div><div class=\\\"info\\\"><p class=\\\"h3\\\">{{el.packet_name}}</p><p class=\\\"h6\\\">有效期：<span>{{el.use_end_time}}</span></p></div></li><li class=\\\"no-record\\\" vm-if=\\\"red_packet_all == 0\\\"><p>暂时没有可用的红包</p></li><li class=\\\"rules\\\"><strong>红包规则</strong><p>1、当您从购物车中去结算时，在订单确认页面可以选择（或输入）您的红包号，获得相应的优惠。</p><p>2、从其他活动渠道获得红包码，须在“激活红包”输入您的红包号，激活红包使用。</p><p>3、被激活成功的红包，将保存在上方的列表中；方便您在“填写核对订单信息”页面时，直接选择使用。</p><p>4、红包不得提现，不得转赠他人，不得为他人付款。</p><p>5、请注意：红包是有过期时间的哦！请在过期之前使用。</p><p>6、红包在启用状态下才能使用，已启用且未过期的红包在您的红包列表中状态显示为“未使用”。</p><p>7、若您获得满额返红包的订单发生退货，因该订单所返的所有红包都将被取消。</p></li></ul></div></div><div class=\\\"pop-ft\\\" vm-on-touchmove=\\\"fixPopFooter()\\\"><div class=\\\"action-bar\\\"><span class=\\\"section\\\" vm-on-touchend=\\\"checkRedPacket()\\\"><i class=\\\"icon icon-noselect\\\" vm-class-icon-select=\\\"red_packet_checked.length>0&&red_packet_checked.length==red_packet_all.length\\\"></i>全选</span><span class=\\\"act-txt\\\">已选<em>{{red_packet_checked.length}}</em>个&nbsp;&nbsp;共<em>{{red_packet_total | currency}}</em></span><span class=\\\"act-btn\\\" vm-on-touchend=\\\"updateCartList()\\\" vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"hoverEnd\\\"> 立即使用 </span></div></div></div>\",\"coupon\":\"<div class=\\\"tap-mask\\\" vm-class-show=\\\"isShowPop\\\"></div><div class=\\\"pop-box coupon\\\" vm-class-show=\\\"isShowPop\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"closePopBox()\\\"></span><span class=\\\"hd-right\\\" vm-on-touchend=\\\"openPopBox('pop_activation',6,1)\\\">激活</span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-nav\\\"><ul><li vm-on-tap=\\\"showCouponList(1)\\\" vm-class-active=\\\"!!showCouponListType\\\">可使用</li><li vm-on-tap=\\\"showCouponList(0)\\\" vm-class-active=\\\"!showCouponListType\\\">不可使用</li></ul></div><div class=\\\"pop-bd container\\\"><div class=\\\"coupon-list scroller\\\" id=\\\"couponList\\\"><ul vm-if=\\\"showCouponListType == 1\\\"><li vm-if=\\\"coupon_data.yesCouponList&&coupon_data.yesCouponList!=0\\\" class=\\\"coupon-item\\\" vm-repeat=\\\"coupon_data.yesCouponList\\\"><div class=\\\"section\\\" vm-on-touchend=\\\"checkCoupon(el.id,el.is_coupon_checked)\\\"><i class=\\\"icon icon-noselect\\\" vm-class=\\\"icon-select:el.is_coupon_checked==1\\\"></i></div><div class=\\\"value bg1\\\" vm-on-touchend=\\\"checkCoupon(el.id,el.is_coupon_checked)\\\" vm-class-bg2=\\\"~~el.face_amount>=20 && ~~el.face_amount<90\\\" vm-class-bg3=\\\"~~el.face_amount>=90\\\"><div class=\\\"price\\\"><span class=\\\"rmb\\\">&yen;</span><strong class=\\\"count\\\">{{~~el.face_amount}}</strong></div><div class=\\\"txt\\\">满{{~~el.consumption_amount}}元使用</div></div><div class=\\\"info\\\"><strong class=\\\"name\\\">{{el.coupon_name}}</strong><p class=\\\"card-id\\\">劵码: {{el.coupon_code}}</p><p class=\\\"card-time\\\">有效期至: {{el.use_end_time| date('mediumDate')}}</p></div><div class=\\\"link\\\"><span class=\\\"ico-arrow fr\\\"><i class=\\\"right\\\"></i></span></div></li><li class=\\\"no-record\\\" vm-if=\\\"coupon_data.yesCouponList&&coupon_data.yesCouponList==0\\\"><p>暂时没有可用的优惠劵</p></li><li class=\\\"rules\\\"><strong>优惠券规则</strong><p>1、当您从购物车中去结算时，在订单确认页面可以选择（或输入）您的优惠券码，获得相应的优惠。</p><p>2、从其他活动渠道获得优惠券码，须在“激活优惠券”输入您的优惠券码，激活优惠券使用。</p><p>3、被激活成功的优惠券，将保存在上方的列表中；方便您在“填写核对订单信息”页面时，直接选择使用。</p><p>4、优惠券不得提现，不得转赠他人，不得为他人付款。</p><p>5、请注意：优惠券是有过期时间的哦！请在过期之前使用。</p><p>6、优惠券在启用状态下才能使用，已启用且未过期的优惠券在您的优惠券列表中状态显示为“未使用”。</p><p>7、若您使用优惠券的订单发生退货，该订单所返的所有优惠券都将被取消。</p><p>8、当您使用优惠券券购买的商品发生退货时，将不会退还该现金券分摊优惠至每个商品中的金额。</p><p>9、如发现优惠券无法使用或过期请首先确保您已经注册为本站会员，如仍无法使用请联系我们的在线客服或拨打400-825-5238。</p><p>10、神爸优惠券最终解释权归神爸网所有。</p></li></ul><ul vm-if=\\\"showCouponListType == 0\\\"><li vm-if=\\\"coupon_data.noCouponList\\\" class=\\\"coupon-item\\\" vm-repeat=\\\"coupon_data.noCouponList\\\"><div class=\\\"value bg0\\\"><div class=\\\"price\\\"><span class=\\\"rmb\\\">&yen;</span><strong class=\\\"count\\\">{{~~el.face_amount}}</strong></div><div class=\\\"txt\\\">满{{~~el.consumption_amount}}元使用</div></div><div class=\\\"info\\\"><strong class=\\\"name\\\">{{el.coupon_name}}</strong><p class=\\\"card-id\\\">劵码: {{el.coupon_code}}</p><p class=\\\"card-time\\\">有效期至: {{el.use_end_time| date('mediumDate')}}</p></div><div class=\\\"link\\\"><span class=\\\"ico-arrow fr\\\"><i class=\\\"right\\\"></i></span></div></li><li class=\\\"no-record\\\" vm-if=\\\"!coupon_data.noCouponList\\\"><p>暂时没有不可用的优惠劵</p></li></ul></div></div><div class=\\\"pop-ft\\\" vm-on-touchmove=\\\"fixPopFooter()\\\"><div class=\\\"action-bar\\\"><span class=\\\"act-txt\\\">已选<em>{{coupon_checked.length}}</em>张&nbsp;&nbsp;共<em>{{coupon_data.pay_amount_coupon}}</em>元</span><span class=\\\"act-btn\\\" vm-on-touchend=\\\"updateCartList()\\\" vm-on-touchstart=\\\"hoverStart\\\" vm-on-touchend=\\\"hoverEnd\\\"> 立即使用 </span></div></div></div>\",\"special\":\"<div class=\\\"tap-mask hidden\\\" vm-class-show=\\\"isShowPop\\\"></div><div class=\\\"pop-box special\\\" vm-class-show=\\\"isShowPop\\\"><div class=\\\"pop-hd\\\"><span class=\\\"hd-left\\\" vm-on-touchend=\\\"closePopBox()\\\"></span><span class=\\\"hd-center\\\">{{popTitle}}</span></div><div class=\\\"pop-bd container\\\"><div class=\\\"special-list scroller\\\" id=\\\"specialList\\\"><ul><li><a href=\\\"javascript:;\\\"><span class=\\\"ico-arrow fr\\\"><i class=\\\"right\\\"></i></span>爱他美婴儿奶粉专场</a></li></ul></div></div></div>\"};});",
    "_tpl/coupon.js": "define('_tpl/coupon',function(){return {\"list\":\"<div class=\\\"wrap\\\"><ul class=\\\"coupons-list\\\"><li class=\\\"m-coupons-item none-coupons-item clearfix\\\" vm-repeat = \\\"couponList\\\"><a href=\\\"\\\" class=\\\"coupons-link\\\"><div class=\\\"coupons-con\\\" vm-class-voucherhead-item2=\\\"!status\\\" vm-class-voucherhead-item1=\\\"status\\\"><div class=\\\"price\\\"><span class=\\\"rmb\\\">￥</span><strong class=\\\"count\\\">{{el.face_amount}}</strong></div><div class=\\\"spceial-info\\\"><p class=\\\"name\\\">{{el.coupon_name}}</p><span class=\\\"line\\\"><i class=\\\"round\\\"></i></span><p class=\\\"full\\\">满{{el.consumption_amount}}元可用</p></div><span class=\\\"go-special\\\"><i class=\\\"icon-directing\\\"></i></span></div></a><div class=\\\"coupons-standard\\\"><div class=\\\"stand-hd\\\"><span class=\\\"use-time\\\" vm-class-using-time='status'>有效期至：{{el.use_end_time}}</span></div></div></li></ul></div>\"};});",
    "_tpl/detail.js": "define('_tpl/detail',function(){return {\"coupon\":\"<ul class=\\\"cp-list clearfix\\\"><li class=\\\"coupon-cover clearfix\\\" vm-repeat=\\\"list\\\"><div class=\\\"coupon-detail clearfix\\\"><div class=\\\"coupon-money\\\"><span class=\\\"RMB\\\">&yen;</span><strong class=\\\"count\\\">{{el.face_amount}}</strong></div><div class=\\\"coupon-title\\\"><p class=\\\"coupon-name\\\">{{el.coupon_name}}</p><span class=\\\"coupon-label\\\">满{{el.consumption_amount | excMoney}}使用</span></div></div><div class=\\\"coupon-date\\\">有效期至：{{el.use_end_time}}</div><div class=\\\"line\\\"></div><div class=\\\"flag\\\" vm-if=\\\"el.state !=4\\\" vm-class-over=\\\"el.state==2\\\" vm-class-has=\\\"el.state==3\\\"></div><div vm-if=\\\"el.state==4\\\" class=\\\"arrow-con no-arrow\\\" vm-on-touchend=\\\"getCoupon(el.coupon_id,$index)\\\"><em></em><span class=\\\"line-text\\\">立即领取</span></div></li></ul>\"};});",
    "_tpl/express.js": "define('_tpl/express',function(){return {\"express\":\"<div id=\\\"expressInfo\\\"><div class=\\\"order-info\\\"><h2 vm-if=\\\"expressInfo.expressTrackMsg.length>0\\\" class='tit'><span><i class=\\\"icon icon-allorder express-icon\\\"></i>订单状态&nbsp;:</span><strong>{{expressInfo.expressTrackMsg[0].sstatus}}</strong></h2><h2 vm-if=\\\"expressInfo.expressTrackMsg.length<1\\\" class='tit'><span><i class=\\\"icon icon-allorder express-icon\\\"></i>订单状态&nbsp;:</span><strong>等待处理</strong></h2><p>运单号：{{expressInfo.shippingCode}}</p><p>信息来源：{{expressInfo.expressName}}</p></div><div class=\\\"express-info\\\"><ul><li vm-repeat=\\\"expressInfo.expressTrackMsg\\\"><i></i><div><p>{{el.context}}</p><span>{{el.create_time}}</span></div></li></ul></div></div>\"};});",
    "_tpl/forgetpwd.js": "define('_tpl/forgetpwd',function(){return {\"index\":\"<div class=\\\"forgetPassword-form\\\" vm-if=\\\"isForget\\\"><form><div class=\\\"form-item\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">手机号码</div><div class=\\\"item-input\\\"><input type=\\\"tel\\\" placeholder=\\\"输入手机号码\\\" class=\\\"u-ipt checkname\\\" maxlength=\\\"11\\\" name=\\\"emailphone\\\" id=\\\"emailphone\\\" autocomplete=\\\"off\\\"></div></div></div><div class=\\\"form-item\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">验证码</div><div class=\\\"item-input get-item-input\\\"><input type=\\\"text\\\" pattern=\\\"[0-9]*\\\" placeholder=\\\"输入短信验证码\\\" class=\\\"u-ipt u-ipt-other code\\\" id=\\\"phonecaptcha\\\" name=\\\"phonecaptcha\\\" autocomplete=\\\"off\\\"><span class=\\\"get-verification\\\" id=\\\"getcaptcha\\\" vm-click=\\\"getcaptcha\\\">获取验证码</span></div></div></div><div class=\\\"form-btn\\\"><a href=\\\"javascript:;\\\" id=\\\"retrievePwd\\\" class=\\\"button button-white\\\" vm-click=\\\"retrieveBtn\\\">找回密码</a><p><a vm-href=\\\"{{ regUrl }}\\\" class=\\\"item-link\\\">新用户注册</a><a vm-href=\\\"{{ loginUrl }}\\\" class=\\\"item-link item-link-right\\\">已有帐号，去登录</a></p></div></form></div><div class=\\\"forgetPassword-form\\\" vm-if=\\\"!isForget\\\"><div class=\\\"form-item\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">密码</div><div class=\\\"item-input\\\"><input type=\\\"password\\\" id=\\\"retPassword\\\" name=\\\"retPassword\\\" placeholder=\\\"请输入密码\\\" class=\\\"u-ipt\\\" autocomplete=\\\"off\\\"></div></div></div><div class=\\\"form-item\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label label-lang\\\">请再次输入密码</div><div class=\\\"item-input\\\"><input type=\\\"password\\\" id=\\\"retPasswordOk\\\" name=\\\"retPasswordOk\\\" placeholder=\\\"请再次输入密码\\\" class=\\\"u-ipt\\\" autocomplete=\\\"off\\\"></div></div></div><div class=\\\"form-btn\\\"><a href=\\\"javascript:;\\\" id=\\\"retrievePwdOk\\\" class=\\\"button button-white\\\" vm-click=\\\"retrieveBtnOk\\\">确认</a></div></div>\"};});",
    "_tpl/goTop.js": "define('_tpl/goTop',function(){return {\"index\":\"<i class=\\\"icon icon-top go-top\\\" id=\\\"goTop\\\"></i>\"};});",
    "_tpl/lucky.js": "define('_tpl/lucky',function(){return {\"list\":\"<ul><li vm-repeat = \\\"luckyList\\\"><div class=\\\"price\\\"><span>￥{{el.money}}</span>{{el.packet_name}}</div><p class=\\\"des\\\">有效时间：{{el.use_start_time | date('yyyy-MM-dd')}}—{{el.use_end_time | date('yyyy-MM-dd')}}</p><p class=\\\"des\\\">使用平台：{{el.can_use_platform}}</p><i><s></s></i></li></ul>\"};});",
    "_tpl/orderDetail.js": "define('_tpl/orderDetail',function(){return {\"orderDetail\":\"<div class=\\\"order-user-info\\\"><h3 class=\\\"info-title\\\">收货人信息</h3><div class=\\\"info-address clearfix\\\"><div class=\\\"address-userinfo\\\"><span>{{order_info.extend_order_common.reciver_name}}</span><span>&nbsp;&nbsp;</span><span>{{order_info.extend_order_common.reciver_info.phone}}</span></div><div class=\\\"user-address\\\"><p>{{order_info.extend_order_common.reciver_info.address}}</p></div><div class=\\\"oversea user-id\\\" vm-if=\\\"order_info.extend_order_common.reciver_identity\\\"><span>身份证:&nbsp;&nbsp;</span><span>{{order_info.extend_order_common.reciver_identity}}</span></div></div></div><div class=\\\"order-detail-info\\\"><h3 class=\\\"info-title\\\">订单信息</h3><p class=\\\"mg info-item order-sn\\\">订单编号:&nbsp;&nbsp;<span>{{order_info.order_sn}}</span></p><p class=\\\"mg info-item\\\">下单时间:&nbsp;&nbsp;<span>{{order_info.add_time + \\\"000\\\"|date('yyyy-MM-dd hh:mm:ss')}}</span></p><p class=\\\"mg info-item order-state\\\" vm-if=\\\"!order_info.if_lock\\\">订单状态:&nbsp;&nbsp;<span>{{order_info.state_desc}}</span></p></div><div class=\\\"order-goods-list\\\"><h3 class=\\\"info-title mg\\\">商品信息</h3><div class=\\\"info-box\\\" vm-repeat=\\\"order_info.goods_list\\\"><div class=\\\"goods-item clearfix\\\"><div class=\\\"goods-img icon-wrap\\\"><a vm-href=\\\"/product_detail.html?goods_id={{el.goods_id}}\\\"><img class='img' vm-attr-src=\\\"{{el.image_240_url}}\\\"></a></div><div class=\\\"goods-info clearfix\\\"><div class=\\\"goods-name\\\"><a vm-href=\\\"/product_detail.html?goods_id={{el.goods_id}}\\\">{{el.goods_name}}</a></div><div class=\\\"goods-price\\\"><span class=\\\"sale\\\">{{el.goods_price|currency}}</span><span>共{{el.goods_num}}件</span></div></div></div><div class=\\\"goods-action\\\"><a vm-if=\\\"order_info.if_refund_cancel\\\" vm-attr-href=\\\"/user/refund.html?order_id={{order_info.order_id}}\\\" class=\\\"button button-white button-small\\\">订单退款</a><a vm-if=\\\"el.refund && el.refund!=0\\\" vm-attr-href=\\\"/user/return.html?order_id={{order_info.order_id}}&order_goods_id={{el.rec_id}}\\\" class=\\\"button button-white button-small\\\">退货退款</a><a vm-if=\\\"order_info.if_lock\\\" class=\\\"button button-white button-small\\\">退款/退货中</a><a vm-if=\\\"0\\\" class=\\\"button button-white button-small active\\\">去评价</a></div></div><div class=\\\"pay-amount\\\"><p>商品总价：<span>{{order_info.goods_amount}}</span></p><p>满 减：<span>{{order_info.redu_amount|currency}}</span></p><p>满 折：<span>{{order_info.fold_amount|currency}}</span></p><p>优 惠 券：<span>{{order_info.disc_amount|currency}}</span></p><p>运 费：<span>{{order_info.shipping_fee|currency}}</span></p><p>红包优惠：<span>{{order_info.red_amount|currency}}</span></p><p>实际付款：<span class=\\\"amount\\\">{{order_info.goods_pay_total|currency}}</span></p></div></div><div class=\\\"order-footer\\\" vm-if=\\\"order_info.order_state == 30 || order_info.order_state == 40\\\"><a vm-href=\\\"/user/express.html?order_id={{order_info.order_id}}\\\" class=\\\"button button-small active\\\">查看物流</a></div><div class=\\\"order-footer\\\" vm-if=\\\"order_info.order_state == 10\\\"><span class=\\\"button button-small\\\" vm-on-touchend=\\\"openPayBox(order_info.pay_sn)\\\">去支付</span></div><div vm-include-src=\\\"payTpl\\\"></div>\"};});",
    "_tpl/orderList.js": "define('_tpl/orderList',function(){return {\"index\":\"<div id=\\\"myOrderTab\\\"><div class=\\\"buttons-tab\\\"><a href=\\\"javascript:void(0);\\\" class=\\\"tab-link\\\" vm-on-touchend=\\\"changeType('all')\\\" vm-class-active=\\\"type==='all'\\\">全部</a><a href=\\\"javascript:void(0);\\\" class=\\\"tab-link\\\" vm-on-touchend=\\\"changeType('state_new')\\\" vm-class-active=\\\"type==='state_new'\\\">待付款</a><a href=\\\"javascript:void(0);\\\" class=\\\"tab-link\\\" vm-on-touchend=\\\"changeType('state_pay')\\\" vm-class-active=\\\"type==='state_pay'\\\">待发货</a><a href=\\\"javascript:void(0);\\\" class=\\\"tab-link\\\" vm-on-touchend=\\\"changeType('state_send')\\\" vm-class-active=\\\"type==='state_send'\\\">待收货</a><a href=\\\"javascript:void(0);\\\" class=\\\"tab-link\\\" vm-on-touchend=\\\"changeType('state_success')\\\" vm-class-active=\\\"type==='state_success'\\\">已完成</a></div></div><div class=\\\"m-order-list\\\" vm-on-touchmove=\\\"stopTouchMove()\\\"><div class=\\\"card item-order-list\\\" vm-repeat=\\\"list\\\"><div class=\\\"card-header\\\"><span>下单时间：{{el.add_time + \\\"000\\\" | date('yyyy-MM-dd HH:mm:ss')}}</span></div><div class=\\\"card-content\\\"><div class=\\\"card-content-inner\\\"><div class=\\\"media-list\\\" vm-repeat-item=\\\"el.order_Info\\\"><div class=\\\"item-content item-content-big\\\"><a vm-attr-href=\\\"/user/orderDetail.html?id={{item.order_id}}\\\" class=\\\"item-link\\\"><div class=\\\"item-media\\\"><img vm-attr-src=\\\"{{item.goods_list[0].image_240_url}}\\\" style=\\\"width:1.35rem; height:1.35rem;\\\"></div><div class=\\\"item-inner\\\"><div class=\\\"item-title\\\"> 编号:&nbsp;<span>{{item.order_sn}}</span></div><div class=\\\"item-subtitle\\\"> 金额:&nbsp;<span class=\\\"c-price\\\">{{item.goods_pay_total|currency}}</span></div><div class=\\\"item-text\\\"> 状态:&nbsp;<span>{{orderState(item.order_state)}}</span></div><div class=\\\"item-number\\\">共{{item.goods_count}}件</div><i class=\\\"rarrow\\\"></i></div></a></div></div></div></div><div class=\\\"card-footer\\\"><div class=\\\"foot-r\\\"><span>合计(共{{getGoodsCount(el.order_Info)}}件): &nbsp;<em class=\\\"c-price\\\">{{el.pay_amount|currency}}</em></span><span class=\\\"button button-small\\\" vm-if=\\\"el.order_Info[0].order_state == '10'\\\" vm-on-touchend=\\\"openPayBox(el.pay_sn)\\\">去支付</span></div></div></div><div class=\\\"load-text\\\" id=\\\"loadText\\\" vm-if=\\\"list.length > 0\\\"><div class=\\\"line-con\\\"><fieldset><legend></legend></fieldset></div></div><div class=\\\"no-record\\\" vm-if=\\\"list.length == 0\\\">暂无记录!</div></div><div vm-include-src=\\\"payTpl\\\"></div>\"};});",
    "_tpl/payBox.js": "define('_tpl/payBox',function(){return {\"main\":\"<div class=\\\"tap-mask\\\" vm-class-show=\\\"isShowPayBox\\\"></div><div class=\\\"pay-box\\\" vm-class-show=\\\"isShowPayBox\\\" vm-on-touchmove=\\\"stopTouchMove()\\\"><div class=\\\"payment\\\"><div class=\\\"pay-hd\\\"><span class=\\\"key\\\">选择支付方式</span><span class=\\\"close-box\\\" vm-on-touchend=\\\"closePayBox()\\\"><i class=\\\"icon icon-closeX\\\"></i></span></div><div class=\\\"pay-bd\\\"><ul class=\\\"pay-items\\\" vm-each=\\\"payment_list\\\"><li class=\\\"pay\\\" vm-if=\\\"el.is_show\\\"><span class=\\\"section-status\\\" vm-on-touchend=\\\"setPayType(el.payment_code)\\\"><i class=\\\"icon icon-noselect\\\" vm-class-icon-select=\\\"payType==el.payment_code\\\"></i></span><div class=\\\"pay-info\\\"><span class=\\\"ico\\\" vm-class=\\\"ico-{{el.payment_code}}\\\" vm-on-touchend=\\\"setPayType(el.payment_code)\\\"></span><span class=\\\"txt\\\" vm-on-touchend=\\\"setPayType(el.payment_code)\\\">{{el.payment_name}}</span></div></li></ul></div><div class=\\\"pay-ft\\\"><span class=\\\"button active\\\" type=\\\"button\\\" name=\\\"button\\\" vm-on-touchend=\\\"goToPay()\\\">立即支付</span></div></div></div>\"};});",
    "_tpl/returnList.js": "define('_tpl/returnList',function(){return {\"addRefund\":\"<form><div class=\\\"conent-block\\\"><div class=\\\"media-list\\\"><div class=\\\"conent-title h-tit\\\">订单信息</div><ul><li class=\\\"item\\\"><div class=\\\"item-link item-order\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-sn\\\">订单编号：{{data.rightOrderList.order_sn}}</div><div class=\\\"item-time\\\">下单时间：{{data.rightOrderList.add_time + \\\"000\\\" |date('yyyy-MM-dd hh:mm:ss')}}</div><div class=\\\"item-state\\\">订单状态：<span>{{data.rightOrderList.state_desc}}</span></div></div></div></li></ul></div></div><div class=\\\"mod-item mod-form2\\\"><div class=\\\"conent-block\\\"><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">售后类型：</div><div class=\\\"item-select\\\"> 订单退款 </div></div></div><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">申请原因：</div><div class=\\\"item-select\\\"><select class=\\\"u-select\\\"><option value=0>请选择</option><option vm-repeat=\\\"data.reason_list\\\" vm-attr-value=\\\"el.reason_id\\\">{{el.reason_info}}</option></select></div></div></div><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">问题描述：</div><div class=\\\"item-text\\\"><textarea class=\\\"u-text\\\" rows=\\\"5\\\"></textarea></div></div></div><div class=\\\"form-btn2\\\"><a class=\\\"btn\\\" id=\\\"refundBtn\\\" href=\\\"javascript:;\\\">提交</a></div></div></div></form>\",\"addReturn\":\"<div class=\\\"content-block\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title h-tit\\\">商品信息</div><ul><li class=\\\"item\\\" vm-repeat=\\\"orderList\\\"><a vm-attr-href=\\\"el.goods_url\\\" class=\\\"item-link\\\"><div class=\\\"item-media\\\"><img vm-attr-src=\\\"el.image_240_url\\\" style=\\\"width:1.35rem;height:1.35rem;\\\"></div><div class=\\\"item-inner\\\"><div class=\\\"item-title mat20\\\">{{el.goods_name}}</div><div class=\\\"item-subtitle\\\">订单金额：<span class=\\\"rmb\\\">&yen;{{el.goods_pay_price}}</span></div><div class=\\\"item-number\\\">共{{el.goods_num}}件</div></div></a></li></ul></div></div><div class=\\\"mod-item mod-form2\\\"><form action='/service/uploadFile' enctype=\\\"multipart/form-data\\\" method=\\\"post\\\" id=\\\"fileFormImg\\\" name=\\\"fileFormImg\\\"><div class=\\\"content-block\\\"><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">售后类型：</div><div class=\\\"item-select\\\"><select class=\\\"u-ipt\\\" id=\\\"selectType\\\" vm-change=\\\"getSelectType()\\\"><option value=\\\"2\\\">退货退款</option><option value=\\\"1\\\">仅退款</option></select></div></div></div><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">申请原因：</div><div class=\\\"item-select\\\"><select class=\\\"u-select\\\" id=\\\"selectReason\\\" vm-change=\\\"getSelectReason()\\\"><option value=\\\"0\\\">请选择</option><option vm-repeat=\\\"reasonList\\\" vm-attr-value=\\\"{{el.reason_id}}\\\">{{el.reason_info}}</option></select></div></div></div><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">退款金额：</div><div class=\\\"item-select\\\"><input type=\\\"text\\\" class=\\\"money-input\\\" vm-attr-value=\\\"refundPayPrice\\\" vm-data-maxPrice=\\\"refundPayPrice\\\" vm-change=\\\"refundMoney()\\\"><span class=\\\"money-tips\\\">(最多可退金额:{{refundPayPrice}})</span></div></div></div><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">选择数量：</div><div class=\\\"item-select\\\"><div class=\\\"amount-wrap\\\"><a id=\\\"minus\\\" href=\\\"javascript:;\\\" class=\\\"decrease-num\\\" vm-click=\\\"minusEvent()\\\">-</a><input id=\\\"num\\\" type=\\\"text\\\" maxlength=\\\"4\\\" value=\\\"1\\\" name=\\\"number\\\" class=\\\"amout-input\\\" vm-data-maxnumber=\\\"goodsNum\\\" vm-change=\\\"setNum()\\\"><a id=\\\"add\\\" href=\\\"javascript:;\\\" class=\\\"increase-num\\\" vm-click=\\\"addEvent()\\\">+</a></div></div></div></div><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">问题描述：</div><div class=\\\"item-text\\\"><textarea class=\\\"u-text\\\" rows=\\\"5\\\" name=\\\"buyerMessage\\\" id=\\\"buyerMessage\\\" placeholder=\\\"请输入描述\\\"></textarea></div></div></div><div class=\\\"form-item2\\\" id=\\\"formUploadFile\\\"><div class=\\\"item-inner\\\"><div class=\\\"upload-title label\\\">图片信息：</div><div class=\\\"item-pic\\\"><div class=\\\"uploaddiv uploadImg-item\\\"><div class=\\\"add\\\">+</div><input type=\\\"file\\\" name=\\\"uploadfile\\\" id=\\\"refund_pic1\\\" class=\\\"uploadfile\\\" accept=\\\"image/*\\\" vm-change=\\\"addFileImg\\\"></div><div class=\\\"uploaddiv uploadImg-item\\\"><div class=\\\"add\\\">+</div><input type=\\\"file\\\" name=\\\"uploadfile\\\" id=\\\"refund_pic2\\\" class=\\\"uploadfile\\\" accept=\\\"image/*\\\" vm-change=\\\"addFileImg\\\"></div><div class=\\\"uploaddiv uploadImg-item\\\"><div class=\\\"add\\\">+</div><input type=\\\"file\\\" value=\\\"\\\" id=\\\"refund_pic3\\\" class=\\\"uploadfile\\\" accept=\\\"image/*\\\" vm-change=\\\"addFileImg\\\"></div></div></div></div><div class=\\\"form-btn2\\\"><a class=\\\"btn\\\" href=\\\"javascript:;\\\" vm-click=\\\"submitForm()\\\" id=\\\"submitForm\\\">提交</a></div></div></form></div>\",\"refundView\":\"<div class=\\\"media-list\\\"><div class=\\\"item content-block\\\"><div class=\\\"content-title\\\">服务单号：<span class=\\\"s-order-sn\\\">{{data.refund.refund_sn}}</span></div><div class=\\\"refund-link\\\"><div class=\\\"item-media\\\"><img vm-attr-src=\\\"list[0].image_240_url\\\" style=\\\"width:1.35rem;height:1.35rem;\\\"></div><div class=\\\"item-inner\\\"><div class=\\\"item-title\\\">订单号：{{data.refund.order_sn}}</div><div class=\\\"refund-info\\\">{{data.refund.goods_name}}</div><div class=\\\"item-subtitle item-state\\\">退款金额：<span>￥{{data.refund.refund_amount}}</span></div><div class=\\\"item-time\\\">申请时间：{{data.refund.add_time+\\\"000\\\" | date('yyyy-MM-dd HH:mm:ss')}}</div></div></div></div></div><div class=\\\"content-block\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title h-tit\\\">问题描述</div><ul><li class=\\\"item\\\"><div class=\\\"item-link item-order\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-state\\\">退款原因：<span>{{data.refund.reason_info}}</span></div><div class=\\\"item-desc\\\">退款备注：{{data.refund.buyer_message}}</div></div></div></li></ul></div></div><div class=\\\"content-block\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title h-tit\\\">商家审核</div><ul><li class=\\\"item\\\"><div class=\\\"item-link item-order\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-state\\\">审核状态：<span>{{data.refund.seller_state_name}}</span></div><div class=\\\"item-desc\\\">&emsp;&emsp;备注：{{data.refund.seller_message}}</div></div></div></li></ul></div></div><div class=\\\"content-block express-info\\\"><div class=\\\"express-tit\\\">审核进度</div><ul><li vm-repeat=\\\"data.refundLog\\\"><span class=\\\"express-line\\\"><i class=\\\"express-icon\\\"></i></span><div class=\\\"express-detail\\\"><div class=\\\"exp-time\\\">{{el.time}}</div><div class=\\\"ser-sn\\\">{{el.msg}}</div><div class=\\\"operator\\\">经办人：{{el.oper}}</div></div></li></ul></div>\",\"returnList\":\"<div><div class=\\\"buttons-tab\\\"><a href=\\\"javascript:void(0);\\\" vm-repeat=\\\"tabCon\\\" class=\\\"tab-link\\\" vm-click=\\\"changeType(el.refund_type)\\\" vm-class-active=\\\"el.refund_type==refund_type\\\">{{el.text}}</a></div></div><ul><li class=\\\"item content-block\\\" vm-repeat-list=\\\"list\\\"><div class=\\\"content-title\\\">服务单号：<span class=\\\"s-order-sn\\\">{{list.refund_sn}}</span><a class=\\\"prog-query\\\" vm-attr-href=\\\"getUrl(list)\\\">进度查询</a></div><a vm-attr-href=\\\"getUrl(list)\\\" class=\\\"item-link refund-link\\\"><div class=\\\"item-media\\\"><img vm-attr-src=\\\"list.image_240_url\\\" style=\\\"width:1.35rem;height:1.35rem;\\\"></div><div class=\\\"item-inner\\\"><div class=\\\"item-title\\\">{{list.goods_name}}</div><div class=\\\"item-subtitle\\\" vm-if=\\\"list.goods_state==1&&refund_type==1\\\">订单状态：<span class=\\\"rmb\\\">待发货</span></div><div class=\\\"item-subtitle\\\" vm-if=\\\"list.goods_state==2&&refund_type==1\\\">订单状态：<span class=\\\"rmb\\\">待收货</span></div><div class=\\\"item-subtitle\\\" vm-if=\\\"list.goods_state==3&&refund_type==1\\\">订单状态：<span class=\\\"rmb\\\">未收到</span></div><div class=\\\"item-subtitle\\\" vm-if=\\\"list.goods_state==4&&refund_type==1\\\">订单状态：<span class=\\\"rmb\\\">已收货</span></div><div class=\\\"item-subtitle\\\" vm-if=\\\"list.refund_state==1&&refund_type==2\\\">退货状态：<span class=\\\"rmb\\\">处理中</span></div><div class=\\\"item-subtitle\\\" vm-if=\\\"list.refund_state==2&&refund_type==2\\\">退货状态：<span class=\\\"rmb\\\">待管理员处理</span></div><div class=\\\"item-subtitle\\\" vm-if=\\\"list.refund_state==3&&refund_type==2\\\">退货状态：<span class=\\\"rmb\\\">已完成</span></div><div class=\\\"item-subtitle\\\" vm-if=\\\"list.refund_state==4&&refund_type==2\\\">退货状态：<span class=\\\"rmb\\\">已取消</span></div><div class=\\\"item-time\\\">申请时间：{{list.add_time+\\\"000\\\" | date('yyyy-MM-dd HH:mm:ss')}}</div></div></a></li><li class=\\\"no-record\\\" vm-if=\\\"!list.length && isInit\\\">暂无记录！</li><li class=\\\"load-text\\\" id=\\\"loadText\\\"><div class=\\\"line-con\\\"><fieldset><legend></legend></fieldset></div></li></ul>\",\"returnView\":\"<div class=\\\"content-block\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title h-tit\\\">订单信息</div><ul><li class=\\\"item\\\"><div class=\\\"item-link item-order\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-state\\\">订单号：<span>{{data.refund.order_sn}}</span></div></div></div></li></ul></div></div><div class=\\\"content-block\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title h-tit\\\">问题描述</div><ul><li class=\\\"item\\\"><div class=\\\"item-link item-order\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-state\\\">退货原因：<span>{{data.refund.reason_info}}</span></div><div class=\\\"item-desc\\\">退货备注：{{data.refund.buyer_message}}</div><div class=\\\"item-pics\\\" vm-if=\\\"data.refund.pic_list\\\"><div class=\\\"upload-img\\\" vm-repeat-pic=\\\"data.refund.pic_list\\\"><img vm-attr-src=\\\"pic\\\" alt=\\\"\\\"></div></div></div></div></li></ul></div></div><div class=\\\"content-block\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title h-tit\\\">商家审核</div><ul><li class=\\\"item\\\"><div class=\\\"item-link item-order\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-state\\\">审核状态：<span>{{data.refund.seller_state_name}}</span></div><div class=\\\"item-desc\\\">&emsp;&emsp;备注：{{data.refund.seller_message}}</div></div></div></li></ul></div></div><div class=\\\"content-block\\\" vm-if=\\\"data.refund.e_name && data.refund.invoice_no\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title h-tit\\\">退货地址</div><ul><li class=\\\"item\\\"><div class=\\\"item-link item-order\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-state\\\">物流公司：<span>{{data.refund.e_name}}</span></div><div class=\\\"item-desc\\\">物流单号：{{data.refund.invoice_no}}</div></div></div></li></ul></div></div><div class=\\\"content-block mod-form2\\\" vm-if=\\\"data.refund.seller_state==2 && data.refund.goods_state==1\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title form-btn2 h-tit\\\">请填写退货发货信息<a class=\\\"confirm\\\" vm-click=\\\"addShip()\\\" href=\\\"javascript:;\\\">确认</a></div><ul class=\\\"logistics-box\\\"><li class=\\\"item express-item\\\"><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">物流公司：</div><div class=\\\"item-select\\\"><select class=\\\"u-select\\\" id=\\\"expressList\\\"><option value=0>请选择</option><option vm-repeat=\\\"data.express_list\\\" vm-attr-value=\\\"el.id\\\">{{el.e_name}}</option></select></div></div></div></li><li class=\\\"item reason\\\"><div class=\\\"form-item2\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-title label\\\">物流单号：</div><div class=\\\"item-select\\\"><input type=\\\"text\\\" id=\\\"expressCode\\\" name=\\\"\\\" value=\\\"\\\" placeholder=\\\"填写物流单号\\\"></div></div></div></li></ul></div></div><div class=\\\"content-block\\\" vm-if=\\\"data.rightOrderList\\\"><div class=\\\"media-list\\\"><div class=\\\"content-title h-tit\\\">退货发货信息</div><ul><li class=\\\"item\\\"><div class=\\\"item-link item-order\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-state\\\">{{data.rightOrderList.extend_store.store_name}}：{{data.rightOrderList.extend_store.store_phone}}</div><div class=\\\"item-desc\\\">{{data.rightOrderList.extend_store.area_info}}{{data.rightOrderList.extend_store.store_address}}</div></div></div></li></ul></div></div><div class=\\\"content-block express-info\\\"><div class=\\\"express-tit\\\">审核进度</div><ul><li vm-repeat=\\\"data.refundLog\\\"><span class=\\\"express-line\\\"><i class=\\\"express-icon\\\"></i></span><div class=\\\"express-detail\\\"><div class=\\\"exp-time\\\">{{el.time}}</div><div class=\\\"ser-sn\\\">{{el.msg}}</div><div class=\\\"operator\\\">经办人：{{el.oper}}</div></div></li></ul></div>\"};});",
    "_tpl/user.js": "define('_tpl/user',function(){return {\"addUserAddress\":\"<div class=\\\"form-item\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-input\\\"><input type=\\\"text\\\" placeholder=\\\"请输入姓名\\\" class=\\\"u-ipt\\\" autocomplete=\\\"off\\\" name=\\\"userName\\\" id=\\\"userName\\\"></div></div></div><div class=\\\"form-item\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-input\\\"><input type=\\\"text\\\" placeholder=\\\"请输入手机号码\\\" class=\\\"u-ipt\\\" autocomplete=\\\"off\\\" name=\\\"userPhone\\\" id=\\\"userPhone\\\"></div></div></div><div class=\\\"form-item\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-input\\\"><input type=\\\"text\\\" placeholder=\\\"请输入身份证号码\\\" class=\\\"u-ipt\\\" autocomplete=\\\"off\\\" name=\\\"userIdentity\\\" id=\\\"userIdentity\\\"></div></div></div><div class=\\\"address-wrap-first clearfix\\\"><div class=\\\"new-select-wp address-info\\\" id=\\\"prov\\\"><select class=\\\"select-30 provSelect\\\" id=\\\"vprov\\\" name=\\\"prov\\\"><option value=\\\"\\\">省份...</option></select></div><div class=\\\"new-select-wp address-info\\\" id=\\\"city\\\"><select class=\\\"select-30 citySelect\\\" id=\\\"vcity\\\" name=\\\"city\\\"><option value=\\\"\\\">城市...</option></select></div><div class=\\\"new-select-wp address-info\\\" id=\\\"region\\\"><select class=\\\"select-30 areaSelect\\\" id=\\\"varea\\\" name=\\\"region\\\"><option value=\\\"\\\">地区...</option></select></div><div class=\\\"new-select-wp address-info\\\" id=\\\"street\\\"><select class=\\\"select-30 streetSelect\\\" id=\\\"vstreet\\\" name=\\\"region\\\"><option value=\\\"\\\">街区...</option></select></div></div><div class=\\\"form-item last-item\\\"><div class=\\\"item-inner\\\"><div class=\\\"item-input\\\"><input type=\\\"text\\\" placeholder=\\\"请输入详细地址\\\" class=\\\"u-ipt\\\" autocomplete=\\\"off\\\" name=\\\"detailAddress\\\" id=\\\"detailAddress\\\"></div></div></div><div class=\\\"setDefaultAddress\\\"><h3 class=\\\"mg\\\">默认地址<i class=\\\"icon icon-select\\\"></i></h3></div><div class=\\\"addressSubmit\\\"><a href=\\\"javascript:;\\\" class=\\\"button\\\">提交</a></div><div class=\\\"cancelSubmit\\\"><a href=\\\"javascript:;\\\" class=\\\"button button-white\\\">取消</a></div>\",\"userAddresslist\":\"<div class=\\\"address-add-wrap\\\"><h3 class=\\\"title js-add-address\\\"><i class=\\\"icon icon-address\\\"></i><span class=\\\"icon-rarrow\\\"><b class=\\\"rarrow\\\"></b></span>新增地址 </h3></div><div class=\\\"address-list-wrap\\\" vm-if=\\\"addCount>0\\\"><h3 class=\\\"title\\\">收货人信息</h3><ul class=\\\"address-list\\\"><li vm-repeat=\\\"aAddress\\\"><div class=\\\"info-address\\\"><div class=\\\"address-userinfo\\\"><span>{{el.true_name}}&nbsp;&nbsp;</span><span>{{el.mob_phone}}</span><i class=\\\"icon icon-delete\\\" vm-attr-address-id=\\\"el.address_id\\\"></i></div><div class=\\\"user-address\\\" vm-attr-address-id=\\\"el.address_id\\\"><span class=\\\"icon-rarrow\\\"><b class=\\\"rarrow\\\"></b></span><p class=\\\"text\\\"><span class=\\\"default\\\" vm-if=\\\"el.is_default === '1'\\\">默认</span>{{el.area_info}}&nbsp;{{el.address}}</p></div><div class=\\\"oversea user-id\\\" vm-if=\\\"el.identity\\\"><span>身份证:&nbsp;&nbsp;</span><span>{{el.identity}}</span></div></div></li></ul></div>\"};});",
    "app/_common.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/*\r\n * @fileOverview 共用执行模块\r\n * @author yy\r\n * @description 共用执行模块，需要各个业务模块引用\r\n */\r\ndefine('app/_common',['_pulgins/touch','_common/ajaxData','_common/checkLogin','_common/checkMember','_common/checkAgent','_common/delUserCookie','_common/setUserCookie','_common/getDomain','_common/getQueryString','_common/goTop','_common/tapFix','_common/scrollFix','_common/urlParse','_common/objectCallFunction','_common/setObjVariable','_common/wxGetSign','_common/outIframe','_common/yaoLan','_common/tplBottomBar','_common/isWeixin','_common/isShenBaApp','_common/isYaoLanApp','_common/isEmptyObject','_common/historyState'],function() {\r\n  window._DEV_MOD_ = !!_DEV_MOD_;\r\n  return sbLib.common.outIframe();\r\n});\r\n",
    "app/aboutUs.js": "/**\r\n * @fileOverview 关于神爸\r\n * @module app/aboutUs\r\n * @author JILIANG\r\n */\r\ndefine('app/aboutUs',['vmcore','app/_common','_base/swiper','_base/layer'],function(vmcore,common) {\r\n\r\n    var swiper = sbLib.base.swiper;\r\n    var layer = sbLib.base.layer;\r\n    var sbCom = sbLib.common;\r\n\r\n    var exports;\r\n    exports = {\r\n        init: function() {\r\n            var _this = this;\r\n            _this.isApp();\r\n            _this.teamSlider();\r\n            _this.reportSlider();\r\n            _this.getOverseas();\r\n        },\r\n        /**\r\n         * [isApp 判断如果是APP打开，则隐藏头部]\r\n         */\r\n        isApp: function() {\r\n            if (sbCom.isShenBaApp() || sbCom.isYaoLanApp()) {\r\n                $('#header').hide();\r\n                $('body').css('paddingTop', '0px');\r\n            }\r\n            $('#modAbout').show();\r\n            // loading.stop();\r\n        },\r\n        teamSlider: function() {\r\n            new swiper('.team-swiper', {\r\n                effect: 'coverflow',\r\n                initialSlide: 1, //设定初始化的索引\r\n                /*nextButton:'.team-btn-next',\r\n                prevButton:'.team-btn-prev',*/\r\n                grabCursor: true,\r\n                loop: true,\r\n                centeredSlides: true,\r\n                slidesPerView: 'auto',\r\n                coverflow: {\r\n                    rotate: -50,\r\n                    stretch: 52,\r\n                    depth: 120,\r\n                    modifier: 1,\r\n                    slideShadows: true\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * [reportSlider 媒体报道幻灯片]\r\n         */\r\n        reportSlider: function() {\r\n            new swiper('.swiper-reports', {\r\n                pagination: '.swiper-pagination',\r\n                paginationClickable: true,\r\n                loop: true,\r\n                nextButton: '.btn-next',\r\n                prevButton: '.btn-prev',\r\n                spaceBetween: 30\r\n            });\r\n        },\r\n        /**\r\n         * 获取广告\r\n         * @param1 {Number} id 广告ID\r\n         * @param2 {Function} successFn 成功时调用\r\n         * @param3 {Function} failFn 失败时调用\r\n         */\r\n        getAd: function(id, successFn, failFn) {\r\n            var options = {\r\n                url: '/proxy',\r\n                data: {\r\n                    domain: 'pc',\r\n                    act: 'index',\r\n                    op: \"getOneAdvert\",\r\n                    ap_id: id,\r\n                    client: \"h5\"\r\n                },\r\n                type: 'get'\r\n            };\r\n            sbCom.ajaxData(options, function(response) {\r\n                if (response.code === '00000') {\r\n                    if (typeof successFn === \"function\") {\r\n                        if (response.data) {\r\n                            if (response.data[0].imageUrl !== \"\") {\r\n                                successFn(response);\r\n                            }\r\n                        }\r\n                        if (typeof failFn === \"function\") {\r\n                            failFn(response);\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (typeof failFn === \"function\") {\r\n                        failFn(response);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * [获取海外商品购买流程广告]\r\n         */\r\n        getOverseas: function() {\r\n            exports.getAd(56, function(response) {\r\n                $('.imgOverseas').append('<a href=\"' + response.data[0].targetUrl + '\"><img src=\"' + response.data[0].imageUrl + '\" /></a>');\r\n            });\r\n        }\r\n    };\r\n    return exports.init();\r\n});\r\n",
    "app/cateBrand.js": "\r\n/*\r\n * @fileOverview cateBrand\r\n * @description 分类品牌页相关逻辑和操作\r\n */\r\ndefine('app/cateBrand',['app/_common','app/_common/specialInit','app/_common/cateBrand'],function() {\r\n  var main, sbMods;\r\n  sbMods = sbLib.mods;\r\n  main = {\r\n    init: function() {\r\n      sbLib.app.commonSpecialInit();\r\n      sbLib.app.commonCateBrand.init();\r\n      return sbLib.common.goTop();\r\n    }\r\n  };\r\n  return main.init();\r\n});",
    "app/cateIndex.js": "\r\n/*\r\n * @fileOverview cateIndex\r\n * @description 分类首页相关逻辑和操作\r\n */\r\ndefine('app/cateIndex',['app/_common','app/_common/specialInit','app/_common/cateIndex'],function() {\r\n  var main;\r\n  main = {\r\n    init: function() {\r\n      sbLib.app.commonSpecialInit();\r\n      sbLib.app.commonCateIndex.init();\r\n      sbLib.common.goTop();\r\n    }\r\n  };\r\n  main.init();\r\n});",
    "app/cateList.js": "\r\n/*\r\n * @fileOverview cateList\r\n * @description 分类专场页相关逻辑和操作\r\n */\r\ndefine('app/cateList',['app/_common','app/_common/specialInit','app/_common/cateGoodsList'],function() {\r\n  var main, sbMods;\r\n  sbMods = sbLib.mods;\r\n  main = {\r\n    init: function() {\r\n      sbLib.app.commonSpecialInit();\r\n      sbLib.app.commonCateGoodsList.init();\r\n      return sbLib.common.goTop();\r\n    }\r\n  };\r\n  return main.init();\r\n});",
    "app/index.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/*\r\n * @fileOverview 首页\r\n * @author yy/pjg\r\n * @description 首页业务相关逻辑和操作\r\n */\r\ndefine('app/index',['app/_common','_mods/timer','app/_common/specialInit','app/_common/tplTopAd','app/_common/tplIndexDialogAd','app/_index/baseFn','app/_index/slider','app/_index/menu','app/_index/specialList'],function() {\r\n  var App, Dom, main, sbBase, sbCom, sbMods;\r\n  sbBase = sbLib.base;\r\n  sbCom = sbLib.common;\r\n  sbMods = sbLib.mods;\r\n  App = sbLib.app;\r\n  Dom = sbLib.dom;\r\n  main = {\r\n\r\n    /*\r\n     * @description 初始化\r\n     */\r\n    init: function() {\r\n      var _self;\r\n      _self = this;\r\n      App.indexBaseFn.domCache();\r\n      App.indexBaseFn.conInit(listType);\r\n      sbBase.lazyLoad.init({\r\n        isNew: true\r\n      });\r\n      sbBase.lazyLoad.trigger();\r\n      App.indexMemu.init();\r\n      main.bindFn();\r\n      App.indexSlider();\r\n      App.commonSpecialInit();\r\n      App.indexSpecialList.init();\r\n      sbLib.mods.timer();\r\n      sbCom.goTop();\r\n      sbCom.tplBottomBar.init();\r\n      App.tplTopAd();\r\n      return App.tplIndexDialogAd();\r\n    },\r\n\r\n    /*\r\n     * @description 事件绑定\r\n     */\r\n    bindFn: function(cb) {\r\n      var _self;\r\n      _self = this;\r\n      Dom.$moreBtn.on(\"touchend\", function(e) {\r\n        App.indexMemu.memuSlideDown();\r\n        App.indexMemu.toggleMemuArrow();\r\n        return e.preventDefault();\r\n      });\r\n      Dom.$brandMenu.on(\"click\", \".guide:not(.selected)\", function(e) {\r\n        var gid;\r\n        if (Dom.$moreCon.hasClass('show')) {\r\n          App.indexMemu.memuSlideUp();\r\n          App.indexMemu.toggleMemuArrow();\r\n        }\r\n        gid = $(this).attr('data-gid');\r\n        App.indexMemu.scrollTo(gid);\r\n        return App.indexSpecialList.tplList(gid, function() {\r\n          return App.indexBaseFn.historyState(gid, function(url) {\r\n            var params, type_id;\r\n            params = sbCom.urlParse(url).params;\r\n            type_id = params['type_id'] || '101';\r\n            return App.indexSpecialList.tplList(type_id);\r\n          });\r\n        });\r\n      });\r\n      return Dom.$win.on(\"scroll\", function(e) {\r\n        App.indexMemu.memuSlideUp();\r\n        return Dom.$moreBtn.children().removeClass('up');\r\n      });\r\n    }\r\n  };\r\n  return main.init();\r\n});\r\n",
    "app/productDetail.js": "\r\n/*\r\n * @fileOverview 详情页逻辑\r\n * @author pjg\r\n * @description 详情页业务相关逻辑和操作\r\n */\r\ndefine('app/productDetail',['app/_common','_base/lazyLoad','app/_detail/swipe','app/_detail/timer','app/_detail/buy'],function() {\r\n  var exports, sbApp, sbBase;\r\n  sbBase = sbLib.base;\r\n  sbApp = sbLib.app = sbLib.app || {};\r\n  exports = {\r\n    init: function() {\r\n\r\n      /*商品主图切换 */\r\n      sbLib.app.detailSwipe();\r\n      sbLib.app.detailTimer.init();\r\n      sbBase.lazyLoad.init({\r\n        threshold: 400\r\n      });\r\n      sbBase.lazyLoad.trigger();\r\n      sbLib.app.detailBuy.init();\r\n      return sbLib.common.goTop();\r\n    }\r\n  };\r\n  return exports.init();\r\n});\r\n",
    "app/productForApp.js": "\r\n/*\r\n * @fileOverview 详情页逻辑\r\n * @author pjg\r\n * @description 详情页业务相关逻辑和操作\r\n */\r\ndefine('app/productForApp',['app/_common','_base/lazyLoad'],function() {\r\n  var exports, sbApp, sbBase;\r\n  sbBase = sbLib.base;\r\n  sbApp = sbLib.app = sbLib.app || {};\r\n  exports = {\r\n    init: function() {\r\n\r\n      /*商品主图切换 */\r\n      sbBase.lazyLoad.init({\r\n        threshold: 400\r\n      });\r\n      sbBase.lazyLoad.trigger();\r\n      sbLib.common.goTop();\r\n    }\r\n  };\r\n  return exports.init();\r\n});\r\n",
    "app/productList.js": "\r\n/*\r\n * @fileOverview productList\r\n * @author pjg\r\n * @description 专场页相关逻辑和操作\r\n */\r\ndefine('app/productList',['app/_common','_mods/timer','app/_common/specialInit','app/_common/goodsList'],function() {\r\n  var main, sbMods;\r\n  sbMods = sbLib.mods;\r\n  main = {\r\n    init: function() {\r\n      sbLib.app.commonSpecialInit();\r\n      sbMods.timer();\r\n      sbLib.app.commonGoodsList.init();\r\n      sbLib.common.goTop();\r\n      return sbCom.tplBottomBar.init();\r\n    }\r\n  };\r\n  return main.init();\r\n});\r\n",
    "vendor/Zepto/zepto.js": "/* Zepto v1.1.6 - zepto event ajax form ie - zeptojs.com/license */\r\n\r\nvar Zepto = (function() {\r\n  var undefined, key, $, classList, emptyArray = [], slice = emptyArray.slice, filter = emptyArray.filter,\r\n    document = window.document,\r\n    elementDisplay = {}, classCache = {},\r\n    cssNumber = { 'column-count': 1, 'columns': 1, 'font-weight': 1, 'line-height': 1,'opacity': 1, 'z-index': 1, 'zoom': 1 },\r\n    fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\r\n    singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\r\n    tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,\r\n    rootNodeRE = /^(?:body|html)$/i,\r\n    capitalRE = /([A-Z])/g,\r\n\r\n    // special attributes that should be get/set via method calls\r\n    methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],\r\n\r\n    adjacencyOperators = [ 'after', 'prepend', 'before', 'append' ],\r\n    table = document.createElement('table'),\r\n    tableRow = document.createElement('tr'),\r\n    containers = {\r\n      'tr': document.createElement('tbody'),\r\n      'tbody': table, 'thead': table, 'tfoot': table,\r\n      'td': tableRow, 'th': tableRow,\r\n      '*': document.createElement('div')\r\n    },\r\n    readyRE = /complete|loaded|interactive/,\r\n    simpleSelectorRE = /^[\\w-]*$/,\r\n    class2type = {},\r\n    toString = class2type.toString,\r\n    zepto = {},\r\n    camelize, uniq,\r\n    tempParent = document.createElement('div'),\r\n    propMap = {\r\n      'tabindex': 'tabIndex',\r\n      'readonly': 'readOnly',\r\n      'for': 'htmlFor',\r\n      'class': 'className',\r\n      'maxlength': 'maxLength',\r\n      'cellspacing': 'cellSpacing',\r\n      'cellpadding': 'cellPadding',\r\n      'rowspan': 'rowSpan',\r\n      'colspan': 'colSpan',\r\n      'usemap': 'useMap',\r\n      'frameborder': 'frameBorder',\r\n      'contenteditable': 'contentEditable'\r\n    },\r\n    isArray = Array.isArray ||\r\n      function(object){ return object instanceof Array }\r\n\r\n  zepto.matches = function(element, selector) {\r\n    if (!selector || !element || element.nodeType !== 1) return false\r\n    var matchesSelector = element.webkitMatchesSelector || element.mozMatchesSelector ||\r\n                          element.oMatchesSelector || element.matchesSelector\r\n    if (matchesSelector) return matchesSelector.call(element, selector)\r\n    // fall back to performing a selector:\r\n    var match, parent = element.parentNode, temp = !parent\r\n    if (temp) (parent = tempParent).appendChild(element)\r\n    match = ~zepto.qsa(parent, selector).indexOf(element)\r\n    temp && tempParent.removeChild(element)\r\n    return match\r\n  }\r\n\r\n  function type(obj) {\r\n    return obj == null ? String(obj) :\r\n      class2type[toString.call(obj)] || \"object\"\r\n  }\r\n\r\n  function isFunction(value) { return type(value) == \"function\" }\r\n  function isWindow(obj)     { return obj != null && obj == obj.window }\r\n  function isDocument(obj)   { return obj != null && obj.nodeType == obj.DOCUMENT_NODE }\r\n  function isObject(obj)     { return type(obj) == \"object\" }\r\n  function isPlainObject(obj) {\r\n    return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype\r\n  }\r\n  function likeArray(obj) { return typeof obj.length == 'number' }\r\n\r\n  function compact(array) { return filter.call(array, function(item){ return item != null }) }\r\n  function flatten(array) { return array.length > 0 ? $.fn.concat.apply([], array) : array }\r\n  camelize = function(str){ return str.replace(/-+(.)?/g, function(match, chr){ return chr ? chr.toUpperCase() : '' }) }\r\n  function dasherize(str) {\r\n    return str.replace(/::/g, '/')\r\n           .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\r\n           .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\r\n           .replace(/_/g, '-')\r\n           .toLowerCase()\r\n  }\r\n  uniq = function(array){ return filter.call(array, function(item, idx){ return array.indexOf(item) == idx }) }\r\n\r\n  function classRE(name) {\r\n    return name in classCache ?\r\n      classCache[name] : (classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)'))\r\n  }\r\n\r\n  function maybeAddPx(name, value) {\r\n    return (typeof value == \"number\" && !cssNumber[dasherize(name)]) ? value + \"px\" : value\r\n  }\r\n\r\n  function defaultDisplay(nodeName) {\r\n    var element, display\r\n    if (!elementDisplay[nodeName]) {\r\n      element = document.createElement(nodeName)\r\n      document.body.appendChild(element)\r\n      display = getComputedStyle(element, '').getPropertyValue(\"display\")\r\n      element.parentNode.removeChild(element)\r\n      display == \"none\" && (display = \"block\")\r\n      elementDisplay[nodeName] = display\r\n    }\r\n    return elementDisplay[nodeName]\r\n  }\r\n\r\n  function children(element) {\r\n    return 'children' in element ?\r\n      slice.call(element.children) :\r\n      $.map(element.childNodes, function(node){ if (node.nodeType == 1) return node })\r\n  }\r\n\r\n  // `$.zepto.fragment` takes a html string and an optional tag name\r\n  // to generate DOM nodes nodes from the given html string.\r\n  // The generated DOM nodes are returned as an array.\r\n  // This function can be overriden in plugins for example to make\r\n  // it compatible with browsers that don't support the DOM fully.\r\n  zepto.fragment = function(html, name, properties) {\r\n    var dom, nodes, container\r\n\r\n    // A special case optimization for a single tag\r\n    if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1))\r\n\r\n    if (!dom) {\r\n      if (html.replace) html = html.replace(tagExpanderRE, \"<$1></$2>\")\r\n      if (name === undefined) name = fragmentRE.test(html) && RegExp.$1\r\n      if (!(name in containers)) name = '*'\r\n\r\n      container = containers[name]\r\n      container.innerHTML = '' + html\r\n      dom = $.each(slice.call(container.childNodes), function(){\r\n        container.removeChild(this)\r\n      })\r\n    }\r\n\r\n    if (isPlainObject(properties)) {\r\n      nodes = $(dom)\r\n      $.each(properties, function(key, value) {\r\n        if (methodAttributes.indexOf(key) > -1) nodes[key](value)\r\n        else nodes.attr(key, value)\r\n      })\r\n    }\r\n\r\n    return dom\r\n  }\r\n\r\n  // `$.zepto.Z` swaps out the prototype of the given `dom` array\r\n  // of nodes with `$.fn` and thus supplying all the Zepto functions\r\n  // to the array. Note that `__proto__` is not supported on Internet\r\n  // Explorer. This method can be overriden in plugins.\r\n  zepto.Z = function(dom, selector) {\r\n    dom = dom || []\r\n    dom.__proto__ = $.fn\r\n    dom.selector = selector || ''\r\n    return dom\r\n  }\r\n\r\n  // `$.zepto.isZ` should return `true` if the given object is a Zepto\r\n  // collection. This method can be overriden in plugins.\r\n  zepto.isZ = function(object) {\r\n    return object instanceof zepto.Z\r\n  }\r\n\r\n  // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and\r\n  // takes a CSS selector and an optional context (and handles various\r\n  // special cases).\r\n  // This method can be overriden in plugins.\r\n  zepto.init = function(selector, context) {\r\n    var dom\r\n    // If nothing given, return an empty Zepto collection\r\n    if (!selector) return zepto.Z()\r\n    // Optimize for string selectors\r\n    else if (typeof selector == 'string') {\r\n      selector = selector.trim()\r\n      // If it's a html fragment, create nodes from it\r\n      // Note: In both Chrome 21 and Firefox 15, DOM error 12\r\n      // is thrown if the fragment doesn't begin with <\r\n      if (selector[0] == '<' && fragmentRE.test(selector))\r\n        dom = zepto.fragment(selector, RegExp.$1, context), selector = null\r\n      // If there's a context, create a collection on that context first, and select\r\n      // nodes from there\r\n      else if (context !== undefined) return $(context).find(selector)\r\n      // If it's a CSS selector, use it to select nodes.\r\n      else dom = zepto.qsa(document, selector)\r\n    }\r\n    // If a function is given, call it when the DOM is ready\r\n    else if (isFunction(selector)) return $(document).ready(selector)\r\n    // If a Zepto collection is given, just return it\r\n    else if (zepto.isZ(selector)) return selector\r\n    else {\r\n      // normalize array if an array of nodes is given\r\n      if (isArray(selector)) dom = compact(selector)\r\n      // Wrap DOM nodes.\r\n      else if (isObject(selector))\r\n        dom = [selector], selector = null\r\n      // If it's a html fragment, create nodes from it\r\n      else if (fragmentRE.test(selector))\r\n        dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null\r\n      // If there's a context, create a collection on that context first, and select\r\n      // nodes from there\r\n      else if (context !== undefined) return $(context).find(selector)\r\n      // And last but no least, if it's a CSS selector, use it to select nodes.\r\n      else dom = zepto.qsa(document, selector)\r\n    }\r\n    // create a new Zepto collection from the nodes found\r\n    return zepto.Z(dom, selector)\r\n  }\r\n\r\n  // `$` will be the base `Zepto` object. When calling this\r\n  // function just call `$.zepto.init, which makes the implementation\r\n  // details of selecting nodes and creating Zepto collections\r\n  // patchable in plugins.\r\n  $ = function(selector, context){\r\n    return zepto.init(selector, context)\r\n  }\r\n\r\n  function extend(target, source, deep) {\r\n    for (key in source)\r\n      if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {\r\n        if (isPlainObject(source[key]) && !isPlainObject(target[key]))\r\n          target[key] = {}\r\n        if (isArray(source[key]) && !isArray(target[key]))\r\n          target[key] = []\r\n        extend(target[key], source[key], deep)\r\n      }\r\n      else if (source[key] !== undefined) target[key] = source[key]\r\n  }\r\n\r\n  // Copy all but undefined properties from one or more\r\n  // objects to the `target` object.\r\n  $.extend = function(target){\r\n    var deep, args = slice.call(arguments, 1)\r\n    if (typeof target == 'boolean') {\r\n      deep = target\r\n      target = args.shift()\r\n    }\r\n    args.forEach(function(arg){ extend(target, arg, deep) })\r\n    return target\r\n  }\r\n\r\n  // `$.zepto.qsa` is Zepto's CSS selector implementation which\r\n  // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.\r\n  // This method can be overriden in plugins.\r\n  zepto.qsa = function(element, selector){\r\n    var found,\r\n        maybeID = selector[0] == '#',\r\n        maybeClass = !maybeID && selector[0] == '.',\r\n        nameOnly = maybeID || maybeClass ? selector.slice(1) : selector, // Ensure that a 1 char tag name still gets checked\r\n        isSimple = simpleSelectorRE.test(nameOnly)\r\n    return (isDocument(element) && isSimple && maybeID) ?\r\n      ( (found = element.getElementById(nameOnly)) ? [found] : [] ) :\r\n      (element.nodeType !== 1 && element.nodeType !== 9) ? [] :\r\n      slice.call(\r\n        isSimple && !maybeID ?\r\n          maybeClass ? element.getElementsByClassName(nameOnly) : // If it's simple, it could be a class\r\n          element.getElementsByTagName(selector) : // Or a tag\r\n          element.querySelectorAll(selector) // Or it's not simple, and we need to query all\r\n      )\r\n  }\r\n\r\n  function filtered(nodes, selector) {\r\n    return selector == null ? $(nodes) : $(nodes).filter(selector)\r\n  }\r\n\r\n  $.contains = document.documentElement.contains ?\r\n    function(parent, node) {\r\n      return parent !== node && parent.contains(node)\r\n    } :\r\n    function(parent, node) {\r\n      while (node && (node = node.parentNode))\r\n        if (node === parent) return true\r\n      return false\r\n    }\r\n\r\n  function funcArg(context, arg, idx, payload) {\r\n    return isFunction(arg) ? arg.call(context, idx, payload) : arg\r\n  }\r\n\r\n  function setAttribute(node, name, value) {\r\n    value == null ? node.removeAttribute(name) : node.setAttribute(name, value)\r\n  }\r\n\r\n  // access className property while respecting SVGAnimatedString\r\n  function className(node, value){\r\n    var klass = node.className || '',\r\n        svg   = klass && klass.baseVal !== undefined\r\n\r\n    if (value === undefined) return svg ? klass.baseVal : klass\r\n    svg ? (klass.baseVal = value) : (node.className = value)\r\n  }\r\n\r\n  // \"true\"  => true\r\n  // \"false\" => false\r\n  // \"null\"  => null\r\n  // \"42\"    => 42\r\n  // \"42.5\"  => 42.5\r\n  // \"08\"    => \"08\"\r\n  // JSON    => parse if valid\r\n  // String  => self\r\n  function deserializeValue(value) {\r\n    try {\r\n      return value ?\r\n        value == \"true\" ||\r\n        ( value == \"false\" ? false :\r\n          value == \"null\" ? null :\r\n          +value + \"\" == value ? +value :\r\n          /^[\\[\\{]/.test(value) ? $.parseJSON(value) :\r\n          value )\r\n        : value\r\n    } catch(e) {\r\n      return value\r\n    }\r\n  }\r\n\r\n  $.type = type\r\n  $.isFunction = isFunction\r\n  $.isWindow = isWindow\r\n  $.isArray = isArray\r\n  $.isPlainObject = isPlainObject\r\n\r\n  $.isEmptyObject = function(obj) {\r\n    var name\r\n    for (name in obj) return false\r\n    return true\r\n  }\r\n\r\n  $.inArray = function(elem, array, i){\r\n    return emptyArray.indexOf.call(array, elem, i)\r\n  }\r\n\r\n  $.camelCase = camelize\r\n  $.trim = function(str) {\r\n    return str == null ? \"\" : String.prototype.trim.call(str)\r\n  }\r\n\r\n  // plugin compatibility\r\n  $.uuid = 0\r\n  $.support = { }\r\n  $.expr = { }\r\n\r\n  $.map = function(elements, callback){\r\n    var value, values = [], i, key\r\n    if (likeArray(elements))\r\n      for (i = 0; i < elements.length; i++) {\r\n        value = callback(elements[i], i)\r\n        if (value != null) values.push(value)\r\n      }\r\n    else\r\n      for (key in elements) {\r\n        value = callback(elements[key], key)\r\n        if (value != null) values.push(value)\r\n      }\r\n    return flatten(values)\r\n  }\r\n\r\n  $.each = function(elements, callback){\r\n    var i, key\r\n    if (likeArray(elements)) {\r\n      for (i = 0; i < elements.length; i++)\r\n        if (callback.call(elements[i], i, elements[i]) === false) return elements\r\n    } else {\r\n      for (key in elements)\r\n        if (callback.call(elements[key], key, elements[key]) === false) return elements\r\n    }\r\n\r\n    return elements\r\n  }\r\n\r\n  $.grep = function(elements, callback){\r\n    return filter.call(elements, callback)\r\n  }\r\n\r\n  if (window.JSON) $.parseJSON = JSON.parse\r\n\r\n  // Populate the class2type map\r\n  $.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\r\n    class2type[ \"[object \" + name + \"]\" ] = name.toLowerCase()\r\n  })\r\n\r\n  // Define methods that will be available on all\r\n  // Zepto collections\r\n  $.fn = {\r\n    // Because a collection acts like an array\r\n    // copy over these useful array functions.\r\n    forEach: emptyArray.forEach,\r\n    reduce: emptyArray.reduce,\r\n    push: emptyArray.push,\r\n    sort: emptyArray.sort,\r\n    indexOf: emptyArray.indexOf,\r\n    concat: emptyArray.concat,\r\n\r\n    // `map` and `slice` in the jQuery API work differently\r\n    // from their array counterparts\r\n    map: function(fn){\r\n      return $($.map(this, function(el, i){ return fn.call(el, i, el) }))\r\n    },\r\n    slice: function(){\r\n      return $(slice.apply(this, arguments))\r\n    },\r\n\r\n    ready: function(callback){\r\n      // need to check if document.body exists for IE as that browser reports\r\n      // document ready when it hasn't yet created the body element\r\n      if (readyRE.test(document.readyState) && document.body) callback($)\r\n      else document.addEventListener('DOMContentLoaded', function(){ callback($) }, false)\r\n      return this\r\n    },\r\n    get: function(idx){\r\n      return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]\r\n    },\r\n    toArray: function(){ return this.get() },\r\n    size: function(){\r\n      return this.length\r\n    },\r\n    remove: function(){\r\n      return this.each(function(){\r\n        if (this.parentNode != null)\r\n          this.parentNode.removeChild(this)\r\n      })\r\n    },\r\n    each: function(callback){\r\n      emptyArray.every.call(this, function(el, idx){\r\n        return callback.call(el, idx, el) !== false\r\n      })\r\n      return this\r\n    },\r\n    filter: function(selector){\r\n      if (isFunction(selector)) return this.not(this.not(selector))\r\n      return $(filter.call(this, function(element){\r\n        return zepto.matches(element, selector)\r\n      }))\r\n    },\r\n    add: function(selector,context){\r\n      return $(uniq(this.concat($(selector,context))))\r\n    },\r\n    is: function(selector){\r\n      return this.length > 0 && zepto.matches(this[0], selector)\r\n    },\r\n    not: function(selector){\r\n      var nodes=[]\r\n      if (isFunction(selector) && selector.call !== undefined)\r\n        this.each(function(idx){\r\n          if (!selector.call(this,idx)) nodes.push(this)\r\n        })\r\n      else {\r\n        var excludes = typeof selector == 'string' ? this.filter(selector) :\r\n          (likeArray(selector) && isFunction(selector.item)) ? slice.call(selector) : $(selector)\r\n        this.forEach(function(el){\r\n          if (excludes.indexOf(el) < 0) nodes.push(el)\r\n        })\r\n      }\r\n      return $(nodes)\r\n    },\r\n    has: function(selector){\r\n      return this.filter(function(){\r\n        return isObject(selector) ?\r\n          $.contains(this, selector) :\r\n          $(this).find(selector).size()\r\n      })\r\n    },\r\n    eq: function(idx){\r\n      return idx === -1 ? this.slice(idx) : this.slice(idx, + idx + 1)\r\n    },\r\n    first: function(){\r\n      var el = this[0]\r\n      return el && !isObject(el) ? el : $(el)\r\n    },\r\n    last: function(){\r\n      var el = this[this.length - 1]\r\n      return el && !isObject(el) ? el : $(el)\r\n    },\r\n    find: function(selector){\r\n      var result, $this = this\r\n      if (!selector) result = $()\r\n      else if (typeof selector == 'object')\r\n        result = $(selector).filter(function(){\r\n          var node = this\r\n          return emptyArray.some.call($this, function(parent){\r\n            return $.contains(parent, node)\r\n          })\r\n        })\r\n      else if (this.length == 1) result = $(zepto.qsa(this[0], selector))\r\n      else result = this.map(function(){ return zepto.qsa(this, selector) })\r\n      return result\r\n    },\r\n    closest: function(selector, context){\r\n      var node = this[0], collection = false\r\n      if (typeof selector == 'object') collection = $(selector)\r\n      while (node && !(collection ? collection.indexOf(node) >= 0 : zepto.matches(node, selector)))\r\n        node = node !== context && !isDocument(node) && node.parentNode\r\n      return $(node)\r\n    },\r\n    parents: function(selector){\r\n      var ancestors = [], nodes = this\r\n      while (nodes.length > 0)\r\n        nodes = $.map(nodes, function(node){\r\n          if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {\r\n            ancestors.push(node)\r\n            return node\r\n          }\r\n        })\r\n      return filtered(ancestors, selector)\r\n    },\r\n    parent: function(selector){\r\n      return filtered(uniq(this.pluck('parentNode')), selector)\r\n    },\r\n    children: function(selector){\r\n      return filtered(this.map(function(){ return children(this) }), selector)\r\n    },\r\n    contents: function() {\r\n      return this.map(function() { return slice.call(this.childNodes) })\r\n    },\r\n    siblings: function(selector){\r\n      return filtered(this.map(function(i, el){\r\n        return filter.call(children(el.parentNode), function(child){ return child!==el })\r\n      }), selector)\r\n    },\r\n    empty: function(){\r\n      return this.each(function(){ this.innerHTML = '' })\r\n    },\r\n    // `pluck` is borrowed from Prototype.js\r\n    pluck: function(property){\r\n      return $.map(this, function(el){ return el[property] })\r\n    },\r\n    show: function(){\r\n      return this.each(function(){\r\n        this.style.display == \"none\" && (this.style.display = '')\r\n        if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\")\r\n          this.style.display = defaultDisplay(this.nodeName)\r\n      })\r\n    },\r\n    replaceWith: function(newContent){\r\n      return this.before(newContent).remove()\r\n    },\r\n    wrap: function(structure){\r\n      var func = isFunction(structure)\r\n      if (this[0] && !func)\r\n        var dom   = $(structure).get(0),\r\n            clone = dom.parentNode || this.length > 1\r\n\r\n      return this.each(function(index){\r\n        $(this).wrapAll(\r\n          func ? structure.call(this, index) :\r\n            clone ? dom.cloneNode(true) : dom\r\n        )\r\n      })\r\n    },\r\n    wrapAll: function(structure){\r\n      if (this[0]) {\r\n        $(this[0]).before(structure = $(structure))\r\n        var children\r\n        // drill down to the inmost element\r\n        while ((children = structure.children()).length) structure = children.first()\r\n        $(structure).append(this)\r\n      }\r\n      return this\r\n    },\r\n    wrapInner: function(structure){\r\n      var func = isFunction(structure)\r\n      return this.each(function(index){\r\n        var self = $(this), contents = self.contents(),\r\n            dom  = func ? structure.call(this, index) : structure\r\n        contents.length ? contents.wrapAll(dom) : self.append(dom)\r\n      })\r\n    },\r\n    unwrap: function(){\r\n      this.parent().each(function(){\r\n        $(this).replaceWith($(this).children())\r\n      })\r\n      return this\r\n    },\r\n    clone: function(){\r\n      return this.map(function(){ return this.cloneNode(true) })\r\n    },\r\n    hide: function(){\r\n      return this.css(\"display\", \"none\")\r\n    },\r\n    toggle: function(setting){\r\n      return this.each(function(){\r\n        var el = $(this)\r\n        ;(setting === undefined ? el.css(\"display\") == \"none\" : setting) ? el.show() : el.hide()\r\n      })\r\n    },\r\n    prev: function(selector){ return $(this.pluck('previousElementSibling')).filter(selector || '*') },\r\n    next: function(selector){ return $(this.pluck('nextElementSibling')).filter(selector || '*') },\r\n    html: function(html){\r\n      return 0 in arguments ?\r\n        this.each(function(idx){\r\n          var originHtml = this.innerHTML\r\n          $(this).empty().append( funcArg(this, html, idx, originHtml) )\r\n        }) :\r\n        (0 in this ? this[0].innerHTML : null)\r\n    },\r\n    text: function(text){\r\n      return 0 in arguments ?\r\n        this.each(function(idx){\r\n          var newText = funcArg(this, text, idx, this.textContent)\r\n          this.textContent = newText == null ? '' : ''+newText\r\n        }) :\r\n        (0 in this ? this[0].textContent : null)\r\n    },\r\n    attr: function(name, value){\r\n      var result\r\n      return (typeof name == 'string' && !(1 in arguments)) ?\r\n        (!this.length || this[0].nodeType !== 1 ? undefined :\r\n          (!(result = this[0].getAttribute(name)) && name in this[0]) ? this[0][name] : result\r\n        ) :\r\n        this.each(function(idx){\r\n          if (this.nodeType !== 1) return\r\n          if (isObject(name)) for (key in name) setAttribute(this, key, name[key])\r\n          else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)))\r\n        })\r\n    },\r\n    removeAttr: function(name){\r\n      return this.each(function(){ this.nodeType === 1 && name.split(' ').forEach(function(attribute){\r\n        setAttribute(this, attribute)\r\n      }, this)})\r\n    },\r\n    prop: function(name, value){\r\n      name = propMap[name] || name\r\n      return (1 in arguments) ?\r\n        this.each(function(idx){\r\n          this[name] = funcArg(this, value, idx, this[name])\r\n        }) :\r\n        (this[0] && this[0][name])\r\n    },\r\n    data: function(name, value){\r\n      var attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase()\r\n\r\n      var data = (1 in arguments) ?\r\n        this.attr(attrName, value) :\r\n        this.attr(attrName)\r\n\r\n      return data !== null ? deserializeValue(data) : undefined\r\n    },\r\n    val: function(value){\r\n      return 0 in arguments ?\r\n        this.each(function(idx){\r\n          this.value = funcArg(this, value, idx, this.value)\r\n        }) :\r\n        (this[0] && (this[0].multiple ?\r\n           $(this[0]).find('option').filter(function(){ return this.selected }).pluck('value') :\r\n           this[0].value)\r\n        )\r\n    },\r\n    offset: function(coordinates){\r\n      if (coordinates) return this.each(function(index){\r\n        var $this = $(this),\r\n            coords = funcArg(this, coordinates, index, $this.offset()),\r\n            parentOffset = $this.offsetParent().offset(),\r\n            props = {\r\n              top:  coords.top  - parentOffset.top,\r\n              left: coords.left - parentOffset.left\r\n            }\r\n\r\n        if ($this.css('position') == 'static') props['position'] = 'relative'\r\n        $this.css(props)\r\n      })\r\n      if (!this.length) return null\r\n      var obj = this[0].getBoundingClientRect()\r\n      return {\r\n        left: obj.left + window.pageXOffset,\r\n        top: obj.top + window.pageYOffset,\r\n        width: Math.round(obj.width),\r\n        height: Math.round(obj.height)\r\n      }\r\n    },\r\n    css: function(property, value){\r\n      if (arguments.length < 2) {\r\n        var computedStyle, element = this[0]\r\n        if(!element) return\r\n        computedStyle = getComputedStyle(element, '')\r\n        if (typeof property == 'string')\r\n          return element.style[camelize(property)] || computedStyle.getPropertyValue(property)\r\n        else if (isArray(property)) {\r\n          var props = {}\r\n          $.each(property, function(_, prop){\r\n            props[prop] = (element.style[camelize(prop)] || computedStyle.getPropertyValue(prop))\r\n          })\r\n          return props\r\n        }\r\n      }\r\n\r\n      var css = ''\r\n      if (type(property) == 'string') {\r\n        if (!value && value !== 0)\r\n          this.each(function(){ this.style.removeProperty(dasherize(property)) })\r\n        else\r\n          css = dasherize(property) + \":\" + maybeAddPx(property, value)\r\n      } else {\r\n        for (key in property)\r\n          if (!property[key] && property[key] !== 0)\r\n            this.each(function(){ this.style.removeProperty(dasherize(key)) })\r\n          else\r\n            css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';'\r\n      }\r\n\r\n      return this.each(function(){ this.style.cssText += ';' + css })\r\n    },\r\n    index: function(element){\r\n      return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0])\r\n    },\r\n    hasClass: function(name){\r\n      if (!name) return false\r\n      return emptyArray.some.call(this, function(el){\r\n        return this.test(className(el))\r\n      }, classRE(name))\r\n    },\r\n    addClass: function(name){\r\n      if (!name) return this\r\n      return this.each(function(idx){\r\n        if (!('className' in this)) return\r\n        classList = []\r\n        var cls = className(this), newName = funcArg(this, name, idx, cls)\r\n        newName.split(/\\s+/g).forEach(function(klass){\r\n          if (!$(this).hasClass(klass)) classList.push(klass)\r\n        }, this)\r\n        classList.length && className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \"))\r\n      })\r\n    },\r\n    removeClass: function(name){\r\n      return this.each(function(idx){\r\n        if (!('className' in this)) return\r\n        if (name === undefined) return className(this, '')\r\n        classList = className(this)\r\n        funcArg(this, name, idx, classList).split(/\\s+/g).forEach(function(klass){\r\n          classList = classList.replace(classRE(klass), \" \")\r\n        })\r\n        className(this, classList.trim())\r\n      })\r\n    },\r\n    toggleClass: function(name, when){\r\n      if (!name) return this\r\n      return this.each(function(idx){\r\n        var $this = $(this), names = funcArg(this, name, idx, className(this))\r\n        names.split(/\\s+/g).forEach(function(klass){\r\n          (when === undefined ? !$this.hasClass(klass) : when) ?\r\n            $this.addClass(klass) : $this.removeClass(klass)\r\n        })\r\n      })\r\n    },\r\n    scrollTop: function(value){\r\n      if (!this.length) return\r\n      var hasScrollTop = 'scrollTop' in this[0]\r\n      if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset\r\n      return this.each(hasScrollTop ?\r\n        function(){ this.scrollTop = value } :\r\n        function(){ this.scrollTo(this.scrollX, value) })\r\n    },\r\n    scrollLeft: function(value){\r\n      if (!this.length) return\r\n      var hasScrollLeft = 'scrollLeft' in this[0]\r\n      if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset\r\n      return this.each(hasScrollLeft ?\r\n        function(){ this.scrollLeft = value } :\r\n        function(){ this.scrollTo(value, this.scrollY) })\r\n    },\r\n    position: function() {\r\n      if (!this.length) return\r\n\r\n      var elem = this[0],\r\n        // Get *real* offsetParent\r\n        offsetParent = this.offsetParent(),\r\n        // Get correct offsets\r\n        offset       = this.offset(),\r\n        parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? { top: 0, left: 0 } : offsetParent.offset()\r\n\r\n      // Subtract element margins\r\n      // note: when an element has margin: auto the offsetLeft and marginLeft\r\n      // are the same in Safari causing offset.left to incorrectly be 0\r\n      offset.top  -= parseFloat( $(elem).css('margin-top') ) || 0\r\n      offset.left -= parseFloat( $(elem).css('margin-left') ) || 0\r\n\r\n      // Add offsetParent borders\r\n      parentOffset.top  += parseFloat( $(offsetParent[0]).css('border-top-width') ) || 0\r\n      parentOffset.left += parseFloat( $(offsetParent[0]).css('border-left-width') ) || 0\r\n\r\n      // Subtract the two offsets\r\n      return {\r\n        top:  offset.top  - parentOffset.top,\r\n        left: offset.left - parentOffset.left\r\n      }\r\n    },\r\n    offsetParent: function() {\r\n      return this.map(function(){\r\n        var parent = this.offsetParent || document.body\r\n        while (parent && !rootNodeRE.test(parent.nodeName) && $(parent).css(\"position\") == \"static\")\r\n          parent = parent.offsetParent\r\n        return parent\r\n      })\r\n    }\r\n  }\r\n\r\n  // for now\r\n  $.fn.detach = $.fn.remove\r\n\r\n  // Generate the `width` and `height` functions\r\n  ;['width', 'height'].forEach(function(dimension){\r\n    var dimensionProperty =\r\n      dimension.replace(/./, function(m){ return m[0].toUpperCase() })\r\n\r\n    $.fn[dimension] = function(value){\r\n      var offset, el = this[0]\r\n      if (value === undefined) return isWindow(el) ? el['inner' + dimensionProperty] :\r\n        isDocument(el) ? el.documentElement['scroll' + dimensionProperty] :\r\n        (offset = this.offset()) && offset[dimension]\r\n      else return this.each(function(idx){\r\n        el = $(this)\r\n        el.css(dimension, funcArg(this, value, idx, el[dimension]()))\r\n      })\r\n    }\r\n  })\r\n\r\n  function traverseNode(node, fun) {\r\n    fun(node)\r\n    for (var i = 0, len = node.childNodes.length; i < len; i++)\r\n      traverseNode(node.childNodes[i], fun)\r\n  }\r\n\r\n  // Generate the `after`, `prepend`, `before`, `append`,\r\n  // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\r\n  adjacencyOperators.forEach(function(operator, operatorIndex) {\r\n    var inside = operatorIndex % 2 //=> prepend, append\r\n\r\n    $.fn[operator] = function(){\r\n      // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\r\n      var argType, nodes = $.map(arguments, function(arg) {\r\n            argType = type(arg)\r\n            return argType == \"object\" || argType == \"array\" || arg == null ?\r\n              arg : zepto.fragment(arg)\r\n          }),\r\n          parent, copyByClone = this.length > 1\r\n      if (nodes.length < 1) return this\r\n\r\n      return this.each(function(_, target){\r\n        parent = inside ? target : target.parentNode\r\n\r\n        // convert all methods to a \"before\" operation\r\n        target = operatorIndex == 0 ? target.nextSibling :\r\n                 operatorIndex == 1 ? target.firstChild :\r\n                 operatorIndex == 2 ? target :\r\n                 null\r\n\r\n        var parentInDocument = $.contains(document.documentElement, parent)\r\n\r\n        nodes.forEach(function(node){\r\n          if (copyByClone) node = node.cloneNode(true)\r\n          else if (!parent) return $(node).remove()\r\n\r\n          parent.insertBefore(node, target)\r\n          if (parentInDocument) traverseNode(node, function(el){\r\n            if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' &&\r\n               (!el.type || el.type === 'text/javascript') && !el.src)\r\n              window['eval'].call(window, el.innerHTML)\r\n          })\r\n        })\r\n      })\r\n    }\r\n\r\n    // after    => insertAfter\r\n    // prepend  => prependTo\r\n    // before   => insertBefore\r\n    // append   => appendTo\r\n    $.fn[inside ? operator+'To' : 'insert'+(operatorIndex ? 'Before' : 'After')] = function(html){\r\n      $(html)[operator](this)\r\n      return this\r\n    }\r\n  })\r\n\r\n  zepto.Z.prototype = $.fn\r\n\r\n  // Export internal API functions in the `$.zepto` namespace\r\n  zepto.uniq = uniq\r\n  zepto.deserializeValue = deserializeValue\r\n  $.zepto = zepto\r\n\r\n  return $\r\n})()\r\n\r\nwindow.Zepto = Zepto\r\nwindow.$ === undefined && (window.$ = Zepto)\r\n\r\n;(function($){\r\n  var _zid = 1, undefined,\r\n      slice = Array.prototype.slice,\r\n      isFunction = $.isFunction,\r\n      isString = function(obj){ return typeof obj == 'string' },\r\n      handlers = {},\r\n      specialEvents={},\r\n      focusinSupported = 'onfocusin' in window,\r\n      focus = { focus: 'focusin', blur: 'focusout' },\r\n      hover = { mouseenter: 'mouseover', mouseleave: 'mouseout' }\r\n\r\n  specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents'\r\n\r\n  function zid(element) {\r\n    return element._zid || (element._zid = _zid++)\r\n  }\r\n  function findHandlers(element, event, fn, selector) {\r\n    event = parse(event)\r\n    if (event.ns) var matcher = matcherFor(event.ns)\r\n    return (handlers[zid(element)] || []).filter(function(handler) {\r\n      return handler\r\n        && (!event.e  || handler.e == event.e)\r\n        && (!event.ns || matcher.test(handler.ns))\r\n        && (!fn       || zid(handler.fn) === zid(fn))\r\n        && (!selector || handler.sel == selector)\r\n    })\r\n  }\r\n  function parse(event) {\r\n    var parts = ('' + event).split('.')\r\n    return {e: parts[0], ns: parts.slice(1).sort().join(' ')}\r\n  }\r\n  function matcherFor(ns) {\r\n    return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)')\r\n  }\r\n\r\n  function eventCapture(handler, captureSetting) {\r\n    return handler.del &&\r\n      (!focusinSupported && (handler.e in focus)) ||\r\n      !!captureSetting\r\n  }\r\n\r\n  function realEvent(type) {\r\n    return hover[type] || (focusinSupported && focus[type]) || type\r\n  }\r\n\r\n  function add(element, events, fn, data, selector, delegator, capture){\r\n    var id = zid(element), set = (handlers[id] || (handlers[id] = []))\r\n    events.split(/\\s/).forEach(function(event){\r\n      if (event == 'ready') return $(document).ready(fn)\r\n      var handler   = parse(event)\r\n      handler.fn    = fn\r\n      handler.sel   = selector\r\n      // emulate mouseenter, mouseleave\r\n      if (handler.e in hover) fn = function(e){\r\n        var related = e.relatedTarget\r\n        if (!related || (related !== this && !$.contains(this, related)))\r\n          return handler.fn.apply(this, arguments)\r\n      }\r\n      handler.del   = delegator\r\n      var callback  = delegator || fn\r\n      handler.proxy = function(e){\r\n        e = compatible(e)\r\n        if (e.isImmediatePropagationStopped()) return\r\n        e.data = data\r\n        var result = callback.apply(element, e._args == undefined ? [e] : [e].concat(e._args))\r\n        if (result === false) e.preventDefault(), e.stopPropagation()\r\n        return result\r\n      }\r\n      handler.i = set.length\r\n      set.push(handler)\r\n      if ('addEventListener' in element)\r\n        element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\r\n    })\r\n  }\r\n  function remove(element, events, fn, selector, capture){\r\n    var id = zid(element)\r\n    ;(events || '').split(/\\s/).forEach(function(event){\r\n      findHandlers(element, event, fn, selector).forEach(function(handler){\r\n        delete handlers[id][handler.i]\r\n      if ('removeEventListener' in element)\r\n        element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\r\n      })\r\n    })\r\n  }\r\n\r\n  $.event = { add: add, remove: remove }\r\n\r\n  $.proxy = function(fn, context) {\r\n    var args = (2 in arguments) && slice.call(arguments, 2)\r\n    if (isFunction(fn)) {\r\n      var proxyFn = function(){ return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments) }\r\n      proxyFn._zid = zid(fn)\r\n      return proxyFn\r\n    } else if (isString(context)) {\r\n      if (args) {\r\n        args.unshift(fn[context], fn)\r\n        return $.proxy.apply(null, args)\r\n      } else {\r\n        return $.proxy(fn[context], fn)\r\n      }\r\n    } else {\r\n      throw new TypeError(\"expected function\")\r\n    }\r\n  }\r\n\r\n  $.fn.bind = function(event, data, callback){\r\n    return this.on(event, data, callback)\r\n  }\r\n  $.fn.unbind = function(event, callback){\r\n    return this.off(event, callback)\r\n  }\r\n  $.fn.one = function(event, selector, data, callback){\r\n    return this.on(event, selector, data, callback, 1)\r\n  }\r\n\r\n  var returnTrue = function(){return true},\r\n      returnFalse = function(){return false},\r\n      ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$)/,\r\n      eventMethods = {\r\n        preventDefault: 'isDefaultPrevented',\r\n        stopImmediatePropagation: 'isImmediatePropagationStopped',\r\n        stopPropagation: 'isPropagationStopped'\r\n      }\r\n\r\n  function compatible(event, source) {\r\n    if (source || !event.isDefaultPrevented) {\r\n      source || (source = event)\r\n\r\n      $.each(eventMethods, function(name, predicate) {\r\n        var sourceMethod = source[name]\r\n        event[name] = function(){\r\n          this[predicate] = returnTrue\r\n          return sourceMethod && sourceMethod.apply(source, arguments)\r\n        }\r\n        event[predicate] = returnFalse\r\n      })\r\n\r\n      if (source.defaultPrevented !== undefined ? source.defaultPrevented :\r\n          'returnValue' in source ? source.returnValue === false :\r\n          source.getPreventDefault && source.getPreventDefault())\r\n        event.isDefaultPrevented = returnTrue\r\n    }\r\n    return event\r\n  }\r\n\r\n  function createProxy(event) {\r\n    var key, proxy = { originalEvent: event }\r\n    for (key in event)\r\n      if (!ignoreProperties.test(key) && event[key] !== undefined) proxy[key] = event[key]\r\n\r\n    return compatible(proxy, event)\r\n  }\r\n\r\n  $.fn.delegate = function(selector, event, callback){\r\n    return this.on(event, selector, callback)\r\n  }\r\n  $.fn.undelegate = function(selector, event, callback){\r\n    return this.off(event, selector, callback)\r\n  }\r\n\r\n  $.fn.live = function(event, callback){\r\n    $(document.body).delegate(this.selector, event, callback)\r\n    return this\r\n  }\r\n  $.fn.die = function(event, callback){\r\n    $(document.body).undelegate(this.selector, event, callback)\r\n    return this\r\n  }\r\n\r\n  $.fn.on = function(event, selector, data, callback, one){\r\n    var autoRemove, delegator, $this = this\r\n    if (event && !isString(event)) {\r\n      $.each(event, function(type, fn){\r\n        $this.on(type, selector, data, fn, one)\r\n      })\r\n      return $this\r\n    }\r\n\r\n    if (!isString(selector) && !isFunction(callback) && callback !== false)\r\n      callback = data, data = selector, selector = undefined\r\n    if (isFunction(data) || data === false)\r\n      callback = data, data = undefined\r\n\r\n    if (callback === false) callback = returnFalse\r\n\r\n    return $this.each(function(_, element){\r\n      if (one) autoRemove = function(e){\r\n        remove(element, e.type, callback)\r\n        return callback.apply(this, arguments)\r\n      }\r\n\r\n      if (selector) delegator = function(e){\r\n        var evt, match = $(e.target).closest(selector, element).get(0)\r\n        if (match && match !== element) {\r\n          evt = $.extend(createProxy(e), {currentTarget: match, liveFired: element})\r\n          return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)))\r\n        }\r\n      }\r\n\r\n      add(element, event, callback, data, selector, delegator || autoRemove)\r\n    })\r\n  }\r\n  $.fn.off = function(event, selector, callback){\r\n    var $this = this\r\n    if (event && !isString(event)) {\r\n      $.each(event, function(type, fn){\r\n        $this.off(type, selector, fn)\r\n      })\r\n      return $this\r\n    }\r\n\r\n    if (!isString(selector) && !isFunction(callback) && callback !== false)\r\n      callback = selector, selector = undefined\r\n\r\n    if (callback === false) callback = returnFalse\r\n\r\n    return $this.each(function(){\r\n      remove(this, event, callback, selector)\r\n    })\r\n  }\r\n\r\n  $.fn.trigger = function(event, args){\r\n    event = (isString(event) || $.isPlainObject(event)) ? $.Event(event) : compatible(event)\r\n    event._args = args\r\n    return this.each(function(){\r\n      // handle focus(), blur() by calling them directly\r\n      if (event.type in focus && typeof this[event.type] == \"function\") this[event.type]()\r\n      // items in the collection might not be DOM elements\r\n      else if ('dispatchEvent' in this) this.dispatchEvent(event)\r\n      else $(this).triggerHandler(event, args)\r\n    })\r\n  }\r\n\r\n  // triggers event handlers on current element just as if an event occurred,\r\n  // doesn't trigger an actual event, doesn't bubble\r\n  $.fn.triggerHandler = function(event, args){\r\n    var e, result\r\n    this.each(function(i, element){\r\n      e = createProxy(isString(event) ? $.Event(event) : event)\r\n      e._args = args\r\n      e.target = element\r\n      $.each(findHandlers(element, event.type || event), function(i, handler){\r\n        result = handler.proxy(e)\r\n        if (e.isImmediatePropagationStopped()) return false\r\n      })\r\n    })\r\n    return result\r\n  }\r\n\r\n  // shortcut methods for `.bind(event, fn)` for each event type\r\n  ;('focusin focusout focus blur load resize scroll unload click dblclick '+\r\n  'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave '+\r\n  'change select keydown keypress keyup error').split(' ').forEach(function(event) {\r\n    $.fn[event] = function(callback) {\r\n      return (0 in arguments) ?\r\n        this.bind(event, callback) :\r\n        this.trigger(event)\r\n    }\r\n  })\r\n\r\n  $.Event = function(type, props) {\r\n    if (!isString(type)) props = type, type = props.type\r\n    var event = document.createEvent(specialEvents[type] || 'Events'), bubbles = true\r\n    if (props) for (var name in props) (name == 'bubbles') ? (bubbles = !!props[name]) : (event[name] = props[name])\r\n    event.initEvent(type, bubbles, true)\r\n    return compatible(event)\r\n  }\r\n\r\n})(Zepto)\r\n\r\n;(function($){\r\n  var jsonpID = 0,\r\n      document = window.document,\r\n      key,\r\n      name,\r\n      rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\r\n      scriptTypeRE = /^(?:text|application)\\/javascript/i,\r\n      xmlTypeRE = /^(?:text|application)\\/xml/i,\r\n      jsonType = 'application/json',\r\n      htmlType = 'text/html',\r\n      blankRE = /^\\s*$/,\r\n      originAnchor = document.createElement('a')\r\n\r\n  originAnchor.href = window.location.href\r\n\r\n  // trigger a custom event and return false if it was cancelled\r\n  function triggerAndReturn(context, eventName, data) {\r\n    var event = $.Event(eventName)\r\n    $(context).trigger(event, data)\r\n    return !event.isDefaultPrevented()\r\n  }\r\n\r\n  // trigger an Ajax \"global\" event\r\n  function triggerGlobal(settings, context, eventName, data) {\r\n    if (settings.global) return triggerAndReturn(context || document, eventName, data)\r\n  }\r\n\r\n  // Number of active Ajax requests\r\n  $.active = 0\r\n\r\n  function ajaxStart(settings) {\r\n    if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\r\n  }\r\n  function ajaxStop(settings) {\r\n    if (settings.global && !(--$.active)) triggerGlobal(settings, null, 'ajaxStop')\r\n  }\r\n\r\n  // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\r\n  function ajaxBeforeSend(xhr, settings) {\r\n    var context = settings.context\r\n    if (settings.beforeSend.call(context, xhr, settings) === false ||\r\n        triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\r\n      return false\r\n\r\n    triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\r\n  }\r\n  function ajaxSuccess(data, xhr, settings, deferred) {\r\n    var context = settings.context, status = 'success'\r\n    settings.success.call(context, data, status, xhr)\r\n    if (deferred) deferred.resolveWith(context, [data, status, xhr])\r\n    triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\r\n    ajaxComplete(status, xhr, settings)\r\n  }\r\n  // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\r\n  function ajaxError(error, type, xhr, settings, deferred) {\r\n    var context = settings.context\r\n    settings.error.call(context, xhr, type, error)\r\n    if (deferred) deferred.rejectWith(context, [xhr, type, error])\r\n    triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type])\r\n    ajaxComplete(type, xhr, settings)\r\n  }\r\n  // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\r\n  function ajaxComplete(status, xhr, settings) {\r\n    var context = settings.context\r\n    settings.complete.call(context, xhr, status)\r\n    triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\r\n    ajaxStop(settings)\r\n  }\r\n\r\n  // Empty function, used as default callback\r\n  function empty() {}\r\n\r\n  $.ajaxJSONP = function(options, deferred){\r\n    if (!('type' in options)) return $.ajax(options)\r\n\r\n    var _callbackName = options.jsonpCallback,\r\n      callbackName = ($.isFunction(_callbackName) ?\r\n        _callbackName() : _callbackName) || ('jsonp' + (++jsonpID)),\r\n      script = document.createElement('script'),\r\n      originalCallback = window[callbackName],\r\n      responseData,\r\n      abort = function(errorType) {\r\n        $(script).triggerHandler('error', errorType || 'abort')\r\n      },\r\n      xhr = { abort: abort }, abortTimeout\r\n\r\n    if (deferred) deferred.promise(xhr)\r\n\r\n    $(script).on('load error', function(e, errorType){\r\n      clearTimeout(abortTimeout)\r\n      $(script).off().remove()\r\n\r\n      if (e.type == 'error' || !responseData) {\r\n        ajaxError(null, errorType || 'error', xhr, options, deferred)\r\n      } else {\r\n        ajaxSuccess(responseData[0], xhr, options, deferred)\r\n      }\r\n\r\n      window[callbackName] = originalCallback\r\n      if (responseData && $.isFunction(originalCallback))\r\n        originalCallback(responseData[0])\r\n\r\n      originalCallback = responseData = undefined\r\n    })\r\n\r\n    if (ajaxBeforeSend(xhr, options) === false) {\r\n      abort('abort')\r\n      return xhr\r\n    }\r\n\r\n    window[callbackName] = function(){\r\n      responseData = arguments\r\n    }\r\n\r\n    script.src = options.url.replace(/\\?(.+)=\\?/, '?$1=' + callbackName)\r\n    document.head.appendChild(script)\r\n\r\n    if (options.timeout > 0) abortTimeout = setTimeout(function(){\r\n      abort('timeout')\r\n    }, options.timeout)\r\n\r\n    return xhr\r\n  }\r\n\r\n  $.ajaxSettings = {\r\n    // Default type of request\r\n    type: 'GET',\r\n    // Callback that is executed before request\r\n    beforeSend: empty,\r\n    // Callback that is executed if the request succeeds\r\n    success: empty,\r\n    // Callback that is executed the the server drops error\r\n    error: empty,\r\n    // Callback that is executed on request complete (both: error and success)\r\n    complete: empty,\r\n    // The context for the callbacks\r\n    context: null,\r\n    // Whether to trigger \"global\" Ajax events\r\n    global: true,\r\n    // Transport\r\n    xhr: function () {\r\n      return new window.XMLHttpRequest()\r\n    },\r\n    // MIME types mapping\r\n    // IIS returns Javascript as \"application/x-javascript\"\r\n    accepts: {\r\n      script: 'text/javascript, application/javascript, application/x-javascript',\r\n      json:   jsonType,\r\n      xml:    'application/xml, text/xml',\r\n      html:   htmlType,\r\n      text:   'text/plain'\r\n    },\r\n    // Whether the request is to another domain\r\n    crossDomain: false,\r\n    // Default timeout\r\n    timeout: 0,\r\n    // Whether data should be serialized to string\r\n    processData: true,\r\n    // Whether the browser should be allowed to cache GET responses\r\n    cache: true\r\n  }\r\n\r\n  function mimeToDataType(mime) {\r\n    if (mime) mime = mime.split(';', 2)[0]\r\n    return mime && ( mime == htmlType ? 'html' :\r\n      mime == jsonType ? 'json' :\r\n      scriptTypeRE.test(mime) ? 'script' :\r\n      xmlTypeRE.test(mime) && 'xml' ) || 'text'\r\n  }\r\n\r\n  function appendQuery(url, query) {\r\n    if (query == '') return url\r\n    return (url + '&' + query).replace(/[&?]{1,2}/, '?')\r\n  }\r\n\r\n  // serialize payload and append it to the URL for GET requests\r\n  function serializeData(options) {\r\n    if (options.processData && options.data && $.type(options.data) != \"string\")\r\n      options.data = $.param(options.data, options.traditional)\r\n    if (options.data && (!options.type || options.type.toUpperCase() == 'GET'))\r\n      options.url = appendQuery(options.url, options.data), options.data = undefined\r\n  }\r\n\r\n  $.ajax = function(options){\r\n    var settings = $.extend({}, options || {}),\r\n        deferred = $.Deferred && $.Deferred(),\r\n        urlAnchor\r\n    for (key in $.ajaxSettings) if (settings[key] === undefined) settings[key] = $.ajaxSettings[key]\r\n\r\n    ajaxStart(settings)\r\n\r\n    if (!settings.crossDomain) {\r\n      urlAnchor = document.createElement('a')\r\n      urlAnchor.href = settings.url\r\n      urlAnchor.href = urlAnchor.href\r\n      settings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host)\r\n    }\r\n\r\n    if (!settings.url) settings.url = window.location.toString()\r\n    serializeData(settings)\r\n\r\n    var dataType = settings.dataType, hasPlaceholder = /\\?.+=\\?/.test(settings.url)\r\n    if (hasPlaceholder) dataType = 'jsonp'\r\n\r\n    if (settings.cache === false || (\r\n         (!options || options.cache !== true) &&\r\n         ('script' == dataType || 'jsonp' == dataType)\r\n        ))\r\n      settings.url = appendQuery(settings.url, '_=' + Date.now())\r\n\r\n    if ('jsonp' == dataType) {\r\n      if (!hasPlaceholder)\r\n        settings.url = appendQuery(settings.url,\r\n          settings.jsonp ? (settings.jsonp + '=?') : settings.jsonp === false ? '' : 'callback=?')\r\n      return $.ajaxJSONP(settings, deferred)\r\n    }\r\n\r\n    var mime = settings.accepts[dataType],\r\n        headers = { },\r\n        setHeader = function(name, value) { headers[name.toLowerCase()] = [name, value] },\r\n        protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\r\n        xhr = settings.xhr(),\r\n        nativeSetHeader = xhr.setRequestHeader,\r\n        abortTimeout\r\n\r\n    if (deferred) deferred.promise(xhr)\r\n\r\n    if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest')\r\n    setHeader('Accept', mime || '*/*')\r\n    if (mime = settings.mimeType || mime) {\r\n      if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\r\n      xhr.overrideMimeType && xhr.overrideMimeType(mime)\r\n    }\r\n    if (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET'))\r\n      setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded')\r\n\r\n    if (settings.headers) for (name in settings.headers) setHeader(name, settings.headers[name])\r\n    xhr.setRequestHeader = setHeader\r\n\r\n    xhr.onreadystatechange = function(){\r\n      if (xhr.readyState == 4) {\r\n        xhr.onreadystatechange = empty\r\n        clearTimeout(abortTimeout)\r\n        var result, error = false\r\n        if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\r\n          dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'))\r\n          result = xhr.responseText\r\n\r\n          try {\r\n            // http://perfectionkills.com/global-eval-what-are-the-options/\r\n            if (dataType == 'script')    (1,eval)(result)\r\n            else if (dataType == 'xml')  result = xhr.responseXML\r\n            else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result)\r\n          } catch (e) { error = e }\r\n\r\n          if (error) ajaxError(error, 'parsererror', xhr, settings, deferred)\r\n          else ajaxSuccess(result, xhr, settings, deferred)\r\n        } else {\r\n          ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (ajaxBeforeSend(xhr, settings) === false) {\r\n      xhr.abort()\r\n      ajaxError(null, 'abort', xhr, settings, deferred)\r\n      return xhr\r\n    }\r\n\r\n    if (settings.xhrFields) for (name in settings.xhrFields) xhr[name] = settings.xhrFields[name]\r\n\r\n    var async = 'async' in settings ? settings.async : true\r\n    xhr.open(settings.type, settings.url, async, settings.username, settings.password)\r\n\r\n    for (name in headers) nativeSetHeader.apply(xhr, headers[name])\r\n\r\n    if (settings.timeout > 0) abortTimeout = setTimeout(function(){\r\n        xhr.onreadystatechange = empty\r\n        xhr.abort()\r\n        ajaxError(null, 'timeout', xhr, settings, deferred)\r\n      }, settings.timeout)\r\n\r\n    // avoid sending empty string (#319)\r\n    xhr.send(settings.data ? settings.data : null)\r\n    return xhr\r\n  }\r\n\r\n  // handle optional data/success arguments\r\n  function parseArguments(url, data, success, dataType) {\r\n    if ($.isFunction(data)) dataType = success, success = data, data = undefined\r\n    if (!$.isFunction(success)) dataType = success, success = undefined\r\n    return {\r\n      url: url\r\n    , data: data\r\n    , success: success\r\n    , dataType: dataType\r\n    }\r\n  }\r\n\r\n  $.get = function(/* url, data, success, dataType */){\r\n    return $.ajax(parseArguments.apply(null, arguments))\r\n  }\r\n\r\n  $.post = function(/* url, data, success, dataType */){\r\n    var options = parseArguments.apply(null, arguments)\r\n    options.type = 'POST'\r\n    return $.ajax(options)\r\n  }\r\n\r\n  $.getJSON = function(/* url, data, success */){\r\n    var options = parseArguments.apply(null, arguments)\r\n    options.dataType = 'json'\r\n    return $.ajax(options)\r\n  }\r\n\r\n  $.fn.load = function(url, data, success){\r\n    if (!this.length) return this\r\n    var self = this, parts = url.split(/\\s/), selector,\r\n        options = parseArguments(url, data, success),\r\n        callback = options.success\r\n    if (parts.length > 1) options.url = parts[0], selector = parts[1]\r\n    options.success = function(response){\r\n      self.html(selector ?\r\n        $('<div>').html(response.replace(rscript, \"\")).find(selector)\r\n        : response)\r\n      callback && callback.apply(self, arguments)\r\n    }\r\n    $.ajax(options)\r\n    return this\r\n  }\r\n\r\n  var escape = encodeURIComponent\r\n\r\n  function serialize(params, obj, traditional, scope){\r\n    var type, array = $.isArray(obj), hash = $.isPlainObject(obj)\r\n    $.each(obj, function(key, value) {\r\n      type = $.type(value)\r\n      if (scope) key = traditional ? scope :\r\n        scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']'\r\n      // handle data in serializeArray() format\r\n      if (!scope && array) params.add(value.name, value.value)\r\n      // recurse into nested objects\r\n      else if (type == \"array\" || (!traditional && type == \"object\"))\r\n        serialize(params, value, traditional, key)\r\n      else params.add(key, value)\r\n    })\r\n  }\r\n\r\n  $.param = function(obj, traditional){\r\n    var params = []\r\n    params.add = function(key, value) {\r\n      if ($.isFunction(value)) value = value()\r\n      if (value == null) value = \"\"\r\n      this.push(escape(key) + '=' + escape(value))\r\n    }\r\n    serialize(params, obj, traditional)\r\n    return params.join('&').replace(/%20/g, '+')\r\n  }\r\n})(Zepto)\r\n\r\n;(function($){\r\n  $.fn.serializeArray = function() {\r\n    var name, type, result = [],\r\n      add = function(value) {\r\n        if (value.forEach) return value.forEach(add)\r\n        result.push({ name: name, value: value })\r\n      }\r\n    if (this[0]) $.each(this[0].elements, function(_, field){\r\n      type = field.type, name = field.name\r\n      if (name && field.nodeName.toLowerCase() != 'fieldset' &&\r\n        !field.disabled && type != 'submit' && type != 'reset' && type != 'button' && type != 'file' &&\r\n        ((type != 'radio' && type != 'checkbox') || field.checked))\r\n          add($(field).val())\r\n    })\r\n    return result\r\n  }\r\n\r\n  $.fn.serialize = function(){\r\n    var result = []\r\n    this.serializeArray().forEach(function(elm){\r\n      result.push(encodeURIComponent(elm.name) + '=' + encodeURIComponent(elm.value))\r\n    })\r\n    return result.join('&')\r\n  }\r\n\r\n  $.fn.submit = function(callback) {\r\n    if (0 in arguments) this.bind('submit', callback)\r\n    else if (this.length) {\r\n      var event = $.Event('submit')\r\n      this.eq(0).trigger(event)\r\n      if (!event.isDefaultPrevented()) this.get(0).submit()\r\n    }\r\n    return this\r\n  }\r\n\r\n})(Zepto)\r\n\r\n;(function($){\r\n  // __proto__ doesn't exist on IE<11, so redefine\r\n  // the Z function to use object extension instead\r\n  if (!('__proto__' in {})) {\r\n    $.extend($.zepto, {\r\n      Z: function(dom, selector){\r\n        dom = dom || []\r\n        $.extend(dom, $.fn)\r\n        dom.selector = selector || ''\r\n        dom.__Z = true\r\n        return dom\r\n      },\r\n      // this is a kludge but works\r\n      isZ: function(object){\r\n        return $.type(object) === 'array' && '__Z' in object\r\n      }\r\n    })\r\n  }\r\n\r\n  // getComputedStyle shouldn't freak out when called\r\n  // without a valid element as argument\r\n  try {\r\n    getComputedStyle(undefined)\r\n  } catch(e) {\r\n    var nativeGetComputedStyle = getComputedStyle;\r\n    window.getComputedStyle = function(element){\r\n      try {\r\n        return nativeGetComputedStyle(element)\r\n      } catch(e) {\r\n        return null\r\n      }\r\n    }\r\n  }\r\n})(Zepto)",
    "vendor/require/require.js": "/** vim: et:ts=4:sw=4:sts=4\r\n * @license RequireJS 2.1.17 Copyright (c) 2010-2015, The Dojo Foundation All Rights Reserved.\r\n * Available via the MIT or new BSD license.\r\n * see: http://github.com/jrburke/requirejs for details\r\n */\r\n//Not using strict: uneven strict support in browsers, #392, and causes\r\n//problems with requirejs.exec()/transpiler plugins that may not be strict.\r\n/*jslint regexp: true, nomen: true, sloppy: true */\r\n/*global window, navigator, document, importScripts, setTimeout, opera */\r\n\r\nvar requirejs, require, define;\r\n(function (global) {\r\n    var req, s, head, baseElement, dataMain, src,\r\n        interactiveScript, currentlyAddingScript, mainScript, subPath,\r\n        version = '2.1.17',\r\n        commentRegExp = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg,\r\n        cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^'\"\\s]+)[\"']\\s*\\)/g,\r\n        jsSuffixRegExp = /\\.js$/,\r\n        currDirRegExp = /^\\.\\//,\r\n        op = Object.prototype,\r\n        ostring = op.toString,\r\n        hasOwn = op.hasOwnProperty,\r\n        ap = Array.prototype,\r\n        apsp = ap.splice,\r\n        isBrowser = !!(typeof window !== 'undefined' && typeof navigator !== 'undefined' && window.document),\r\n        isWebWorker = !isBrowser && typeof importScripts !== 'undefined',\r\n        //PS3 indicates loaded and complete, but need to wait for complete\r\n        //specifically. Sequence is 'loading', 'loaded', execution,\r\n        // then 'complete'. The UA check is unfortunate, but not sure how\r\n        //to feature test w/o causing perf issues.\r\n        readyRegExp = isBrowser && navigator.platform === 'PLAYSTATION 3' ?\r\n                      /^complete$/ : /^(complete|loaded)$/,\r\n        defContextName = '_',\r\n        //Oh the tragedy, detecting opera. See the usage of isOpera for reason.\r\n        isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]',\r\n        contexts = {},\r\n        cfg = {},\r\n        globalDefQueue = [],\r\n        useInteractive = false;\r\n\r\n    function isFunction(it) {\r\n        return ostring.call(it) === '[object Function]';\r\n    }\r\n\r\n    function isArray(it) {\r\n        return ostring.call(it) === '[object Array]';\r\n    }\r\n\r\n    /**\r\n     * Helper function for iterating over an array. If the func returns\r\n     * a true value, it will break out of the loop.\r\n     */\r\n    function each(ary, func) {\r\n        if (ary) {\r\n            var i;\r\n            for (i = 0; i < ary.length; i += 1) {\r\n                if (ary[i] && func(ary[i], i, ary)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Helper function for iterating over an array backwards. If the func\r\n     * returns a true value, it will break out of the loop.\r\n     */\r\n    function eachReverse(ary, func) {\r\n        if (ary) {\r\n            var i;\r\n            for (i = ary.length - 1; i > -1; i -= 1) {\r\n                if (ary[i] && func(ary[i], i, ary)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function hasProp(obj, prop) {\r\n        return hasOwn.call(obj, prop);\r\n    }\r\n\r\n    function getOwn(obj, prop) {\r\n        return hasProp(obj, prop) && obj[prop];\r\n    }\r\n\r\n    /**\r\n     * Cycles over properties in an object and calls a function for each\r\n     * property value. If the function returns a truthy value, then the\r\n     * iteration is stopped.\r\n     */\r\n    function eachProp(obj, func) {\r\n        var prop;\r\n        for (prop in obj) {\r\n            if (hasProp(obj, prop)) {\r\n                if (func(obj[prop], prop)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Simple function to mix in properties from source into target,\r\n     * but only if target does not already have a property of the same name.\r\n     */\r\n    function mixin(target, source, force, deepStringMixin) {\r\n        if (source) {\r\n            eachProp(source, function (value, prop) {\r\n                if (force || !hasProp(target, prop)) {\r\n                    if (deepStringMixin && typeof value === 'object' && value &&\r\n                        !isArray(value) && !isFunction(value) &&\r\n                        !(value instanceof RegExp)) {\r\n\r\n                        if (!target[prop]) {\r\n                            target[prop] = {};\r\n                        }\r\n                        mixin(target[prop], value, force, deepStringMixin);\r\n                    } else {\r\n                        target[prop] = value;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return target;\r\n    }\r\n\r\n    //Similar to Function.prototype.bind, but the 'this' object is specified\r\n    //first, since it is easier to read/figure out what 'this' will be.\r\n    function bind(obj, fn) {\r\n        return function () {\r\n            return fn.apply(obj, arguments);\r\n        };\r\n    }\r\n\r\n    function scripts() {\r\n        return document.getElementsByTagName('script');\r\n    }\r\n\r\n    function defaultOnError(err) {\r\n        throw err;\r\n    }\r\n\r\n    //Allow getting a global that is expressed in\r\n    //dot notation, like 'a.b.c'.\r\n    function getGlobal(value) {\r\n        if (!value) {\r\n            return value;\r\n        }\r\n        var g = global;\r\n        each(value.split('.'), function (part) {\r\n            g = g[part];\r\n        });\r\n        return g;\r\n    }\r\n\r\n    /**\r\n     * Constructs an error with a pointer to an URL with more information.\r\n     * @param {String} id the error ID that maps to an ID on a web page.\r\n     * @param {String} message human readable error.\r\n     * @param {Error} [err] the original error, if there is one.\r\n     *\r\n     * @returns {Error}\r\n     */\r\n    function makeError(id, msg, err, requireModules) {\r\n        var e = new Error(msg + '\\nhttp://requirejs.org/docs/errors.html#' + id);\r\n        e.requireType = id;\r\n        e.requireModules = requireModules;\r\n        if (err) {\r\n            e.originalError = err;\r\n        }\r\n        return e;\r\n    }\r\n\r\n    if (typeof define !== 'undefined') {\r\n        //If a define is already in play via another AMD loader,\r\n        //do not overwrite.\r\n        return;\r\n    }\r\n\r\n    if (typeof requirejs !== 'undefined') {\r\n        if (isFunction(requirejs)) {\r\n            //Do not overwrite an existing requirejs instance.\r\n            return;\r\n        }\r\n        cfg = requirejs;\r\n        requirejs = undefined;\r\n    }\r\n\r\n    //Allow for a require config object\r\n    if (typeof require !== 'undefined' && !isFunction(require)) {\r\n        //assume it is a config object.\r\n        cfg = require;\r\n        require = undefined;\r\n    }\r\n\r\n    function newContext(contextName) {\r\n        var inCheckLoaded, Module, context, handlers,\r\n            checkLoadedTimeoutId,\r\n            config = {\r\n                //Defaults. Do not set a default for map\r\n                //config to speed up normalize(), which\r\n                //will run faster if there is no default.\r\n                waitSeconds: 7,\r\n                baseUrl: './',\r\n                paths: {},\r\n                bundles: {},\r\n                pkgs: {},\r\n                shim: {},\r\n                config: {}\r\n            },\r\n            registry = {},\r\n            //registry of just enabled modules, to speed\r\n            //cycle breaking code when lots of modules\r\n            //are registered, but not activated.\r\n            enabledRegistry = {},\r\n            undefEvents = {},\r\n            defQueue = [],\r\n            defined = {},\r\n            urlFetched = {},\r\n            bundlesMap = {},\r\n            requireCounter = 1,\r\n            unnormalizedCounter = 1;\r\n\r\n        /**\r\n         * Trims the . and .. from an array of path segments.\r\n         * It will keep a leading path segment if a .. will become\r\n         * the first path segment, to help with module name lookups,\r\n         * which act like paths, but can be remapped. But the end result,\r\n         * all paths that use this function should look normalized.\r\n         * NOTE: this method MODIFIES the input array.\r\n         * @param {Array} ary the array of path segments.\r\n         */\r\n        function trimDots(ary) {\r\n            var i, part;\r\n            for (i = 0; i < ary.length; i++) {\r\n                part = ary[i];\r\n                if (part === '.') {\r\n                    ary.splice(i, 1);\r\n                    i -= 1;\r\n                } else if (part === '..') {\r\n                    // If at the start, or previous value is still ..,\r\n                    // keep them so that when converted to a path it may\r\n                    // still work when converted to a path, even though\r\n                    // as an ID it is less than ideal. In larger point\r\n                    // releases, may be better to just kick out an error.\r\n                    if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {\r\n                        continue;\r\n                    } else if (i > 0) {\r\n                        ary.splice(i - 1, 2);\r\n                        i -= 2;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Given a relative module name, like ./something, normalize it to\r\n         * a real name that can be mapped to a path.\r\n         * @param {String} name the relative name\r\n         * @param {String} baseName a real name that the name arg is relative\r\n         * to.\r\n         * @param {Boolean} applyMap apply the map config to the value. Should\r\n         * only be done if this normalization is for a dependency ID.\r\n         * @returns {String} normalized name\r\n         */\r\n        function normalize(name, baseName, applyMap) {\r\n            var pkgMain, mapValue, nameParts, i, j, nameSegment, lastIndex,\r\n                foundMap, foundI, foundStarMap, starI, normalizedBaseParts,\r\n                baseParts = (baseName && baseName.split('/')),\r\n                map = config.map,\r\n                starMap = map && map['*'];\r\n\r\n            //Adjust any relative paths.\r\n            if (name) {\r\n                name = name.split('/');\r\n                lastIndex = name.length - 1;\r\n\r\n                // If wanting node ID compatibility, strip .js from end\r\n                // of IDs. Have to do this here, and not in nameToUrl\r\n                // because node allows either .js or non .js to map\r\n                // to same file.\r\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\r\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\r\n                }\r\n\r\n                // Starts with a '.' so need the baseName\r\n                if (name[0].charAt(0) === '.' && baseParts) {\r\n                    //Convert baseName to array, and lop off the last part,\r\n                    //so that . matches that 'directory' and not name of the baseName's\r\n                    //module. For instance, baseName of 'one/two/three', maps to\r\n                    //'one/two/three.js', but we want the directory, 'one/two' for\r\n                    //this normalization.\r\n                    normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\r\n                    name = normalizedBaseParts.concat(name);\r\n                }\r\n\r\n                trimDots(name);\r\n                name = name.join('/');\r\n            }\r\n\r\n            //Apply map config if available.\r\n            if (applyMap && map && (baseParts || starMap)) {\r\n                nameParts = name.split('/');\r\n\r\n                outerLoop: for (i = nameParts.length; i > 0; i -= 1) {\r\n                    nameSegment = nameParts.slice(0, i).join('/');\r\n\r\n                    if (baseParts) {\r\n                        //Find the longest baseName segment match in the config.\r\n                        //So, do joins on the biggest to smallest lengths of baseParts.\r\n                        for (j = baseParts.length; j > 0; j -= 1) {\r\n                            mapValue = getOwn(map, baseParts.slice(0, j).join('/'));\r\n\r\n                            //baseName segment has config, find if it has one for\r\n                            //this name.\r\n                            if (mapValue) {\r\n                                mapValue = getOwn(mapValue, nameSegment);\r\n                                if (mapValue) {\r\n                                    //Match, update name to the new value.\r\n                                    foundMap = mapValue;\r\n                                    foundI = i;\r\n                                    break outerLoop;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    //Check for a star map match, but just hold on to it,\r\n                    //if there is a shorter segment match later in a matching\r\n                    //config, then favor over this star map.\r\n                    if (!foundStarMap && starMap && getOwn(starMap, nameSegment)) {\r\n                        foundStarMap = getOwn(starMap, nameSegment);\r\n                        starI = i;\r\n                    }\r\n                }\r\n\r\n                if (!foundMap && foundStarMap) {\r\n                    foundMap = foundStarMap;\r\n                    foundI = starI;\r\n                }\r\n\r\n                if (foundMap) {\r\n                    nameParts.splice(0, foundI, foundMap);\r\n                    name = nameParts.join('/');\r\n                }\r\n            }\r\n\r\n            // If the name points to a package's name, use\r\n            // the package main instead.\r\n            pkgMain = getOwn(config.pkgs, name);\r\n\r\n            return pkgMain ? pkgMain : name;\r\n        }\r\n\r\n        function removeScript(name) {\r\n            if (isBrowser) {\r\n                each(scripts(), function (scriptNode) {\r\n                    if (scriptNode.getAttribute('data-requiremodule') === name &&\r\n                            scriptNode.getAttribute('data-requirecontext') === context.contextName) {\r\n                        scriptNode.parentNode.removeChild(scriptNode);\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        function hasPathFallback(id) {\r\n            var pathConfig = getOwn(config.paths, id);\r\n            if (pathConfig && isArray(pathConfig) && pathConfig.length > 1) {\r\n                //Pop off the first array value, since it failed, and\r\n                //retry\r\n                pathConfig.shift();\r\n                context.require.undef(id);\r\n\r\n                //Custom require that does not do map translation, since\r\n                //ID is \"absolute\", already mapped/resolved.\r\n                context.makeRequire(null, {\r\n                    skipMap: true\r\n                })([id]);\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        //Turns a plugin!resource to [plugin, resource]\r\n        //with the plugin being undefined if the name\r\n        //did not have a plugin prefix.\r\n        function splitPrefix(name) {\r\n            var prefix,\r\n                index = name ? name.indexOf('!') : -1;\r\n            if (index > -1) {\r\n                prefix = name.substring(0, index);\r\n                name = name.substring(index + 1, name.length);\r\n            }\r\n            return [prefix, name];\r\n        }\r\n\r\n        /**\r\n         * Creates a module mapping that includes plugin prefix, module\r\n         * name, and path. If parentModuleMap is provided it will\r\n         * also normalize the name via require.normalize()\r\n         *\r\n         * @param {String} name the module name\r\n         * @param {String} [parentModuleMap] parent module map\r\n         * for the module name, used to resolve relative names.\r\n         * @param {Boolean} isNormalized: is the ID already normalized.\r\n         * This is true if this call is done for a define() module ID.\r\n         * @param {Boolean} applyMap: apply the map config to the ID.\r\n         * Should only be true if this map is for a dependency.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        function makeModuleMap(name, parentModuleMap, isNormalized, applyMap) {\r\n            var url, pluginModule, suffix, nameParts,\r\n                prefix = null,\r\n                parentName = parentModuleMap ? parentModuleMap.name : null,\r\n                originalName = name,\r\n                isDefine = true,\r\n                normalizedName = '';\r\n\r\n            //If no name, then it means it is a require call, generate an\r\n            //internal name.\r\n            if (!name) {\r\n                isDefine = false;\r\n                name = '_@r' + (requireCounter += 1);\r\n            }\r\n\r\n            nameParts = splitPrefix(name);\r\n            prefix = nameParts[0];\r\n            name = nameParts[1];\r\n\r\n            if (prefix) {\r\n                prefix = normalize(prefix, parentName, applyMap);\r\n                pluginModule = getOwn(defined, prefix);\r\n            }\r\n\r\n            //Account for relative paths if there is a base name.\r\n            if (name) {\r\n                if (prefix) {\r\n                    if (pluginModule && pluginModule.normalize) {\r\n                        //Plugin is loaded, use its normalize method.\r\n                        normalizedName = pluginModule.normalize(name, function (name) {\r\n                            return normalize(name, parentName, applyMap);\r\n                        });\r\n                    } else {\r\n                        // If nested plugin references, then do not try to\r\n                        // normalize, as it will not normalize correctly. This\r\n                        // places a restriction on resourceIds, and the longer\r\n                        // term solution is not to normalize until plugins are\r\n                        // loaded and all normalizations to allow for async\r\n                        // loading of a loader plugin. But for now, fixes the\r\n                        // common uses. Details in #1131\r\n                        normalizedName = name.indexOf('!') === -1 ?\r\n                                         normalize(name, parentName, applyMap) :\r\n                                         name;\r\n                    }\r\n                } else {\r\n                    //A regular module.\r\n                    normalizedName = normalize(name, parentName, applyMap);\r\n\r\n                    //Normalized name may be a plugin ID due to map config\r\n                    //application in normalize. The map config values must\r\n                    //already be normalized, so do not need to redo that part.\r\n                    nameParts = splitPrefix(normalizedName);\r\n                    prefix = nameParts[0];\r\n                    normalizedName = nameParts[1];\r\n                    isNormalized = true;\r\n\r\n                    url = context.nameToUrl(normalizedName);\r\n                }\r\n            }\r\n\r\n            //If the id is a plugin id that cannot be determined if it needs\r\n            //normalization, stamp it with a unique ID so two matching relative\r\n            //ids that may conflict can be separate.\r\n            suffix = prefix && !pluginModule && !isNormalized ?\r\n                     '_unnormalized' + (unnormalizedCounter += 1) :\r\n                     '';\r\n\r\n            return {\r\n                prefix: prefix,\r\n                name: normalizedName,\r\n                parentMap: parentModuleMap,\r\n                unnormalized: !!suffix,\r\n                url: url,\r\n                originalName: originalName,\r\n                isDefine: isDefine,\r\n                id: (prefix ?\r\n                        prefix + '!' + normalizedName :\r\n                        normalizedName) + suffix\r\n            };\r\n        }\r\n\r\n        function getModule(depMap) {\r\n            var id = depMap.id,\r\n                mod = getOwn(registry, id);\r\n\r\n            if (!mod) {\r\n                mod = registry[id] = new context.Module(depMap);\r\n            }\r\n\r\n            return mod;\r\n        }\r\n\r\n        function on(depMap, name, fn) {\r\n            var id = depMap.id,\r\n                mod = getOwn(registry, id);\r\n\r\n            if (hasProp(defined, id) &&\r\n                    (!mod || mod.defineEmitComplete)) {\r\n                if (name === 'defined') {\r\n                    fn(defined[id]);\r\n                }\r\n            } else {\r\n                mod = getModule(depMap);\r\n                if (mod.error && name === 'error') {\r\n                    fn(mod.error);\r\n                } else {\r\n                    mod.on(name, fn);\r\n                }\r\n            }\r\n        }\r\n\r\n        function onError(err, errback) {\r\n            var ids = err.requireModules,\r\n                notified = false;\r\n\r\n            if (errback) {\r\n                errback(err);\r\n            } else {\r\n                each(ids, function (id) {\r\n                    var mod = getOwn(registry, id);\r\n                    if (mod) {\r\n                        //Set error on module, so it skips timeout checks.\r\n                        mod.error = err;\r\n                        if (mod.events.error) {\r\n                            notified = true;\r\n                            mod.emit('error', err);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (!notified) {\r\n                    req.onError(err);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Internal method to transfer globalQueue items to this context's\r\n         * defQueue.\r\n         */\r\n        function takeGlobalQueue() {\r\n            //Push all the globalDefQueue items into the context's defQueue\r\n            if (globalDefQueue.length) {\r\n                //Array splice in the values since the context code has a\r\n                //local var ref to defQueue, so cannot just reassign the one\r\n                //on context.\r\n                apsp.apply(defQueue,\r\n                           [defQueue.length, 0].concat(globalDefQueue));\r\n                globalDefQueue = [];\r\n            }\r\n        }\r\n\r\n        handlers = {\r\n            'require': function (mod) {\r\n                if (mod.require) {\r\n                    return mod.require;\r\n                } else {\r\n                    return (mod.require = context.makeRequire(mod.map));\r\n                }\r\n            },\r\n            'exports': function (mod) {\r\n                mod.usingExports = true;\r\n                if (mod.map.isDefine) {\r\n                    if (mod.exports) {\r\n                        return (defined[mod.map.id] = mod.exports);\r\n                    } else {\r\n                        return (mod.exports = defined[mod.map.id] = {});\r\n                    }\r\n                }\r\n            },\r\n            'module': function (mod) {\r\n                if (mod.module) {\r\n                    return mod.module;\r\n                } else {\r\n                    return (mod.module = {\r\n                        id: mod.map.id,\r\n                        uri: mod.map.url,\r\n                        config: function () {\r\n                            return  getOwn(config.config, mod.map.id) || {};\r\n                        },\r\n                        exports: mod.exports || (mod.exports = {})\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        function cleanRegistry(id) {\r\n            //Clean up machinery used for waiting modules.\r\n            delete registry[id];\r\n            delete enabledRegistry[id];\r\n        }\r\n\r\n        function breakCycle(mod, traced, processed) {\r\n            var id = mod.map.id;\r\n\r\n            if (mod.error) {\r\n                mod.emit('error', mod.error);\r\n            } else {\r\n                traced[id] = true;\r\n                each(mod.depMaps, function (depMap, i) {\r\n                    var depId = depMap.id,\r\n                        dep = getOwn(registry, depId);\r\n\r\n                    //Only force things that have not completed\r\n                    //being defined, so still in the registry,\r\n                    //and only if it has not been matched up\r\n                    //in the module already.\r\n                    if (dep && !mod.depMatched[i] && !processed[depId]) {\r\n                        if (getOwn(traced, depId)) {\r\n                            mod.defineDep(i, defined[depId]);\r\n                            mod.check(); //pass false?\r\n                        } else {\r\n                            breakCycle(dep, traced, processed);\r\n                        }\r\n                    }\r\n                });\r\n                processed[id] = true;\r\n            }\r\n        }\r\n\r\n        function checkLoaded() {\r\n            var err, usingPathFallback,\r\n                waitInterval = config.waitSeconds * 1000,\r\n                //It is possible to disable the wait interval by using waitSeconds of 0.\r\n                expired = waitInterval && (context.startTime + waitInterval) < new Date().getTime(),\r\n                noLoads = [],\r\n                reqCalls = [],\r\n                stillLoading = false,\r\n                needCycleCheck = true;\r\n\r\n            //Do not bother if this call was a result of a cycle break.\r\n            if (inCheckLoaded) {\r\n                return;\r\n            }\r\n\r\n            inCheckLoaded = true;\r\n\r\n            //Figure out the state of all the modules.\r\n            eachProp(enabledRegistry, function (mod) {\r\n                var map = mod.map,\r\n                    modId = map.id;\r\n\r\n                //Skip things that are not enabled or in error state.\r\n                if (!mod.enabled) {\r\n                    return;\r\n                }\r\n\r\n                if (!map.isDefine) {\r\n                    reqCalls.push(mod);\r\n                }\r\n\r\n                if (!mod.error) {\r\n                    //If the module should be executed, and it has not\r\n                    //been inited and time is up, remember it.\r\n                    if (!mod.inited && expired) {\r\n                        if (hasPathFallback(modId)) {\r\n                            usingPathFallback = true;\r\n                            stillLoading = true;\r\n                        } else {\r\n                            noLoads.push(modId);\r\n                            removeScript(modId);\r\n                        }\r\n                    } else if (!mod.inited && mod.fetched && map.isDefine) {\r\n                        stillLoading = true;\r\n                        if (!map.prefix) {\r\n                            //No reason to keep looking for unfinished\r\n                            //loading. If the only stillLoading is a\r\n                            //plugin resource though, keep going,\r\n                            //because it may be that a plugin resource\r\n                            //is waiting on a non-plugin cycle.\r\n                            return (needCycleCheck = false);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (expired && noLoads.length) {\r\n                //If wait time expired, throw error of unloaded modules.\r\n                err = makeError('timeout', 'Load timeout for modules: ' + noLoads, null, noLoads);\r\n                err.contextName = context.contextName;\r\n                return onError(err);\r\n            }\r\n\r\n            //Not expired, check for a cycle.\r\n            if (needCycleCheck) {\r\n                each(reqCalls, function (mod) {\r\n                    breakCycle(mod, {}, {});\r\n                });\r\n            }\r\n\r\n            //If still waiting on loads, and the waiting load is something\r\n            //other than a plugin resource, or there are still outstanding\r\n            //scripts, then just try back later.\r\n            if ((!expired || usingPathFallback) && stillLoading) {\r\n                //Something is still waiting to load. Wait for it, but only\r\n                //if a timeout is not already in effect.\r\n                if ((isBrowser || isWebWorker) && !checkLoadedTimeoutId) {\r\n                    checkLoadedTimeoutId = setTimeout(function () {\r\n                        checkLoadedTimeoutId = 0;\r\n                        checkLoaded();\r\n                    }, 50);\r\n                }\r\n            }\r\n\r\n            inCheckLoaded = false;\r\n        }\r\n\r\n        Module = function (map) {\r\n            this.events = getOwn(undefEvents, map.id) || {};\r\n            this.map = map;\r\n            this.shim = getOwn(config.shim, map.id);\r\n            this.depExports = [];\r\n            this.depMaps = [];\r\n            this.depMatched = [];\r\n            this.pluginMaps = {};\r\n            this.depCount = 0;\r\n\r\n            /* this.exports this.factory\r\n               this.depMaps = [],\r\n               this.enabled, this.fetched\r\n            */\r\n        };\r\n\r\n        Module.prototype = {\r\n            init: function (depMaps, factory, errback, options) {\r\n                options = options || {};\r\n\r\n                //Do not do more inits if already done. Can happen if there\r\n                //are multiple define calls for the same module. That is not\r\n                //a normal, common case, but it is also not unexpected.\r\n                if (this.inited) {\r\n                    return;\r\n                }\r\n\r\n                this.factory = factory;\r\n\r\n                if (errback) {\r\n                    //Register for errors on this module.\r\n                    this.on('error', errback);\r\n                } else if (this.events.error) {\r\n                    //If no errback already, but there are error listeners\r\n                    //on this module, set up an errback to pass to the deps.\r\n                    errback = bind(this, function (err) {\r\n                        this.emit('error', err);\r\n                    });\r\n                }\r\n\r\n                //Do a copy of the dependency array, so that\r\n                //source inputs are not modified. For example\r\n                //\"shim\" deps are passed in here directly, and\r\n                //doing a direct modification of the depMaps array\r\n                //would affect that config.\r\n                this.depMaps = depMaps && depMaps.slice(0);\r\n\r\n                this.errback = errback;\r\n\r\n                //Indicate this module has be initialized\r\n                this.inited = true;\r\n\r\n                this.ignore = options.ignore;\r\n\r\n                //Could have option to init this module in enabled mode,\r\n                //or could have been previously marked as enabled. However,\r\n                //the dependencies are not known until init is called. So\r\n                //if enabled previously, now trigger dependencies as enabled.\r\n                if (options.enabled || this.enabled) {\r\n                    //Enable this module and dependencies.\r\n                    //Will call this.check()\r\n                    this.enable();\r\n                } else {\r\n                    this.check();\r\n                }\r\n            },\r\n\r\n            defineDep: function (i, depExports) {\r\n                //Because of cycles, defined callback for a given\r\n                //export can be called more than once.\r\n                if (!this.depMatched[i]) {\r\n                    this.depMatched[i] = true;\r\n                    this.depCount -= 1;\r\n                    this.depExports[i] = depExports;\r\n                }\r\n            },\r\n\r\n            fetch: function () {\r\n                if (this.fetched) {\r\n                    return;\r\n                }\r\n                this.fetched = true;\r\n\r\n                context.startTime = (new Date()).getTime();\r\n\r\n                var map = this.map;\r\n\r\n                //If the manager is for a plugin managed resource,\r\n                //ask the plugin to load it now.\r\n                if (this.shim) {\r\n                    context.makeRequire(this.map, {\r\n                        enableBuildCallback: true\r\n                    })(this.shim.deps || [], bind(this, function () {\r\n                        return map.prefix ? this.callPlugin() : this.load();\r\n                    }));\r\n                } else {\r\n                    //Regular dependency.\r\n                    return map.prefix ? this.callPlugin() : this.load();\r\n                }\r\n            },\r\n\r\n            load: function () {\r\n                var url = this.map.url;\r\n\r\n                //Regular dependency.\r\n                if (!urlFetched[url]) {\r\n                    urlFetched[url] = true;\r\n                    context.load(this.map.id, url);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Checks if the module is ready to define itself, and if so,\r\n             * define it.\r\n             */\r\n            check: function () {\r\n                if (!this.enabled || this.enabling) {\r\n                    return;\r\n                }\r\n\r\n                var err, cjsModule,\r\n                    id = this.map.id,\r\n                    depExports = this.depExports,\r\n                    exports = this.exports,\r\n                    factory = this.factory;\r\n\r\n                if (!this.inited) {\r\n                    this.fetch();\r\n                } else if (this.error) {\r\n                    this.emit('error', this.error);\r\n                } else if (!this.defining) {\r\n                    //The factory could trigger another require call\r\n                    //that would result in checking this module to\r\n                    //define itself again. If already in the process\r\n                    //of doing that, skip this work.\r\n                    this.defining = true;\r\n\r\n                    if (this.depCount < 1 && !this.defined) {\r\n                        if (isFunction(factory)) {\r\n                            //If there is an error listener, favor passing\r\n                            //to that instead of throwing an error. However,\r\n                            //only do it for define()'d  modules. require\r\n                            //errbacks should not be called for failures in\r\n                            //their callbacks (#699). However if a global\r\n                            //onError is set, use that.\r\n                            if ((this.events.error && this.map.isDefine) ||\r\n                                req.onError !== defaultOnError) {\r\n                                try {\r\n                                    exports = context.execCb(id, factory, depExports, exports);\r\n                                } catch (e) {\r\n                                    err = e;\r\n                                }\r\n                            } else {\r\n                                exports = context.execCb(id, factory, depExports, exports);\r\n                            }\r\n\r\n                            // Favor return value over exports. If node/cjs in play,\r\n                            // then will not have a return value anyway. Favor\r\n                            // module.exports assignment over exports object.\r\n                            if (this.map.isDefine && exports === undefined) {\r\n                                cjsModule = this.module;\r\n                                if (cjsModule) {\r\n                                    exports = cjsModule.exports;\r\n                                } else if (this.usingExports) {\r\n                                    //exports already set the defined value.\r\n                                    exports = this.exports;\r\n                                }\r\n                            }\r\n\r\n                            if (err) {\r\n                                err.requireMap = this.map;\r\n                                err.requireModules = this.map.isDefine ? [this.map.id] : null;\r\n                                err.requireType = this.map.isDefine ? 'define' : 'require';\r\n                                return onError((this.error = err));\r\n                            }\r\n\r\n                        } else {\r\n                            //Just a literal value\r\n                            exports = factory;\r\n                        }\r\n\r\n                        this.exports = exports;\r\n\r\n                        if (this.map.isDefine && !this.ignore) {\r\n                            defined[id] = exports;\r\n\r\n                            if (req.onResourceLoad) {\r\n                                req.onResourceLoad(context, this.map, this.depMaps);\r\n                            }\r\n                        }\r\n\r\n                        //Clean up\r\n                        cleanRegistry(id);\r\n\r\n                        this.defined = true;\r\n                    }\r\n\r\n                    //Finished the define stage. Allow calling check again\r\n                    //to allow define notifications below in the case of a\r\n                    //cycle.\r\n                    this.defining = false;\r\n\r\n                    if (this.defined && !this.defineEmitted) {\r\n                        this.defineEmitted = true;\r\n                        this.emit('defined', this.exports);\r\n                        this.defineEmitComplete = true;\r\n                    }\r\n\r\n                }\r\n            },\r\n\r\n            callPlugin: function () {\r\n                var map = this.map,\r\n                    id = map.id,\r\n                    //Map already normalized the prefix.\r\n                    pluginMap = makeModuleMap(map.prefix);\r\n\r\n                //Mark this as a dependency for this plugin, so it\r\n                //can be traced for cycles.\r\n                this.depMaps.push(pluginMap);\r\n\r\n                on(pluginMap, 'defined', bind(this, function (plugin) {\r\n                    var load, normalizedMap, normalizedMod,\r\n                        bundleId = getOwn(bundlesMap, this.map.id),\r\n                        name = this.map.name,\r\n                        parentName = this.map.parentMap ? this.map.parentMap.name : null,\r\n                        localRequire = context.makeRequire(map.parentMap, {\r\n                            enableBuildCallback: true\r\n                        });\r\n\r\n                    //If current map is not normalized, wait for that\r\n                    //normalized name to load instead of continuing.\r\n                    if (this.map.unnormalized) {\r\n                        //Normalize the ID if the plugin allows it.\r\n                        if (plugin.normalize) {\r\n                            name = plugin.normalize(name, function (name) {\r\n                                return normalize(name, parentName, true);\r\n                            }) || '';\r\n                        }\r\n\r\n                        //prefix and name should already be normalized, no need\r\n                        //for applying map config again either.\r\n                        normalizedMap = makeModuleMap(map.prefix + '!' + name,\r\n                                                      this.map.parentMap);\r\n                        on(normalizedMap,\r\n                            'defined', bind(this, function (value) {\r\n                                this.init([], function () { return value; }, null, {\r\n                                    enabled: true,\r\n                                    ignore: true\r\n                                });\r\n                            }));\r\n\r\n                        normalizedMod = getOwn(registry, normalizedMap.id);\r\n                        if (normalizedMod) {\r\n                            //Mark this as a dependency for this plugin, so it\r\n                            //can be traced for cycles.\r\n                            this.depMaps.push(normalizedMap);\r\n\r\n                            if (this.events.error) {\r\n                                normalizedMod.on('error', bind(this, function (err) {\r\n                                    this.emit('error', err);\r\n                                }));\r\n                            }\r\n                            normalizedMod.enable();\r\n                        }\r\n\r\n                        return;\r\n                    }\r\n\r\n                    //If a paths config, then just load that file instead to\r\n                    //resolve the plugin, as it is built into that paths layer.\r\n                    if (bundleId) {\r\n                        this.map.url = context.nameToUrl(bundleId);\r\n                        this.load();\r\n                        return;\r\n                    }\r\n\r\n                    load = bind(this, function (value) {\r\n                        this.init([], function () { return value; }, null, {\r\n                            enabled: true\r\n                        });\r\n                    });\r\n\r\n                    load.error = bind(this, function (err) {\r\n                        this.inited = true;\r\n                        this.error = err;\r\n                        err.requireModules = [id];\r\n\r\n                        //Remove temp unnormalized modules for this module,\r\n                        //since they will never be resolved otherwise now.\r\n                        eachProp(registry, function (mod) {\r\n                            if (mod.map.id.indexOf(id + '_unnormalized') === 0) {\r\n                                cleanRegistry(mod.map.id);\r\n                            }\r\n                        });\r\n\r\n                        onError(err);\r\n                    });\r\n\r\n                    //Allow plugins to load other code without having to know the\r\n                    //context or how to 'complete' the load.\r\n                    load.fromText = bind(this, function (text, textAlt) {\r\n                        /*jslint evil: true */\r\n                        var moduleName = map.name,\r\n                            moduleMap = makeModuleMap(moduleName),\r\n                            hasInteractive = useInteractive;\r\n\r\n                        //As of 2.1.0, support just passing the text, to reinforce\r\n                        //fromText only being called once per resource. Still\r\n                        //support old style of passing moduleName but discard\r\n                        //that moduleName in favor of the internal ref.\r\n                        if (textAlt) {\r\n                            text = textAlt;\r\n                        }\r\n\r\n                        //Turn off interactive script matching for IE for any define\r\n                        //calls in the text, then turn it back on at the end.\r\n                        if (hasInteractive) {\r\n                            useInteractive = false;\r\n                        }\r\n\r\n                        //Prime the system by creating a module instance for\r\n                        //it.\r\n                        getModule(moduleMap);\r\n\r\n                        //Transfer any config to this other module.\r\n                        if (hasProp(config.config, id)) {\r\n                            config.config[moduleName] = config.config[id];\r\n                        }\r\n\r\n                        try {\r\n                            req.exec(text);\r\n                        } catch (e) {\r\n                            return onError(makeError('fromtexteval',\r\n                                             'fromText eval for ' + id +\r\n                                            ' failed: ' + e,\r\n                                             e,\r\n                                             [id]));\r\n                        }\r\n\r\n                        if (hasInteractive) {\r\n                            useInteractive = true;\r\n                        }\r\n\r\n                        //Mark this as a dependency for the plugin\r\n                        //resource\r\n                        this.depMaps.push(moduleMap);\r\n\r\n                        //Support anonymous modules.\r\n                        context.completeLoad(moduleName);\r\n\r\n                        //Bind the value of that module to the value for this\r\n                        //resource ID.\r\n                        localRequire([moduleName], load);\r\n                    });\r\n\r\n                    //Use parentName here since the plugin's name is not reliable,\r\n                    //could be some weird string with no path that actually wants to\r\n                    //reference the parentName's path.\r\n                    plugin.load(map.name, localRequire, load, config);\r\n                }));\r\n\r\n                context.enable(pluginMap, this);\r\n                this.pluginMaps[pluginMap.id] = pluginMap;\r\n            },\r\n\r\n            enable: function () {\r\n                enabledRegistry[this.map.id] = this;\r\n                this.enabled = true;\r\n\r\n                //Set flag mentioning that the module is enabling,\r\n                //so that immediate calls to the defined callbacks\r\n                //for dependencies do not trigger inadvertent load\r\n                //with the depCount still being zero.\r\n                this.enabling = true;\r\n\r\n                //Enable each dependency\r\n                each(this.depMaps, bind(this, function (depMap, i) {\r\n                    var id, mod, handler;\r\n\r\n                    if (typeof depMap === 'string') {\r\n                        //Dependency needs to be converted to a depMap\r\n                        //and wired up to this module.\r\n                        depMap = makeModuleMap(depMap,\r\n                                               (this.map.isDefine ? this.map : this.map.parentMap),\r\n                                               false,\r\n                                               !this.skipMap);\r\n                        this.depMaps[i] = depMap;\r\n\r\n                        handler = getOwn(handlers, depMap.id);\r\n\r\n                        if (handler) {\r\n                            this.depExports[i] = handler(this);\r\n                            return;\r\n                        }\r\n\r\n                        this.depCount += 1;\r\n\r\n                        on(depMap, 'defined', bind(this, function (depExports) {\r\n                            this.defineDep(i, depExports);\r\n                            this.check();\r\n                        }));\r\n\r\n                        if (this.errback) {\r\n                            on(depMap, 'error', bind(this, this.errback));\r\n                        } else if (this.events.error) {\r\n                            // No direct errback on this module, but something\r\n                            // else is listening for errors, so be sure to\r\n                            // propagate the error correctly.\r\n                            on(depMap, 'error', bind(this, function(err) {\r\n                                this.emit('error', err);\r\n                            }));\r\n                        }\r\n                    }\r\n\r\n                    id = depMap.id;\r\n                    mod = registry[id];\r\n\r\n                    //Skip special modules like 'require', 'exports', 'module'\r\n                    //Also, don't call enable if it is already enabled,\r\n                    //important in circular dependency cases.\r\n                    if (!hasProp(handlers, id) && mod && !mod.enabled) {\r\n                        context.enable(depMap, this);\r\n                    }\r\n                }));\r\n\r\n                //Enable each plugin that is used in\r\n                //a dependency\r\n                eachProp(this.pluginMaps, bind(this, function (pluginMap) {\r\n                    var mod = getOwn(registry, pluginMap.id);\r\n                    if (mod && !mod.enabled) {\r\n                        context.enable(pluginMap, this);\r\n                    }\r\n                }));\r\n\r\n                this.enabling = false;\r\n\r\n                this.check();\r\n            },\r\n\r\n            on: function (name, cb) {\r\n                var cbs = this.events[name];\r\n                if (!cbs) {\r\n                    cbs = this.events[name] = [];\r\n                }\r\n                cbs.push(cb);\r\n            },\r\n\r\n            emit: function (name, evt) {\r\n                each(this.events[name], function (cb) {\r\n                    cb(evt);\r\n                });\r\n                if (name === 'error') {\r\n                    //Now that the error handler was triggered, remove\r\n                    //the listeners, since this broken Module instance\r\n                    //can stay around for a while in the registry.\r\n                    delete this.events[name];\r\n                }\r\n            }\r\n        };\r\n\r\n        function callGetModule(args) {\r\n            //Skip modules already defined.\r\n            if (!hasProp(defined, args[0])) {\r\n                getModule(makeModuleMap(args[0], null, true)).init(args[1], args[2]);\r\n            }\r\n        }\r\n\r\n        function removeListener(node, func, name, ieName) {\r\n            //Favor detachEvent because of IE9\r\n            //issue, see attachEvent/addEventListener comment elsewhere\r\n            //in this file.\r\n            if (node.detachEvent && !isOpera) {\r\n                //Probably IE. If not it will throw an error, which will be\r\n                //useful to know.\r\n                if (ieName) {\r\n                    node.detachEvent(ieName, func);\r\n                }\r\n            } else {\r\n                node.removeEventListener(name, func, false);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Given an event from a script node, get the requirejs info from it,\r\n         * and then removes the event listeners on the node.\r\n         * @param {Event} evt\r\n         * @returns {Object}\r\n         */\r\n        function getScriptData(evt) {\r\n            //Using currentTarget instead of target for Firefox 2.0's sake. Not\r\n            //all old browsers will be supported, but this one was easy enough\r\n            //to support and still makes sense.\r\n            var node = evt.currentTarget || evt.srcElement;\r\n\r\n            //Remove the listeners once here.\r\n            removeListener(node, context.onScriptLoad, 'load', 'onreadystatechange');\r\n            removeListener(node, context.onScriptError, 'error');\r\n\r\n            return {\r\n                node: node,\r\n                id: node && node.getAttribute('data-requiremodule')\r\n            };\r\n        }\r\n\r\n        function intakeDefines() {\r\n            var args;\r\n\r\n            //Any defined modules in the global queue, intake them now.\r\n            takeGlobalQueue();\r\n\r\n            //Make sure any remaining defQueue items get properly processed.\r\n            while (defQueue.length) {\r\n                args = defQueue.shift();\r\n                if (args[0] === null) {\r\n                    return onError(makeError('mismatch', 'Mismatched anonymous define() module: ' + args[args.length - 1]));\r\n                } else {\r\n                    //args are id, deps, factory. Should be normalized by the\r\n                    //define() function.\r\n                    callGetModule(args);\r\n                }\r\n            }\r\n        }\r\n\r\n        context = {\r\n            config: config,\r\n            contextName: contextName,\r\n            registry: registry,\r\n            defined: defined,\r\n            urlFetched: urlFetched,\r\n            defQueue: defQueue,\r\n            Module: Module,\r\n            makeModuleMap: makeModuleMap,\r\n            nextTick: req.nextTick,\r\n            onError: onError,\r\n\r\n            /**\r\n             * Set a configuration for the context.\r\n             * @param {Object} cfg config object to integrate.\r\n             */\r\n            configure: function (cfg) {\r\n                //Make sure the baseUrl ends in a slash.\r\n                if (cfg.baseUrl) {\r\n                    if (cfg.baseUrl.charAt(cfg.baseUrl.length - 1) !== '/') {\r\n                        cfg.baseUrl += '/';\r\n                    }\r\n                }\r\n\r\n                //Save off the paths since they require special processing,\r\n                //they are additive.\r\n                var shim = config.shim,\r\n                    objs = {\r\n                        paths: true,\r\n                        bundles: true,\r\n                        config: true,\r\n                        map: true\r\n                    };\r\n\r\n                eachProp(cfg, function (value, prop) {\r\n                    if (objs[prop]) {\r\n                        if (!config[prop]) {\r\n                            config[prop] = {};\r\n                        }\r\n                        mixin(config[prop], value, true, true);\r\n                    } else {\r\n                        config[prop] = value;\r\n                    }\r\n                });\r\n\r\n                //Reverse map the bundles\r\n                if (cfg.bundles) {\r\n                    eachProp(cfg.bundles, function (value, prop) {\r\n                        each(value, function (v) {\r\n                            if (v !== prop) {\r\n                                bundlesMap[v] = prop;\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n\r\n                //Merge shim\r\n                if (cfg.shim) {\r\n                    eachProp(cfg.shim, function (value, id) {\r\n                        //Normalize the structure\r\n                        if (isArray(value)) {\r\n                            value = {\r\n                                deps: value\r\n                            };\r\n                        }\r\n                        if ((value.exports || value.init) && !value.exportsFn) {\r\n                            value.exportsFn = context.makeShimExports(value);\r\n                        }\r\n                        shim[id] = value;\r\n                    });\r\n                    config.shim = shim;\r\n                }\r\n\r\n                //Adjust packages if necessary.\r\n                if (cfg.packages) {\r\n                    each(cfg.packages, function (pkgObj) {\r\n                        var location, name;\r\n\r\n                        pkgObj = typeof pkgObj === 'string' ? { name: pkgObj } : pkgObj;\r\n\r\n                        name = pkgObj.name;\r\n                        location = pkgObj.location;\r\n                        if (location) {\r\n                            config.paths[name] = pkgObj.location;\r\n                        }\r\n\r\n                        //Save pointer to main module ID for pkg name.\r\n                        //Remove leading dot in main, so main paths are normalized,\r\n                        //and remove any trailing .js, since different package\r\n                        //envs have different conventions: some use a module name,\r\n                        //some use a file name.\r\n                        config.pkgs[name] = pkgObj.name + '/' + (pkgObj.main || 'main')\r\n                                     .replace(currDirRegExp, '')\r\n                                     .replace(jsSuffixRegExp, '');\r\n                    });\r\n                }\r\n\r\n                //If there are any \"waiting to execute\" modules in the registry,\r\n                //update the maps for them, since their info, like URLs to load,\r\n                //may have changed.\r\n                eachProp(registry, function (mod, id) {\r\n                    //If module already has init called, since it is too\r\n                    //late to modify them, and ignore unnormalized ones\r\n                    //since they are transient.\r\n                    if (!mod.inited && !mod.map.unnormalized) {\r\n                        mod.map = makeModuleMap(id);\r\n                    }\r\n                });\r\n\r\n                //If a deps array or a config callback is specified, then call\r\n                //require with those args. This is useful when require is defined as a\r\n                //config object before require.js is loaded.\r\n                if (cfg.deps || cfg.callback) {\r\n                    context.require(cfg.deps || [], cfg.callback);\r\n                }\r\n            },\r\n\r\n            makeShimExports: function (value) {\r\n                function fn() {\r\n                    var ret;\r\n                    if (value.init) {\r\n                        ret = value.init.apply(global, arguments);\r\n                    }\r\n                    return ret || (value.exports && getGlobal(value.exports));\r\n                }\r\n                return fn;\r\n            },\r\n\r\n            makeRequire: function (relMap, options) {\r\n                options = options || {};\r\n\r\n                function localRequire(deps, callback, errback) {\r\n                    var id, map, requireMod;\r\n\r\n                    if (options.enableBuildCallback && callback && isFunction(callback)) {\r\n                        callback.__requireJsBuild = true;\r\n                    }\r\n\r\n                    if (typeof deps === 'string') {\r\n                        if (isFunction(callback)) {\r\n                            //Invalid call\r\n                            return onError(makeError('requireargs', 'Invalid require call'), errback);\r\n                        }\r\n\r\n                        //If require|exports|module are requested, get the\r\n                        //value for them from the special handlers. Caveat:\r\n                        //this only works while module is being defined.\r\n                        if (relMap && hasProp(handlers, deps)) {\r\n                            return handlers[deps](registry[relMap.id]);\r\n                        }\r\n\r\n                        //Synchronous access to one module. If require.get is\r\n                        //available (as in the Node adapter), prefer that.\r\n                        if (req.get) {\r\n                            return req.get(context, deps, relMap, localRequire);\r\n                        }\r\n\r\n                        //Normalize module name, if it contains . or ..\r\n                        map = makeModuleMap(deps, relMap, false, true);\r\n                        id = map.id;\r\n\r\n                        if (!hasProp(defined, id)) {\r\n                            return onError(makeError('notloaded', 'Module name \"' +\r\n                                        id +\r\n                                        '\" has not been loaded yet for context: ' +\r\n                                        contextName +\r\n                                        (relMap ? '' : '. Use require([])')));\r\n                        }\r\n                        return defined[id];\r\n                    }\r\n\r\n                    //Grab defines waiting in the global queue.\r\n                    intakeDefines();\r\n\r\n                    //Mark all the dependencies as needing to be loaded.\r\n                    context.nextTick(function () {\r\n                        //Some defines could have been added since the\r\n                        //require call, collect them.\r\n                        intakeDefines();\r\n\r\n                        requireMod = getModule(makeModuleMap(null, relMap));\r\n\r\n                        //Store if map config should be applied to this require\r\n                        //call for dependencies.\r\n                        requireMod.skipMap = options.skipMap;\r\n\r\n                        requireMod.init(deps, callback, errback, {\r\n                            enabled: true\r\n                        });\r\n\r\n                        checkLoaded();\r\n                    });\r\n\r\n                    return localRequire;\r\n                }\r\n\r\n                mixin(localRequire, {\r\n                    isBrowser: isBrowser,\r\n\r\n                    /**\r\n                     * Converts a module name + .extension into an URL path.\r\n                     * *Requires* the use of a module name. It does not support using\r\n                     * plain URLs like nameToUrl.\r\n                     */\r\n                    toUrl: function (moduleNamePlusExt) {\r\n                        var ext,\r\n                            index = moduleNamePlusExt.lastIndexOf('.'),\r\n                            segment = moduleNamePlusExt.split('/')[0],\r\n                            isRelative = segment === '.' || segment === '..';\r\n\r\n                        //Have a file extension alias, and it is not the\r\n                        //dots from a relative path.\r\n                        if (index !== -1 && (!isRelative || index > 1)) {\r\n                            ext = moduleNamePlusExt.substring(index, moduleNamePlusExt.length);\r\n                            moduleNamePlusExt = moduleNamePlusExt.substring(0, index);\r\n                        }\r\n\r\n                        return context.nameToUrl(normalize(moduleNamePlusExt,\r\n                                                relMap && relMap.id, true), ext,  true);\r\n                    },\r\n\r\n                    defined: function (id) {\r\n                        return hasProp(defined, makeModuleMap(id, relMap, false, true).id);\r\n                    },\r\n\r\n                    specified: function (id) {\r\n                        id = makeModuleMap(id, relMap, false, true).id;\r\n                        return hasProp(defined, id) || hasProp(registry, id);\r\n                    }\r\n                });\r\n\r\n                //Only allow undef on top level require calls\r\n                if (!relMap) {\r\n                    localRequire.undef = function (id) {\r\n                        //Bind any waiting define() calls to this context,\r\n                        //fix for #408\r\n                        takeGlobalQueue();\r\n\r\n                        var map = makeModuleMap(id, relMap, true),\r\n                            mod = getOwn(registry, id);\r\n\r\n                        removeScript(id);\r\n\r\n                        delete defined[id];\r\n                        delete urlFetched[map.url];\r\n                        delete undefEvents[id];\r\n\r\n                        //Clean queued defines too. Go backwards\r\n                        //in array so that the splices do not\r\n                        //mess up the iteration.\r\n                        eachReverse(defQueue, function(args, i) {\r\n                            if(args[0] === id) {\r\n                                defQueue.splice(i, 1);\r\n                            }\r\n                        });\r\n\r\n                        if (mod) {\r\n                            //Hold on to listeners in case the\r\n                            //module will be attempted to be reloaded\r\n                            //using a different config.\r\n                            if (mod.events.defined) {\r\n                                undefEvents[id] = mod.events;\r\n                            }\r\n\r\n                            cleanRegistry(id);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                return localRequire;\r\n            },\r\n\r\n            /**\r\n             * Called to enable a module if it is still in the registry\r\n             * awaiting enablement. A second arg, parent, the parent module,\r\n             * is passed in for context, when this method is overridden by\r\n             * the optimizer. Not shown here to keep code compact.\r\n             */\r\n            enable: function (depMap) {\r\n                var mod = getOwn(registry, depMap.id);\r\n                if (mod) {\r\n                    getModule(depMap).enable();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Internal method used by environment adapters to complete a load event.\r\n             * A load event could be a script load or just a load pass from a synchronous\r\n             * load call.\r\n             * @param {String} moduleName the name of the module to potentially complete.\r\n             */\r\n            completeLoad: function (moduleName) {\r\n                var found, args, mod,\r\n                    shim = getOwn(config.shim, moduleName) || {},\r\n                    shExports = shim.exports;\r\n\r\n                takeGlobalQueue();\r\n\r\n                while (defQueue.length) {\r\n                    args = defQueue.shift();\r\n                    if (args[0] === null) {\r\n                        args[0] = moduleName;\r\n                        //If already found an anonymous module and bound it\r\n                        //to this name, then this is some other anon module\r\n                        //waiting for its completeLoad to fire.\r\n                        if (found) {\r\n                            break;\r\n                        }\r\n                        found = true;\r\n                    } else if (args[0] === moduleName) {\r\n                        //Found matching define call for this script!\r\n                        found = true;\r\n                    }\r\n\r\n                    callGetModule(args);\r\n                }\r\n\r\n                //Do this after the cycle of callGetModule in case the result\r\n                //of those calls/init calls changes the registry.\r\n                mod = getOwn(registry, moduleName);\r\n\r\n                if (!found && !hasProp(defined, moduleName) && mod && !mod.inited) {\r\n                    if (config.enforceDefine && (!shExports || !getGlobal(shExports))) {\r\n                        if (hasPathFallback(moduleName)) {\r\n                            return;\r\n                        } else {\r\n                            return onError(makeError('nodefine',\r\n                                             'No define call for ' + moduleName,\r\n                                             null,\r\n                                             [moduleName]));\r\n                        }\r\n                    } else {\r\n                        //A script that does not call define(), so just simulate\r\n                        //the call for it.\r\n                        callGetModule([moduleName, (shim.deps || []), shim.exportsFn]);\r\n                    }\r\n                }\r\n\r\n                checkLoaded();\r\n            },\r\n\r\n            /**\r\n             * Converts a module name to a file path. Supports cases where\r\n             * moduleName may actually be just an URL.\r\n             * Note that it **does not** call normalize on the moduleName,\r\n             * it is assumed to have already been normalized. This is an\r\n             * internal API, not a public one. Use toUrl for the public API.\r\n             */\r\n            nameToUrl: function (moduleName, ext, skipExt) {\r\n                var paths, syms, i, parentModule, url,\r\n                    parentPath, bundleId,\r\n                    pkgMain = getOwn(config.pkgs, moduleName);\r\n\r\n                if (pkgMain) {\r\n                    moduleName = pkgMain;\r\n                }\r\n\r\n                bundleId = getOwn(bundlesMap, moduleName);\r\n\r\n                if (bundleId) {\r\n                    return context.nameToUrl(bundleId, ext, skipExt);\r\n                }\r\n\r\n                //If a colon is in the URL, it indicates a protocol is used and it is just\r\n                //an URL to a file, or if it starts with a slash, contains a query arg (i.e. ?)\r\n                //or ends with .js, then assume the user meant to use an url and not a module id.\r\n                //The slash is important for protocol-less URLs as well as full paths.\r\n                if (req.jsExtRegExp.test(moduleName)) {\r\n                    //Just a plain path, not module name lookup, so just return it.\r\n                    //Add extension if it is included. This is a bit wonky, only non-.js things pass\r\n                    //an extension, this method probably needs to be reworked.\r\n                    url = moduleName + (ext || '');\r\n                } else {\r\n                    //A module that needs to be converted to a path.\r\n                    paths = config.paths;\r\n\r\n                    syms = moduleName.split('/');\r\n                    //For each module name segment, see if there is a path\r\n                    //registered for it. Start with most specific name\r\n                    //and work up from it.\r\n                    for (i = syms.length; i > 0; i -= 1) {\r\n                        parentModule = syms.slice(0, i).join('/');\r\n\r\n                        parentPath = getOwn(paths, parentModule);\r\n                        if (parentPath) {\r\n                            //If an array, it means there are a few choices,\r\n                            //Choose the one that is desired\r\n                            if (isArray(parentPath)) {\r\n                                parentPath = parentPath[0];\r\n                            }\r\n                            syms.splice(0, i, parentPath);\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    //Join the path parts together, then figure out if baseUrl is needed.\r\n                    url = syms.join('/');\r\n                    url += (ext || (/^data\\:|\\?/.test(url) || skipExt ? '' : '.js'));\r\n                    url = (url.charAt(0) === '/' || url.match(/^[\\w\\+\\.\\-]+:/) ? '' : config.baseUrl) + url;\r\n                }\r\n\r\n                return config.urlArgs ? url +\r\n                                        ((url.indexOf('?') === -1 ? '?' : '&') +\r\n                                         config.urlArgs) : url;\r\n            },\r\n\r\n            //Delegates to req.load. Broken out as a separate function to\r\n            //allow overriding in the optimizer.\r\n            load: function (id, url) {\r\n                req.load(context, id, url);\r\n            },\r\n\r\n            /**\r\n             * Executes a module callback function. Broken out as a separate function\r\n             * solely to allow the build system to sequence the files in the built\r\n             * layer in the right sequence.\r\n             *\r\n             * @private\r\n             */\r\n            execCb: function (name, callback, args, exports) {\r\n                return callback.apply(exports, args);\r\n            },\r\n\r\n            /**\r\n             * callback for script loads, used to check status of loading.\r\n             *\r\n             * @param {Event} evt the event from the browser for the script\r\n             * that was loaded.\r\n             */\r\n            onScriptLoad: function (evt) {\r\n                //Using currentTarget instead of target for Firefox 2.0's sake. Not\r\n                //all old browsers will be supported, but this one was easy enough\r\n                //to support and still makes sense.\r\n                if (evt.type === 'load' ||\r\n                        (readyRegExp.test((evt.currentTarget || evt.srcElement).readyState))) {\r\n                    //Reset interactive script so a script node is not held onto for\r\n                    //to long.\r\n                    interactiveScript = null;\r\n\r\n                    //Pull out the name of the module and the context.\r\n                    var data = getScriptData(evt);\r\n                    context.completeLoad(data.id);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Callback for script errors.\r\n             */\r\n            onScriptError: function (evt) {\r\n                var data = getScriptData(evt);\r\n                if (!hasPathFallback(data.id)) {\r\n                    return onError(makeError('scripterror', 'Script error for: ' + data.id, evt, [data.id]));\r\n                }\r\n            }\r\n        };\r\n\r\n        context.require = context.makeRequire();\r\n        return context;\r\n    }\r\n\r\n    /**\r\n     * Main entry point.\r\n     *\r\n     * If the only argument to require is a string, then the module that\r\n     * is represented by that string is fetched for the appropriate context.\r\n     *\r\n     * If the first argument is an array, then it will be treated as an array\r\n     * of dependency string names to fetch. An optional function callback can\r\n     * be specified to execute when all of those dependencies are available.\r\n     *\r\n     * Make a local req variable to help Caja compliance (it assumes things\r\n     * on a require that are not standardized), and to give a short\r\n     * name for minification/local scope use.\r\n     */\r\n    req = requirejs = function (deps, callback, errback, optional) {\r\n\r\n        //Find the right context, use default\r\n        var context, config,\r\n            contextName = defContextName;\r\n\r\n        // Determine if have config object in the call.\r\n        if (!isArray(deps) && typeof deps !== 'string') {\r\n            // deps is a config object\r\n            config = deps;\r\n            if (isArray(callback)) {\r\n                // Adjust args if there are dependencies\r\n                deps = callback;\r\n                callback = errback;\r\n                errback = optional;\r\n            } else {\r\n                deps = [];\r\n            }\r\n        }\r\n\r\n        if (config && config.context) {\r\n            contextName = config.context;\r\n        }\r\n\r\n        context = getOwn(contexts, contextName);\r\n        if (!context) {\r\n            context = contexts[contextName] = req.s.newContext(contextName);\r\n        }\r\n\r\n        if (config) {\r\n            context.configure(config);\r\n        }\r\n\r\n        return context.require(deps, callback, errback);\r\n    };\r\n\r\n    /**\r\n     * Support require.config() to make it easier to cooperate with other\r\n     * AMD loaders on globally agreed names.\r\n     */\r\n    req.config = function (config) {\r\n        return req(config);\r\n    };\r\n\r\n    /**\r\n     * Execute something after the current tick\r\n     * of the event loop. Override for other envs\r\n     * that have a better solution than setTimeout.\r\n     * @param  {Function} fn function to execute later.\r\n     */\r\n    req.nextTick = typeof setTimeout !== 'undefined' ? function (fn) {\r\n        setTimeout(fn, 4);\r\n    } : function (fn) { fn(); };\r\n\r\n    /**\r\n     * Export require as a global, but only if it does not already exist.\r\n     */\r\n    if (!require) {\r\n        require = req;\r\n    }\r\n\r\n    req.version = version;\r\n\r\n    //Used to filter out dependencies that are already paths.\r\n    req.jsExtRegExp = /^\\/|:|\\?|\\.js$/;\r\n    req.isBrowser = isBrowser;\r\n    s = req.s = {\r\n        contexts: contexts,\r\n        newContext: newContext\r\n    };\r\n\r\n    //Create default context.\r\n    req({});\r\n\r\n    //Exports some context-sensitive methods on global require.\r\n    each([\r\n        'toUrl',\r\n        'undef',\r\n        'defined',\r\n        'specified'\r\n    ], function (prop) {\r\n        //Reference from contexts instead of early binding to default context,\r\n        //so that during builds, the latest instance of the default context\r\n        //with its config gets used.\r\n        req[prop] = function () {\r\n            var ctx = contexts[defContextName];\r\n            return ctx.require[prop].apply(ctx, arguments);\r\n        };\r\n    });\r\n\r\n    if (isBrowser) {\r\n        head = s.head = document.getElementsByTagName('head')[0];\r\n        //If BASE tag is in play, using appendChild is a problem for IE6.\r\n        //When that browser dies, this can be removed. Details in this jQuery bug:\r\n        //http://dev.jquery.com/ticket/2709\r\n        baseElement = document.getElementsByTagName('base')[0];\r\n        if (baseElement) {\r\n            head = s.head = baseElement.parentNode;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Any errors that require explicitly generates will be passed to this\r\n     * function. Intercept/override it if you want custom error handling.\r\n     * @param {Error} err the error object.\r\n     */\r\n    req.onError = defaultOnError;\r\n\r\n    /**\r\n     * Creates the node for the load command. Only used in browser envs.\r\n     */\r\n    req.createNode = function (config, moduleName, url) {\r\n        var node = config.xhtml ?\r\n                document.createElementNS('http://www.w3.org/1999/xhtml', 'html:script') :\r\n                document.createElement('script');\r\n        node.type = config.scriptType || 'text/javascript';\r\n        node.charset = 'utf-8';\r\n        node.async = true;\r\n        return node;\r\n    };\r\n\r\n    /**\r\n     * Does the request to load a module for the browser case.\r\n     * Make this a separate function to allow other environments\r\n     * to override it.\r\n     *\r\n     * @param {Object} context the require context to find state.\r\n     * @param {String} moduleName the name of the module.\r\n     * @param {Object} url the URL to the module.\r\n     */\r\n    req.load = function (context, moduleName, url) {\r\n        var config = (context && context.config) || {},\r\n            node;\r\n        if (isBrowser) {\r\n            //In the browser so use a script tag\r\n            node = req.createNode(config, moduleName, url);\r\n\r\n            node.setAttribute('data-requirecontext', context.contextName);\r\n            node.setAttribute('data-requiremodule', moduleName);\r\n\r\n            //Set up load listener. Test attachEvent first because IE9 has\r\n            //a subtle issue in its addEventListener and script onload firings\r\n            //that do not match the behavior of all other browsers with\r\n            //addEventListener support, which fire the onload event for a\r\n            //script right after the script execution. See:\r\n            //https://connect.microsoft.com/IE/feedback/details/648057/script-onload-event-is-not-fired-immediately-after-script-execution\r\n            //UNFORTUNATELY Opera implements attachEvent but does not follow the script\r\n            //script execution mode.\r\n            if (node.attachEvent &&\r\n                    //Check if node.attachEvent is artificially added by custom script or\r\n                    //natively supported by browser\r\n                    //read https://github.com/jrburke/requirejs/issues/187\r\n                    //if we can NOT find [native code] then it must NOT natively supported.\r\n                    //in IE8, node.attachEvent does not have toString()\r\n                    //Note the test for \"[native code\" with no closing brace, see:\r\n                    //https://github.com/jrburke/requirejs/issues/273\r\n                    !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) &&\r\n                    !isOpera) {\r\n                //Probably IE. IE (at least 6-8) do not fire\r\n                //script onload right after executing the script, so\r\n                //we cannot tie the anonymous define call to a name.\r\n                //However, IE reports the script as being in 'interactive'\r\n                //readyState at the time of the define call.\r\n                useInteractive = true;\r\n\r\n                node.attachEvent('onreadystatechange', context.onScriptLoad);\r\n                //It would be great to add an error handler here to catch\r\n                //404s in IE9+. However, onreadystatechange will fire before\r\n                //the error handler, so that does not help. If addEventListener\r\n                //is used, then IE will fire error before load, but we cannot\r\n                //use that pathway given the connect.microsoft.com issue\r\n                //mentioned above about not doing the 'script execute,\r\n                //then fire the script load event listener before execute\r\n                //next script' that other browsers do.\r\n                //Best hope: IE10 fixes the issues,\r\n                //and then destroys all installs of IE 6-9.\r\n                //node.attachEvent('onerror', context.onScriptError);\r\n            } else {\r\n                node.addEventListener('load', context.onScriptLoad, false);\r\n                node.addEventListener('error', context.onScriptError, false);\r\n            }\r\n            node.src = url;\r\n\r\n            //For some cache cases in IE 6-8, the script executes before the end\r\n            //of the appendChild execution, so to tie an anonymous define\r\n            //call to the module name (which is stored on the node), hold on\r\n            //to a reference to this node, but clear after the DOM insertion.\r\n            currentlyAddingScript = node;\r\n            if (baseElement) {\r\n                head.insertBefore(node, baseElement);\r\n            } else {\r\n                head.appendChild(node);\r\n            }\r\n            currentlyAddingScript = null;\r\n\r\n            return node;\r\n        } else if (isWebWorker) {\r\n            try {\r\n                //In a web worker, use importScripts. This is not a very\r\n                //efficient use of importScripts, importScripts will block until\r\n                //its script is downloaded and evaluated. However, if web workers\r\n                //are in play, the expectation that a build has been done so that\r\n                //only one script needs to be loaded anyway. This may need to be\r\n                //reevaluated if other use cases become common.\r\n                importScripts(url);\r\n\r\n                //Account for anonymous modules\r\n                context.completeLoad(moduleName);\r\n            } catch (e) {\r\n                context.onError(makeError('importscripts',\r\n                                'importScripts failed for ' +\r\n                                    moduleName + ' at ' + url,\r\n                                e,\r\n                                [moduleName]));\r\n            }\r\n        }\r\n    };\r\n\r\n    function getInteractiveScript() {\r\n        if (interactiveScript && interactiveScript.readyState === 'interactive') {\r\n            return interactiveScript;\r\n        }\r\n\r\n        eachReverse(scripts(), function (script) {\r\n            if (script.readyState === 'interactive') {\r\n                return (interactiveScript = script);\r\n            }\r\n        });\r\n        return interactiveScript;\r\n    }\r\n\r\n    //Look for a data-main script attribute, which could also adjust the baseUrl.\r\n    if (isBrowser && !cfg.skipDataMain) {\r\n        //Figure out baseUrl. Get it from the script tag with require.js in it.\r\n        eachReverse(scripts(), function (script) {\r\n            //Set the 'head' where we can append children by\r\n            //using the script's parent.\r\n            if (!head) {\r\n                head = script.parentNode;\r\n            }\r\n\r\n            //Look for a data-main attribute to set main script for the page\r\n            //to load. If it is there, the path to data main becomes the\r\n            //baseUrl, if it is not already set.\r\n            dataMain = script.getAttribute('data-main');\r\n            if (dataMain) {\r\n                //Preserve dataMain in case it is a path (i.e. contains '?')\r\n                mainScript = dataMain;\r\n\r\n                //Set final baseUrl if there is not already an explicit one.\r\n                if (!cfg.baseUrl) {\r\n                    //Pull off the directory of data-main for use as the\r\n                    //baseUrl.\r\n                    src = mainScript.split('/');\r\n                    mainScript = src.pop();\r\n                    subPath = src.length ? src.join('/')  + '/' : './';\r\n\r\n                    cfg.baseUrl = subPath;\r\n                }\r\n\r\n                //Strip off any trailing .js since mainScript is now\r\n                //like a module name.\r\n                mainScript = mainScript.replace(jsSuffixRegExp, '');\r\n\r\n                 //If mainScript is still a path, fall back to dataMain\r\n                if (req.jsExtRegExp.test(mainScript)) {\r\n                    mainScript = dataMain;\r\n                }\r\n\r\n                //Put the data-main script in the files to load.\r\n                cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript];\r\n\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * The function that handles definitions of modules. Differs from\r\n     * require() in that a string for the module should be the first argument,\r\n     * and the function to execute after dependencies are loaded should\r\n     * return a value to define the module corresponding to the first argument's\r\n     * name.\r\n     */\r\n    define = function (name, deps, callback) {\r\n        var node, context;\r\n\r\n        //Allow for anonymous modules\r\n        if (typeof name !== 'string') {\r\n            //Adjust args appropriately\r\n            callback = deps;\r\n            deps = name;\r\n            name = null;\r\n        }\r\n\r\n        //This module may not have dependencies\r\n        if (!isArray(deps)) {\r\n            callback = deps;\r\n            deps = null;\r\n        }\r\n\r\n        //If no name, and callback is a function, then figure out if it a\r\n        //CommonJS thing with dependencies.\r\n        if (!deps && isFunction(callback)) {\r\n            deps = [];\r\n            //Remove comments from the callback string,\r\n            //look for require calls, and pull them into the dependencies,\r\n            //but only if there are function args.\r\n            if (callback.length) {\r\n                callback\r\n                    .toString()\r\n                    .replace(commentRegExp, '')\r\n                    .replace(cjsRequireRegExp, function (match, dep) {\r\n                        deps.push(dep);\r\n                    });\r\n\r\n                //May be a CommonJS thing even without require calls, but still\r\n                //could use exports, and module. Avoid doing exports and module\r\n                //work though if it just needs require.\r\n                //REQUIRES the function to expect the CommonJS variables in the\r\n                //order listed below.\r\n                deps = (callback.length === 1 ? ['require'] : ['require', 'exports', 'module']).concat(deps);\r\n            }\r\n        }\r\n\r\n        //If in IE 6-8 and hit an anonymous define() call, do the interactive\r\n        //work.\r\n        if (useInteractive) {\r\n            node = currentlyAddingScript || getInteractiveScript();\r\n            if (node) {\r\n                if (!name) {\r\n                    name = node.getAttribute('data-requiremodule');\r\n                }\r\n                context = contexts[node.getAttribute('data-requirecontext')];\r\n            }\r\n        }\r\n\r\n        //Always save off evaluating the def call until the script onload handler.\r\n        //This allows multiple modules to be in a file without prematurely\r\n        //tracing dependencies, and allows for anonymous module support,\r\n        //where the module name is not known until the script onload event\r\n        //occurs. If no context, use the global queue, and get it processed\r\n        //in the onscript load callback.\r\n        (context ? context.defQueue : globalDefQueue).push([name, deps, callback]);\r\n    };\r\n\r\n    define.amd = {\r\n        jQuery: true\r\n    };\r\n\r\n\r\n    /**\r\n     * Executes the text. Normally just uses eval, but can be modified\r\n     * to use a better, environment-specific call. Only used for transpiling\r\n     * loader plugins, not for plain JS modules.\r\n     * @param {String} text the text to execute/evaluate.\r\n     */\r\n    req.exec = function (text) {\r\n        /*jslint evil: true */\r\n        return eval(text);\r\n    };\r\n\r\n    //Set up with config info.\r\n    req(cfg);\r\n}(this));\r\n",
    "vendor/vmcore/vmcore.js": "/*==================================================\r\n vmcore.js 1.42\r\n ==================================================*/\r\n(function(global, factory) {\r\n\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n        // For CommonJS and CommonJS-like environments where a proper `window`\r\n        // is present, execute the factory and get vmcore.\r\n        // For environments that do not have a `window` with a `document`\r\n        // (such as Node.js), expose a factory as module.exports.\r\n        // This accentuates the need for the creation of a real `window`.\r\n        // e.g. var vmcore = require(\"vmcore\")(window);\r\n        module.exports = global.document ? factory(global, true) : function(w) {\r\n            if (!w.document) {\r\n                throw new Error(\"vmcore requires a window with a document\")\r\n            }\r\n            return factory(w)\r\n        }\r\n    } else {\r\n        factory(global)\r\n    }\r\n\r\n// Pass this if window is not defined yet\r\n}(typeof window !== \"undefined\" ? window : this, function(window, noGlobal){\r\n\r\n/*********************************************************************\r\n *                    全局变量及方法                                  *\r\n **********************************************************************/\r\nvar expose = new Date() - 0\r\n//http://stackoverflow.com/questions/7290086/javascript-use-strict-and-nicks-find-global-function\r\nvar DOC = window.document\r\nvar head = DOC.getElementsByTagName(\"head\")[0] //HEAD元素\r\nvar ifGroup = head.insertBefore(document.createElement(\"vmcore\"), head.firstChild) //避免IE6 base标签BUG\r\nifGroup.innerHTML = \"X<style id='vmcoreStyle'>.vmcoreHide{ display: none!important }</style>\"\r\nifGroup.setAttribute(\"vm-skip\", \"1\")\r\nifGroup.className = \"vmcoreHide\"\r\nvar rnative = /\\[native code\\]/ //判定是否原生函数\r\nfunction log() {\r\n    if (window.console && vmcore.config.debug) {\r\n        // http://stackoverflow.com/questions/8785624/how-to-safely-wrap-console-log\r\n        Function.apply.call(console.log, console, arguments)\r\n    }\r\n}\r\n\r\n\r\nvar subscribers = \"$\" + expose\r\nvar otherRequire = window.require\r\nvar otherDefine = window.define\r\nvar innerRequire\r\nvar stopRepeatAssign = false\r\nvar rword = /[^, ]+/g //切割字符串为一个个小块，以空格或豆号分开它们，结合replace实现字符串的forEach\r\nvar rcomplexType = /^(?:object|array)$/\r\nvar rsvg = /^\\[object SVG\\w*Element\\]$/\r\nvar rwindow = /^\\[object (?:Window|DOMWindow|global)\\]$/\r\nvar oproto = Object.prototype\r\nvar ohasOwn = oproto.hasOwnProperty\r\nvar serialize = oproto.toString\r\nvar ap = Array.prototype\r\nvar aslice = ap.slice\r\nvar Registry = {} //将函数曝光到此对象上，方便访问器收集依赖\r\nvar W3C = window.dispatchEvent\r\nvar root = DOC.documentElement\r\nvar hyperspace = DOC.createDocumentFragment()\r\nvar cinerator = DOC.createElement(\"div\")\r\nvar class2type = {}\r\n\"Boolean Number String Function Array Date RegExp Object Error\".replace(rword, function(name) {\r\n    class2type[\"[object \" + name + \"]\"] = name.toLowerCase()\r\n})\r\n\r\n\r\nfunction noop() {\r\n}\r\n\r\n\r\nfunction oneObject(array, val) {\r\n    if (typeof array === \"string\") {\r\n        array = array.match(rword) || []\r\n    }\r\n    var result = {},\r\n            value = val !== void 0 ? val : 1\r\n    for (var i = 0, n = array.length; i < n; i++) {\r\n        result[array[i]] = value\r\n    }\r\n    return result\r\n}\r\n\r\n//生成UUID http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\r\nvar generateID = function(prefix) {\r\n    prefix = prefix || \"vmcore\"\r\n    return (prefix + Math.random() + Math.random()).replace(/0\\./g, \"\")\r\n}\r\nfunction IE() {\r\n    if (window.VBArray) {\r\n        var mode = document.documentMode\r\n        return mode ? mode : window.XMLHttpRequest ? 7 : 6\r\n    } else {\r\n        return 0\r\n    }\r\n}\r\nvar IEVersion = IE()\r\n\r\nvmcore = function(el) { //创建jQuery式的无new 实例化结构\r\n    return new vmcore.init(el)\r\n}\r\n\r\n/*视浏览器情况采用最快的异步回调*/\r\nvmcore.nextTick = new function() {// jshint ignore:line\r\n    var tickImmediate = window.setImmediate\r\n    var tickObserver = window.MutationObserver\r\n    var tickPost = W3C && window.postMessage\r\n    if (tickImmediate) {\r\n        return tickImmediate.bind(window)\r\n    }\r\n\r\n    var queue = []\r\n    function callback() {\r\n        var n = queue.length\r\n        for (var i = 0; i < n; i++) {\r\n            queue[i]()\r\n        }\r\n        queue = queue.slice(n)\r\n    }\r\n\r\n    if (tickObserver) {\r\n        var node = document.createTextNode(\"vmcore\")\r\n        new tickObserver(callback).observe(node, {characterData: true})// jshint ignore:line\r\n        return function(fn) {\r\n            queue.push(fn)\r\n            node.data = Math.random()\r\n        }\r\n    }\r\n\r\n    if (tickPost) {\r\n        window.addEventListener(\"message\", function(e) {\r\n            var source = e.source\r\n            if ((source === window || source === null) && e.data === \"process-tick\") {\r\n                e.stopPropagation()\r\n                callback()\r\n            }\r\n        })\r\n\r\n        return function(fn) {\r\n            queue.push(fn)\r\n            window.postMessage('process-tick', '*')\r\n        }\r\n    }\r\n\r\n    return function(fn) {\r\n        setTimeout(fn, 0)\r\n    }\r\n}// jshint ignore:line\r\n/*********************************************************************\r\n *                 vmcore的静态方法定义区                              *\r\n **********************************************************************/\r\nvmcore.init = function(el) {\r\n    this[0] = this.element = el\r\n}\r\nvmcore.fn = vmcore.prototype = vmcore.init.prototype\r\n\r\nvmcore.type = function(obj) { //取得目标的类型\r\n    if (obj == null) {\r\n        return String(obj)\r\n    }\r\n    // 早期的webkit内核浏览器实现了已废弃的ecma262v4标准，可以将正则字面量当作函数使用，因此typeof在判定正则时会返回function\r\n    return typeof obj === \"object\" || typeof obj === \"function\" ?\r\n            class2type[serialize.call(obj)] || \"object\" :\r\n            typeof obj\r\n}\r\n\r\nvar isFunction = typeof alert === \"object\" ? function(fn) {\r\n    try {\r\n        return /^\\s*\\bfunction\\b/.test(fn + \"\")\r\n    } catch (e) {\r\n        return false\r\n    }\r\n} : function(fn) {\r\n    return serialize.call(fn) === \"[object Function]\"\r\n}\r\nvmcore.isFunction = isFunction\r\n\r\nvmcore.isWindow = function(obj) {\r\n    if (!obj)\r\n        return false\r\n    // 利用IE678 window == document为true,document == window竟然为false的神奇特性\r\n    // 标准浏览器及IE9，IE10等使用 正则检测\r\n    return obj == obj.document && obj.document != obj //jshint ignore:line\r\n}\r\n\r\nfunction isWindow(obj) {\r\n    return rwindow.test(serialize.call(obj))\r\n}\r\nif (isWindow(window)) {\r\n    vmcore.isWindow = isWindow\r\n}\r\nvar enu\r\nfor (enu in vmcore({})) {\r\n    break\r\n}\r\nvar enumerateBUG = enu !== \"0\" //IE6下为true, 其他为false\r\n/*判定是否是一个朴素的javascript对象（Object），不是DOM对象，不是BOM对象，不是自定义类的实例*/\r\nvmcore.isPlainObject = function(obj, key) {\r\n    if (!obj || vmcore.type(obj) !== \"object\" || obj.nodeType || vmcore.isWindow(obj)) {\r\n        return false;\r\n    }\r\n    try { //IE内置对象没有constructor\r\n        if (obj.constructor && !ohasOwn.call(obj, \"constructor\") && !ohasOwn.call(obj.constructor.prototype, \"isPrototypeOf\")) {\r\n            return false;\r\n        }\r\n    } catch (e) { //IE8 9会在这里抛错\r\n        return false;\r\n    }\r\n    if (enumerateBUG) {\r\n        for (key in obj) {\r\n            return ohasOwn.call(obj, key)\r\n        }\r\n    }\r\n    for (key in obj) {\r\n    }\r\n    return key === void 0 || ohasOwn.call(obj, key)\r\n}\r\nif (rnative.test(Object.getPrototypeOf)) {\r\n    vmcore.isPlainObject = function(obj) {\r\n        // 简单的 typeof obj === \"object\"检测，会致使用isPlainObject(window)在opera下通不过\r\n        return serialize.call(obj) === \"[object Object]\" && Object.getPrototypeOf(obj) === oproto\r\n    }\r\n}\r\n//与jQuery.extend方法，可用于浅拷贝，深拷贝\r\nvmcore.mix = vmcore.fn.mix = function() {\r\n    var options, name, src, copy, copyIsArray, clone,\r\n            target = arguments[0] || {},\r\n            i = 1,\r\n            length = arguments.length,\r\n            deep = false\r\n\r\n    // 如果第一个参数为布尔,判定是否深拷贝\r\n    if (typeof target === \"boolean\") {\r\n        deep = target\r\n        target = arguments[1] || {}\r\n        i++\r\n    }\r\n\r\n    //确保接受方为一个复杂的数据类型\r\n    if (typeof target !== \"object\" && !isFunction(target)) {\r\n        target = {}\r\n    }\r\n\r\n    //如果只有一个参数，那么新成员添加于mix所在的对象上\r\n    if (i === length) {\r\n        target = this\r\n        i--\r\n    }\r\n\r\n    for (; i < length; i++) {\r\n        //只处理非空参数\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name]\r\n                try {\r\n                    copy = options[name] //当options为VBS对象时报错\r\n                } catch (e) {\r\n                    continue\r\n                }\r\n\r\n                // 防止环引用\r\n                if (target === copy) {\r\n                    continue\r\n                }\r\n                if (deep && copy && (vmcore.isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\r\n\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false\r\n                        clone = src && Array.isArray(src) ? src : []\r\n\r\n                    } else {\r\n                        clone = src && vmcore.isPlainObject(src) ? src : {}\r\n                    }\r\n\r\n                    target[name] = vmcore.mix(deep, clone, copy)\r\n                } else if (copy !== void 0) {\r\n                    target[name] = copy\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target\r\n}\r\n\r\nfunction _number(a, len) { //用于模拟slice, splice的效果\r\n    a = Math.floor(a) || 0\r\n    return a < 0 ? Math.max(len + a, 0) : Math.min(a, len);\r\n}\r\nvmcore.mix({\r\n    rword: rword,\r\n    subscribers: subscribers,\r\n    version: 1.42,\r\n    ui: {},\r\n    log: log,\r\n    slice: W3C ? function(nodes, start, end) {\r\n        return aslice.call(nodes, start, end)\r\n    } : function(nodes, start, end) {\r\n        var ret = []\r\n        var len = nodes.length\r\n        if (end === void 0)\r\n            end = len\r\n        if (typeof end === \"number\" && isFinite(end)) {\r\n            start = _number(start, len)\r\n            end = _number(end, len)\r\n            for (var i = start; i < end; ++i) {\r\n                ret[i - start] = nodes[i]\r\n            }\r\n        }\r\n        return ret\r\n    },\r\n    noop: noop,\r\n    /*如果不用Error对象封装一下，str在控制台下可能会乱码*/\r\n    error: function(str, e) {\r\n        throw  (e || Error)(str)\r\n    },\r\n    /*将一个以空格或逗号隔开的字符串或数组,转换成一个键值都为1的对象*/\r\n    oneObject: oneObject,\r\n    /* vmcore.range(10)\r\n     => [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\r\n     vmcore.range(1, 11)\r\n     => [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n     vmcore.range(0, 30, 5)\r\n     => [0, 5, 10, 15, 20, 25]\r\n     vmcore.range(0, -10, -1)\r\n     => [0, -1, -2, -3, -4, -5, -6, -7, -8, -9]\r\n     vmcore.range(0)\r\n     => []*/\r\n    range: function(start, end, step) { // 用于生成整数数组\r\n        step || (step = 1)\r\n        if (end == null) {\r\n            end = start || 0\r\n            start = 0\r\n        }\r\n        var index = -1,\r\n                length = Math.max(0, Math.ceil((end - start) / step)),\r\n                result = new Array(length)\r\n        while (++index < length) {\r\n            result[index] = start\r\n            start += step\r\n        }\r\n        return result\r\n    },\r\n    eventHooks: {},\r\n    /*绑定事件*/\r\n    bind: function(el, type, fn, phase) {\r\n        var hooks = vmcore.eventHooks\r\n        var hook = hooks[type]\r\n        if (typeof hook === \"object\") {\r\n            type = hook.type\r\n            if (hook.deel) {\r\n                 fn = hook.deel(el, type, fn, phase)\r\n            }\r\n        }\r\n        var callback = W3C ? fn : function(e) {\r\n            fn.call(el, fixEvent(e));\r\n        }\r\n        if (W3C) {\r\n            el.addEventListener(type, callback, !!phase)\r\n        } else {\r\n            el.attachEvent(\"on\" + type, callback)\r\n        }\r\n        return callback\r\n    },\r\n    /*卸载事件*/\r\n    unbind: function(el, type, fn, phase) {\r\n        var hooks = vmcore.eventHooks\r\n        var hook = hooks[type]\r\n        var callback = fn || noop\r\n        if (typeof hook === \"object\") {\r\n            type = hook.type\r\n            if (hook.deel) {\r\n                fn = hook.deel(el, type, fn, false)\r\n            }\r\n        }\r\n        if (W3C) {\r\n            el.removeEventListener(type, callback, !!phase)\r\n        } else {\r\n            el.detachEvent(\"on\" + type, callback)\r\n        }\r\n    },\r\n    /*读写删除元素节点的样式*/\r\n    css: function(node, name, value) {\r\n        if (node instanceof vmcore) {\r\n            node = node[0]\r\n        }\r\n        var prop = /[_-]/.test(name) ? camelize(name) : name, fn\r\n        name = vmcore.cssName(prop) || prop\r\n        if (value === void 0 || typeof value === \"boolean\") { //获取样式\r\n            fn = cssHooks[prop + \":get\"] || cssHooks[\"@:get\"]\r\n            if (name === \"background\") {\r\n                name = \"backgroundColor\"\r\n            }\r\n            var val = fn(node, name)\r\n            return value === true ? parseFloat(val) || 0 : val\r\n        } else if (value === \"\") { //请除样式\r\n            node.style[name] = \"\"\r\n        } else { //设置样式\r\n            if (value == null || value !== value) {\r\n                return\r\n            }\r\n            if (isFinite(value) && !vmcore.cssNumber[prop]) {\r\n                value += \"px\"\r\n            }\r\n            fn = cssHooks[prop + \":set\"] || cssHooks[\"@:set\"]\r\n            fn(node, name, value)\r\n        }\r\n    },\r\n    /*遍历数组与对象,回调的第一个参数为索引或键名,第二个或元素或键值*/\r\n    each: function(obj, fn) {\r\n        if (obj) { //排除null, undefined\r\n            var i = 0\r\n            if (isArrayLike(obj)) {\r\n                for (var n = obj.length; i < n; i++) {\r\n                    if (fn(i, obj[i]) === false)\r\n                        break\r\n                }\r\n            } else {\r\n                for (i in obj) {\r\n                    if (obj.hasOwnProperty(i) && fn(i, obj[i]) === false) {\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //收集元素的data-{{prefix}}-*属性，并转换为对象\r\n    getWidgetData: function(elem, prefix) {\r\n        var raw = vmcore(elem).data()\r\n        var result = {}\r\n        for (var i in raw) {\r\n            if (i.indexOf(prefix) === 0) {\r\n                result[i.replace(prefix, \"\").replace(/\\w/, function(a) {\r\n                    return a.toLowerCase()\r\n                })] = raw[i]\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    Array: {\r\n        /*只有当前数组不存在此元素时只添加它*/\r\n        ensure: function(target, item) {\r\n            if (target.indexOf(item) === -1) {\r\n                return target.push(item)\r\n            }\r\n        },\r\n        /*移除数组中指定位置的元素，返回布尔表示成功与否*/\r\n        removeAt: function(target, index) {\r\n            return !!target.splice(index, 1).length\r\n        },\r\n        /*移除数组中第一个匹配传参的那个元素，返回布尔表示成功与否*/\r\n        remove: function(target, item) {\r\n            var index = target.indexOf(item)\r\n            if (~index)\r\n                return vmcore.Array.removeAt(target, index)\r\n            return false\r\n        }\r\n    }\r\n})\r\n\r\nvar bindingHandlers = vmcore.bindingHandlers = {}\r\nvar bindingExecutors = vmcore.bindingExecutors = {}\r\n\r\n/*判定是否类数组，如节点集合，纯数组，arguments与拥有非负整数的length属性的纯JS对象*/\r\nfunction isArrayLike(obj) {\r\n    if (!obj)\r\n        return false\r\n    var n = obj.length\r\n    if (n === (n >>> 0)) { //检测length属性是否为非负整数\r\n        var type = serialize.call(obj).slice(8, -1)\r\n        if (/(?:regexp|string|function|window|global)$/i.test(type))\r\n            return false\r\n        if (type === \"Array\")\r\n            return true\r\n        try {\r\n            if ({}.propertyIsEnumerable.call(obj, \"length\") === false) { //如果是原生对象\r\n                return  /^\\s?function/.test(obj.item || obj.callee)\r\n            }\r\n            return true\r\n        } catch (e) { //IE的NodeList直接抛错\r\n            return !obj.window //IE6-8 window\r\n        }\r\n    }\r\n    return false\r\n}\r\n\r\n\r\n// https://github.com/rsms/js-lru\r\nvar Cache = new function() {// jshint ignore:line\r\n    function LRU(maxLength) {\r\n        this.size = 0\r\n        this.limit = maxLength\r\n        this.head = this.tail = void 0\r\n        this._keymap = {}\r\n    }\r\n\r\n    var p = LRU.prototype\r\n\r\n    p.put = function(key, value) {\r\n        var entry = {\r\n            key: key,\r\n            value: value\r\n        }\r\n        this._keymap[key] = entry\r\n        if (this.tail) {\r\n            this.tail.newer = entry\r\n            entry.older = this.tail\r\n        } else {\r\n            this.head = entry\r\n        }\r\n        this.tail = entry\r\n        if (this.size === this.limit) {\r\n            this.shift()\r\n        } else {\r\n            this.size++\r\n        }\r\n        return value\r\n    }\r\n\r\n    p.shift = function() {\r\n        var entry = this.head\r\n        if (entry) {\r\n            this.head = this.head.newer\r\n            this.head.older =\r\n                    entry.newer =\r\n                    entry.older =\r\n                    this._keymap[entry.key] = void 0\r\n        }\r\n    }\r\n    p.get = function(key) {\r\n        var entry = this._keymap[key]\r\n        if (entry === void 0)\r\n            return\r\n        if (entry === this.tail) {\r\n            return  entry.value\r\n        }\r\n        // HEAD--------------TAIL\r\n        //   <.older   .newer>\r\n        //  <--- add direction --\r\n        //   A  B  C  <D>  E\r\n        if (entry.newer) {\r\n            if (entry === this.head) {\r\n                this.head = entry.newer\r\n            }\r\n            entry.newer.older = entry.older // C <-- E.\r\n        }\r\n        if (entry.older) {\r\n            entry.older.newer = entry.newer // C. --> E\r\n        }\r\n        entry.newer = void 0 // D --x\r\n        entry.older = this.tail // D. --> E\r\n        if (this.tail) {\r\n            this.tail.newer = entry // E. <-- D\r\n        }\r\n        this.tail = entry\r\n        return entry.value\r\n    }\r\n    return LRU\r\n}// jshint ignore:line\r\n\r\n/*********************************************************************\r\n *                         javascript 底层补丁                       *\r\n **********************************************************************/\r\nif (!\"金戈铁马\".trim) {\r\n    var rtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g\r\n    String.prototype.trim = function () {\r\n        return this.replace(rtrim, \"\")\r\n    }\r\n}\r\nvar hasDontEnumBug = !({\r\n    'toString': null\r\n}).propertyIsEnumerable('toString'),\r\n        hasProtoEnumBug = (function () {\r\n        }).propertyIsEnumerable('prototype'),\r\n        dontEnums = [\r\n            \"toString\",\r\n            \"toLocaleString\",\r\n            \"valueOf\",\r\n            \"hasOwnProperty\",\r\n            \"isPrototypeOf\",\r\n            \"propertyIsEnumerable\",\r\n            \"constructor\"\r\n        ],\r\n        dontEnumsLength = dontEnums.length;\r\nif (!Object.keys) {\r\n    Object.keys = function (object) { //ecma262v5 15.2.3.14\r\n        var theKeys = [];\r\n        var skipProto = hasProtoEnumBug && typeof object === \"function\"\r\n        if (typeof object === \"string\" || (object && object.callee)) {\r\n            for (var i = 0; i < object.length; ++i) {\r\n                theKeys.push(String(i))\r\n            }\r\n        } else {\r\n            for (var name in object) {\r\n                if (!(skipProto && name === \"prototype\") && ohasOwn.call(object, name)) {\r\n                    theKeys.push(String(name))\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hasDontEnumBug) {\r\n            var ctor = object.constructor,\r\n                    skipConstructor = ctor && ctor.prototype === object;\r\n            for (var j = 0; j < dontEnumsLength; j++) {\r\n                var dontEnum = dontEnums[j]\r\n                if (!(skipConstructor && dontEnum === \"constructor\") && ohasOwn.call(object, dontEnum)) {\r\n                    theKeys.push(dontEnum)\r\n                }\r\n            }\r\n        }\r\n        return theKeys\r\n    }\r\n}\r\nif (!Array.isArray) {\r\n    Array.isArray = function (a) {\r\n        return serialize.call(a) === \"[object Array]\"\r\n    }\r\n}\r\n\r\nif (!noop.bind) {\r\n    Function.prototype.bind = function (scope) {\r\n        if (arguments.length < 2 && scope === void 0)\r\n            return this\r\n        var fn = this,\r\n                argv = arguments\r\n        return function () {\r\n            var args = [],\r\n                    i\r\n            for (i = 1; i < argv.length; i++)\r\n                args.push(argv[i])\r\n            for (i = 0; i < arguments.length; i++)\r\n                args.push(arguments[i])\r\n            return fn.apply(scope, args)\r\n        }\r\n    }\r\n}\r\n\r\nfunction iterator(vars, body, ret) {\r\n    var fun = 'for(var ' + vars + 'i=0,n = this.length; i < n; i++){' + body.replace('_', '((i in this) && fn.call(scope,this[i],i,this))') + '}' + ret\r\n    /* jshint ignore:start */\r\n    return Function(\"fn,scope\", fun)\r\n    /* jshint ignore:end */\r\n}\r\nif (!rnative.test([].map)) {\r\n    vmcore.mix(ap, {\r\n        //定位操作，返回数组中第一个等于给定参数的元素的索引值。\r\n        indexOf: function (item, index) {\r\n            var n = this.length,\r\n                    i = ~~index\r\n            if (i < 0)\r\n                i += n\r\n            for (; i < n; i++)\r\n                if (this[i] === item)\r\n                    return i\r\n            return -1\r\n        },\r\n        //定位操作，同上，不过是从后遍历。\r\n        lastIndexOf: function (item, index) {\r\n            var n = this.length,\r\n                    i = index == null ? n - 1 : index\r\n            if (i < 0)\r\n                i = Math.max(0, n + i)\r\n            for (; i >= 0; i--)\r\n                if (this[i] === item)\r\n                    return i\r\n            return -1\r\n        },\r\n        //迭代操作，将数组的元素挨个儿传入一个函数中执行。Prototype.js的对应名字为each。\r\n        forEach: iterator(\"\", '_', \"\"),\r\n        //迭代类 在数组中的每个项上运行一个函数，如果此函数的值为真，则此元素作为新数组的元素收集起来，并返回新数组\r\n        filter: iterator('r=[],j=0,', 'if(_)r[j++]=this[i]', 'return r'),\r\n        //收集操作，将数组的元素挨个儿传入一个函数中执行，然后把它们的返回值组成一个新数组返回。Prototype.js的对应名字为collect。\r\n        map: iterator('r=[],', 'r[i]=_', 'return r'),\r\n        //只要数组中有一个元素满足条件（放进给定函数返回true），那么它就返回true。Prototype.js的对应名字为any。\r\n        some: iterator(\"\", 'if(_)return true', 'return false'),\r\n        //只有数组中的元素都满足条件（放进给定函数返回true），它才返回true。Prototype.js的对应名字为all。\r\n        every: iterator(\"\", 'if(!_)return false', 'return true')\r\n    })\r\n}\r\n/*********************************************************************\r\n *                           DOM 底层补丁                             *\r\n **********************************************************************/\r\n\r\nfunction fixContains(root, el) {\r\n    try { //IE6-8,游离于DOM树外的文本节点，访问parentNode有时会抛错\r\n        while ((el = el.parentNode))\r\n            if (el === root)\r\n                return true\r\n        return false\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\nvmcore.contains = fixContains\r\n//IE6-11的文档对象没有contains\r\nif (!DOC.contains) {\r\n    DOC.contains = function (b) {\r\n        return fixContains(DOC, b)\r\n    }\r\n}\r\n\r\nfunction outerHTML() {\r\n    return new XMLSerializer().serializeToString(this)\r\n}\r\n\r\nif (window.SVGElement) {\r\n    //safari5+是把contains方法放在Element.prototype上而不是Node.prototype\r\n    if (!DOC.createTextNode(\"x\").contains) {\r\n        Node.prototype.contains = function (arg) {//IE6-8没有Node对象\r\n            return !!(this.compareDocumentPosition(arg) & 16)\r\n        }\r\n    }\r\n    var svgns = \"http://www.w3.org/2000/svg\"\r\n    var svg = DOC.createElementNS(svgns, \"svg\")\r\n    svg.innerHTML = '<circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\" />'\r\n    if (!rsvg.test(svg.firstChild)) { // #409\r\n        function enumerateNode(node, targetNode) {// jshint ignore:line\r\n            if (node && node.childNodes) {\r\n                var nodes = node.childNodes\r\n                for (var i = 0, el; el = nodes[i++]; ) {\r\n                    if (el.tagName) {\r\n                        var svg = DOC.createElementNS(svgns,\r\n                                el.tagName.toLowerCase())\r\n                        ap.forEach.call(el.attributes, function (attr) {\r\n                            svg.setAttribute(attr.name, attr.value) //复制属性\r\n                        })// jshint ignore:line\r\n                        // 递归处理子节点\r\n                        enumerateNode(el, svg)\r\n                        targetNode.appendChild(svg)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        Object.defineProperties(SVGElement.prototype, {\r\n            \"outerHTML\": {//IE9-11,firefox不支持SVG元素的innerHTML,outerHTML属性\r\n                enumerable: true,\r\n                configurable: true,\r\n                get: outerHTML,\r\n                set: function (html) {\r\n                    var tagName = this.tagName.toLowerCase(),\r\n                            par = this.parentNode,\r\n                            frag = vmcore.parseHTML(html)\r\n                    // 操作的svg，直接插入\r\n                    if (tagName === \"svg\") {\r\n                        par.insertBefore(frag, this)\r\n                        // svg节点的子节点类似\r\n                    } else {\r\n                        var newFrag = DOC.createDocumentFragment()\r\n                        enumerateNode(frag, newFrag)\r\n                        par.insertBefore(newFrag, this)\r\n                    }\r\n                    par.removeChild(this)\r\n                }\r\n            },\r\n            \"innerHTML\": {\r\n                enumerable: true,\r\n                configurable: true,\r\n                get: function () {\r\n                    var s = this.outerHTML\r\n                    var ropen = new RegExp(\"<\" + this.nodeName + '\\\\b(?:([\"\\'])[^\"]*?(\\\\1)|[^>])*>', \"i\")\r\n                    var rclose = new RegExp(\"<\\/\" + this.nodeName + \">$\", \"i\")\r\n                    return s.replace(ropen, \"\").replace(rclose, \"\")\r\n                },\r\n                set: function (html) {\r\n                    if (vmcore.clearHTML) {\r\n                        vmcore.clearHTML(this)\r\n                        var frag = vmcore.parseHTML(html)\r\n                        enumerateNode(frag, this)\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\nif (!root.outerHTML && window.HTMLElement) { //firefox 到11时才有outerHTML\r\n    HTMLElement.prototype.__defineGetter__(\"outerHTML\", outerHTML);\r\n}\r\n\r\n//============================= event binding =======================\r\nvar rmouseEvent = /^(?:mouse|contextmenu|drag)|click/\r\nfunction fixEvent(event) {\r\n    var ret = {}\r\n    for (var i in event) {\r\n        ret[i] = event[i]\r\n    }\r\n    var target = ret.target = event.srcElement\r\n    if (event.type.indexOf(\"key\") === 0) {\r\n        ret.which = event.charCode != null ? event.charCode : event.keyCode\r\n    } else if (rmouseEvent.test(event.type)) {\r\n        var doc = target.ownerDocument || DOC\r\n        var box = doc.compatMode === \"BackCompat\" ? doc.body : doc.documentElement\r\n        ret.pageX = event.clientX + (box.scrollLeft >> 0) - (box.clientLeft >> 0)\r\n        ret.pageY = event.clientY + (box.scrollTop >> 0) - (box.clientTop >> 0)\r\n        ret.wheelDeltaY = ret.wheelDelta\r\n        ret.wheelDeltaX = 0\r\n    }\r\n    ret.timeStamp = new Date() - 0\r\n    ret.originalEvent = event\r\n    ret.preventDefault = function () { //阻止默认行为\r\n        event.returnValue = false\r\n    }\r\n    ret.stopPropagation = function () { //阻止事件在DOM树中的传播\r\n        event.cancelBubble = true\r\n    }\r\n    return ret\r\n}\r\n\r\nvar eventHooks = vmcore.eventHooks\r\n//针对firefox, chrome修正mouseenter, mouseleave\r\nif (!(\"onmouseenter\" in root)) {\r\n    vmcore.each({\r\n        mouseenter: \"mouseover\",\r\n        mouseleave: \"mouseout\"\r\n    }, function (origType, fixType) {\r\n        eventHooks[origType] = {\r\n            type: fixType,\r\n            deel: function (elem, _, fn) {\r\n                return function (e) {\r\n                    var t = e.relatedTarget\r\n                    if (!t || (t !== elem && !(elem.compareDocumentPosition(t) & 16))) {\r\n                        delete e.type\r\n                        e.type = origType\r\n                        return fn.call(elem, e)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n//针对IE9+, w3c修正animationend\r\nvmcore.each({\r\n    AnimationEvent: \"animationend\",\r\n    WebKitAnimationEvent: \"webkitAnimationEnd\"\r\n}, function (construct, fixType) {\r\n    if (window[construct] && !eventHooks.animationend) {\r\n        eventHooks.animationend = {\r\n            type: fixType\r\n        }\r\n    }\r\n})\r\n//针对IE6-8修正input\r\nif (!(\"oninput\" in DOC.createElement(\"input\"))) {\r\n    eventHooks.input = {\r\n        type: \"propertychange\",\r\n        deel: function (elem, _, fn) {\r\n            return function (e) {\r\n                if (e.propertyName === \"value\") {\r\n                    e.type = \"input\"\r\n                    return fn.call(elem, e)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nif (DOC.onmousewheel === void 0) {\r\n    /* IE6-11 chrome mousewheel wheelDetla 下 -120 上 120\r\n     firefox DOMMouseScroll detail 下3 上-3\r\n     firefox wheel detlaY 下3 上-3\r\n     IE9-11 wheel deltaY 下40 上-40\r\n     chrome wheel deltaY 下100 上-100 */\r\n    var fixWheelType = DOC.onwheel !== void 0 ? \"wheel\" : \"DOMMouseScroll\"\r\n    var fixWheelDelta = fixWheelType === \"wheel\" ? \"deltaY\" : \"detail\"\r\n    eventHooks.mousewheel = {\r\n        type: fixWheelType,\r\n        deel: function (elem, _, fn) {\r\n            return function (e) {\r\n                e.wheelDeltaY = e.wheelDelta = e[fixWheelDelta] > 0 ? -120 : 120\r\n                e.wheelDeltaX = 0\r\n                if (Object.defineProperty) {\r\n                    Object.defineProperty(e, \"type\", {\r\n                        value: \"mousewheel\"\r\n                    })\r\n                }\r\n                fn.call(elem, e)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/*********************************************************************\r\n *                           配置系统                                 *\r\n **********************************************************************/\r\n\r\nfunction kernel(settings) {\r\n    for (var p in settings) {\r\n        if (!ohasOwn.call(settings, p))\r\n            continue\r\n        var val = settings[p]\r\n        if (typeof kernel.plugins[p] === \"function\") {\r\n            kernel.plugins[p](val)\r\n        } else if (typeof kernel[p] === \"object\") {\r\n            vmcore.mix(kernel[p], val)\r\n        } else {\r\n            kernel[p] = val\r\n        }\r\n    }\r\n    return this\r\n}\r\nvar openTag, closeTag, rexpr, rexprg, rbind, rregexp = /[-.*+?^${}()|[\\]\\/\\\\]/g\r\n\r\nfunction escapeRegExp(target) {\r\n    //http://stevenlevithan.com/regex/xregexp/\r\n    //将字符串安全格式化为正则表达式的源码\r\n    return (target + \"\").replace(rregexp, \"\\\\$&\")\r\n}\r\n\r\nvar plugins = {\r\n    loader: function (builtin) {\r\n        var flag = innerRequire && builtin\r\n        window.require = flag ? innerRequire : otherRequire\r\n        window.define = flag ? innerRequire.define : otherDefine\r\n    },\r\n    interpolate: function (array) {\r\n        openTag = array[0]\r\n        closeTag = array[1]\r\n        if (openTag === closeTag) {\r\n            throw new SyntaxError(\"openTag!==closeTag\")\r\n        } else if (array + \"\" === \"<!--,-->\") {\r\n            kernel.commentInterpolate = true\r\n        } else {\r\n            var test = openTag + \"test\" + closeTag\r\n            cinerator.innerHTML = test\r\n            if (cinerator.innerHTML !== test && cinerator.innerHTML.indexOf(\"&lt;\") > -1) {\r\n                throw new SyntaxError(\"此定界符不合法\")\r\n            }\r\n            cinerator.innerHTML = \"\"\r\n        }\r\n        var o = escapeRegExp(openTag),\r\n                c = escapeRegExp(closeTag)\r\n        rexpr = new RegExp(o + \"(.*?)\" + c)\r\n        rexprg = new RegExp(o + \"(.*?)\" + c, \"g\")\r\n        rbind = new RegExp(o + \".*?\" + c + \"|\\\\svm-\")\r\n    }\r\n}\r\n\r\nkernel.debug = true\r\nkernel.plugins = plugins\r\nkernel.plugins['interpolate']([\"{{\", \"}}\"])\r\nkernel.paths = {}\r\nkernel.shim = {}\r\nkernel.maxRepeatSize = 100\r\nvmcore.config = kernel\r\nvar rvmcore = /(\\w+)\\[(vmcorectrl)=\"(\\S+)\"\\]/\r\nvar findNodes = DOC.querySelectorAll ? function(str) {\r\n    return DOC.querySelectorAll(str)\r\n} : function(str) {\r\n    var match = str.match(rvmcore)\r\n    var all = DOC.getElementsByTagName(match[1])\r\n    var nodes = []\r\n    for (var i = 0, el; el = all[i++]; ) {\r\n        if (el.getAttribute(match[2]) === match[3]) {\r\n            nodes.push(el)\r\n        }\r\n    }\r\n    return nodes\r\n}\r\n/*********************************************************************\r\n *                            事件总线                               *\r\n **********************************************************************/\r\nvar EventBus = {\r\n    $watch: function (type, callback) {\r\n        if (typeof callback === \"function\") {\r\n            var callbacks = this.$events[type]\r\n            if (callbacks) {\r\n                callbacks.push(callback)\r\n            } else {\r\n                this.$events[type] = [callback]\r\n            }\r\n        } else { //重新开始监听此VM的第一重简单属性的变动\r\n            this.$events = this.$watch.backup\r\n        }\r\n        return this\r\n    },\r\n    $unwatch: function (type, callback) {\r\n        var n = arguments.length\r\n        if (n === 0) { //让此VM的所有$watch回调无效化\r\n            this.$watch.backup = this.$events\r\n            this.$events = {}\r\n        } else if (n === 1) {\r\n            this.$events[type] = []\r\n        } else {\r\n            var callbacks = this.$events[type] || []\r\n            var i = callbacks.length\r\n            while (~--i < 0) {\r\n                if (callbacks[i] === callback) {\r\n                    return callbacks.splice(i, 1)\r\n                }\r\n            }\r\n        }\r\n        return this\r\n    },\r\n    $fire: function (type) {\r\n        var special, i, v, callback\r\n        if (/^(\\w+)!(\\S+)$/.test(type)) {\r\n            special = RegExp.$1\r\n            type = RegExp.$2\r\n        }\r\n        var events = this.$events\r\n        if (!events)\r\n            return\r\n        var args = aslice.call(arguments, 1)\r\n        var detail = [type].concat(args)\r\n        if (special === \"all\") {\r\n            for (i in vmcore.vmodels) {\r\n                v = vmcore.vmodels[i]\r\n                if (v !== this) {\r\n                    v.$fire.apply(v, detail)\r\n                }\r\n            }\r\n        } else if (special === \"up\" || special === \"down\") {\r\n            var elements = events.expr ? findNodes(events.expr) : []\r\n            if (elements.length === 0)\r\n                return\r\n            for (i in vmcore.vmodels) {\r\n                v = vmcore.vmodels[i]\r\n                if (v !== this) {\r\n                    if (v.$events.expr) {\r\n                        var eventNodes = findNodes(v.$events.expr)\r\n                        if (eventNodes.length === 0) {\r\n                            continue\r\n                        }\r\n                        //循环两个vmodel中的节点，查找匹配（向上匹配或者向下匹配）的节点并设置标识\r\n                        /* jshint ignore:start */\r\n                        Array.prototype.forEach.call(eventNodes, function (node) {\r\n                            Array.prototype.forEach.call(elements, function (element) {\r\n                                var ok = special === \"down\" ? element.contains(node) : //向下捕获\r\n                                        node.contains(element) //向上冒泡\r\n                                if (ok) {\r\n                                    node._vmcore = v //符合条件的加一个标识\r\n                                }\r\n                            });\r\n                        })\r\n                        /* jshint ignore:end */\r\n                    }\r\n                }\r\n            }\r\n            var nodes = DOC.getElementsByTagName(\"*\") //实现节点排序\r\n            var alls = []\r\n            Array.prototype.forEach.call(nodes, function (el) {\r\n                if (el._vmcore) {\r\n                    alls.push(el._vmcore)\r\n                    el._vmcore = \"\"\r\n                    el.removeAttribute(\"_vmcore\")\r\n                }\r\n            })\r\n            if (special === \"up\") {\r\n                alls.reverse()\r\n            }\r\n            for (i = 0; callback = alls[i++]; ) {\r\n                if (callback.$fire.apply(callback, detail) === false) {\r\n                    break\r\n                }\r\n            }\r\n        } else {\r\n            var callbacks = events[type] || []\r\n            var all = events.$all || []\r\n            for (i = 0; callback = callbacks[i++]; ) {\r\n                if (isFunction(callback))\r\n                    callback.apply(this, args)\r\n            }\r\n            for (i = 0; callback = all[i++]; ) {\r\n                if (isFunction(callback))\r\n                    callback.apply(this, arguments)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*********************************************************************\r\n *                           modelFactory                             *\r\n **********************************************************************/\r\n//vmcore最核心的方法的两个方法之一（另一个是vmcore.scan），返回一个ViewModel(VM)\r\nvar VMODELS = vmcore.vmodels = {} //所有vmodel都储存在这里\r\nvmcore.define = function (id, factory) {\r\n    var $id = id.$id || id\r\n    if (!$id) {\r\n        log(\"warning: vm必须指定$id\")\r\n    }\r\n    if (VMODELS[$id]) {\r\n        log(\"warning: \" + $id + \" 已经存在于vmcore.vmodels中\")\r\n    }\r\n    if (typeof id === \"object\") {\r\n        var model = modelFactory(id)\r\n    } else {\r\n        var scope = {\r\n            $watch: noop\r\n        }\r\n        factory(scope) //得到所有定义\r\n        model = modelFactory(scope) //偷天换日，将scope换为model\r\n        stopRepeatAssign = true\r\n        factory(model)\r\n        stopRepeatAssign = false\r\n    }\r\n    model.$id = $id\r\n    return VMODELS[$id] = model\r\n}\r\n\r\n//一些不需要被监听的属性\r\nvar $$skipArray = String(\"$id,$watch,$unwatch,$fire,$events,$model,$skipArray\").match(rword)\r\n\r\nfunction isObservable(name, value, $skipArray) {\r\n    if (isFunction(value) || value && value.nodeType) {\r\n        return false\r\n    }\r\n    if ($skipArray.indexOf(name) !== -1) {\r\n        return false\r\n    }\r\n    if ($$skipArray.indexOf(name) !== -1) {\r\n        return false\r\n    }\r\n    var $special = $skipArray.$special\r\n    if (name && name.charAt(0) === \"$\" && !$special[name]) {\r\n        return false\r\n    }\r\n    return true\r\n}\r\n//vm-with,vm-each, vm-repeat绑定生成的代理对象储存池\r\nvar midway = {}\r\nfunction getNewValue(accessor, name, value, $vmodel) {\r\n    switch (accessor.type) {\r\n        case 0://计算属性\r\n            var getter = accessor.get\r\n            var setter = accessor.set\r\n            if (isFunction(setter)) {\r\n                var $events = $vmodel.$events\r\n                var lock = $events[name]\r\n                $events[name] = [] //清空回调，防止内部冒泡而触发多次$fire\r\n                setter.call($vmodel, value)\r\n                $events[name] = lock\r\n            }\r\n            return  getter.call($vmodel) //同步$model\r\n        case 1://监控属性\r\n            return value\r\n        case 2://对象属性（包括数组与哈希）\r\n            if (value !== $vmodel.$model[name]) {\r\n                var svmodel = accessor.svmodel = objectFactory($vmodel, name, value, accessor.valueType)\r\n                value = svmodel.$model //同步$model\r\n                var fn = midway[svmodel.$id]\r\n                fn && fn() //同步视图\r\n            }\r\n            return value\r\n    }\r\n}\r\n\r\nvar defineProperty = Object.defineProperty\r\nvar canHideOwn = true\r\n//如果浏览器不支持ecma262v5的Object.defineProperties或者存在BUG，比如IE8\r\n//标准浏览器使用__defineGetter__, __defineSetter__实现\r\ntry {\r\n    defineProperty({}, \"_\", {\r\n        value: \"x\"\r\n    })\r\n    var defineProperties = Object.defineProperties\r\n} catch (e) {\r\n    canHideOwn = false\r\n}\r\nfunction modelFactory(source, $special, $model) {\r\n    if (Array.isArray(source)) {\r\n        var arr = source.concat()\r\n        source.length = 0\r\n        var collection = Collection(source)// jshint ignore:line\r\n        collection.pushArray(arr)\r\n        return collection\r\n    }\r\n    //0 null undefined || Node || VModel(fix IE6-8 createWithProxy $val: val引发的BUG)\r\n    if (!source || source.nodeType > 0 || (source.$id && source.$events)) {\r\n        return source\r\n    }\r\n    if (!Array.isArray(source.$skipArray)) {\r\n        source.$skipArray = []\r\n    }\r\n    source.$skipArray.$special = $special || {} //强制要监听的属性\r\n    var $vmodel = {} //要返回的对象, 它在IE6-8下可能被偷龙转凤\r\n    $model = $model || {} //vmodels.$model属性\r\n    var $events = {} //vmodel.$events属性\r\n    var watchedProperties = {} //监控属性\r\n    var initCallbacks = [] //初始化才执行的函数\r\n    for (var i in source) {\r\n        (function (name, val) {\r\n            $model[name] = val\r\n            if (!isObservable(name, val, source.$skipArray)) {\r\n                return //过滤所有非监控属性\r\n            }\r\n            //总共产生三种accessor\r\n            $events[name] = []\r\n            var valueType = vmcore.type(val)\r\n            var accessor = function (newValue) {\r\n                var name = accessor._name\r\n                var $vmodel = this\r\n                var $model = $vmodel.$model\r\n                var oldValue = $model[name]\r\n                var $events = $vmodel.$events\r\n\r\n                if (arguments.length) {\r\n                    if (stopRepeatAssign) {\r\n                        return\r\n                    }\r\n                    //计算属性与对象属性需要重新计算newValue\r\n                    if (accessor.type !== 1) {\r\n                        newValue = getNewValue(accessor, name, newValue, $vmodel)\r\n                        if (!accessor.type)\r\n                            return\r\n                    }\r\n                    if (!isEqual(oldValue, newValue)) {\r\n                        $model[name] = newValue\r\n                        notifySubscribers($events[name]) //同步视图\r\n                        safeFire($vmodel, name, newValue, oldValue) //触发$watch回调\r\n                    }\r\n                } else {\r\n                    if (accessor.type === 0) { //type 0 计算属性 1 监控属性 2 对象属性\r\n                        //计算属性不需要收集视图刷新函数,都是由其他监控属性代劳\r\n                        newValue = accessor.get.call($vmodel)\r\n                        if (oldValue !== newValue) {\r\n                            $model[name] = newValue\r\n                            //这里不用同步视图\r\n                            safeFire($vmodel, name, newValue, oldValue) //触发$watch回调\r\n                        }\r\n                        return newValue\r\n                    } else {\r\n                        collectSubscribers($events[name]) //收集视图函数\r\n                        return accessor.svmodel || oldValue\r\n                    }\r\n                }\r\n            }\r\n            //总共产生三种accessor\r\n            if (valueType === \"object\" && isFunction(val.get) && Object.keys(val).length <= 2) {\r\n                //第1种为计算属性， 因变量，通过其他监控属性触发其改变\r\n                accessor.set = val.set\r\n                accessor.get = val.get\r\n                accessor.type = 0\r\n                initCallbacks.push(function () {\r\n                    var data = {\r\n                        evaluator: function () {\r\n                            data.type = Math.random(),\r\n                                    data.element = null\r\n                            $model[name] = accessor.get.call($vmodel)\r\n                        },\r\n                        element: head,\r\n                        type: Math.random(),\r\n                        handler: noop,\r\n                        args: []\r\n                    }\r\n                    Registry[expose] = data\r\n                    accessor.call($vmodel)\r\n                    delete Registry[expose]\r\n                })\r\n            } else if (rcomplexType.test(valueType)) {\r\n                //第2种为对象属性，产生子VM与监控数组\r\n                accessor.type = 2\r\n                accessor.valueType = valueType\r\n                initCallbacks.push(function () {\r\n                    var svmodel = modelFactory(val, 0, $model[name])\r\n                    accessor.svmodel = svmodel\r\n                    svmodel.$events[subscribers] = $events[name]\r\n                })\r\n            } else {\r\n                accessor.type = 1\r\n                //第3种为监控属性，对应简单的数据类型，自变量\r\n            }\r\n            accessor._name = name\r\n            watchedProperties[name] = accessor\r\n        })(i, source[i])// jshint ignore:line\r\n    }\r\n\r\n    $$skipArray.forEach(function (name) {\r\n        delete source[name]\r\n        delete $model[name] //这些特殊属性不应该在$model中出现\r\n    })\r\n\r\n    $vmodel = defineProperties($vmodel, descriptorFactory(watchedProperties), source) //生成一个空的ViewModel\r\n    for (var name in source) {\r\n        if (!watchedProperties[name]) {\r\n            $vmodel[name] = source[name]\r\n        }\r\n    }\r\n    //添加$id, $model, $events, $watch, $unwatch, $fire\r\n    $vmodel.$id = generateID()\r\n    $vmodel.$model = $model\r\n    $vmodel.$events = $events\r\n    for (i in EventBus) {\r\n        var fn = EventBus[i]\r\n        if (!W3C) { //在IE6-8下，VB对象的方法里的this并不指向自身，需要用bind处理一下\r\n            fn = fn.bind($vmodel)\r\n        }\r\n        $vmodel[i] = fn\r\n    }\r\n\r\n    if (canHideOwn) {\r\n        Object.defineProperty($vmodel, \"hasOwnProperty\", {\r\n            value: function (name) {\r\n                return name in this.$model\r\n            },\r\n            writable: false,\r\n            enumerable: false,\r\n            configurable: true\r\n        })\r\n\r\n    } else {\r\n        /* jshint ignore:start */\r\n        $vmodel.hasOwnProperty = function (name) {\r\n            return name in $vmodel.$model\r\n        }\r\n        /* jshint ignore:end */\r\n    }\r\n    initCallbacks.forEach(function (cb) { //收集依赖\r\n        cb()\r\n    })\r\n    return $vmodel\r\n}\r\n\r\n//比较两个值是否相等\r\nvar isEqual = Object.is || function (v1, v2) {\r\n    if (v1 === 0 && v2 === 0) {\r\n        return 1 / v1 === 1 / v2\r\n    } else if (v1 !== v1) {\r\n        return v2 !== v2\r\n    } else {\r\n        return v1 === v2\r\n    }\r\n}\r\n\r\nfunction safeFire(a, b, c, d) {\r\n    if (a.$events) {\r\n        EventBus.$fire.call(a, b, c, d)\r\n    }\r\n}\r\n\r\nvar descriptorFactory = W3C ? function (obj) {\r\n    var descriptors = {}\r\n    for (var i in obj) {\r\n        descriptors[i] = {\r\n            get: obj[i],\r\n            set: obj[i],\r\n            enumerable: true,\r\n            configurable: true\r\n        }\r\n    }\r\n    return descriptors\r\n} : function (a) {\r\n    return a\r\n}\r\n\r\n\r\n\r\n//应用于第2种accessor\r\nfunction objectFactory(parent, name, value, valueType) {\r\n    //a为原来的VM， b为新数组或新对象\r\n    var son = parent[name]\r\n    if (valueType === \"array\") {\r\n        if (!Array.isArray(value) || son === value) {\r\n            return son //fix https://github.com/RubyLouvre/vmcore/issues/261\r\n        }\r\n        son._.$unwatch()\r\n        son.clear()\r\n        son._.$watch()\r\n        son.pushArray(value.concat())\r\n        return son\r\n    } else {\r\n        var iterators = parent.$events[name]\r\n        var pool = son.$events.$withProxyPool\r\n        if (pool) {\r\n            recycleProxies(pool, \"with\")\r\n            son.$events.$withProxyPool = null\r\n        }\r\n        var ret = modelFactory(value)\r\n        ret.$events[subscribers] = iterators\r\n        midway[ret.$id] = function (data) {\r\n            while (data = iterators.shift()) {\r\n                (function (el) {\r\n                    vmcore.nextTick(function () {\r\n                        var type = el.type\r\n                        if (type && bindingHandlers[type]) { //#753\r\n                            el.rollback && el.rollback() //还原 vm-with vm-on\r\n                            bindingHandlers[type](el, el.vmodels)\r\n                        }\r\n                    })\r\n                })(data) // jshint ignore:line\r\n            }\r\n            delete midway[ret.$id]\r\n        }\r\n        return ret\r\n    }\r\n}\r\n//===================修复浏览器对Object.defineProperties的支持=================\r\nif (!canHideOwn) {\r\n    if (\"__defineGetter__\" in vmcore) {\r\n        defineProperty = function (obj, prop, desc) {\r\n            if ('value' in desc) {\r\n                obj[prop] = desc.value\r\n            }\r\n            if (\"get\" in desc) {\r\n                obj.__defineGetter__(prop, desc.get)\r\n            }\r\n            if ('set' in desc) {\r\n                obj.__defineSetter__(prop, desc.set)\r\n            }\r\n            return obj\r\n        }\r\n        defineProperties = function (obj, descs) {\r\n            for (var prop in descs) {\r\n                if (descs.hasOwnProperty(prop)) {\r\n                    defineProperty(obj, prop, descs[prop])\r\n                }\r\n            }\r\n            return obj\r\n        }\r\n    }\r\n    if (IEVersion) {\r\n        window.execScript([ // jshint ignore:line\r\n            \"Function parseVB(code)\",\r\n            \"\\tExecuteGlobal(code)\",\r\n            \"End Function\",\r\n            \"Dim VBClassBodies\",\r\n            \"Set VBClassBodies=CreateObject(\\\"Scripting.Dictionary\\\")\",\r\n            \"Function findOrDefineVBClass(name,body)\",\r\n            \"\\tDim found\",\r\n            \"\\tfound=\\\"\\\"\",\r\n            \"\\tFor Each key in VBClassBodies\",\r\n            \"\\t\\tIf body=VBClassBodies.Item(key) Then\",\r\n            \"\\t\\t\\tfound=key\",\r\n            \"\\t\\t\\tExit For\",\r\n            \"\\t\\tEnd If\",\r\n            \"\\tnext\",\r\n            \"\\tIf found=\\\"\\\" Then\",\r\n            \"\\t\\tparseVB(\\\"Class \\\" + name + body)\",\r\n            \"\\t\\tVBClassBodies.Add name, body\",\r\n            \"\\t\\tfound=name\",\r\n            \"\\tEnd If\",\r\n            \"\\tfindOrDefineVBClass=found\",\r\n            \"End Function\"\r\n        ].join(\"\\n\"), \"VBScript\")\r\n        function VBMediator(instance, accessors, name, value) {// jshint ignore:line\r\n            var accessor = accessors[name]\r\n            if (arguments.length === 4) {\r\n                accessor.call(instance, value)\r\n            } else {\r\n                return accessor.call(instance)\r\n            }\r\n        }\r\n        defineProperties = function (name, accessors, properties) {\r\n            var className = \"VBClass\" + setTimeout(\"1\"),// jshint ignore:line\r\n                    buffer = []\r\n            buffer.push(\r\n                    \"\\r\\n\\tPrivate [__data__], [__proxy__]\",\r\n                    \"\\tPublic Default Function [__const__](d, p)\",\r\n                    \"\\t\\tSet [__data__] = d: set [__proxy__] = p\",\r\n                    \"\\t\\tSet [__const__] = Me\", //链式调用\r\n                    \"\\tEnd Function\")\r\n            //添加普通属性,因为VBScript对象不能像JS那样随意增删属性，必须在这里预先定义好\r\n            for (name in properties) {\r\n                if (!accessors.hasOwnProperty(name)) {\r\n                    buffer.push(\"\\tPublic [\" + name + \"]\")\r\n                }\r\n            }\r\n            $$skipArray.forEach(function (name) {\r\n                if (!accessors.hasOwnProperty(name)) {\r\n                    buffer.push(\"\\tPublic [\" + name + \"]\")\r\n                }\r\n            })\r\n            buffer.push(\"\\tPublic [\" + 'hasOwnProperty' + \"]\")\r\n            //添加访问器属性\r\n            for (name in accessors) {\r\n                buffer.push(\r\n                        //由于不知对方会传入什么,因此set, let都用上\r\n                        \"\\tPublic Property Let [\" + name + \"](val\" + expose + \")\", //setter\r\n                        \"\\t\\tCall [__proxy__](Me,[__data__], \\\"\" + name + \"\\\", val\" + expose + \")\",\r\n                        \"\\tEnd Property\",\r\n                        \"\\tPublic Property Set [\" + name + \"](val\" + expose + \")\", //setter\r\n                        \"\\t\\tCall [__proxy__](Me,[__data__], \\\"\" + name + \"\\\", val\" + expose + \")\",\r\n                        \"\\tEnd Property\",\r\n                        \"\\tPublic Property Get [\" + name + \"]\", //getter\r\n                        \"\\tOn Error Resume Next\", //必须优先使用set语句,否则它会误将数组当字符串返回\r\n                        \"\\t\\tSet[\" + name + \"] = [__proxy__](Me,[__data__],\\\"\" + name + \"\\\")\",\r\n                        \"\\tIf Err.Number <> 0 Then\",\r\n                        \"\\t\\t[\" + name + \"] = [__proxy__](Me,[__data__],\\\"\" + name + \"\\\")\",\r\n                        \"\\tEnd If\",\r\n                        \"\\tOn Error Goto 0\",\r\n                        \"\\tEnd Property\")\r\n\r\n            }\r\n\r\n            buffer.push(\"End Class\")\r\n            var code = buffer.join(\"\\r\\n\"),\r\n                    realClassName = window['findOrDefineVBClass'](className, code) //如果该VB类已定义，返回类名。否则用className创建一个新类。\r\n            if (realClassName === className) {\r\n                window.parseVB([\r\n                    \"Function \" + className + \"Factory(a, b)\", //创建实例并传入两个关键的参数\r\n                    \"\\tDim o\",\r\n                    \"\\tSet o = (New \" + className + \")(a, b)\",\r\n                    \"\\tSet \" + className + \"Factory = o\",\r\n                    \"End Function\"\r\n                ].join(\"\\r\\n\"))\r\n            }\r\n            var ret = window[realClassName + \"Factory\"](accessors, VBMediator) //得到其产品\r\n            return ret //得到其产品\r\n        }\r\n    }\r\n}\r\n\r\n/*********************************************************************\r\n *          监控数组（与vm-each, vm-repeat配合使用）                     *\r\n **********************************************************************/\r\n\r\nfunction Collection(model) {\r\n    var array = []\r\n    array.$id = generateID()\r\n    array.$model = model //数据模型\r\n    array.$events = {}\r\n    array.$events[subscribers] = []\r\n    array._ = modelFactory({\r\n        length: model.length\r\n    })\r\n    array._.$watch(\"length\", function (a, b) {\r\n        array.$fire(\"length\", a, b)\r\n    })\r\n    for (var i in EventBus) {\r\n        array[i] = EventBus[i]\r\n    }\r\n    vmcore.mix(array, CollectionPrototype)\r\n    return array\r\n}\r\n\r\nfunction mutateArray(method, pos, n, index, method2, pos2, n2) {\r\n    var oldLen = this.length, loop = 2\r\n    while (--loop) {\r\n        switch (method) {\r\n            case \"add\":\r\n                /* jshint ignore:start */\r\n                var array = this.$model.slice(pos, pos + n).map(function (el) {\r\n                    if (rcomplexType.test(vmcore.type(el))) {\r\n                        return el.$id ? el : modelFactory(el, 0, el)\r\n                    } else {\r\n                        return el\r\n                    }\r\n                })\r\n                /* jshint ignore:end */\r\n                _splice.apply(this, [pos, 0].concat(array))\r\n                this._fire(\"add\", pos, n)\r\n                break\r\n            case \"del\":\r\n                var ret = this._splice(pos, n)\r\n                this._fire(\"del\", pos, n)\r\n                break\r\n        }\r\n        if (method2) {\r\n            method = method2\r\n            pos = pos2\r\n            n = n2\r\n            loop = 2\r\n            method2 = 0\r\n        }\r\n    }\r\n    this._fire(\"index\", index)\r\n    if (this.length !== oldLen) {\r\n        this._.length = this.length\r\n    }\r\n    return ret\r\n}\r\n\r\nvar _splice = ap.splice\r\nvar CollectionPrototype = {\r\n    _splice: _splice,\r\n    _fire: function (method, a, b) {\r\n        notifySubscribers(this.$events[subscribers], method, a, b)\r\n    },\r\n    size: function () { //取得数组长度，这个函数可以同步视图，length不能\r\n        return this._.length\r\n    },\r\n    pushArray: function (array) {\r\n        var m = array.length, n = this.length\r\n        if (m) {\r\n            ap.push.apply(this.$model, array)\r\n            mutateArray.call(this, \"add\", n, m, Math.max(0, n - 1))\r\n        }\r\n        return  m + n\r\n    },\r\n    push: function () {\r\n        //http://jsperf.com/closure-with-arguments\r\n        var array = []\r\n        var i, n = arguments.length\r\n        for (i = 0; i < n; i++) {\r\n            array[i] = arguments[i]\r\n        }\r\n        return this.pushArray(array)\r\n    },\r\n    unshift: function () {\r\n        var m = arguments.length, n = this.length\r\n        if (m) {\r\n            ap.unshift.apply(this.$model, arguments)\r\n            mutateArray.call(this, \"add\", 0, m, 0)\r\n        }\r\n        return  m + n //IE67的unshift不会返回长度\r\n    },\r\n    shift: function () {\r\n        if (this.length) {\r\n            var el = this.$model.shift()\r\n            mutateArray.call(this, \"del\", 0, 1, 0)\r\n            return el //返回被移除的元素\r\n        }\r\n    },\r\n    pop: function () {\r\n        var n = this.length\r\n        if (n) {\r\n            var el = this.$model.pop()\r\n            mutateArray.call(this, \"del\", n - 1, 1, Math.max(0, n - 2))\r\n            return el //返回被移除的元素\r\n        }\r\n    },\r\n    splice: function (start) {\r\n        var m = arguments.length, args = [], change\r\n        var removed = _splice.apply(this.$model, arguments)\r\n        if (removed.length) { //如果用户删掉了元素\r\n            args.push(\"del\", start, removed.length, 0)\r\n            change = true\r\n        }\r\n        if (m > 2) {  //如果用户添加了元素\r\n            if (change) {\r\n                args.splice(3, 1, 0, \"add\", start, m - 2)\r\n            } else {\r\n                args.push(\"add\", start, m - 2, 0)\r\n            }\r\n            change = true\r\n        }\r\n        if (change) { //返回被移除的元素\r\n            return mutateArray.apply(this, args)\r\n        } else {\r\n            return []\r\n        }\r\n    },\r\n    contains: function (el) { //判定是否包含\r\n        return this.indexOf(el) !== -1\r\n    },\r\n    remove: function (el) { //移除第一个等于给定值的元素\r\n        return this.removeAt(this.indexOf(el))\r\n    },\r\n    removeAt: function (index) { //移除指定索引上的元素\r\n        if (index >= 0) {\r\n            this.$model.splice(index, 1)\r\n            return mutateArray.call(this, \"del\", index, 1, 0)\r\n        }\r\n        return  []\r\n    },\r\n    clear: function () {\r\n        this.$model.length = this.length = this._.length = 0 //清空数组\r\n        this._fire(\"clear\", 0)\r\n        return this\r\n    },\r\n    removeAll: function (all) { //移除N个元素\r\n        if (Array.isArray(all)) {\r\n            all.forEach(function (el) {\r\n                this.remove(el)\r\n            }, this)\r\n        } else if (typeof all === \"function\") {\r\n            for (var i = this.length - 1; i >= 0; i--) {\r\n                var el = this[i]\r\n                if (all(el, i)) {\r\n                    this.removeAt(i)\r\n                }\r\n            }\r\n        } else {\r\n            this.clear()\r\n        }\r\n    },\r\n    ensure: function (el) {\r\n        if (!this.contains(el)) { //只有不存在才push\r\n            this.push(el)\r\n        }\r\n        return this\r\n    },\r\n    set: function (index, val) {\r\n        if (index >= 0) {\r\n            var valueType = vmcore.type(val)\r\n            if (val && val.$model) {\r\n                val = val.$model\r\n            }\r\n            var target = this[index]\r\n            if (valueType === \"object\") {\r\n                for (var i in val) {\r\n                    if (target.hasOwnProperty(i)) {\r\n                        target[i] = val[i]\r\n                    }\r\n                }\r\n            } else if (valueType === \"array\") {\r\n                target.clear().push.apply(target, val)\r\n            } else if (target !== val) {\r\n                this[index] = val\r\n                this.$model[index] = val\r\n                this._fire(\"set\", index, val)\r\n            }\r\n        }\r\n        return this\r\n    }\r\n}\r\n\r\nfunction sortByIndex(array, indexes) {\r\n    var map = {};\r\n    for (var i = 0, n = indexes.length; i < n; i++) {\r\n        map[i] = array[i] // preserve\r\n        var j = indexes[i]\r\n        if (j in map) {\r\n            array[i] = map[j]\r\n            delete map[j]\r\n        } else {\r\n            array[i] = array[j]\r\n        }\r\n    }\r\n}\r\n\r\n\"sort,reverse\".replace(rword, function (method) {\r\n    CollectionPrototype[method] = function () {\r\n        var newArray = this.$model//这是要排序的新数组\r\n        var oldArray = newArray.concat() //保持原来状态的旧数组\r\n        var mask = Math.random()\r\n        var indexes = []\r\n        var hasSort\r\n        ap[method].apply(newArray, arguments) //排序\r\n        for (var i = 0, n = oldArray.length; i < n; i++) {\r\n            var neo = newArray[i]\r\n            var old = oldArray[i]\r\n            if (isEqual(neo, old)) {\r\n                indexes.push(i)\r\n            } else {\r\n                var index = oldArray.indexOf(neo)\r\n                indexes.push(index)//得到新数组的每个元素在旧数组对应的位置\r\n                oldArray[index] = mask    //屏蔽已经找过的元素\r\n                hasSort = true\r\n            }\r\n        }\r\n        if (hasSort) {\r\n            sortByIndex(this, indexes)\r\n            this._fire(\"move\", indexes)\r\n            this._fire(\"index\", 0)\r\n        }\r\n        return this\r\n    }\r\n})\r\n\r\n/*********************************************************************\r\n *                           依赖调度系统                             *\r\n **********************************************************************/\r\nvar ronduplex = /^(duplex|on)$/\r\n\r\nfunction registerSubscriber(data) {\r\n    Registry[expose] = data //暴光此函数,方便collectSubscribers收集\r\n    vmcore.openComputedCollect = true\r\n    var fn = data.evaluator\r\n    if (fn) { //如果是求值函数\r\n        try {\r\n            var c = ronduplex.test(data.type) ? data : fn.apply(0, data.args)\r\n            data.handler(c, data.element, data)\r\n        } catch (e) {\r\n           //log(\"warning:exception throwed in [registerSubscriber] \" + e)\r\n            delete data.evaluator\r\n            var node = data.element\r\n            if (node.nodeType === 3) {\r\n                var parent = node.parentNode\r\n                if (kernel.commentInterpolate) {\r\n                    parent.replaceChild(DOC.createComment(data.value), node)\r\n                } else {\r\n                    node.data = openTag + data.value + closeTag\r\n                }\r\n            }\r\n        }\r\n    }\r\n    vmcore.openComputedCollect = false\r\n    delete Registry[expose]\r\n}\r\n\r\nfunction collectSubscribers(list) { //收集依赖于这个访问器的订阅者\r\n    var data = Registry[expose]\r\n    if (list && data && vmcore.Array.ensure(list, data) && data.element) { //只有数组不存在此元素才push进去\r\n        addSubscribers(data, list)\r\n    }\r\n}\r\n\r\n\r\nfunction addSubscribers(data, list) {\r\n    data.$uuid = data.$uuid || generateID()\r\n    list.$uuid = list.$uuid || generateID()\r\n    var obj = {\r\n        data: data,\r\n        list: list,\r\n        $$uuid:  data.$uuid + list.$uuid\r\n    }\r\n    if (!$$subscribers[obj.$$uuid]) {\r\n        $$subscribers[obj.$$uuid] = 1\r\n        $$subscribers.push(obj)\r\n    }\r\n}\r\n\r\nfunction disposeData(data) {\r\n    data.element = null\r\n    data.rollback && data.rollback()\r\n    for (var key in data) {\r\n        data[key] = null\r\n    }\r\n}\r\n\r\nfunction isRemove(el) {\r\n    try {//IE下，如果文本节点脱离DOM树，访问parentNode会报错\r\n        if (!el.parentNode) {\r\n            return true\r\n        }\r\n    } catch (e) {\r\n        return true\r\n    }\r\n    return el.msRetain ? 0 : (el.nodeType === 1 ? typeof el.sourceIndex === \"number\" ?\r\n            el.sourceIndex === 0 : !root.contains(el) : !vmcore.contains(root, el))\r\n}\r\nvar $$subscribers = vmcore.$$subscribers = []\r\nvar beginTime = new Date()\r\nvar oldInfo = {}\r\nfunction removeSubscribers() {\r\n    var i = $$subscribers.length\r\n    var n = i\r\n    var k = 0\r\n    var obj\r\n    var types = []\r\n    var newInfo = {}\r\n    var needTest = {}\r\n    while (obj = $$subscribers[--i]) {\r\n        var data = obj.data\r\n        var type = data.type\r\n        if (newInfo[type]) {\r\n            newInfo[type]++\r\n        } else {\r\n            newInfo[type] = 1\r\n            types.push(type)\r\n        }\r\n    }\r\n    var diff = false\r\n    types.forEach(function(type) {\r\n        if (oldInfo[type] !== newInfo[type]) {\r\n            needTest[type] = 1\r\n            diff = true\r\n        }\r\n    })\r\n    i = n\r\n    //vmcore.log(\"需要检测的个数 \" + i)\r\n    if (diff) {\r\n        //vmcore.log(\"有需要移除的元素\")\r\n        while (obj = $$subscribers[--i]) {\r\n            data = obj.data\r\n            if (data.element === void 0)\r\n                continue\r\n            if (needTest[data.type] && isRemove(data.element)) { //如果它没有在DOM树\r\n                k++\r\n                $$subscribers.splice(i, 1)\r\n                delete $$subscribers[obj.$$uuid]\r\n                vmcore.Array.remove(obj.list, data)\r\n                //log(\"debug: remove \" + data.type)\r\n                disposeData(data)\r\n                obj.data = obj.list = null\r\n            }\r\n        }\r\n    }\r\n    oldInfo = newInfo\r\n   // vmcore.log(\"已经移除的个数 \" + k)\r\n    beginTime = new Date()\r\n}\r\n\r\nfunction notifySubscribers(list) { //通知依赖于这个访问器的订阅者更新自身\r\n    if (list && list.length) {\r\n        if (new Date() - beginTime > 444 && typeof list[0] === \"object\") {\r\n            removeSubscribers()\r\n        }\r\n        var args = aslice.call(arguments, 1)\r\n        for (var i = list.length, fn; fn = list[--i]; ) {\r\n            var el = fn.element\r\n            if (el && el.parentNode) {\r\n                if (fn.$repeat) {\r\n                    fn.handler.apply(fn, args) //处理监控数组的方法\r\n                } else if (fn.type !== \"on\") { //事件绑定只能由用户触发,不能由程序触发\r\n                    var fun = fn.evaluator || noop\r\n                    fn.handler(fun.apply(0, fn.args || []), el, fn)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/************************************************************************\r\n *            HTML处理(parseHTML, innerHTML, clearHTML)                  *\r\n ************************************************************************/\r\n// We have to close these tags to support XHTML\r\nvar tagHooks = {\r\n    area: [1, \"<map>\", \"</map>\"],\r\n    param: [1, \"<object>\", \"</object>\"],\r\n    col: [2, \"<table><colgroup>\", \"</colgroup></table>\"],\r\n    legend: [1, \"<fieldset>\", \"</fieldset>\"],\r\n    option: [1, \"<select multiple='multiple'>\", \"</select>\"],\r\n    thead: [1, \"<table>\", \"</table>\"],\r\n    tr: [2, \"<table>\", \"</table>\"],\r\n    td: [3, \"<table><tr>\", \"</tr></table>\"],\r\n    g: [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\">', '</svg>'],\r\n    //IE6-8在用innerHTML生成节点时，不能直接创建no-scope元素与HTML5的新标签\r\n    _default: W3C ? [0, \"\", \"\"] : [1, \"X<div>\", \"</div>\"] //div可以不用闭合\r\n}\r\ntagHooks.th = tagHooks.td\r\ntagHooks.optgroup = tagHooks.option\r\ntagHooks.tbody = tagHooks.tfoot = tagHooks.colgroup = tagHooks.caption = tagHooks.thead\r\nString(\"circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use\").replace(rword, function (tag) {\r\n    tagHooks[tag] = tagHooks.g //处理SVG\r\n})\r\nvar rtagName = /<([\\w:]+)/  //取得其tagName\r\nvar rxhtml = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig\r\nvar rcreate = W3C ? /[^\\d\\D]/ : /(<(?:script|link|style|meta|noscript))/ig\r\nvar scriptTypes = oneObject([\"\", \"text/javascript\", \"text/ecmascript\", \"application/ecmascript\", \"application/javascript\"])\r\nvar rnest = /<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/ //需要处理套嵌关系的标签\r\nvar script = DOC.createElement(\"script\")\r\nvar rhtml = /<|&#?\\w+;/\r\nvmcore.parseHTML = function (html) {\r\n    var fragment = hyperspace.cloneNode(false)\r\n    if (typeof html !== \"string\") {\r\n        return fragment\r\n    }\r\n    if (!rhtml.test(html)) {\r\n        fragment.appendChild(DOC.createTextNode(html))\r\n        return fragment\r\n    }\r\n    html = html.replace(rxhtml, \"<$1></$2>\").trim()\r\n    var tag = (rtagName.exec(html) || [\"\", \"\"])[1].toLowerCase(),\r\n            //取得其标签名\r\n            wrap = tagHooks[tag] || tagHooks._default,\r\n            wrapper = cinerator,\r\n            firstChild, neo\r\n    if (!W3C) { //fix IE\r\n        html = html.replace(rcreate, \"<br class=msNoScope>$1\") //在link style script等标签之前添加一个补丁\r\n    }\r\n    wrapper.innerHTML = wrap[1] + html + wrap[2]\r\n    var els = wrapper.getElementsByTagName(\"script\")\r\n    if (els.length) { //使用innerHTML生成的script节点不会发出请求与执行text属性\r\n        for (var i = 0, el; el = els[i++]; ) {\r\n            if (scriptTypes[el.type]) {\r\n                //以偷龙转凤方式恢复执行脚本功能\r\n                neo = script.cloneNode(false) //FF不能省略参数\r\n                ap.forEach.call(el.attributes, function (attr) {\r\n                    if (attr && attr.specified) {\r\n                        neo[attr.name] = attr.value //复制其属性\r\n                        neo.setAttribute(attr.name, attr.value)\r\n                    }\r\n                })  // jshint ignore:line\r\n                neo.text = el.text\r\n                el.parentNode.replaceChild(neo, el) //替换节点\r\n            }\r\n        }\r\n    }\r\n    if (!W3C) { //fix IE\r\n        var target = wrap[1] === \"X<div>\" ? wrapper.lastChild.firstChild : wrapper.lastChild\r\n        if (target && target.tagName === \"TABLE\" && tag !== \"tbody\") {\r\n            //IE6-7处理 <thead> --> <thead>,<tbody>\r\n            //<tfoot> --> <tfoot>,<tbody>\r\n            //<table> --> <table><tbody></table>\r\n            for (els = target.childNodes, i = 0; el = els[i++]; ) {\r\n                if (el.tagName === \"TBODY\" && !el.innerHTML) {\r\n                    target.removeChild(el)\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        els = wrapper.getElementsByTagName(\"br\")\r\n        var n = els.length\r\n        while (el = els[--n]) {\r\n            if (el.className === \"msNoScope\") {\r\n                el.parentNode.removeChild(el)\r\n            }\r\n        }\r\n        for (els = wrapper.all, i = 0; el = els[i++]; ) { //fix VML\r\n            if (isVML(el)) {\r\n                fixVML(el)\r\n            }\r\n        }\r\n    }\r\n    //移除我们为了符合套嵌关系而添加的标签\r\n    for (i = wrap[0]; i--; wrapper = wrapper.lastChild) {\r\n    }\r\n    while (firstChild = wrapper.firstChild) { // 将wrapper上的节点转移到文档碎片上！\r\n        fragment.appendChild(firstChild)\r\n    }\r\n    return fragment\r\n}\r\n\r\nfunction isVML(src) {\r\n    var nodeName = src.nodeName\r\n    return nodeName.toLowerCase() === nodeName && src.scopeName && src.outerText === \"\"\r\n}\r\n\r\nfunction fixVML(node) {\r\n    if (node.currentStyle.behavior !== \"url(#default#VML)\") {\r\n        node.style.behavior = \"url(#default#VML)\"\r\n        node.style.display = \"inline-block\"\r\n        node.style.zoom = 1 //hasLayout\r\n    }\r\n}\r\nvmcore.innerHTML = function (node, html) {\r\n    if (!W3C && (!rcreate.test(html) && !rnest.test(html))) {\r\n        try {\r\n            node.innerHTML = html\r\n            return\r\n        } catch (e) {\r\n        }\r\n    }\r\n    var a = this.parseHTML(html)\r\n    this.clearHTML(node).appendChild(a)\r\n}\r\nvmcore.clearHTML = function (node) {\r\n    node.textContent = \"\"\r\n    while (node.firstChild) {\r\n        node.removeChild(node.firstChild)\r\n    }\r\n    return node\r\n}\r\n\r\n/*********************************************************************\r\n *                           扫描系统                                 *\r\n **********************************************************************/\r\n\r\nvmcore.scan = function(elem, vmodel, group) {\r\n    elem = elem || root\r\n    var vmodels = vmodel ? [].concat(vmodel) : []\r\n    scanTag(elem, vmodels)\r\n}\r\n\r\n//http://www.w3.org/TR/html5/syntax.html#void-elements\r\nvar stopScan = oneObject(\"area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea\".toUpperCase())\r\n\r\nfunction checkScan(elem, callback, innerHTML) {\r\n    var id = setTimeout(function() {\r\n        var currHTML = elem.innerHTML\r\n        clearTimeout(id)\r\n        if (currHTML === innerHTML) {\r\n            callback()\r\n        } else {\r\n            checkScan(elem, callback, currHTML)\r\n        }\r\n    })\r\n}\r\n\r\n\r\nfunction createSignalTower(elem, vmodel) {\r\n    var id = elem.getAttribute(\"vmcorectrl\") || vmodel.$id\r\n    elem.setAttribute(\"vmcorectrl\", id)\r\n    vmodel.$events.expr = elem.tagName + '[vmcorectrl=\"' + id + '\"]'\r\n}\r\n\r\nvar getBindingCallback = function(elem, name, vmodels) {\r\n    var callback = elem.getAttribute(name)\r\n    if (callback) {\r\n        for (var i = 0, vm; vm = vmodels[i++]; ) {\r\n            if (vm.hasOwnProperty(callback) && typeof vm[callback] === \"function\") {\r\n                return vm[callback]\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction executeBindings(bindings, vmodels) {\r\n    for (var i = 0, data; data = bindings[i++]; ) {\r\n        data.vmodels = vmodels\r\n        bindingHandlers[data.type](data, vmodels)\r\n        if (data.evaluator && data.element && data.element.nodeType === 1) { //移除数据绑定，防止被二次解析\r\n            //chrome使用removeAttributeNode移除不存在的特性节点时会报错 https://github.com/RubyLouvre/vmcore/issues/99\r\n            data.element.removeAttribute(data.name)\r\n        }\r\n    }\r\n    bindings.length = 0\r\n}\r\n\r\n//https://github.com/RubyLouvre/vmcore/issues/636\r\nvar mergeTextNodes = IEVersion && window.MutationObserver ? function (elem) {\r\n    var node = elem.firstChild, text\r\n    while (node) {\r\n        var aaa = node.nextSibling\r\n        if (node.nodeType === 3) {\r\n            if (text) {\r\n                text.nodeValue += node.nodeValue\r\n                elem.removeChild(node)\r\n            } else {\r\n                text = node\r\n            }\r\n        } else {\r\n            text = null\r\n        }\r\n        node = aaa\r\n    }\r\n} : 0\r\n\r\nvar rmsAttr = /vm-(\\w+)-?(.*)/\r\nvar priorityMap = {\r\n    \"if\": 10,\r\n    \"repeat\": 90,\r\n    \"data\": 100,\r\n    \"widget\": 110,\r\n    \"each\": 1400,\r\n    \"with\": 1500,\r\n    \"duplex\": 2000,\r\n    \"on\": 3000\r\n}\r\n\r\nvar events = oneObject(\"animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit\")\r\nvar obsoleteAttrs = oneObject(\"value,title,alt,checked,selected,disabled,readonly,enabled\")\r\nfunction bindingSorter(a, b) {\r\n    return a.priority - b.priority\r\n}\r\n\r\nfunction scanAttr(elem, vmodels) {\r\n    //防止setAttribute, removeAttribute时 attributes自动被同步,导致for循环出错\r\n    var attributes = getAttributes ? getAttributes(elem) : vmcore.slice(elem.attributes)\r\n    var bindings = [],\r\n            msData = {},\r\n            match\r\n    for (var i = 0, attr; attr = attributes[i++]; ) {\r\n        if (attr.specified) {\r\n            if (match = attr.name.match(rmsAttr)) {\r\n                //如果是以指定前缀命名的\r\n                var type = match[1]\r\n                var param = match[2] || \"\"\r\n                var value = attr.value\r\n                var name = attr.name\r\n                msData[name] = value\r\n                if (events[type]) {\r\n                    param = type\r\n                    type = \"on\"\r\n                } else if (obsoleteAttrs[type]) {\r\n                    log(\"warning!请改用vm-attr-\" + type + \"代替vm-\" + type + \"！\")\r\n                    if (type === \"enabled\") {//吃掉vm-enabled绑定,用vm-disabled代替\r\n                        log(\"warning!vm-enabled或vm-attr-enabled已经被废弃\")\r\n                        type = \"disabled\"\r\n                        value = \"!(\" + value + \")\"\r\n                    }\r\n                    param = type\r\n                    type = \"attr\"\r\n                    elem.removeAttribute(name)\r\n                    name = \"vm-attr-\" + param\r\n                    elem.setAttribute(name, value)\r\n                    match = [name]\r\n                    msData[name] = value\r\n                }\r\n                if (typeof bindingHandlers[type] === \"function\") {\r\n                    var binding = {\r\n                        type: type,\r\n                        param: param,\r\n                        element: elem,\r\n                        name: match[0],\r\n                        value: value,\r\n                        priority: type in priorityMap ? priorityMap[type] : type.charCodeAt(0) * 10 + (Number(param) || 0)\r\n                    }\r\n                    if (type === \"html\" || type === \"text\") {\r\n                        var token = getToken(value)\r\n                        vmcore.mix(binding, token)\r\n                        binding.filters = binding.filters.replace(rhasHtml, function () {\r\n                            binding.type = \"html\"\r\n                            binding.group = 1\r\n                            return \"\"\r\n                        })// jshint ignore:line\r\n                    }\r\n                    if (name === \"vm-if-loop\") {\r\n                        binding.priority += 100\r\n                    }\r\n                    if (vmodels.length) {\r\n                        bindings.push(binding)\r\n                        if (type === \"widget\") {\r\n                            elem.msData = elem.msData || msData\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    bindings.sort(bindingSorter)\r\n    var control = elem.type\r\n    if (control && msData[\"vm-duplex\"]) {\r\n        if (msData[\"vm-attr-checked\"] && /radio|checkbox/.test(control)) {\r\n            log(\"warning!\" + control + \"控件不能同时定义vm-attr-checked与vm-duplex\")\r\n        }\r\n        if (msData[\"vm-attr-value\"] && /text|password/.test(control)) {\r\n            log(\"warning!\" + control + \"控件不能同时定义vm-attr-value与vm-duplex\")\r\n        }\r\n    }\r\n    var scanNode = true\r\n    for (i = 0; binding = bindings[i]; i++) {\r\n        type = binding.type\r\n        if (rnoscanAttrBinding.test(type)) {\r\n            return executeBindings(bindings.slice(0, i + 1), vmodels)\r\n        } else if (scanNode) {\r\n            scanNode = !rnoscanNodeBinding.test(type)\r\n        }\r\n    }\r\n    executeBindings(bindings, vmodels)\r\n    if (scanNode && !stopScan[elem.tagName] && rbind.test(elem.innerHTML.replace(rlt, \"<\").replace(rgt, \">\"))) {\r\n        mergeTextNodes && mergeTextNodes(elem)\r\n        scanNodeList(elem, vmodels) //扫描子孙元素\r\n    }\r\n}\r\n\r\nvar rnoscanAttrBinding = /^if|widget|repeat$/\r\nvar rnoscanNodeBinding = /^each|with|html|include$/\r\n//IE67下，在循环绑定中，一个节点如果是通过cloneNode得到，自定义属性的specified为false，无法进入里面的分支，\r\n//但如果我们去掉scanAttr中的attr.specified检测，一个元素会有80+个特性节点（因为它不区分固有属性与自定义属性），很容易卡死页面\r\nif (!\"1\" [0]) {\r\n    var cacheAttrs = new Cache(512)\r\n    var rattrs = /\\s+(vm-[^=\\s]+)(?:=(\"[^\"]*\"|'[^']*'|[^\\s>]+))?/g,\r\n            rquote = /^['\"]/,\r\n            rtag = /<\\w+\\b(?:([\"'])[^\"]*?(\\1)|[^>])*>/i,\r\n            ramp = /&amp;/g\r\n    //IE6-8解析HTML5新标签，会将它分解两个元素节点与一个文本节点\r\n    //<body><section>ddd</section></body>\r\n    //        window.onload = function() {\r\n    //            var body = document.body\r\n    //            for (var i = 0, el; el = body.children[i++]; ) {\r\n    //                vmcore.log(el.outerHTML)\r\n    //            }\r\n    //        }\r\n    //依次输出<SECTION>, </SECTION>\r\n    var getAttributes = function (elem) {\r\n        var html = elem.outerHTML\r\n        //处理IE6-8解析HTML5新标签的情况，及<br>等半闭合标签outerHTML为空的情况\r\n        if (html.slice(0, 2) === \"</\" || !html.trim()) {\r\n            return []\r\n        }\r\n        var str = html.match(rtag)[0]\r\n        var attributes = [],\r\n                match,\r\n                k, v\r\n        var ret = cacheAttrs.get(str)\r\n        if (ret) {\r\n            return ret\r\n        }\r\n        while (k = rattrs.exec(str)) {\r\n            v = k[2]\r\n            if (v) {\r\n                v = (rquote.test(v) ? v.slice(1, -1) : v).replace(ramp, \"&\")\r\n            }\r\n            var name = k[1].toLowerCase()\r\n            match = name.match(rmsAttr)\r\n            var binding = {\r\n                name: name,\r\n                specified: true,\r\n                value: v || \"\"\r\n            }\r\n            attributes.push(binding)\r\n        }\r\n        return cacheAttrs.put(str, attributes)\r\n    }\r\n}\r\n\r\nfunction scanNodeList(parent, vmodels) {\r\n    var node = parent.firstChild\r\n    while (node) {\r\n        var nextNode = node.nextSibling\r\n        scanNode(node, node.nodeType, vmodels)\r\n        node = nextNode\r\n    }\r\n}\r\n\r\nfunction scanNodeArray(nodes, vmodels) {\r\n    for (var i = 0, node; node = nodes[i++]; ) {\r\n        scanNode(node, node.nodeType, vmodels)\r\n    }\r\n}\r\nfunction scanNode(node, nodeType, vmodels) {\r\n    if (nodeType === 1) {\r\n        scanTag(node, vmodels) //扫描元素节点\r\n    } else if (nodeType === 3 && rexpr.test(node.data)){\r\n        scanText(node, vmodels) //扫描文本节点\r\n    } else if (kernel.commentInterpolate && nodeType === 8 && !rexpr.test(node.nodeValue)) {\r\n        scanText(node, vmodels) //扫描注释节点\r\n    }\r\n}\r\nfunction scanTag(elem, vmodels, node) {\r\n    //扫描顺序  vm-skip(0) --> vm-important(1) --> vm-controller(2) --> vm-if(10) --> vm-repeat(100)\r\n    //--> vm-if-loop(110) --> vm-attr(970) ...--> vm-each(1400)-->vm-with(1500)--〉vm-duplex(2000)垫后\r\n    var a = elem.getAttribute(\"vm-skip\")\r\n    //#360 在旧式IE中 Object标签在引入Flash等资源时,可能出现没有getAttributeNode,innerHTML的情形\r\n    if (!elem.getAttributeNode) {\r\n        return log(\"warning \" + elem.tagName + \" no getAttributeNode method\")\r\n    }\r\n    var b = elem.getAttributeNode(\"vm-important\")\r\n    var c = elem.getAttributeNode(\"vm-controller\")\r\n    if (typeof a === \"string\") {\r\n        return\r\n    } else if (node = b || c) {\r\n        var newVmodel = vmcore.vmodels[node.value]\r\n        if (!newVmodel) {\r\n            return\r\n        }\r\n        //vm-important不包含父VM，vm-controller相反\r\n        vmodels = node === b ? [newVmodel] : [newVmodel].concat(vmodels)\r\n        var name = node.name\r\n        elem.removeAttribute(name) //removeAttributeNode不会刷新[vm-controller]样式规则\r\n        vmcore(elem).removeClass(name)\r\n        createSignalTower(elem, newVmodel)\r\n    }\r\n    scanAttr(elem, vmodels) //扫描特性节点\r\n}\r\nvar rhasHtml = /\\|\\s*html\\s*/,\r\n        r11a = /\\|\\|/g,\r\n        rlt = /&lt;/g,\r\n        rgt = /&gt;/g\r\n        rstringLiteral  = /(['\"])(\\\\\\1|.)+?\\1/g\r\nfunction getToken(value) {\r\n    if (value.indexOf(\"|\") > 0) {\r\n        var scapegoat = value.replace( rstringLiteral, function(_){\r\n            return Array(_.length+1).join(\"1\")// jshint ignore:line\r\n        })\r\n        var index = scapegoat.replace(r11a, \"\\u1122\\u3344\").indexOf(\"|\") //干掉所有短路或\r\n        if (index > -1) {\r\n            return {\r\n                filters: value.slice(index),\r\n                value: value.slice(0, index),\r\n                expr: true\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        value: value,\r\n        filters: \"\",\r\n        expr: true\r\n    }\r\n}\r\n\r\nfunction scanExpr(str) {\r\n    var tokens = [],\r\n            value, start = 0,\r\n            stop\r\n    do {\r\n        stop = str.indexOf(openTag, start)\r\n        if (stop === -1) {\r\n            break\r\n        }\r\n        value = str.slice(start, stop)\r\n        if (value) { // {{ 左边的文本\r\n            tokens.push({\r\n                value: value,\r\n                filters: \"\",\r\n                expr: false\r\n            })\r\n        }\r\n        start = stop + openTag.length\r\n        stop = str.indexOf(closeTag, start)\r\n        if (stop === -1) {\r\n            break\r\n        }\r\n        value = str.slice(start, stop)\r\n        if (value) { //处理{{ }}插值表达式\r\n            tokens.push(getToken(value))\r\n        }\r\n        start = stop + closeTag.length\r\n    } while (1)\r\n    value = str.slice(start)\r\n    if (value) { //}} 右边的文本\r\n        tokens.push({\r\n            value: value,\r\n            expr: false,\r\n            filters: \"\"\r\n        })\r\n    }\r\n    return tokens\r\n}\r\n\r\nfunction scanText(textNode, vmodels) {\r\n    var bindings = []\r\n    if (textNode.nodeType === 8) {\r\n        var token = getToken(textNode.nodeValue)\r\n        var tokens = [token]\r\n    } else {\r\n        tokens = scanExpr(textNode.data)\r\n    }\r\n    if (tokens.length) {\r\n        for (var i = 0; token = tokens[i++]; ) {\r\n            var node = DOC.createTextNode(token.value) //将文本转换为文本节点，并替换原来的文本节点\r\n            if (token.expr) {\r\n                token.type = \"text\"\r\n                token.element = node\r\n                token.filters = token.filters.replace(rhasHtml, function() {\r\n                    token.type = \"html\"\r\n                    token.group = 1\r\n                    return \"\"\r\n                })// jshint ignore:line\r\n                bindings.push(token) //收集带有插值表达式的文本\r\n            }\r\n            hyperspace.appendChild(node)\r\n        }\r\n        textNode.parentNode.replaceChild(hyperspace, textNode)\r\n        if (bindings.length)\r\n            executeBindings(bindings, vmodels)\r\n    }\r\n}\r\n\r\n/*********************************************************************\r\n *                  vmcore的原型方法定义区                            *\r\n **********************************************************************/\r\n\r\nfunction hyphen(target) {\r\n    //转换为连字符线风格\r\n    return target.replace(/([a-z\\d])([A-Z]+)/g, \"$1-$2\").toLowerCase()\r\n}\r\n\r\nfunction camelize(target) {\r\n    //提前判断，提高getStyle等的效率\r\n    if (!target || target.indexOf(\"-\") < 0 && target.indexOf(\"_\") < 0) {\r\n        return target\r\n    }\r\n    //转换为驼峰风格\r\n    return target.replace(/[-_][^-_]/g, function(match) {\r\n        return match.charAt(1).toUpperCase()\r\n    })\r\n}\r\n\r\nvar fakeClassListMethods = {\r\n    _toString: function() {\r\n        var node = this.node\r\n        var cls = node.className\r\n        var str = typeof cls === \"string\" ? cls : cls.baseVal\r\n        return str.split(/\\s+/).join(\" \")\r\n    },\r\n    _contains: function(cls) {\r\n        return (\" \" + this + \" \").indexOf(\" \" + cls + \" \") > -1\r\n    },\r\n    _add: function(cls) {\r\n        if (!this.contains(cls)) {\r\n            this._set(this + \" \" + cls)\r\n        }\r\n    },\r\n    _remove: function(cls) {\r\n        this._set((\" \" + this + \" \").replace(\" \" + cls + \" \", \" \"))\r\n    },\r\n    __set: function(cls) {\r\n        cls = cls.trim()\r\n        var node = this.node\r\n        if (rsvg.test(node)) {\r\n            //SVG元素的className是一个对象 SVGAnimatedString { baseVal=\"\", animVal=\"\"}，只能通过set/getAttribute操作\r\n            node.setAttribute(\"class\", cls)\r\n        } else {\r\n            node.className = cls\r\n        }\r\n    } //toggle存在版本差异，因此不使用它\r\n}\r\n\r\n    function fakeClassList(node) {\r\n        if (!(\"classList\" in node)) {\r\n            node.classList = {\r\n                node: node\r\n            }\r\n            for (var k in fakeClassListMethods) {\r\n                node.classList[k.slice(1)] = fakeClassListMethods[k]\r\n            }\r\n        }\r\n        return node.classList\r\n    }\r\n\r\n\r\n    \"add,remove\".replace(rword, function(method) {\r\n        vmcore.fn[method + \"Class\"] = function(cls) {\r\n            var el = this[0]\r\n            //https://developer.mozilla.org/zh-CN/docs/Mozilla/Firefox/Releases/26\r\n            if (cls && typeof cls === \"string\" && el && el.nodeType === 1) {\r\n                cls.replace(/\\S+/g, function(c) {\r\n                    fakeClassList(el)[method](c)\r\n                })\r\n            }\r\n            return this\r\n        }\r\n    })\r\n    vmcore.fn.mix({\r\n        hasClass: function(cls) {\r\n            var el = this[0] || {}\r\n            return el.nodeType === 1 && fakeClassList(el).contains(cls)\r\n        },\r\n        toggleClass: function(value, stateVal) {\r\n            var className, i = 0\r\n            var classNames = String(value).split(/\\s+/)\r\n            var isBool = typeof stateVal === \"boolean\"\r\n            while ((className = classNames[i++])) {\r\n                var state = isBool ? stateVal : !this.hasClass(className)\r\n                this[state ? \"addClass\" : \"removeClass\"](className)\r\n            }\r\n            return this\r\n        },\r\n        attr: function(name, value) {\r\n            if (arguments.length === 2) {\r\n                this[0].setAttribute(name, value)\r\n                return this\r\n            } else {\r\n                return this[0].getAttribute(name)\r\n            }\r\n        },\r\n        data: function(name, value) {\r\n            name = \"data-\" + hyphen(name || \"\")\r\n            switch (arguments.length) {\r\n                case 2:\r\n                    this.attr(name, value)\r\n                    return this\r\n                case 1:\r\n                    var val = this.attr(name)\r\n                    return parseData(val)\r\n                case 0:\r\n                    var ret = {}\r\n                    ap.forEach.call(this[0].attributes, function(attr) {\r\n                        if (attr) {\r\n                            name = attr.name\r\n                            if (!name.indexOf(\"data-\")) {\r\n                                name = camelize(name.slice(5))\r\n                                ret[name] = parseData(attr.value)\r\n                            }\r\n                        }\r\n                    })\r\n                    return ret\r\n            }\r\n        },\r\n        removeData: function(name) {\r\n            name = \"data-\" + hyphen(name)\r\n            this[0].removeAttribute(name)\r\n            return this\r\n        },\r\n        css: function(name, value) {\r\n            if (vmcore.isPlainObject(name)) {\r\n                for (var i in name) {\r\n                    vmcore.css(this, i, name[i])\r\n                }\r\n            } else {\r\n                var ret = vmcore.css(this, name, value)\r\n            }\r\n            return ret !== void 0 ? ret : this\r\n        },\r\n        position: function() {\r\n            var offsetParent, offset,\r\n                elem = this[0],\r\n                parentOffset = {\r\n                    top: 0,\r\n                    left: 0\r\n                }\r\n            if (!elem) {\r\n                return\r\n            }\r\n            if (this.css(\"position\") === \"fixed\") {\r\n                offset = elem.getBoundingClientRect()\r\n            } else {\r\n                offsetParent = this.offsetParent() //得到真正的offsetParent\r\n                offset = this.offset() // 得到正确的offsetParent\r\n                if (offsetParent[0].tagName !== \"HTML\") {\r\n                    parentOffset = offsetParent.offset()\r\n                }\r\n                parentOffset.top += vmcore.css(offsetParent[0], \"borderTopWidth\", true)\r\n                parentOffset.left += vmcore.css(offsetParent[0], \"borderLeftWidth\", true)\r\n\r\n                // Subtract offsetParent scroll positions\r\n                parentOffset.top -= offsetParent.scrollTop()\r\n                parentOffset.left -= offsetParent.scrollLeft()\r\n            }\r\n            return {\r\n                top: offset.top - parentOffset.top - vmcore.css(elem, \"marginTop\", true),\r\n                left: offset.left - parentOffset.left - vmcore.css(elem, \"marginLeft\", true)\r\n            }\r\n        },\r\n        offsetParent: function() {\r\n            var offsetParent = this[0].offsetParent\r\n            while (offsetParent && vmcore.css(offsetParent, \"position\") === \"static\") {\r\n                offsetParent = offsetParent.offsetParent;\r\n            }\r\n            return vmcore(offsetParent || root)\r\n        },\r\n        bind: function(type, fn, phase) {\r\n            if (this[0]) { //此方法不会链\r\n                return vmcore.bind(this[0], type, fn, phase)\r\n            }\r\n        },\r\n        unbind: function(type, fn, phase) {\r\n            if (this[0]) {\r\n                vmcore.unbind(this[0], type, fn, phase)\r\n            }\r\n            return this\r\n        },\r\n        val: function(value) {\r\n            var node = this[0]\r\n            if (node && node.nodeType === 1) {\r\n                var get = arguments.length === 0\r\n                var access = get ? \":get\" : \":set\"\r\n                var fn = valHooks[getValType(node) + access]\r\n                if (fn) {\r\n                    var val = fn(node, value)\r\n                } else if (get) {\r\n                    return (node.value || \"\").replace(/\\r/g, \"\")\r\n                } else {\r\n                    node.value = value\r\n                }\r\n            }\r\n            return get ? val : this\r\n        }\r\n    })\r\n\r\n    function parseData(data) {\r\n        try {\r\n            if (typeof data === \"object\")\r\n                return data\r\n            data = data === \"true\" ? true :\r\n                data === \"false\" ? false :\r\n                data === \"null\" ? null : +data + \"\" === data ? +data : rbrace.test(data) ? vmcore.parseJSON(data) : data\r\n        } catch (e) {}\r\n        return data\r\n    }\r\nvar rbrace = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\r\n    rvalidchars = /^[\\],:{}\\s]*$/,\r\n    rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g,\r\n    rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,\r\n    rvalidtokens = /\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g\r\nvmcore.parseJSON = window.JSON ? JSON.parse : function(data) {\r\n    if (typeof data === \"string\") {\r\n        data = data.trim();\r\n        if (data) {\r\n            if (rvalidchars.test(data.replace(rvalidescape, \"@\")\r\n                .replace(rvalidtokens, \"]\")\r\n                .replace(rvalidbraces, \"\"))) {\r\n                return (new Function(\"return \" + data))() // jshint ignore:line\r\n            }\r\n        }\r\n        vmcore.error(\"Invalid JSON: \" + data)\r\n    }\r\n    return data\r\n}\r\n\r\n//生成vmcore.fn.scrollLeft, vmcore.fn.scrollTop方法\r\nvmcore.each({\r\n    scrollLeft: \"pageXOffset\",\r\n    scrollTop: \"pageYOffset\"\r\n}, function(method, prop) {\r\n    vmcore.fn[method] = function(val) {\r\n        var node = this[0] || {}, win = getWindow(node),\r\n            top = method === \"scrollTop\"\r\n        if (!arguments.length) {\r\n            return win ? (prop in win) ? win[prop] : root[method] : node[method]\r\n        } else {\r\n            if (win) {\r\n                win.scrollTo(!top ? val : vmcore(win).scrollLeft(), top ? val : vmcore(win).scrollTop())\r\n            } else {\r\n                node[method] = val\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nfunction getWindow(node) {\r\n    return node.window && node.document ? node : node.nodeType === 9 ? node.defaultView || node.parentWindow : false;\r\n}\r\n//=============================css相关=======================\r\nvar cssHooks = vmcore.cssHooks = {}\r\nvar prefixes = [\"\", \"-webkit-\", \"-o-\", \"-moz-\", \"-ms-\"]\r\nvar cssMap = {\r\n    \"float\": W3C ? \"cssFloat\" : \"styleFloat\"\r\n}\r\nvmcore.cssNumber = oneObject(\"columnCount,order,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom\")\r\n\r\nvmcore.cssName = function(name, host, camelCase) {\r\n    if (cssMap[name]) {\r\n        return cssMap[name]\r\n    }\r\n    host = host || root.style\r\n    for (var i = 0, n = prefixes.length; i < n; i++) {\r\n        camelCase = camelize(prefixes[i] + name)\r\n        if (camelCase in host) {\r\n            return (cssMap[name] = camelCase)\r\n        }\r\n    }\r\n    return null\r\n}\r\ncssHooks[\"@:set\"] = function(node, name, value) {\r\n    try { //node.style.width = NaN;node.style.width = \"xxxxxxx\";node.style.width = undefine 在旧式IE下会抛异常\r\n        node.style[name] = value\r\n    } catch (e) {}\r\n}\r\nif (window.getComputedStyle) {\r\n    cssHooks[\"@:get\"] = function(node, name) {\r\n        if (!node || !node.style) {\r\n            throw new Error(\"getComputedStyle要求传入一个节点 \" + node)\r\n        }\r\n        var ret, styles = getComputedStyle(node, null)\r\n            if (styles) {\r\n                ret = name === \"filter\" ? styles.getPropertyValue(name) : styles[name]\r\n                if (ret === \"\") {\r\n                    ret = node.style[name] //其他浏览器需要我们手动取内联样式\r\n                }\r\n            }\r\n        return ret\r\n    }\r\n    cssHooks[\"opacity:get\"] = function(node) {\r\n        var ret = cssHooks[\"@:get\"](node, \"opacity\")\r\n        return ret === \"\" ? \"1\" : ret\r\n    }\r\n} else {\r\n    var rnumnonpx = /^-?(?:\\d*\\.)?\\d+(?!px)[^\\d\\s]+$/i\r\n    var rposition = /^(top|right|bottom|left)$/\r\n    var ralpha = /alpha\\([^)]*\\)/i\r\n    var ie8 = !! window.XDomainRequest\r\n    var salpha = \"DXImageTransform.Microsoft.Alpha\"\r\n    var border = {\r\n        thin: ie8 ? '1px' : '2px',\r\n        medium: ie8 ? '3px' : '4px',\r\n        thick: ie8 ? '5px' : '6px'\r\n    }\r\n    cssHooks[\"@:get\"] = function(node, name) {\r\n        //取得精确值，不过它有可能是带em,pc,mm,pt,%等单位\r\n        var currentStyle = node.currentStyle\r\n        var ret = currentStyle[name]\r\n        if ((rnumnonpx.test(ret) && !rposition.test(ret))) {\r\n            //①，保存原有的style.left, runtimeStyle.left,\r\n            var style = node.style,\r\n                left = style.left,\r\n                rsLeft = node.runtimeStyle.left\r\n                //②由于③处的style.left = xxx会影响到currentStyle.left，\r\n                //因此把它currentStyle.left放到runtimeStyle.left，\r\n                //runtimeStyle.left拥有最高优先级，不会style.left影响\r\n                node.runtimeStyle.left = currentStyle.left\r\n                //③将精确值赋给到style.left，然后通过IE的另一个私有属性 style.pixelLeft\r\n                //得到单位为px的结果；fontSize的分支见http://bugs.jquery.com/ticket/760\r\n                style.left = name === 'fontSize' ? '1em' : (ret || 0)\r\n                ret = style.pixelLeft + \"px\"\r\n                //④还原 style.left，runtimeStyle.left\r\n            style.left = left\r\n            node.runtimeStyle.left = rsLeft\r\n        }\r\n        if (ret === \"medium\") {\r\n            name = name.replace(\"Width\", \"Style\")\r\n            //border width 默认值为medium，即使其为0\"\r\n            if (currentStyle[name] === \"none\") {\r\n                ret = \"0px\"\r\n            }\r\n        }\r\n        return ret === \"\" ? \"auto\" : border[ret] || ret\r\n    }\r\n    cssHooks[\"opacity:set\"] = function(node, name, value) {\r\n        var style = node.style\r\n        var opacity = isFinite(value) && value <= 1 ? \"alpha(opacity=\" + value * 100 + \")\" : \"\"\r\n        var filter = style.filter || \"\";\r\n        style.zoom = 1\r\n        //不能使用以下方式设置透明度\r\n        //node.filters.alpha.opacity = value * 100\r\n        style.filter = (ralpha.test(filter) ?\r\n            filter.replace(ralpha, opacity) :\r\n            filter + \" \" + opacity).trim()\r\n        if (!style.filter) {\r\n            style.removeAttribute(\"filter\")\r\n        }\r\n    }\r\n    cssHooks[\"opacity:get\"] = function(node) {\r\n        //这是最快的获取IE透明值的方式，不需要动用正则了！\r\n        var alpha = node.filters.alpha || node.filters[salpha],\r\n            op = alpha && alpha.enabled ? alpha.opacity : 100\r\n        return (op / 100) + \"\" //确保返回的是字符串\r\n    }\r\n}\r\n\r\n\"top,left\".replace(rword, function(name) {\r\n    cssHooks[name + \":get\"] = function(node) {\r\n        var computed = cssHooks[\"@:get\"](node, name)\r\n        return /px$/.test(computed) ? computed :\r\n            vmcore(node).position()[name] + \"px\"\r\n    }\r\n})\r\n\r\nvar cssShow = {\r\n    position: \"absolute\",\r\n    visibility: \"hidden\",\r\n    display: \"block\"\r\n}\r\n\r\nvar rdisplayswap = /^(none|table(?!-c[ea]).+)/\r\n\r\n    function showHidden(node, array) {\r\n        //http://www.cnblogs.com/rubylouvre/archive/2012/10/27/2742529.html\r\n        if (node.offsetWidth <= 0) { //opera.offsetWidth可能小于0\r\n            if (rdisplayswap.test(cssHooks[\"@:get\"](node, \"display\"))) {\r\n                var obj = {\r\n                    node: node\r\n                }\r\n                for (var name in cssShow) {\r\n                    obj[name] = node.style[name]\r\n                    node.style[name] = cssShow[name]\r\n                }\r\n                array.push(obj)\r\n            }\r\n            var parent = node.parentNode\r\n            if (parent && parent.nodeType === 1) {\r\n                showHidden(parent, array)\r\n            }\r\n        }\r\n    }\r\n    \"Width,Height\".replace(rword, function(name) { //fix 481\r\n        var method = name.toLowerCase(),\r\n            clientProp = \"client\" + name,\r\n            scrollProp = \"scroll\" + name,\r\n            offsetProp = \"offset\" + name\r\n            cssHooks[method + \":get\"] = function(node, which, override) {\r\n                var boxSizing = -4\r\n                if (typeof override === \"number\") {\r\n                    boxSizing = override\r\n                }\r\n                which = name === \"Width\" ? [\"Left\", \"Right\"] : [\"Top\", \"Bottom\"]\r\n                var ret = node[offsetProp] // border-box 0\r\n                if (boxSizing === 2) { // margin-box 2\r\n                    return ret + vmcore.css(node, \"margin\" + which[0], true) + vmcore.css(node, \"margin\" + which[1], true)\r\n                }\r\n                if (boxSizing < 0) { // padding-box  -2\r\n                    ret = ret - vmcore.css(node, \"border\" + which[0] + \"Width\", true) - vmcore.css(node, \"border\" + which[1] + \"Width\", true)\r\n                }\r\n                if (boxSizing === -4) { // content-box -4\r\n                    ret = ret - vmcore.css(node, \"padding\" + which[0], true) - vmcore.css(node, \"padding\" + which[1], true)\r\n                }\r\n                return ret\r\n            }\r\n        cssHooks[method + \"&get\"] = function(node) {\r\n            var hidden = [];\r\n            showHidden(node, hidden);\r\n            var val = cssHooks[method + \":get\"](node)\r\n            for (var i = 0, obj; obj = hidden[i++];) {\r\n                node = obj.node\r\n                for (var n in obj) {\r\n                    if (typeof obj[n] === \"string\") {\r\n                        node.style[n] = obj[n]\r\n                    }\r\n                }\r\n            }\r\n            return val;\r\n        }\r\n        vmcore.fn[method] = function(value) { //会忽视其display\r\n            var node = this[0]\r\n            if (arguments.length === 0) {\r\n                if (node.setTimeout) { //取得窗口尺寸,IE9后可以用node.innerWidth /innerHeight代替\r\n                    return node[\"inner\" + name] || node.document.documentElement[clientProp]\r\n                }\r\n                if (node.nodeType === 9) { //取得页面尺寸\r\n                    var doc = node.documentElement\r\n                    //FF chrome    html.scrollHeight< body.scrollHeight\r\n                    //IE 标准模式 : html.scrollHeight> body.scrollHeight\r\n                    //IE 怪异模式 : html.scrollHeight 最大等于可视窗口多一点？\r\n                    return Math.max(node.body[scrollProp], doc[scrollProp], node.body[offsetProp], doc[offsetProp], doc[clientProp])\r\n                }\r\n                return cssHooks[method + \"&get\"](node)\r\n            } else {\r\n                return this.css(method, value)\r\n            }\r\n        }\r\n        vmcore.fn[\"inner\" + name] = function() {\r\n            return cssHooks[method + \":get\"](this[0], void 0, -2)\r\n        }\r\n        vmcore.fn[\"outer\" + name] = function(includeMargin) {\r\n            return cssHooks[method + \":get\"](this[0], void 0, includeMargin === true ? 2 : 0)\r\n        }\r\n    })\r\n    vmcore.fn.offset = function() { //取得距离页面左右角的坐标\r\n        var node = this[0],\r\n            box = {\r\n                left: 0,\r\n                top: 0\r\n            }\r\n        if (!node || !node.tagName || !node.ownerDocument) {\r\n            return box\r\n        }\r\n        var doc = node.ownerDocument,\r\n            body = doc.body,\r\n            root = doc.documentElement,\r\n            win = doc.defaultView || doc.parentWindow\r\n        if (!vmcore.contains(root, node)) {\r\n            return box\r\n        }\r\n        //http://hkom.blog1.fc2.com/?mode=m&no=750 body的偏移量是不包含margin的\r\n        //我们可以通过getBoundingClientRect来获得元素相对于client的rect.\r\n        //http://msdn.microsoft.com/en-us/library/ms536433.aspx\r\n        if (node.getBoundingClientRect) {\r\n            box = node.getBoundingClientRect() // BlackBerry 5, iOS 3 (original iPhone)\r\n        }\r\n        //chrome/IE6: body.scrollTop, firefox/other: root.scrollTop\r\n        var clientTop = root.clientTop || body.clientTop,\r\n            clientLeft = root.clientLeft || body.clientLeft,\r\n            scrollTop = Math.max(win.pageYOffset || 0, root.scrollTop, body.scrollTop),\r\n            scrollLeft = Math.max(win.pageXOffset || 0, root.scrollLeft, body.scrollLeft)\r\n            // 把滚动距离加到left,top中去。\r\n            // IE一些版本中会自动为HTML元素加上2px的border，我们需要去掉它\r\n            // http://msdn.microsoft.com/en-us/library/ms533564(VS.85).aspx\r\n            return {\r\n                top: box.top + scrollTop - clientTop,\r\n                left: box.left + scrollLeft - clientLeft\r\n            }\r\n    }\r\n\r\n    //==================================val相关============================\r\n\r\n    function getValType(el) {\r\n        var ret = el.tagName.toLowerCase()\r\n        return ret === \"input\" && /checkbox|radio/.test(el.type) ? \"checked\" : ret\r\n    }\r\nvar roption = /^<option(?:\\s+\\w+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s>]+))?)*\\s+value[\\s=]/i\r\nvar valHooks = {\r\n    \"option:get\": IEVersion ? function(node) {\r\n        //在IE11及W3C，如果没有指定value，那么node.value默认为node.text（存在trim作），但IE9-10则是取innerHTML(没trim操作)\r\n        //specified并不可靠，因此通过分析outerHTML判定用户有没有显示定义value\r\n        return roption.test(node.outerHTML) ? node.value : node.text.trim()\r\n    } : function(node) {\r\n        return node.value\r\n    },\r\n    \"select:get\": function(node, value) {\r\n        var option, options = node.options,\r\n            index = node.selectedIndex,\r\n            getter = valHooks[\"option:get\"],\r\n            one = node.type === \"select-one\" || index < 0,\r\n            values = one ? null : [],\r\n            max = one ? index + 1 : options.length,\r\n            i = index < 0 ? max : one ? index : 0\r\n        for (; i < max; i++) {\r\n            option = options[i]\r\n            //旧式IE在reset后不会改变selected，需要改用i === index判定\r\n            //我们过滤所有disabled的option元素，但在safari5下，如果设置select为disable，那么其所有孩子都disable\r\n            //因此当一个元素为disable，需要检测其是否显式设置了disable及其父节点的disable情况\r\n            if ((option.selected || i === index) && !option.disabled) {\r\n                value = getter(option)\r\n                if (one) {\r\n                    return value\r\n                }\r\n                //收集所有selected值组成数组返回\r\n                values.push(value)\r\n            }\r\n        }\r\n        return values\r\n    },\r\n    \"select:set\": function(node, values, optionSet) {\r\n        values = [].concat(values) //强制转换为数组\r\n        var getter = valHooks[\"option:get\"]\r\n        for (var i = 0, el; el = node.options[i++];) {\r\n            if ((el.selected = values.indexOf(getter(el)) > -1)) {\r\n                optionSet = true\r\n            }\r\n        }\r\n        if (!optionSet) {\r\n            node.selectedIndex = -1\r\n        }\r\n    }\r\n}\r\n\r\n/*********************************************************************\r\n *                          编译系统                                  *\r\n **********************************************************************/\r\nvar meta = {\r\n    '\\b': '\\\\b',\r\n    '\\t': '\\\\t',\r\n    '\\n': '\\\\n',\r\n    '\\f': '\\\\f',\r\n    '\\r': '\\\\r',\r\n    '\"': '\\\\\"',\r\n    '\\\\': '\\\\\\\\'\r\n}\r\nvar quote = window.JSON && JSON.stringify || function(str) {\r\n    return '\"' + str.replace(/[\\\\\\\"\\x00-\\x1f]/g, function(a) {\r\n        var c = meta[a];\r\n        return typeof c === 'string' ? c :\r\n                '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\r\n    }) + '\"'\r\n}\r\n\r\nvar keywords = [\r\n    \"break,case,catch,continue,debugger,default,delete,do,else,false\",\r\n    \"finally,for,function,if,in,instanceof,new,null,return,switch,this\",\r\n    \"throw,true,try,typeof,var,void,while,with\", /* 关键字*/\r\n    \"abstract,boolean,byte,char,class,const,double,enum,export,extends\",\r\n    \"final,float,goto,implements,import,int,interface,long,native\",\r\n    \"package,private,protected,public,short,static,super,synchronized\",\r\n    \"throws,transient,volatile\", /*保留字*/\r\n    \"arguments,let,yield,undefined\" /* ECMA 5 - use strict*/].join(\",\")\r\nvar rrexpstr = /\\/\\*[\\w\\W]*?\\*\\/|\\/\\/[^\\n]*\\n|\\/\\/[^\\n]*$|\"(?:[^\"\\\\]|\\\\[\\w\\W])*\"|'(?:[^'\\\\]|\\\\[\\w\\W])*'|[\\s\\t\\n]*\\.[\\s\\t\\n]*[$\\w\\.]+/g\r\nvar rsplit = /[^\\w$]+/g\r\nvar rkeywords = new RegExp([\"\\\\b\" + keywords.replace(/,/g, '\\\\b|\\\\b') + \"\\\\b\"].join('|'), 'g')\r\nvar rnumber = /\\b\\d[^,]*/g\r\nvar rcomma = /^,+|,+$/g\r\nvar cacheVars = new Cache(512)\r\nvar getVariables = function (code) {\r\n    var key = \",\" + code.trim()\r\n    var ret = cacheVars.get(key)\r\n    if (ret) {\r\n        return ret\r\n    }\r\n    var match = code\r\n            .replace(rrexpstr, \"\")\r\n            .replace(rsplit, \",\")\r\n            .replace(rkeywords, \"\")\r\n            .replace(rnumber, \"\")\r\n            .replace(rcomma, \"\")\r\n            .split(/^$|,+/)\r\n    return cacheVars.put(key, uniqSet(match))\r\n}\r\n/*添加赋值语句*/\r\n\r\nfunction addAssign(vars, scope, name, data) {\r\n    var ret = [],\r\n            prefix = \" = \" + name + \".\"\r\n    for (var i = vars.length, prop; prop = vars[--i]; ) {\r\n        if (scope.hasOwnProperty(prop)) {\r\n            ret.push(prop + prefix + prop)\r\n            data.vars.push(prop)\r\n            if (data.type === \"duplex\") {\r\n                vars.get = name + \".\" + prop\r\n            }\r\n            vars.splice(i, 1)\r\n        }\r\n    }\r\n    return ret\r\n}\r\n\r\nfunction uniqSet(array) {\r\n    var ret = [],\r\n            unique = {}\r\n    for (var i = 0; i < array.length; i++) {\r\n        var el = array[i]\r\n        var id = el && typeof el.$id === \"string\" ? el.$id : el\r\n        if (!unique[id]) {\r\n            unique[id] = ret.push(el)\r\n        }\r\n    }\r\n    return ret\r\n}\r\n//缓存求值函数，以便多次利用\r\nvar cacheExprs = new Cache(128)\r\n//取得求值函数及其传参\r\nvar rduplex = /\\w\\[.*\\]|\\w\\.\\w/\r\nvar rproxy = /(\\$proxy\\$[a-z]+)\\d+$/\r\nvar rthimRightParentheses = /\\)\\s*$/\r\nvar rthimOtherParentheses = /\\)\\s*\\|/g\r\nvar rquoteFilterName = /\\|\\s*([$\\w]+)/g\r\nvar rpatchBracket = /\"\\s*\\[\"/g\r\nvar rthimLeftParentheses = /\"\\s*\\(/g\r\nfunction parseFilter(val, filters) {\r\n    filters = filters\r\n            .replace(rthimRightParentheses, \"\")//处理最后的小括号\r\n            .replace(rthimOtherParentheses, function () {//处理其他小括号\r\n                return \"],|\"\r\n            })\r\n            .replace(rquoteFilterName, function (a, b) { //处理|及它后面的过滤器的名字\r\n                return \"[\" + quote(b)\r\n            })\r\n            .replace(rpatchBracket, function () {\r\n                return '\"],[\"'\r\n            })\r\n            .replace(rthimLeftParentheses, function () {\r\n                return '\",'\r\n            }) + \"]\"\r\n    return  \"return vmcore.filters.$filter(\" + val + \", \" + filters + \")\"\r\n}\r\n\r\nfunction parseExpr(code, scopes, data) {\r\n    var dataType = data.type\r\n    var filters = data.filters || \"\"\r\n    var exprId = scopes.map(function (el) {\r\n        return String(el.$id).replace(rproxy, \"$1\")\r\n    }) + code + dataType + filters\r\n    var vars = getVariables(code).concat(),\r\n            assigns = [],\r\n            names = [],\r\n            args = [],\r\n            prefix = \"\"\r\n    //args 是一个对象数组， names 是将要生成的求值函数的参数\r\n    scopes = uniqSet(scopes)\r\n    data.vars = []\r\n    for (var i = 0, sn = scopes.length; i < sn; i++) {\r\n        if (vars.length) {\r\n            var name = \"vm\" + expose + \"_\" + i\r\n            names.push(name)\r\n            args.push(scopes[i])\r\n            assigns.push.apply(assigns, addAssign(vars, scopes[i], name, data))\r\n        }\r\n    }\r\n    if (!assigns.length && dataType === \"duplex\") {\r\n        return\r\n    }\r\n    if (dataType !== \"duplex\" && (code.indexOf(\"||\") > -1 || code.indexOf(\"&&\") > -1)) {\r\n        //https://github.com/RubyLouvre/vmcore/issues/583\r\n        data.vars.forEach(function (v) {\r\n            var reg = new RegExp(\"\\\\b\" + v + \"(?:\\\\.\\\\w+|\\\\[\\\\w+\\\\])+\", \"ig\")\r\n            code = code.replace(reg, function (_) {\r\n                var c = _.charAt(v.length)\r\n                var r = IEVersion ? code.slice(arguments[1] + _.length) : RegExp.rightContext\r\n                var method = /^\\s*\\(/.test(r)\r\n                if (c === \".\" || c === \"[\" || method) {//比如v为aa,我们只匹配aa.bb,aa[cc],不匹配aaa.xxx\r\n                    var name = \"var\" + String(Math.random()).replace(/^0\\./, \"\")\r\n                    if (method) {//array.size()\r\n                        var array = _.split(\".\")\r\n                        if (array.length > 2) {\r\n                            var last = array.pop()\r\n                            assigns.push(name + \" = \" + array.join(\".\"))\r\n                            return name + \".\" + last\r\n                        } else {\r\n                            return _\r\n                        }\r\n                    }\r\n                    assigns.push(name + \" = \" + _)\r\n                    return name\r\n                } else {\r\n                    return _\r\n                }\r\n            })\r\n        })\r\n    }\r\n    //---------------args----------------\r\n    data.args = args\r\n    //---------------cache----------------\r\n    var fn = cacheExprs.get(exprId) //直接从缓存，免得重复生成\r\n    if (fn) {\r\n        data.evaluator = fn\r\n        return\r\n    }\r\n    prefix = assigns.join(\", \")\r\n    if (prefix) {\r\n        prefix = \"var \" + prefix\r\n    }\r\n    if (/\\S/.test(filters)) { //文本绑定，双工绑定才有过滤器\r\n        if (!/text|html/.test(data.type)) {\r\n            throw Error(\"vm-\" + data.type + \"不支持过滤器\")\r\n        }\r\n        code = \"\\nvar ret\" + expose + \" = \" + code + \";\\r\\n\"\r\n        code += parseFilter(\"ret\" + expose, filters)\r\n    } else if (dataType === \"duplex\") { //双工绑定\r\n        var _body = \"'use strict';\\nreturn function(vvv){\\n\\t\" +\r\n                prefix +\r\n                \";\\n\\tif(!arguments.length){\\n\\t\\treturn \" +\r\n                code +\r\n                \"\\n\\t}\\n\\t\" + (!rduplex.test(code) ? vars.get : code) +\r\n                \"= vvv;\\n} \"\r\n        try {\r\n            fn = Function.apply(noop, names.concat(_body))\r\n            data.evaluator = cacheExprs.put(exprId, fn)\r\n        } catch (e) {\r\n            log(\"debug: parse error,\" + e.message)\r\n        }\r\n        return\r\n    } else if (dataType === \"on\") { //事件绑定\r\n        if (code.indexOf(\"(\") === -1) {\r\n            code += \".call(this, $event)\"\r\n        } else {\r\n            code = code.replace(\"(\", \".call(this,\")\r\n        }\r\n        names.push(\"$event\")\r\n        code = \"\\nreturn \" + code + \";\" //IE全家 Function(\"return \")出错，需要Function(\"return ;\")\r\n        var lastIndex = code.lastIndexOf(\"\\nreturn\")\r\n        var header = code.slice(0, lastIndex)\r\n        var footer = code.slice(lastIndex)\r\n        code = header + \"\\n\" + footer\r\n    } else { //其他绑定\r\n        code = \"\\nreturn \" + code + \";\" //IE全家 Function(\"return \")出错，需要Function(\"return ;\")\r\n    }\r\n    try {\r\n        fn = Function.apply(noop, names.concat(\"'use strict';\\n\" + prefix + code))\r\n        data.evaluator = cacheExprs.put(exprId, fn)\r\n    } catch (e) {\r\n        log(\"debug: parse error,\" + e.message)\r\n    } finally {\r\n        vars = assigns = names = null //释放内存\r\n    }\r\n}\r\n\r\n\r\n//parseExpr的智能引用代理\r\n\r\nfunction parseExprProxy(code, scopes, data, tokens, noregister) {\r\n    if (Array.isArray(tokens)) {\r\n        code = tokens.map(function (el) {\r\n            return el.expr ? \"(\" + el.value + \")\" : quote(el.value)\r\n        }).join(\" + \")\r\n    }\r\n    parseExpr(code, scopes, data)\r\n    if (data.evaluator && !noregister) {\r\n        data.handler = bindingExecutors[data.handlerName || data.type]\r\n        //方便调试\r\n        //这里非常重要,我们通过判定视图刷新函数的element是否在DOM树决定\r\n        //将它移出订阅者列表\r\n        registerSubscriber(data)\r\n    }\r\n}\r\nvmcore.parseExprProxy = parseExprProxy\r\nvar bools = [\"autofocus,autoplay,async,allowTransparency,checked,controls\",\r\n    \"declare,disabled,defer,defaultChecked,defaultSelected\",\r\n    \"contentEditable,isMap,loop,multiple,noHref,noResize,noShade\",\r\n    \"open,readOnly,selected\"\r\n].join(\",\")\r\nvar boolMap = {}\r\nbools.replace(rword, function(name) {\r\n    boolMap[name.toLowerCase()] = name\r\n})\r\n\r\nvar propMap = { //属性名映射\r\n    \"accept-charset\": \"acceptCharset\",\r\n    \"char\": \"ch\",\r\n    \"charoff\": \"chOff\",\r\n    \"class\": \"className\",\r\n    \"for\": \"htmlFor\",\r\n    \"http-equiv\": \"httpEquiv\"\r\n}\r\n\r\nvar anomaly = [\"accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan\",\r\n    \"dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight\",\r\n    \"rowSpan,tabIndex,useMap,vSpace,valueType,vAlign\"\r\n].join(\",\")\r\nanomaly.replace(rword, function(name) {\r\n    propMap[name.toLowerCase()] = name\r\n})\r\n\r\nvar rnoscripts = /<noscript.*?>(?:[\\s\\S]+?)<\\/noscript>/img\r\nvar rnoscriptText = /<noscript.*?>([\\s\\S]+?)<\\/noscript>/im\r\n\r\nvar getXHR = function() {\r\n    return new(window.XMLHttpRequest || ActiveXObject)(\"Microsoft.XMLHTTP\") // jshint ignore:line\r\n}\r\n\r\nvar cacheTmpls = vmcore.templateCache = {}\r\n\r\nbindingHandlers.attr = function(data, vmodels) {\r\n    var text = data.value.trim(),\r\n        simple = true\r\n    if (text.indexOf(openTag) > -1 && text.indexOf(closeTag) > 2) {\r\n        simple = false\r\n        if (rexpr.test(text) && RegExp.rightContext === \"\" && RegExp.leftContext === \"\") {\r\n            simple = true\r\n            text = RegExp.$1\r\n        }\r\n    }\r\n    if (data.type === \"include\") {\r\n        var elem = data.element\r\n        data.includeRendered = getBindingCallback(elem, \"data-include-rendered\", vmodels)\r\n        data.includeLoaded = getBindingCallback(elem, \"data-include-loaded\", vmodels)\r\n        var outer = data.includeReplace = !!vmcore(elem).data(\"includeReplace\")\r\n        if (vmcore(elem).data(\"includeCache\")) {\r\n            data.templateCache = {}\r\n        }\r\n        data.startInclude = DOC.createComment(\"vm-include\")\r\n        data.endInclude = DOC.createComment(\"vm-include-end\")\r\n        if (outer) {\r\n            data.element = data.startInclude\r\n            elem.parentNode.insertBefore(data.startInclude, elem)\r\n            elem.parentNode.insertBefore(data.endInclude, elem.nextSibling)\r\n        } else {\r\n            elem.insertBefore(data.startInclude, elem.firstChild)\r\n            elem.appendChild(data.endInclude)\r\n        }\r\n    }\r\n    data.handlerName = \"attr\" //handleName用于处理多种绑定共用同一种bindingExecutor的情况\r\n    parseExprProxy(text, vmodels, data, (simple ? 0 : scanExpr(data.value)))\r\n}\r\n\r\nbindingExecutors.attr = function(val, elem, data) {\r\n    var method = data.type,\r\n        attrName = data.param\r\n    if (method === \"css\") {\r\n        vmcore(elem).css(attrName, val)\r\n    } else if (method === \"attr\") {\r\n        // vm-attr-class=\"xxx\" vm.xxx=\"aaa bbb ccc\"将元素的className设置为aaa bbb ccc\r\n        // vm-attr-class=\"xxx\" vm.xxx=false  清空元素的所有类名\r\n        // vm-attr-name=\"yyy\"  vm.yyy=\"ooo\" 为元素设置name属性\r\n        var toRemove = (val === false) || (val === null) || (val === void 0)\r\n\r\n        if (!W3C && propMap[attrName]) { //旧式IE下需要进行名字映射\r\n            attrName = propMap[attrName]\r\n        }\r\n        var bool = boolMap[attrName]\r\n        if (typeof elem[bool] === \"boolean\") {\r\n            elem[bool] = !!val //布尔属性必须使用el.xxx = true|false方式设值\r\n            if (!val) { //如果为false, IE全系列下相当于setAttribute(xxx,''),会影响到样式,需要进一步处理\r\n                toRemove = true\r\n            }\r\n        }\r\n        if (toRemove) {\r\n            return elem.removeAttribute(attrName)\r\n        }\r\n\r\n        //SVG只能使用setAttribute(xxx, yyy), VML只能使用elem.xxx = yyy ,HTML的固有属性必须elem.xxx = yyy\r\n        var isInnate = rsvg.test(elem) ? false : (DOC.namespaces && isVML(elem)) ? true : attrName in elem.cloneNode(false)\r\n        if (isInnate) {\r\n            elem[attrName] = val\r\n        } else {\r\n            elem.setAttribute(attrName, val)\r\n        }\r\n    } else if (method === \"include\" && val) {\r\n        var vmodels = data.vmodels\r\n        var rendered = data.includeRendered\r\n        var loaded = data.includeLoaded\r\n        var replace = data.includeReplace\r\n        var target = replace ? elem.parentNode : elem\r\n        var scanTemplate = function(text) {\r\n            if (loaded) {\r\n                var newText = loaded.apply(target, [text].concat(vmodels))\r\n                if (typeof newText === \"string\")\r\n                    text = newText\r\n            }\r\n            if (rendered) {\r\n                checkScan(target, function() {\r\n                    rendered.call(target)\r\n                }, NaN)\r\n            }\r\n            var lastID = data.includeLastID\r\n            if (data.templateCache && lastID && lastID !== val) {\r\n                var lastTemplate = data.templateCache[lastID]\r\n                if (!lastTemplate) {\r\n                    lastTemplate = data.templateCache[lastID] = DOC.createElement(\"div\")\r\n                    ifGroup.appendChild(lastTemplate)\r\n                }\r\n            }\r\n            data.includeLastID = val\r\n            while (true) {\r\n                var node = data.startInclude.nextSibling\r\n                if (node && node !== data.endInclude) {\r\n                    target.removeChild(node)\r\n                    if (lastTemplate)\r\n                        lastTemplate.appendChild(node)\r\n                } else {\r\n                    break\r\n                }\r\n            }\r\n            var dom = getTemplateNodes(data, val, text)\r\n            var nodes = vmcore.slice(dom.childNodes)\r\n            target.insertBefore(dom, data.endInclude)\r\n            scanNodeArray(nodes, vmodels)\r\n        }\r\n\r\n        if (data.param === \"src\") {\r\n            if (typeof cacheTmpls[val] === \"string\") {\r\n                vmcore.nextTick(function() {\r\n                    scanTemplate(cacheTmpls[val])\r\n                })\r\n            } else if (Array.isArray(cacheTmpls[val])) { //#805 防止在循环绑定中发出许多相同的请求\r\n                cacheTmpls[val].push(scanTemplate)\r\n            } else {\r\n                var xhr = getXHR()\r\n                xhr.onreadystatechange = function() {\r\n                    if (xhr.readyState === 4) {\r\n                        var s = xhr.status\r\n                        if (s >= 200 && s < 300 || s === 304 || s === 1223) {\r\n                            var text = xhr.responseText\r\n                            for (var f = 0, fn; fn = cacheTmpls[val][f++];) {\r\n                                fn(text)\r\n                            }\r\n                            cacheTmpls[val] = text\r\n                        }\r\n                    }\r\n                }\r\n                cacheTmpls[val] = [scanTemplate]\r\n                xhr.open(\"GET\", val, true)\r\n                if (\"withCredentials\" in xhr) {\r\n                    xhr.withCredentials = true\r\n                }\r\n                xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\")\r\n                xhr.send(null)\r\n            }\r\n        } else {\r\n            //IE系列与够新的标准浏览器支持通过ID取得元素（firefox14+）\r\n            //http://tjvantoll.com/2012/07/19/dom-element-references-as-global-variables/\r\n            var el = val && val.nodeType === 1 ? val : DOC.getElementById(val)\r\n            if (el) {\r\n                if (el.tagName === \"NOSCRIPT\" && !(el.innerHTML || el.fixIE78)) { //IE7-8 innerText,innerHTML都无法取得其内容，IE6能取得其innerHTML\r\n                    xhr = getXHR() //IE9-11与chrome的innerHTML会得到转义的内容，它们的innerText可以\r\n                    xhr.open(\"GET\", location, false) //谢谢Nodejs 乱炖群 深圳-纯属虚构\r\n                    xhr.send(null)\r\n                        //http://bbs.csdn.net/topics/390349046?page=1#post-393492653\r\n                    var noscripts = DOC.getElementsByTagName(\"noscript\")\r\n                    var array = (xhr.responseText || \"\").match(rnoscripts) || []\r\n                    var n = array.length\r\n                    for (var i = 0; i < n; i++) {\r\n                        var tag = noscripts[i]\r\n                        if (tag) { //IE6-8中noscript标签的innerHTML,innerText是只读的\r\n                            tag.style.display = \"none\" //http://haslayout.net/css/noscript-Ghost-Bug\r\n                            tag.fixIE78 = (array[i].match(rnoscriptText) || [\"\", \"&nbsp;\"])[1]\r\n                        }\r\n                    }\r\n                }\r\n                vmcore.nextTick(function() {\r\n                    scanTemplate(el.fixIE78 || el.value || el.innerText || el.innerHTML)\r\n                })\r\n            }\r\n        }\r\n    } else {\r\n        if (!root.hasAttribute && typeof val === \"string\" && (method === \"src\" || method === \"href\")) {\r\n            val = val.replace(/&amp;/g, \"&\") //处理IE67自动转义的问题\r\n        }\r\n        elem[method] = val\r\n        if (window.chrome && elem.tagName === \"EMBED\") {\r\n            var parent = elem.parentNode //#525  chrome1-37下embed标签动态设置src不能发生请求\r\n            var comment = document.createComment(\"vm-src\")\r\n            parent.replaceChild(comment, elem)\r\n            parent.replaceChild(elem, comment)\r\n        }\r\n    }\r\n}\r\n\r\nfunction getTemplateNodes(data, id, text) {\r\n    var div = data.templateCache && data.templateCache[id]\r\n    if (div) {\r\n        var dom = DOC.createDocumentFragment(),\r\n            firstChild\r\n        while (firstChild = div.firstChild) {\r\n            dom.appendChild(firstChild)\r\n        }\r\n        return dom\r\n    }\r\n    return vmcore.parseHTML(text)\r\n}\r\n\r\n//这几个指令都可以使用插值表达式，如vm-src=\"aaa/{{b}}/{{c}}.html\"\r\n\"title,alt,src,value,css,include,href\".replace(rword, function(name) {\r\n    bindingHandlers[name] = bindingHandlers.attr\r\n})\r\n//根据VM的属性值或表达式的值切换类名，vm-class=\"xxx yyy zzz:flag\"\r\n//http://www.cnblogs.com/rubylouvre/archive/2012/12/17/2818540.html\r\nbindingHandlers[\"class\"] = function(data, vmodels) {\r\n    var oldStyle = data.param,\r\n        text = data.value,\r\n        rightExpr\r\n    data.handlerName = \"class\"\r\n    if (!oldStyle || isFinite(oldStyle)) {\r\n        data.param = \"\" //去掉数字\r\n        var noExpr = text.replace(rexprg, function(a) {\r\n            return a.replace(/./g, \"0\")\r\n                //return Math.pow(10, a.length - 1) //将插值表达式插入10的N-1次方来占位\r\n        })\r\n        var colonIndex = noExpr.indexOf(\":\") //取得第一个冒号的位置\r\n        if (colonIndex === -1) { // 比如 vm-class=\"aaa bbb ccc\" 的情况\r\n            var className = text\r\n        } else { // 比如 vm-class-1=\"ui-state-active:checked\" 的情况\r\n            className = text.slice(0, colonIndex)\r\n            rightExpr = text.slice(colonIndex + 1)\r\n            parseExpr(rightExpr, vmodels, data) //决定是添加还是删除\r\n            if (!data.evaluator) {\r\n                log(\"debug: vm-class '\" + (rightExpr || \"\").trim() + \"' 不存在于VM中\")\r\n                return false\r\n            } else {\r\n                data._evaluator = data.evaluator\r\n                data._args = data.args\r\n            }\r\n        }\r\n        var hasExpr = rexpr.test(className) //比如vm-class=\"width{{w}}\"的情况\r\n        if (!hasExpr) {\r\n            data.immobileClass = className\r\n        }\r\n        parseExprProxy(\"\", vmodels, data, (hasExpr ? scanExpr(className) : 0))\r\n    } else {\r\n        data.immobileClass = data.oldStyle = data.param\r\n        parseExprProxy(text, vmodels, data)\r\n    }\r\n}\r\n\r\nbindingExecutors[\"class\"] = function(val, elem, data) {\r\n    var $elem = vmcore(elem),\r\n        method = data.type\r\n    if (method === \"class\" && data.oldStyle) { //如果是旧风格\r\n        $elem.toggleClass(data.oldStyle, !!val)\r\n    } else {\r\n        //如果存在冒号就有求值函数\r\n        data.toggleClass = data._evaluator ? !!data._evaluator.apply(elem, data._args) : true\r\n        data.newClass = data.immobileClass || val\r\n        if (data.oldClass && data.newClass !== data.oldClass) {\r\n            $elem.removeClass(data.oldClass)\r\n        }\r\n        data.oldClass = data.newClass\r\n        switch (method) {\r\n            case \"class\":\r\n                $elem.toggleClass(data.newClass, data.toggleClass)\r\n                break\r\n            case \"hover\":\r\n            case \"active\":\r\n                if (!data.hasBindEvent) { //确保只绑定一次\r\n                    var activate = \"mouseenter\" //在移出移入时切换类名\r\n                    var abandon = \"mouseleave\"\r\n                    if (method === \"active\") { //在聚焦失焦中切换类名\r\n                        elem.tabIndex = elem.tabIndex || -1\r\n                        activate = \"mousedown\"\r\n                        abandon = \"mouseup\"\r\n                        var fn0 = $elem.bind(\"mouseleave\", function() {\r\n                            data.toggleClass && $elem.removeClass(data.newClass)\r\n                        })\r\n                    }\r\n                    var fn1 = $elem.bind(activate, function() {\r\n                        data.toggleClass && $elem.addClass(data.newClass)\r\n                    })\r\n                    var fn2 = $elem.bind(abandon, function() {\r\n                        data.toggleClass && $elem.removeClass(data.newClass)\r\n                    })\r\n                    data.rollback = function() {\r\n                        $elem.unbind(\"mouseleave\", fn0)\r\n                        $elem.unbind(activate, fn1)\r\n                        $elem.unbind(abandon, fn2)\r\n                    }\r\n                    data.hasBindEvent = true\r\n                }\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\n\"hover,active\".replace(rword, function(method) {\r\n    bindingHandlers[method] = bindingHandlers[\"class\"]\r\n})\r\n//vm-controller绑定已经在scanTag 方法中实现\r\n//vm-css绑定已由vm-attr绑定实现\r\n\r\n\r\n// bindingHandlers.data 定义在if.js\r\nbindingExecutors.data = function(val, elem, data) {\r\n    var key = \"data-\" + data.param\r\n    if (val && typeof val === \"object\") {\r\n        elem[key] = val\r\n    } else {\r\n        elem.setAttribute(key, String(val))\r\n    }\r\n}\r\n\r\n//双工绑定\r\nvar duplexBinding = bindingHandlers.duplex = function(data, vmodels) {\r\n        var elem = data.element,\r\n            hasCast\r\n        parseExprProxy(data.value, vmodels, data, 0, 1)\r\n\r\n        data.changed = getBindingCallback(elem, \"data-duplex-changed\", vmodels) || noop\r\n        if (data.evaluator && data.args) {\r\n            var params = []\r\n            var casting = oneObject(\"string,number,boolean,checked\")\r\n            if (elem.type === \"radio\" && data.param === \"\") {\r\n                data.param = \"checked\"\r\n            }\r\n            if (elem.msData) {\r\n                elem.msData[\"vm-duplex\"] = data.value\r\n            }\r\n            data.param.replace(/\\w+/g, function(name) {\r\n                if (/^(checkbox|radio)$/.test(elem.type) && /^(radio|checked)$/.test(name)) {\r\n                    if (name === \"radio\")\r\n                        log(\"vm-duplex-radio已经更名为vm-duplex-checked\")\r\n                    name = \"checked\"\r\n                    data.isChecked = true\r\n                }\r\n                if (name === \"bool\") {\r\n                    name = \"boolean\"\r\n                    log(\"vm-duplex-bool已经更名为vm-duplex-boolean\")\r\n                } else if (name === \"text\") {\r\n                    name = \"string\"\r\n                    log(\"vm-duplex-text已经更名为vm-duplex-string\")\r\n                }\r\n                if (casting[name]) {\r\n                    hasCast = true\r\n                }\r\n                vmcore.Array.ensure(params, name)\r\n            })\r\n            if (!hasCast) {\r\n                params.push(\"string\")\r\n            }\r\n            data.param = params.join(\"-\")\r\n            data.bound = function(type, callback) {\r\n                if (elem.addEventListener) {\r\n                    elem.addEventListener(type, callback, false)\r\n                } else {\r\n                    elem.attachEvent(\"on\" + type, callback)\r\n                }\r\n                var old = data.rollback\r\n                data.rollback = function() {\r\n                    elem.vmcoreSetter = null\r\n                    vmcore.unbind(elem, type, callback)\r\n                    old && old()\r\n                }\r\n            }\r\n            for (var i in vmcore.vmodels) {\r\n                var v = vmcore.vmodels[i]\r\n                v.$fire(\"vmcore-vm-duplex-init\", data)\r\n            }\r\n            var cpipe = data.pipe || (data.pipe = pipe)\r\n            cpipe(null, data, \"init\")\r\n            var tagName = elem.tagName\r\n            duplexBinding[tagName] && duplexBinding[tagName](elem, data.evaluator.apply(null, data.args), data)\r\n        }\r\n    }\r\n    //不存在 bindingExecutors.duplex\r\nfunction fixNull(val) {\r\n    return val == null ? \"\" : val\r\n}\r\nvmcore.duplexHooks = {\r\n    checked: {\r\n        get: function(val, data) {\r\n            return !data.element.oldValue\r\n        }\r\n    },\r\n    string: {\r\n        get: function(val) { //同步到VM\r\n            return val\r\n        },\r\n        set: fixNull\r\n    },\r\n    \"boolean\": {\r\n        get: function(val) {\r\n            return val === \"true\"\r\n        },\r\n        set: fixNull\r\n    },\r\n    number: {\r\n        get: function(val, data) {\r\n            var number = parseFloat(val)\r\n            if (-val === -number) {\r\n                return number\r\n            }\r\n            var arr = /strong|medium|weak/.exec(data.element.getAttribute(\"data-duplex-number\")) || [\"medium\"]\r\n            switch (arr[0]) {\r\n                case \"strong\":\r\n                    return 0\r\n                case \"medium\":\r\n                    return val === \"\" ? \"\" : 0\r\n                case \"weak\":\r\n                    return val\r\n            }\r\n        },\r\n        set: fixNull\r\n    }\r\n}\r\n\r\nfunction pipe(val, data, action, e) {\r\n    data.param.replace(/\\w+/g, function(name) {\r\n        var hook = vmcore.duplexHooks[name]\r\n        if (hook && typeof hook[action] === \"function\") {\r\n            val = hook[action](val, data)\r\n        }\r\n    })\r\n    return val\r\n}\r\n\r\nvar TimerID, ribbon = []\r\n\r\nvmcore.tick = function(fn) {\r\n    if (ribbon.push(fn) === 1) {\r\n        TimerID = setInterval(ticker, 60)\r\n    }\r\n}\r\n\r\nfunction ticker() {\r\n    for (var n = ribbon.length - 1; n >= 0; n--) {\r\n        var el = ribbon[n]\r\n        if (el() === false) {\r\n            ribbon.splice(n, 1)\r\n        }\r\n    }\r\n    if (!ribbon.length) {\r\n        clearInterval(TimerID)\r\n    }\r\n}\r\n\r\nvar watchValueInTimer = noop\r\nvar rmsinput = /text|password|hidden/\r\nnew function() { // jshint ignore:line\r\n    try { //#272 IE9-IE11, firefox\r\n        var setters = {}\r\n        var aproto = HTMLInputElement.prototype\r\n        var bproto = HTMLTextAreaElement.prototype\r\n\r\n        function newSetter(value) { // jshint ignore:line\r\n            if (vmcore.contains(root, this)) {\r\n                setters[this.tagName].call(this, value)\r\n                if (!rmsinput.test(this.type))\r\n                    return\r\n                if (!this.msFocus && this.vmcoreSetter) {\r\n                    this.vmcoreSetter()\r\n                }\r\n            }\r\n        }\r\n        var inputProto = HTMLInputElement.prototype\r\n        Object.getOwnPropertyNames(inputProto) //故意引发IE6-8等浏览器报错\r\n        setters[\"INPUT\"] = Object.getOwnPropertyDescriptor(aproto, \"value\").set\r\n        Object.defineProperty(aproto, \"value\", {\r\n            set: newSetter\r\n        })\r\n        setters[\"TEXTAREA\"] = Object.getOwnPropertyDescriptor(bproto, \"value\").set\r\n        Object.defineProperty(bproto, \"value\", {\r\n            set: newSetter\r\n        })\r\n    } catch (e) {\r\n        //在chrome 43中 vm-duplex终于不需要使用定时器实现双向绑定了\r\n        // http://updates.html5rocks.com/2015/04/DOM-attributes-now-on-the-prototype\r\n        // https://docs.google.com/document/d/1jwA8mtClwxI-QJuHT7872Z0pxpZz8PBkf2bGAbsUtqs/edit?pli=1\r\n        watchValueInTimer = vmcore.tick\r\n    }\r\n} // jshint ignore:line\r\nif (IEVersion) {\r\n    vmcore.bind(DOC, \"selectionchange\", function(e) {\r\n        var el = DOC.activeElement\r\n        if (el && typeof el.vmcoreSetter === \"function\") {\r\n            el.vmcoreSetter()\r\n        }\r\n    })\r\n}\r\n\r\n//处理radio, checkbox, text, textarea, password\r\nduplexBinding.INPUT = function(element, evaluator, data) {\r\n    var $type = element.type,\r\n        bound = data.bound,\r\n        $elem = vmcore(element),\r\n        composing = false\r\n\r\n    function callback(value) {\r\n        data.changed.call(this, value, data)\r\n    }\r\n\r\n    function compositionStart() {\r\n        composing = true\r\n    }\r\n\r\n    function compositionEnd() {\r\n            composing = false\r\n        }\r\n        //当value变化时改变model的值\r\n    var updateVModel = function() {\r\n            if (composing) //处理中文输入法在minlengh下引发的BUG\r\n                return\r\n            var val = element.oldValue = element.value //防止递归调用形成死循环\r\n            var lastValue = data.pipe(val, data, \"get\")\r\n            if ($elem.data(\"duplexObserve\") !== false) {\r\n                evaluator(lastValue)\r\n                callback.call(element, lastValue)\r\n                if ($elem.data(\"duplex-focus\")) {\r\n                    vmcore.nextTick(function() {\r\n                        element.focus()\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        //当model变化时,它就会改变value的值\r\n    data.handler = function() {\r\n        var val = data.pipe(evaluator(), data, \"set\") + \"\" //fix #673\r\n        if (val !== element.oldValue) {\r\n            element.value = val\r\n        }\r\n    }\r\n    if (data.isChecked || $type === \"radio\") {\r\n        var IE6 = IEVersion === 6\r\n        updateVModel = function() {\r\n            if ($elem.data(\"duplexObserve\") !== false) {\r\n                var lastValue = data.pipe(element.value, data, \"get\")\r\n                evaluator(lastValue)\r\n                callback.call(element, lastValue)\r\n            }\r\n        }\r\n        data.handler = function() {\r\n            var val = evaluator()\r\n            var checked = data.isChecked ? !!val : val + \"\" === element.value\r\n            element.oldValue = checked\r\n            if (IE6) {\r\n                setTimeout(function() {\r\n                    //IE8 checkbox, radio是使用defaultChecked控制选中状态，\r\n                    //并且要先设置defaultChecked后设置checked\r\n                    //并且必须设置延迟\r\n                    element.defaultChecked = checked\r\n                    element.checked = checked\r\n                }, 31)\r\n            } else {\r\n                element.checked = checked\r\n            }\r\n        }\r\n        bound(\"click\", updateVModel)\r\n    } else if ($type === \"checkbox\") {\r\n        updateVModel = function() {\r\n            if ($elem.data(\"duplexObserve\") !== false) {\r\n                var method = element.checked ? \"ensure\" : \"remove\"\r\n                var array = evaluator()\r\n                if (!Array.isArray(array)) {\r\n                    log(\"vm-duplex应用于checkbox上要对应一个数组\")\r\n                    array = [array]\r\n                }\r\n                vmcore.Array[method](array, data.pipe(element.value, data, \"get\"))\r\n                callback.call(element, array)\r\n            }\r\n        }\r\n\r\n        data.handler = function() {\r\n            var array = [].concat(evaluator()) //强制转换为数组\r\n            element.checked = array.indexOf(data.pipe(element.value, data, \"get\")) > -1\r\n        }\r\n        bound(W3C ? \"change\" : \"click\", updateVModel)\r\n    } else {\r\n        var events = element.getAttribute(\"data-duplex-event\") || \"input\"\r\n        if (element.attributes[\"data-event\"]) {\r\n            log(\"data-event指令已经废弃，请改用data-duplex-event\")\r\n        }\r\n\r\n        function delay(e) { // jshint ignore:line\r\n            setTimeout(function() {\r\n                updateVModel(e)\r\n            })\r\n        }\r\n        events.replace(rword, function(name) {\r\n            switch (name) {\r\n                case \"input\":\r\n                    if (!IEVersion) { // W3C\r\n                        bound(\"input\", updateVModel)\r\n                            //非IE浏览器才用这个\r\n                        bound(\"compositionstart\", compositionStart)\r\n                        bound(\"compositionend\", compositionEnd)\r\n                        bound(\"DOMAutoComplete\", updateVModel)\r\n                    } else { //onpropertychange事件无法区分是程序触发还是用户触发\r\n                        // IE下通过selectionchange事件监听IE9+点击input右边的X的清空行为，及粘贴，剪切，删除行为\r\n                        if (IEVersion > 8) {\r\n                            bound(\"input\", updateVModel) //IE9使用propertychange无法监听中文输入改动\r\n                        } else {\r\n                            bound(\"propertychange\", function(e) { //IE6-8下第一次修改时不会触发,需要使用keydown或selectionchange修正\r\n                                if (e.propertyName === \"value\") {\r\n                                    updateVModel()\r\n                                }\r\n                            })\r\n                        }\r\n                        bound(\"dragend\", delay)\r\n                            //http://www.cnblogs.com/rubylouvre/archive/2013/02/17/2914604.html\r\n                            //http://www.matts411.com/post/internet-explorer-9-oninput/\r\n                    }\r\n                    break\r\n                default:\r\n                    bound(name, updateVModel)\r\n                    break\r\n            }\r\n        })\r\n        bound(\"focus\", function() {\r\n            element.msFocus = true\r\n        })\r\n        bound(\"blur\", function() {\r\n            element.msFocus = false\r\n        })\r\n\r\n        if (rmsinput.test($type)) {\r\n            watchValueInTimer(function() {\r\n                if (root.contains(element)) {\r\n                    if (!element.msFocus && element.oldValue !== element.value) {\r\n                        updateVModel()\r\n                    }\r\n                } else if (!element.msRetain) {\r\n                    return false\r\n                }\r\n            })\r\n        }\r\n\r\n        element.vmcoreSetter = updateVModel //#765\r\n    }\r\n\r\n    element.oldValue = element.value\r\n    registerSubscriber(data)\r\n    callback.call(element, element.value)\r\n}\r\nduplexBinding.TEXTAREA = duplexBinding.INPUT\r\nduplexBinding.SELECT = function(element, evaluator, data) {\r\n    var $elem = vmcore(element)\r\n\r\n    function updateVModel() {\r\n        if ($elem.data(\"duplexObserve\") !== false) {\r\n            var val = $elem.val() //字符串或字符串数组\r\n            if (Array.isArray(val)) {\r\n                val = val.map(function(v) {\r\n                    return data.pipe(v, data, \"get\")\r\n                })\r\n            } else {\r\n                val = data.pipe(val, data, \"get\")\r\n            }\r\n            if (val + \"\" !== element.oldValue) {\r\n                evaluator(val)\r\n            }\r\n            data.changed.call(element, val, data)\r\n        }\r\n    }\r\n    data.handler = function() {\r\n        var val = evaluator()\r\n        val = val && val.$model || val\r\n        if (Array.isArray(val)) {\r\n            if (!element.multiple) {\r\n                log(\"vm-duplex在<select multiple=true>上要求对应一个数组\")\r\n            }\r\n        } else {\r\n            if (element.multiple) {\r\n                log(\"vm-duplex在<select multiple=false>不能对应一个数组\")\r\n            }\r\n        }\r\n        //必须变成字符串后才能比较\r\n        val = Array.isArray(val) ? val.map(String) : val + \"\"\r\n        if (val + \"\" !== element.oldValue) {\r\n            $elem.val(val)\r\n            element.oldValue = val + \"\"\r\n        }\r\n    }\r\n    data.bound(\"change\", updateVModel)\r\n    checkScan(element, function() {\r\n        registerSubscriber(data)\r\n        data.changed.call(element, evaluator(), data)\r\n    }, NaN)\r\n}\r\n// bindingHandlers.html 定义在if.js\r\nbindingExecutors.html = function(val, elem, data) {\r\n    val = val == null ? \"\" : val\r\n    var isHtmlFilter = \"group\" in data\r\n    var parent = isHtmlFilter ? elem.parentNode : elem\r\n    if (!parent)\r\n        return\r\n    if (val.nodeType === 11) { //将val转换为文档碎片\r\n        var fragment = val\r\n    } else if (val.nodeType === 1 || val.item) {\r\n        var nodes = val.nodeType === 1 ? val.childNodes : val.item ? val : []\r\n        fragment = hyperspace.cloneNode(true)\r\n        while (nodes[0]) {\r\n            fragment.appendChild(nodes[0])\r\n        }\r\n    } else {\r\n        fragment = vmcore.parseHTML(val)\r\n    }\r\n    //插入占位符, 如果是过滤器,需要有节制地移除指定的数量,如果是html指令,直接清空\r\n    var comment = DOC.createComment(\"vm-html\")\r\n    if (isHtmlFilter) {\r\n        parent.insertBefore(comment, elem)\r\n        var n = data.group, i = 1\r\n        while (i < n) {\r\n            var node = elem.nextSibling\r\n            if (node) {\r\n                parent.removeChild(node)\r\n                i++\r\n            }\r\n        }\r\n        parent.removeChild(elem)\r\n        data.element = comment //防止被CG\r\n    } else {\r\n        vmcore.clearHTML(parent).appendChild(comment)\r\n    }\r\n    if (isHtmlFilter) {\r\n        data.group = fragment.childNodes.length || 1\r\n    }\r\n    nodes = vmcore.slice(fragment.childNodes)\r\n    if (nodes[0]) {\r\n        if (comment.parentNode)\r\n            comment.parentNode.replaceChild(fragment, comment)\r\n        if (isHtmlFilter) {\r\n            data.element = nodes[0]\r\n        }\r\n    }\r\n    scanNodeArray(nodes, data.vmodels)\r\n}\r\n\r\nbindingHandlers[\"if\"] =\r\n        bindingHandlers.data =\r\n        bindingHandlers.text =\r\n        bindingHandlers.html =\r\n        function(data, vmodels) {\r\n            parseExprProxy(data.value, vmodels, data)\r\n        }\r\n\r\nbindingExecutors[\"if\"] = function(val, elem, data) {\r\n    if (val) { //插回DOM树\r\n        if (elem.nodeType === 8) {\r\n            elem.parentNode.replaceChild(data.template, elem)\r\n            elem = data.element = data.template //这时可能为null\r\n        }\r\n        if (elem.getAttribute(data.name)) {\r\n            elem.removeAttribute(data.name)\r\n            scanAttr(elem, data.vmodels)\r\n        }\r\n        data.rollback = null\r\n    } else { //移出DOM树，并用注释节点占据原位置\r\n        if (elem.nodeType === 1) {\r\n            var node = data.element = DOC.createComment(\"vm-if\")\r\n            elem.parentNode.replaceChild(node, elem)\r\n            data.template = elem //元素节点\r\n            ifGroup.appendChild(elem)\r\n            data.rollback = function() {\r\n                if (elem.parentNode === ifGroup) {\r\n                    ifGroup.removeChild(elem)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n//vm-important绑定已经在scanTag 方法中实现\r\n//vm-include绑定已由vm-attr绑定实现\r\n\r\n//vm-layout-list\r\n//http://www.cnblogs.com/jqyp/archive/2010/10/23/1859182.html\r\n//http://nec.netease.com/\r\n//http://git.oschina.net/xjfhnsd/JXHL/blob/master/src/jxhl.mobile.js\r\nbindingHandlers.layout = function(data, vmodels) {\r\n    //LinearLayout\r\n}\r\nvar rdash = /\\(([^)]*)\\)/\r\nbindingHandlers.on = function(data, vmodels) {\r\n    var value = data.value\r\n    data.type = \"on\"\r\n    var eventType = data.param.replace(/-\\d+$/, \"\") // vm-on-mousemove-10\r\n    if (typeof bindingHandlers.on[eventType + \"Hook\"] === \"function\") {\r\n        bindingHandlers.on[eventType + \"Hook\"](data)\r\n    }\r\n    if (value.indexOf(\"(\") > 0 && value.indexOf(\")\") > -1) {\r\n        var matched = (value.match(rdash) || [\"\", \"\"])[1].trim()\r\n        if (matched === \"\" || matched === \"$event\") { // aaa() aaa($event)当成aaa处理\r\n            value = value.replace(rdash, \"\")\r\n        }\r\n    }\r\n    parseExprProxy(value, vmodels, data)\r\n}\r\n\r\nbindingExecutors.on = function(callback, elem, data) {\r\n    callback = function(e) {\r\n        var fn = data.evaluator || noop\r\n        return fn.apply(this, data.args.concat(e))\r\n    }\r\n    var eventType = data.param.replace(/-\\d+$/, \"\") // vm-on-mousemove-10\r\n    if (eventType === \"scan\") {\r\n        callback.call(elem, {\r\n            type: eventType\r\n        })\r\n    } else if (typeof data.specialBind === \"function\") {\r\n        data.specialBind(elem, callback)\r\n    } else {\r\n        var removeFn = vmcore.bind(elem, eventType, callback)\r\n    }\r\n    data.rollback = function() {\r\n        if (typeof data.specialUnbind === \"function\") {\r\n            data.specialUnbind()\r\n        } else {\r\n            vmcore.unbind(elem, eventType, removeFn)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nbindingHandlers.repeat = function(data, vmodels) {\r\n    var type = data.type\r\n    parseExprProxy(data.value, vmodels, data, 0, 1)\r\n    data.proxies = []\r\n    var freturn = false\r\n    try {\r\n        var $repeat = data.$repeat = data.evaluator.apply(0, data.args || [])\r\n        var xtype = vmcore.type($repeat)\r\n        if (xtype !== \"object\" && xtype !== \"array\") {\r\n            freturn = true\r\n            vmcore.log(\"warning:\" + data.value + \"只能是对象或数组\")\r\n        }\r\n    } catch (e) {\r\n        freturn = true\r\n    }\r\n\r\n    var arr = data.value.split(\".\") || []\r\n    if (arr.length > 1) {\r\n        arr.pop()\r\n        var n = arr[0]\r\n        for (var i = 0, v; v = vmodels[i++]; ) {\r\n            if (v && v.hasOwnProperty(n)) {\r\n                var events = v[n].$events || {}\r\n                events[subscribers] = events[subscribers] || []\r\n                events[subscribers].push(data)\r\n                break\r\n            }\r\n        }\r\n    }\r\n    var elem = data.element\r\n    elem.removeAttribute(data.name)\r\n\r\n    data.sortedCallback = getBindingCallback(elem, \"data-with-sorted\", vmodels)\r\n    data.renderedCallback = getBindingCallback(elem, \"data-\" + type + \"-rendered\", vmodels)\r\n    var signature = generateID(type)\r\n    var comment = data.element = DOC.createComment(signature + \":end\")\r\n    data.clone = DOC.createComment(signature)\r\n    hyperspace.appendChild(comment)\r\n\r\n    if (type === \"each\" || type === \"with\") {\r\n        data.template = elem.innerHTML.trim()\r\n        vmcore.clearHTML(elem).appendChild(comment)\r\n    } else {\r\n        data.template = elem.outerHTML.trim()\r\n        elem.parentNode.replaceChild(comment, elem)\r\n    }\r\n    data.template = vmcore.parseHTML(data.template)\r\n    data.rollback = function() {\r\n        var elem = data.element\r\n        if (!elem)\r\n            return\r\n        bindingExecutors.repeat.call(data, \"clear\")\r\n        var parentNode = elem.parentNode\r\n        var content = data.template\r\n        var target = content.firstChild\r\n        parentNode.replaceChild(content, elem)\r\n        var start = data.$stamp\r\n        start && start.parentNode && start.parentNode.removeChild(start)\r\n        target = data.element = data.type === \"repeat\" ? target : parentNode\r\n    }\r\n    if (freturn) {\r\n        return\r\n    }\r\n    data.handler = bindingExecutors.repeat\r\n    data.$outer = {}\r\n    var check0 = \"$key\"\r\n    var check1 = \"$val\"\r\n    if (Array.isArray($repeat)) {\r\n        check0 = \"$first\"\r\n        check1 = \"$last\"\r\n    }\r\n    for (i = 0; v = vmodels[i++]; ) {\r\n        if (v.hasOwnProperty(check0) && v.hasOwnProperty(check1)) {\r\n            data.$outer = v\r\n            break\r\n        }\r\n    }\r\n    var $events = $repeat.$events\r\n    var $list = ($events || {})[subscribers]\r\n    if ($list && vmcore.Array.ensure($list, data)) {\r\n        addSubscribers(data, $list)\r\n    }\r\n    if (xtype === \"object\") {\r\n        data.$with = true\r\n        var pool = !$events ? {} : $events.$withProxyPool || ($events.$withProxyPool = {})\r\n        data.handler(\"append\", $repeat, pool)\r\n    } else if ($repeat.length) {\r\n        data.handler(\"add\", 0, $repeat.length)\r\n    }\r\n}\r\n\r\nbindingExecutors.repeat = function(method, pos, el) {\r\n    if (method) {\r\n        var data = this\r\n        var end = data.element\r\n        var parent = end.parentNode\r\n        var proxies = data.proxies\r\n        var transation = hyperspace.cloneNode(false)\r\n        switch (method) {\r\n            case \"add\": //在pos位置后添加el数组（pos为数字，el为数组）\r\n                var n = pos + el\r\n                var array = data.$repeat\r\n                var last = array.length - 1\r\n                var fragments = [], fragment\r\n                var start = locateNode(data, pos)\r\n                for (var i = pos; i < n; i++) {\r\n                    var proxy = eachProxyAgent(i, data)\r\n                    proxies.splice(i, 0, proxy)\r\n                    shimController(data, transation, proxy, fragments)\r\n                }\r\n                parent.insertBefore(transation, start)\r\n                for (i = 0; fragment = fragments[i++]; ) {\r\n                    scanNodeArray(fragment.nodes, fragment.vmodels)\r\n                    fragment.nodes = fragment.vmodels = null\r\n                }\r\n                break\r\n            case \"del\": //将pos后的el个元素删掉(pos, el都是数字)\r\n                start = proxies[pos].$stamp\r\n                end = locateNode(data, pos + el)\r\n                sweepNodes(start, end)\r\n                var removed = proxies.splice(pos, el)\r\n                recycleProxies(removed, \"each\")\r\n                break\r\n            case \"clear\":\r\n                var check = data.$stamp || proxies[0]\r\n                if (check) {\r\n                    start = check.$stamp || check\r\n                    sweepNodes(start, end)\r\n                }\r\n                recycleProxies(proxies, \"each\")\r\n                break\r\n            case \"move\":\r\n                start = proxies[0].$stamp\r\n                var signature = start.nodeValue\r\n                var rooms = []\r\n                var room = [], node\r\n                sweepNodes(start, end, function() {\r\n                    room.unshift(this)\r\n                    if (this.nodeValue === signature) {\r\n                        rooms.unshift(room)\r\n                        room = []\r\n                    }\r\n                })\r\n                sortByIndex(proxies, pos)\r\n                sortByIndex(rooms, pos)\r\n                while (room = rooms.shift()) {\r\n                    while (node = room.shift()) {\r\n                        transation.appendChild(node)\r\n                    }\r\n                }\r\n                parent.insertBefore(transation, end)\r\n                break\r\n            case \"index\": //将proxies中的第pos个起的所有元素重新索引\r\n                last = proxies.length - 1\r\n                for (; el = proxies[pos]; pos++) {\r\n                    el.$index = pos\r\n                    el.$first = pos === 0\r\n                    el.$last = pos === last\r\n                }\r\n                return\r\n            case \"set\": //将proxies中的第pos个元素的VM设置为el（pos为数字，el任意）\r\n                proxy = proxies[pos]\r\n                if (proxy) {\r\n                    notifySubscribers(proxy.$events.$index)\r\n                }\r\n                return\r\n            case \"append\": //将pos的键值对从el中取出（pos为一个普通对象，el为预先生成好的代理VM对象池）\r\n                var pool = el\r\n                var keys = []\r\n                fragments = []\r\n                for (var key in pos) { //得到所有键名\r\n                    if (pos.hasOwnProperty(key) && key !== \"hasOwnProperty\") {\r\n                        keys.push(key)\r\n                    }\r\n                }\r\n                if (data.sortedCallback) { //如果有回调，则让它们排序\r\n                    var keys2 = data.sortedCallback.call(parent, keys)\r\n                    if (keys2 && Array.isArray(keys2) && keys2.length) {\r\n                        keys = keys2\r\n                    }\r\n                }\r\n                for (i = 0; key = keys[i++]; ) {\r\n                    if (key !== \"hasOwnProperty\") {\r\n                        if (!pool[key]) {\r\n                            pool[key] = withProxyAgent(key, data)\r\n                        }\r\n                        shimController(data, transation, pool[key], fragments)\r\n                    }\r\n                }\r\n                var comment = data.$stamp = data.clone\r\n                parent.insertBefore(comment, end)\r\n                parent.insertBefore(transation, end)\r\n                for (i = 0; fragment = fragments[i++]; ) {\r\n                    scanNodeArray(fragment.nodes, fragment.vmodels)\r\n                    fragment.nodes = fragment.vmodels = null\r\n                }\r\n                break\r\n        }\r\n        if (method === \"clear\")\r\n            method = \"del\"\r\n        var callback = data.renderedCallback || noop,\r\n                args = arguments\r\n        checkScan(parent, function() {\r\n            callback.apply(parent, args)\r\n            if (parent.oldValue && parent.tagName === \"SELECT\") { //fix #503\r\n                vmcore(parent).val(parent.oldValue.split(\",\"))\r\n            }\r\n        }, NaN)\r\n    }\r\n}\r\n\r\n\"with,each\".replace(rword, function(name) {\r\n    bindingHandlers[name] = bindingHandlers.repeat\r\n})\r\n\r\nfunction shimController(data, transation, proxy, fragments) {\r\n    var content = data.template.cloneNode(true)\r\n    var nodes = vmcore.slice(content.childNodes)\r\n    if (proxy.$stamp) {\r\n        content.insertBefore(proxy.$stamp, content.firstChild)\r\n    }\r\n    transation.appendChild(content)\r\n    var nv = [proxy].concat(data.vmodels)\r\n    var fragment = {\r\n        nodes: nodes,\r\n        vmodels: nv\r\n    }\r\n    fragments.push(fragment)\r\n}\r\n\r\nfunction locateNode(data, pos) {\r\n    var proxy = data.proxies[pos]\r\n    return proxy ? proxy.$stamp : data.element\r\n}\r\n\r\nfunction sweepNodes(start, end, callback) {\r\n    while (true) {\r\n        var node = end.previousSibling\r\n        if (!node)\r\n            break\r\n        node.parentNode.removeChild(node)\r\n        callback && callback.call(node)\r\n        if (node === start) {\r\n            break\r\n        }\r\n    }\r\n}\r\n\r\n// 为vm-each,vm-with, vm-repeat会创建一个代理VM，\r\n// 通过它们保持一个下上文，让用户能调用$index,$first,$last,$remove,$key,$val,$outer等属性与方法\r\n// 所有代理VM的产生,消费,收集,存放通过xxxProxyFactory,xxxProxyAgent, recycleProxies,xxxProxyPool实现\r\nvar eachProxyPool = []\r\nvar withProxyPool = []\r\nfunction eachProxyFactory(name) {\r\n    var source = {\r\n        $host: [],\r\n        $outer: {},\r\n        $stamp: 1,\r\n        $index: 0,\r\n        $first: false,\r\n        $last: false,\r\n        $remove: vmcore.noop\r\n    }\r\n    source[name] = {\r\n        get: function() {\r\n            return this.$host[this.$index]\r\n        },\r\n        set: function(val) {\r\n            this.$host.set(this.$index, val)\r\n        }\r\n    }\r\n    var second = {\r\n        $last: 1,\r\n        $first: 1,\r\n        $index: 1\r\n    }\r\n    var proxy = modelFactory(source, second)\r\n    var e = proxy.$events\r\n    e[name] = e.$first = e.$last = e.$index\r\n    proxy.$id = generateID(\"$proxy$each\")\r\n    return proxy\r\n}\r\n\r\nfunction eachProxyAgent(index, data) {\r\n    var param = data.param || \"el\", proxy\r\n    for (var i = 0, n = eachProxyPool.length; i < n; i++) {\r\n        var candidate = eachProxyPool[i]\r\n        if (candidate && candidate.hasOwnProperty(param)) {\r\n            proxy = candidate\r\n            eachProxyPool.splice(i, 1)\r\n        }\r\n    }\r\n    if (!proxy) {\r\n        proxy = eachProxyFactory(param)\r\n    }\r\n    var host = data.$repeat\r\n    var last = host.length - 1\r\n    proxy.$index = index\r\n    proxy.$first = index === 0\r\n    proxy.$last = index === last\r\n    proxy.$host = host\r\n    proxy.$outer = data.$outer\r\n    proxy.$stamp = data.clone.cloneNode(false)\r\n    proxy.$remove = function() {\r\n        return host.removeAt(proxy.$index)\r\n    }\r\n    return proxy\r\n}\r\n\r\nfunction withProxyFactory() {\r\n    var proxy = modelFactory({\r\n        $key: \"\",\r\n        $outer: {},\r\n        $host: {},\r\n        $val: {\r\n            get: function() {\r\n                return this.$host[this.$key]\r\n            },\r\n            set: function(val) {\r\n                this.$host[this.$key] = val\r\n            }\r\n        }\r\n    }, {\r\n        $val: 1\r\n    })\r\n    proxy.$id = generateID(\"$proxy$with\")\r\n    return proxy\r\n}\r\n\r\nfunction withProxyAgent(key, data) {\r\n    var proxy = withProxyPool.pop()\r\n    if (!proxy) {\r\n        proxy = withProxyFactory()\r\n    }\r\n    var host = data.$repeat\r\n    proxy.$key = key\r\n    proxy.$host = host\r\n    proxy.$outer = data.$outer\r\n    if (host.$events) {\r\n        proxy.$events.$val = host.$events[key]\r\n    } else {\r\n        proxy.$events = {}\r\n    }\r\n    return proxy\r\n}\r\n\r\nfunction recycleProxies(proxies, type) {\r\n    var proxyPool = type === \"each\" ? eachProxyPool : withProxyPool\r\n    vmcore.each(proxies, function(key, proxy) {\r\n        if (proxy.$events) {\r\n            for (var i in proxy.$events) {\r\n                if (Array.isArray(proxy.$events[i])) {\r\n                    proxy.$events[i].forEach(function(data) {\r\n                        if (typeof data === \"object\")\r\n                            disposeData(data)\r\n                    })// jshint ignore:line\r\n                    proxy.$events[i].length = 0\r\n                }\r\n            }\r\n            proxy.$host = proxy.$outer = {}\r\n            if (proxyPool.unshift(proxy) > kernel.maxRepeatSize) {\r\n                proxyPool.pop()\r\n            }\r\n        }\r\n    })\r\n    if (type === \"each\")\r\n        proxies.length = 0\r\n}\r\n\r\n\r\n\r\n\r\n/*********************************************************************\r\n *                         各种指令                                  *\r\n **********************************************************************/\r\n//vm-skip绑定已经在scanTag 方法中实现\r\n// bindingHandlers.text 定义在if.js\r\nbindingExecutors.text = function(val, elem) {\r\n    val = val == null ? \"\" : val //不在页面上显示undefined null\r\n    if (elem.nodeType === 3) { //绑定在文本节点上\r\n        try { //IE对游离于DOM树外的节点赋值会报错\r\n            elem.data = val\r\n        } catch (e) {\r\n        }\r\n    } else { //绑定在特性节点上\r\n        if (\"textContent\" in elem) {\r\n            elem.textContent = val\r\n        } else {\r\n            elem.innerText = val\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction parseDisplay(nodeName, val) {\r\n    //用于取得此类标签的默认display值\r\n    var key = \"_\" + nodeName\r\n    if (!parseDisplay[key]) {\r\n        var node = DOC.createElement(nodeName)\r\n        root.appendChild(node)\r\n        if (W3C) {\r\n            val = getComputedStyle(node, null).display\r\n        } else {\r\n            val = node.currentStyle.display\r\n        }\r\n        root.removeChild(node)\r\n        parseDisplay[key] = val\r\n    }\r\n    return parseDisplay[key]\r\n}\r\n\r\nvmcore.parseDisplay = parseDisplay\r\n\r\nbindingHandlers.visible = function(data, vmodels) {\r\n    var elem = vmcore(data.element)\r\n    var display = elem.css(\"display\")\r\n    if (display === \"none\") {\r\n        var style = elem[0].style\r\n        var has = /visibility/i.test(style.cssText)\r\n        var visible = elem.css(\"visibility\")\r\n        style.display = \"\"\r\n        style.visibility = \"hidden\"\r\n        display = elem.css(\"display\")\r\n        if (display === \"none\") {\r\n            display = parseDisplay(elem[0].nodeName)\r\n        }\r\n        style.visibility = has ? visible : \"\"\r\n    }\r\n    data.display = display\r\n    parseExprProxy(data.value, vmodels, data)\r\n}\r\n\r\nbindingExecutors.visible = function(val, elem, data) {\r\n    elem.style.display = val ? data.display : \"none\"\r\n}\r\n\r\nbindingHandlers.widget = function(data, vmodels) {\r\n    var args = data.value.match(rword)\r\n    var elem = data.element\r\n    var widget = args[0]\r\n    var id = args[1]\r\n    if (!id || id === \"$\") {//没有定义或为$时，取组件名+随机数\r\n        id = generateID(widget)\r\n    }\r\n    var optName = args[2] || widget//没有定义，取组件名\r\n    var constructor = vmcore.ui[widget]\r\n    if (typeof constructor === \"function\") { //vm-widget=\"tabs,tabsAAA,optname\"\r\n        vmodels = elem.vmodels || vmodels\r\n        for (var i = 0, v; v = vmodels[i++]; ) {\r\n            if (v.hasOwnProperty(optName) && typeof v[optName] === \"object\") {\r\n                var vmOptions = v[optName]\r\n                vmOptions = vmOptions.$model || vmOptions\r\n                break\r\n            }\r\n        }\r\n        if (vmOptions) {\r\n            var wid = vmOptions[widget + \"Id\"]\r\n            if (typeof wid === \"string\") {\r\n                id = wid\r\n            }\r\n        }\r\n        //抽取data-tooltip-text、data-tooltip-attr属性，组成一个配置对象\r\n        var widgetData = vmcore.getWidgetData(elem, widget)\r\n        data.value = [widget, id, optName].join(\",\")\r\n        data[widget + \"Id\"] = id\r\n        data.evaluator = noop\r\n        elem.msData[\"vm-widget-id\"] = id\r\n        var options = data[widget + \"Options\"] = vmcore.mix({}, constructor.defaults, vmOptions || {}, widgetData)\r\n        elem.removeAttribute(\"vm-widget\")\r\n        var vmodel = constructor(elem, data, vmodels) || {} //防止组件不返回VM\r\n        if (vmodel.$id) {\r\n            vmcore.vmodels[id] = vmodel\r\n            createSignalTower(elem, vmodel)\r\n            if (vmodel.hasOwnProperty(\"$init\")) {\r\n                vmodel.$init(function() {\r\n                    vmcore.scan(elem, [vmodel].concat(vmodels))\r\n                    if (typeof options.onInit === \"function\") {\r\n                        options.onInit.call(elem, vmodel, options, vmodels)\r\n                    }\r\n                })\r\n            }\r\n            data.rollback = function() {\r\n                try {\r\n                    vmodel.widgetElement = null\r\n                    vmodel.$remove()\r\n                } catch (e) {\r\n                }\r\n                elem.msData = {}\r\n                delete vmcore.vmodels[vmodel.$id]\r\n            }\r\n            addSubscribers(data, widgetList)\r\n            if (window.chrome) {\r\n                elem.addEventListener(\"DOMNodeRemovedFromDocument\", function() {\r\n                    setTimeout(removeSubscribers)\r\n                })\r\n            }\r\n        } else {\r\n            vmcore.scan(elem, vmodels)\r\n        }\r\n    } else if (vmodels.length) { //如果该组件还没有加载，那么保存当前的vmodels\r\n        elem.vmodels = vmodels\r\n    }\r\n}\r\nvar widgetList = []\r\n//不存在 bindingExecutors.widget\r\n/*********************************************************************\r\n *                             自带过滤器                            *\r\n **********************************************************************/\r\nvar rscripts = /<script[^>]*>([\\S\\s]*?)<\\/script\\s*>/gim\r\nvar ron = /\\s+(on[^=\\s]+)(?:=(\"[^\"]*\"|'[^']*'|[^\\s>]+))?/g\r\nvar ropen = /<\\w+\\b(?:([\"'])[^\"]*?(\\1)|[^>])*>/ig\r\nvar rsanitize = {\r\n    a: /\\b(href)\\=(\"javascript[^\"]*\"|'javascript[^']*')/ig,\r\n    img: /\\b(src)\\=(\"javascript[^\"]*\"|'javascript[^']*')/ig,\r\n    form: /\\b(action)\\=(\"javascript[^\"]*\"|'javascript[^']*')/ig\r\n}\r\nvar rsurrogate = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g\r\nvar rnoalphanumeric = /([^\\#-~| |!])/g;\r\n\r\nfunction numberFormat(number, decimals, point, thousands) {\r\n    //form http://phpjs.org/functions/number_format/\r\n    //number    必需，要格式化的数字\r\n    //decimals  可选，规定多少个小数位。\r\n    //point 可选，规定用作小数点的字符串（默认为 . ）。\r\n    //thousands 可选，规定用作千位分隔符的字符串（默认为 , ），如果设置了该参数，那么所有其他参数都是必需的。\r\n    number = (number + '')\r\n            .replace(/[^0-9+\\-Ee.]/g, '')\r\n    var n = !isFinite(+number) ? 0 : +number,\r\n            prec = !isFinite(+decimals) ? 3 : Math.abs(decimals),\r\n            sep = thousands || \",\",\r\n            dec = point || \".\",\r\n            s = '',\r\n            toFixedFix = function(n, prec) {\r\n                var k = Math.pow(10, prec)\r\n                return '' + (Math.round(n * k) / k)\r\n                        .toFixed(prec)\r\n            }\r\n    // Fix for IE parseFloat(0.55).toFixed(0) = 0;\r\n    s = (prec ? toFixedFix(n, prec) : '' + Math.round(n))\r\n            .split('.')\r\n    if (s[0].length > 3) {\r\n        s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep)\r\n    }\r\n    if ((s[1] || '')\r\n            .length < prec) {\r\n        s[1] = s[1] || ''\r\n        s[1] += new Array(prec - s[1].length + 1)\r\n                .join('0')\r\n    }\r\n    return s.join(dec)\r\n}\r\n\r\n\r\nvar filters = vmcore.filters = {\r\n    uppercase: function(str) {\r\n        return str.toUpperCase()\r\n    },\r\n    lowercase: function(str) {\r\n        return str.toLowerCase()\r\n    },\r\n    truncate: function(str, length, truncation) {\r\n        //length，新字符串长度，truncation，新字符串的结尾的字段,返回新字符串\r\n        length = length || 30\r\n        truncation = truncation === void(0) ? \"...\" : truncation\r\n        return str.length > length ? str.slice(0, length - truncation.length) + truncation : String(str)\r\n    },\r\n    $filter: function(val) {\r\n        for (var i = 1, n = arguments.length; i < n; i++) {\r\n            var array = arguments[i]\r\n            var fn = vmcore.filters[array.shift()]\r\n            if (typeof fn === \"function\") {\r\n                var arr = [val].concat(array)\r\n                val = fn.apply(null, arr)\r\n            }\r\n        }\r\n        return val\r\n    },\r\n    camelize: camelize,\r\n    //https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet\r\n    //    <a href=\"javasc&NewLine;ript&colon;alert('XSS')\">chrome</a>\r\n    //    <a href=\"data:text/html;base64, PGltZyBzcmM9eCBvbmVycm9yPWFsZXJ0KDEpPg==\">chrome</a>\r\n    //    <a href=\"jav  ascript:alert('XSS');\">IE67chrome</a>\r\n    //    <a href=\"jav&#x09;ascript:alert('XSS');\">IE67chrome</a>\r\n    //    <a href=\"jav&#x0A;ascript:alert('XSS');\">IE67chrome</a>\r\n    sanitize: function(str) {\r\n        return str.replace(rscripts, \"\").replace(ropen, function(a, b) {\r\n            var match = a.toLowerCase().match(/<(\\w+)\\s/)\r\n            if (match) { //处理a标签的href属性，img标签的src属性，form标签的action属性\r\n                var reg = rsanitize[match[1]]\r\n                if (reg) {\r\n                    a = a.replace(reg, function(s, name, value) {\r\n                        var quote = value.charAt(0)\r\n                        return name + \"=\" + quote + \"javascript:void(0)\" + quote// jshint ignore:line\r\n                    })\r\n                }\r\n            }\r\n            return a.replace(ron, \" \").replace(/\\s+/g, \" \") //移除onXXX事件\r\n        })\r\n    },\r\n    escape: function(str) {\r\n        //将字符串经过 str 转义得到适合在页面中显示的内容, 例如替换 < 为 &lt\r\n        return String(str).\r\n                replace(/&/g, '&amp;').\r\n                replace(rsurrogate, function(value) {\r\n                    var hi = value.charCodeAt(0)\r\n                    var low = value.charCodeAt(1)\r\n                    return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';'\r\n                }).\r\n                replace(rnoalphanumeric, function(value) {\r\n                    return '&#' + value.charCodeAt(0) + ';'\r\n                }).\r\n                replace(/</g, '&lt;').\r\n                replace(/>/g, '&gt;')\r\n    },\r\n    currency: function(amount, symbol, fractionSize) {\r\n        return (symbol || \"\\uFFE5\") + numberFormat(amount, isFinite(fractionSize) ? fractionSize : 2)\r\n    },\r\n    number: numberFormat\r\n}\r\n/*\r\n 'yyyy': 4 digit representation of year (e.g. AD 1 => 0001, AD 2010 => 2010)\r\n 'yy': 2 digit representation of year, padded (00-99). (e.g. AD 2001 => 01, AD 2010 => 10)\r\n 'y': 1 digit representation of year, e.g. (AD 1 => 1, AD 199 => 199)\r\n 'MMMM': Month in year (January-December)\r\n 'MMM': Month in year (Jan-Dec)\r\n 'MM': Month in year, padded (01-12)\r\n 'M': Month in year (1-12)\r\n 'dd': Day in month, padded (01-31)\r\n 'd': Day in month (1-31)\r\n 'EEEE': Day in Week,(Sunday-Saturday)\r\n 'EEE': Day in Week, (Sun-Sat)\r\n 'HH': Hour in day, padded (00-23)\r\n 'H': Hour in day (0-23)\r\n 'hh': Hour in am/pm, padded (01-12)\r\n 'h': Hour in am/pm, (1-12)\r\n 'mm': Minute in hour, padded (00-59)\r\n 'm': Minute in hour (0-59)\r\n 'ss': Second in minute, padded (00-59)\r\n 's': Second in minute (0-59)\r\n 'a': am/pm marker\r\n 'Z': 4 digit (+sign) representation of the timezone offset (-1200-+1200)\r\n format string can also be one of the following predefined localizable formats:\r\n\r\n 'medium': equivalent to 'MMM d, y h:mm:ss a' for en_US locale (e.g. Sep 3, 2010 12:05:08 pm)\r\n 'short': equivalent to 'M/d/yy h:mm a' for en_US locale (e.g. 9/3/10 12:05 pm)\r\n 'fullDate': equivalent to 'EEEE, MMMM d,y' for en_US locale (e.g. Friday, September 3, 2010)\r\n 'longDate': equivalent to 'MMMM d, y' for en_US locale (e.g. September 3, 2010\r\n 'mediumDate': equivalent to 'MMM d, y' for en_US locale (e.g. Sep 3, 2010)\r\n 'shortDate': equivalent to 'M/d/yy' for en_US locale (e.g. 9/3/10)\r\n 'mediumTime': equivalent to 'h:mm:ss a' for en_US locale (e.g. 12:05:08 pm)\r\n 'shortTime': equivalent to 'h:mm a' for en_US locale (e.g. 12:05 pm)\r\n */\r\nnew function() {// jshint ignore:line\r\n    function toInt(str) {\r\n        return parseInt(str, 10) || 0\r\n    }\r\n\r\n    function padNumber(num, digits, trim) {\r\n        var neg = \"\"\r\n        if (num < 0) {\r\n            neg = '-'\r\n            num = -num\r\n        }\r\n        num = \"\" + num\r\n        while (num.length < digits)\r\n            num = \"0\" + num\r\n        if (trim)\r\n            num = num.substr(num.length - digits)\r\n        return neg + num\r\n    }\r\n\r\n    function dateGetter(name, size, offset, trim) {\r\n        return function(date) {\r\n            var value = date[\"get\" + name]()\r\n            if (offset > 0 || value > -offset)\r\n                value += offset\r\n            if (value === 0 && offset === -12) {\r\n                value = 12\r\n            }\r\n            return padNumber(value, size, trim)\r\n        }\r\n    }\r\n\r\n    function dateStrGetter(name, shortForm) {\r\n        return function(date, formats) {\r\n            var value = date[\"get\" + name]()\r\n            var get = (shortForm ? (\"SHORT\" + name) : name).toUpperCase()\r\n            return formats[get][value]\r\n        }\r\n    }\r\n\r\n    function timeZoneGetter(date) {\r\n        var zone = -1 * date.getTimezoneOffset()\r\n        var paddedZone = (zone >= 0) ? \"+\" : \"\"\r\n        paddedZone += padNumber(Math[zone > 0 ? \"floor\" : \"ceil\"](zone / 60), 2) + padNumber(Math.abs(zone % 60), 2)\r\n        return paddedZone\r\n    }\r\n    //取得上午下午\r\n\r\n    function ampmGetter(date, formats) {\r\n        return date.getHours() < 12 ? formats.AMPMS[0] : formats.AMPMS[1]\r\n    }\r\n    var DATE_FORMATS = {\r\n        yyyy: dateGetter(\"FullYear\", 4),\r\n        yy: dateGetter(\"FullYear\", 2, 0, true),\r\n        y: dateGetter(\"FullYear\", 1),\r\n        MMMM: dateStrGetter(\"Month\"),\r\n        MMM: dateStrGetter(\"Month\", true),\r\n        MM: dateGetter(\"Month\", 2, 1),\r\n        M: dateGetter(\"Month\", 1, 1),\r\n        dd: dateGetter(\"Date\", 2),\r\n        d: dateGetter(\"Date\", 1),\r\n        HH: dateGetter(\"Hours\", 2),\r\n        H: dateGetter(\"Hours\", 1),\r\n        hh: dateGetter(\"Hours\", 2, -12),\r\n        h: dateGetter(\"Hours\", 1, -12),\r\n        mm: dateGetter(\"Minutes\", 2),\r\n        m: dateGetter(\"Minutes\", 1),\r\n        ss: dateGetter(\"Seconds\", 2),\r\n        s: dateGetter(\"Seconds\", 1),\r\n        sss: dateGetter(\"Milliseconds\", 3),\r\n        EEEE: dateStrGetter(\"Day\"),\r\n        EEE: dateStrGetter(\"Day\", true),\r\n        a: ampmGetter,\r\n        Z: timeZoneGetter\r\n    }\r\n    var rdateFormat = /((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/\r\n    var raspnetjson = /^\\/Date\\((\\d+)\\)\\/$/\r\n    filters.date = function(date, format) {\r\n        var locate = filters.date.locate,\r\n                text = \"\",\r\n                parts = [],\r\n                fn, match\r\n        format = format || \"mediumDate\"\r\n        format = locate[format] || format\r\n        if (typeof date === \"string\") {\r\n            if (/^\\d+$/.test(date)) {\r\n                date = toInt(date)\r\n            } else if (raspnetjson.test(date)) {\r\n                date = +RegExp.$1\r\n            } else {\r\n                var trimDate = date.trim()\r\n                var dateArray = [0, 0, 0, 0, 0, 0, 0]\r\n                var oDate = new Date(0)\r\n                //取得年月日\r\n                trimDate = trimDate.replace(/^(\\d+)\\D(\\d+)\\D(\\d+)/, function(_, a, b, c) {\r\n                    var array = c.length === 4 ? [c, a, b] : [a, b, c]\r\n                    dateArray[0] = toInt(array[0])     //年\r\n                    dateArray[1] = toInt(array[1]) - 1 //月\r\n                    dateArray[2] = toInt(array[2])     //日\r\n                    return \"\"\r\n                })\r\n                var dateSetter = oDate.setFullYear\r\n                var timeSetter = oDate.setHours\r\n                trimDate = trimDate.replace(/[T\\s](\\d+):(\\d+):?(\\d+)?\\.?(\\d)?/, function(_, a, b, c, d) {\r\n                    dateArray[3] = toInt(a) //小时\r\n                    dateArray[4] = toInt(b) //分钟\r\n                    dateArray[5] = toInt(c) //秒\r\n                    if (d) {                //毫秒\r\n                        dateArray[6] = Math.round(parseFloat(\"0.\" + d) * 1000)\r\n                    }\r\n                    return \"\"\r\n                })\r\n                var tzHour = 0\r\n                var tzMin = 0\r\n                trimDate = trimDate.replace(/Z|([+-])(\\d\\d):?(\\d\\d)/, function(z, symbol, c, d) {\r\n                    dateSetter = oDate.setUTCFullYear\r\n                    timeSetter = oDate.setUTCHours\r\n                    if (symbol) {\r\n                        tzHour = toInt(symbol + c)\r\n                        tzMin = toInt(symbol + d)\r\n                    }\r\n                    return \"\"\r\n                })\r\n\r\n                dateArray[3] -= tzHour\r\n                dateArray[4] -= tzMin\r\n                dateSetter.apply(oDate, dateArray.slice(0, 3))\r\n                timeSetter.apply(oDate, dateArray.slice(3))\r\n                date = oDate\r\n            }\r\n        }\r\n        if (typeof date === \"number\") {\r\n            date = new Date(date)\r\n        }\r\n        if (vmcore.type(date) !== \"date\") {\r\n            return\r\n        }\r\n        while (format) {\r\n            match = rdateFormat.exec(format)\r\n            if (match) {\r\n                parts = parts.concat(match.slice(1))\r\n                format = parts.pop()\r\n            } else {\r\n                parts.push(format)\r\n                format = null\r\n            }\r\n        }\r\n        parts.forEach(function(value) {\r\n            fn = DATE_FORMATS[value]\r\n            text += fn ? fn(date, locate) : value.replace(/(^'|'$)/g, \"\").replace(/''/g, \"'\")\r\n        })\r\n        return text\r\n    }\r\n    var locate = {\r\n        AMPMS: {\r\n            0: \"上午\",\r\n            1: \"下午\"\r\n        },\r\n        DAY: {\r\n            0: \"星期日\",\r\n            1: \"星期一\",\r\n            2: \"星期二\",\r\n            3: \"星期三\",\r\n            4: \"星期四\",\r\n            5: \"星期五\",\r\n            6: \"星期六\"\r\n        },\r\n        MONTH: {\r\n            0: \"1月\",\r\n            1: \"2月\",\r\n            2: \"3月\",\r\n            3: \"4月\",\r\n            4: \"5月\",\r\n            5: \"6月\",\r\n            6: \"7月\",\r\n            7: \"8月\",\r\n            8: \"9月\",\r\n            9: \"10月\",\r\n            10: \"11月\",\r\n            11: \"12月\"\r\n        },\r\n        SHORTDAY: {\r\n            \"0\": \"周日\",\r\n            \"1\": \"周一\",\r\n            \"2\": \"周二\",\r\n            \"3\": \"周三\",\r\n            \"4\": \"周四\",\r\n            \"5\": \"周五\",\r\n            \"6\": \"周六\"\r\n        },\r\n        fullDate: \"y年M月d日EEEE\",\r\n        longDate: \"y年M月d日\",\r\n        medium: \"yyyy-M-d H:mm:ss\",\r\n        mediumDate: \"yyyy-M-d\",\r\n        mediumTime: \"H:mm:ss\",\r\n        \"short\": \"yy-M-d ah:mm\",\r\n        shortDate: \"yy-M-d\",\r\n        shortTime: \"ah:mm\"\r\n    }\r\n    locate.SHORTMONTH = locate.MONTH\r\n    filters.date.locate = locate\r\n}// jshint ignore:line\r\n/*********************************************************************\r\n *                     END                                  *\r\n **********************************************************************/\r\nnew function() {\r\n    vmcore.config({\r\n        loader: false\r\n    })\r\n    var fns = [], fn, loaded\r\n    function flush(f) {\r\n        loaded = 1\r\n        while (f = fns.shift())\r\n            f()\r\n    }\r\n    if (W3C) {\r\n        vmcore.bind(DOC, \"DOMContentLoaded\", fn = function() {\r\n            vmcore.unbind(DOC, \"DOMContentLoaded\", fn)\r\n            flush()\r\n        })\r\n    } else {\r\n        var id = setInterval(function() {\r\n            if (document.readyState === \"complete\" && document.body) {\r\n                clearInterval(id)\r\n                flush()\r\n            }\r\n        }, 50)\r\n    }\r\n    vmcore.ready = function(fn) {\r\n        loaded ? fn(vmcore) : fns.push(fn)\r\n    }\r\n    vmcore.ready(function() {\r\n        vmcore.scan(DOC.body)\r\n    })\r\n}\r\n\r\n\r\n// Register as a named AMD module, since vmcore can be concatenated with other\r\n// files that may use define, but not via a proper concatenation script that\r\n// understands anonymous AMD modules. A named AMD is safest and most robust\r\n// way to register. Lowercase vmcore is used because AMD module names are\r\n// derived from file names, and vmcore is normally delivered in a lowercase\r\n// file name. Do this after creating the global so that if an AMD module wants\r\n// to call noConflict to hide this version of vmcore, it will work.\r\n\r\n// Note that for maximum portability, libraries that are not vmcore should\r\n// declare themselves as anonymous modules, and avoid setting a global if an\r\n// AMD loader is present. vmcore is a special case. For more information, see\r\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(\"vmcore\", [], function() {\r\n            return vmcore\r\n        })\r\n    }\r\n// Map over vmcore in case of overwrite\r\n    var _vmcore = window.vmcore\r\n    vmcore.noConflict = function(deep) {\r\n        if (deep && window.vmcore === vmcore) {\r\n            window.vmcore = _vmcore\r\n        }\r\n        return vmcore\r\n    }\r\n// Expose vmcore identifiers, even in AMD\r\n// and CommonJS for browser emulators\r\n    if (noGlobal === void 0) {\r\n        window.vmcore = vmcore\r\n    }\r\n    return vmcore\r\n\r\n}));\r\n",
    "app/_adress/_baseFn.js": "\r\n/**\r\n * @fileOverview 用户地址VM用到的基础或公共函数\r\n * @author pjg\r\n */\r\ndefine('app/_adress/_baseFn',['vmcore','_base/docCookies','_data/adress','_tpl/adress','app/_common'],function(vmcore, aTpl) {\r\n  var App, Base, Common, Data, Dom, main, _VM_;\r\n  _VM_ = window._VM_ || (window._VM_ = {});\r\n  Common = sbLib.common;\r\n  Base = sbLib.base;\r\n  Data = sbLib.data;\r\n  App = sbLib.app = sbLib.app || {};\r\n  Dom = sbLib.dom = sbLib.dom || {};\r\n  main = {\r\n    accessToken: Base.docCookies.getItem('key'),\r\n\r\n    /*\r\n     * @description 缓存dom\r\n     */\r\n    domCache: function() {},\r\n    _buildTplCache: function(tpl, type) {\r\n      var key, val, _results;\r\n      _results = [];\r\n      for (key in tpl) {\r\n        val = tpl[key];\r\n        _results.push(vmcore.templateCache[\"\" + type + \"_\" + key] = val);\r\n      }\r\n      return _results;\r\n    },\r\n    tplInit: function() {\r\n      return main._buildTplCache(aTpl, 'adress');\r\n    },\r\n\r\n    /**\r\n     * 获取收货人地址列表数据\r\n     */\r\n    getMyAddressData: function() {\r\n      var cb, len, opts;\r\n      len = arguments.length;\r\n      cb = function() {};\r\n      opts = {};\r\n      opts.accessToken = main.accessToken;\r\n      if (len === 0 || len > 2) {\r\n        return false;\r\n      } else if (len === 1) {\r\n        cb = arguments[0];\r\n      } else if (len === 2) {\r\n        opts = vmcore.mix(arguments[0], opts);\r\n        cb = arguments[1];\r\n      }\r\n      return Data.adress.myAddress(opts, function(res) {\r\n        return cb(res);\r\n      }, function(err) {\r\n        return console.log(err);\r\n      });\r\n    },\r\n    ajaxData: function() {\r\n      var opts;\r\n      if (arguments.length === 0) {\r\n        return false;\r\n      }\r\n      opts = arguments[0];\r\n      opts.data = opts.data || {};\r\n      opts.data.accessToken = main.accessToken;\r\n      return Data.adress[opts.act](opts.data, function(res) {\r\n        if (res.code === '00000') {\r\n          return opts.cb && opts.cb(res);\r\n        } else {\r\n          return Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return sbLib.app.adressBaseFn = main;\r\n});\r\n",
    "app/_adress/viewModel.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/**\r\n * @fileOverview 购物车的ViewModel\r\n * @author pjg\r\n * @date  2016-03-08\r\n * @description 购物车的ViewModel,用于获取和定义MVVM数据\r\n */\r\ndefine('app/_adress/viewModel',['vmcore','_base/layer','_base/iScroll','_pulgins/sValid','app/_adress/_baseFn'],function(vmcore) {\r\n  var App, Base, _VM_, baseFn, main;\r\n  _VM_ = window._VM_ || (window._VM_ = {});\r\n  Base = sbLib.base;\r\n  App = sbLib.app = sbLib.app || {};\r\n  baseFn = sbLib.app.adressBaseFn;\r\n  main = {\r\n    startLoader: function() {\r\n      if (typeof main.loader === 'undefined') {\r\n        return main.loader = Base.layer.open({\r\n          type: 2\r\n        });\r\n      }\r\n    },\r\n    endLoader: function() {\r\n      return main.loader = Base.layer.close(main.loader);\r\n    },\r\n    init: function() {\r\n      baseFn.domCache();\r\n      return baseFn.tplInit();\r\n    },\r\n\r\n    /* 地区初始化数据构造函数 */\r\n    areasList: function() {\r\n      var data;\r\n      data = {\r\n        provinces: {\r\n          key: \"省\",\r\n          cur_id: \"\",\r\n          val: [\r\n            {\r\n              area_id: \"\",\r\n              area_name: \"请选择...\"\r\n            }\r\n          ]\r\n        },\r\n        cities: {\r\n          key: \"市\",\r\n          cur_id: \"\",\r\n          val: [\r\n            {\r\n              area_id: \"\",\r\n              area_name: \"请选择...\"\r\n            }\r\n          ]\r\n        },\r\n        counties: {\r\n          key: \"区/县\",\r\n          cur_id: \"\",\r\n          val: [\r\n            {\r\n              area_id: \"\",\r\n              area_name: \"请选择...\"\r\n            }\r\n          ]\r\n        },\r\n        streets: {\r\n          key: \"街道\",\r\n          cur_id: \"\",\r\n          val: [\r\n            {\r\n              area_id: \"\",\r\n              area_name: \"请选择...\"\r\n            }\r\n          ]\r\n        }\r\n      };\r\n      return data;\r\n    },\r\n    adressDefault: function() {\r\n      var data;\r\n      data = {\r\n        address_id: \"\",\r\n        member_id: \"\",\r\n        true_name: \"\",\r\n        identity: \"\",\r\n        street_id: \"\",\r\n        area_id: \"\",\r\n        city_id: \"\",\r\n        province_id: \"0\",\r\n        country_id: \"0\",\r\n        area_info: \"\",\r\n        address: \"\",\r\n        tel_phone: \"\",\r\n        mob_phone: \"\",\r\n        spare_phone: \"\",\r\n        zipcode: \"\",\r\n        is_default: \"0\",\r\n        phone: \"\"\r\n      };\r\n      return data;\r\n    },\r\n\r\n    /**\r\n     * 收货人信息viewModel模型的构造函数\r\n     * @return   Object\r\n     */\r\n    baseVm: function() {\r\n      var ctrl, vm;\r\n      ctrl = this;\r\n      vm = {\r\n        isAreaInit: false,\r\n        addresses: {},\r\n        adressEditing: main.adressDefault(),\r\n        areasList: main.areasList(),\r\n        editAddress: function(key) {\r\n          return ctrl._editAddress(key);\r\n        },\r\n        addAddress: function() {\r\n          return ctrl._editAddress('');\r\n        },\r\n        editArea: function(areaId, e) {\r\n          return ctrl._editArea(areaId);\r\n        },\r\n        selectChange: function(val, e) {\r\n          return ctrl._selectChange(e);\r\n        },\r\n        submitAddress: function() {\r\n          return ctrl._submitAddress();\r\n        },\r\n        delAddress: function(addressId) {\r\n          return ctrl._deleteAddress(addressId);\r\n        },\r\n        choiceAddress: function(addressId) {\r\n          return ctrl._choiceAddress(addressId);\r\n        }\r\n      };\r\n      return vm;\r\n    },\r\n\r\n    /**\r\n     * 获取地址列表数据，并实例化到VM\r\n     * @param   String      vmName  如_VM_命名空间下的ViewModel—name  如cartList\r\n     * @param   function    cb      ajax的成功回调\r\n     */\r\n    getAddress: function(vmName, cb) {\r\n      var isNotViewModel, len;\r\n      _VM_[vmName].isAreaInit = false;\r\n      len = arguments.length;\r\n      isNotViewModel = len === 0 || (len = 1 && typeof arguments[0] === 'function');\r\n      main.startLoader();\r\n      return baseFn.getMyAddressData(function(res) {\r\n        main.endLoader();\r\n        if (res.code === '00000') {\r\n          if (!isNotViewModel && res.data && res.data.addresses) {\r\n            _VM_[vmName].addresses = res.data.addresses;\r\n            return cb && cb();\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 删除收货人地址\r\n     * @param   String      addressId  收货人地址对应的id\r\n     * @param   String      vmName  如_VM_命名空间下的ViewModel—name  如cartList\r\n     * @param   function    cb      ajax的成功回调\r\n     */\r\n    deleteAddress: function(addressId, vmName, cb) {\r\n      var _layerId;\r\n      return _layerId = Base.layer.open({\r\n        content: '<p style=\"text-align:center;\">您确定要删除选中的收货地址吗?<p>',\r\n        btn: ['确定', '取消'],\r\n        shade: !0,\r\n        shadeClose: !0,\r\n        yes: function() {\r\n          Base.layer.close(_layerId);\r\n          main.startLoader();\r\n          return main._delAddress(addressId, function(res) {\r\n            if (res.code === '00000') {\r\n              return baseFn.getMyAddressData(function(res) {\r\n                main.endLoader();\r\n                if (res.code === '00000' && res.data && res.data.addresses) {\r\n                  _VM_[vmName].addresses = res.data.addresses;\r\n                  return cb && cb();\r\n                }\r\n              });\r\n            }\r\n          });\r\n        },\r\n        no: function() {\r\n          return Base.layer.close(_layerId);\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 编辑地址\r\n     * @param   String  key 当前编辑地区在地区列表数组的索引值\r\n     * @param   String  vmName  如_VM_命名空间下的ViewModel—name  如cartList\r\n     */\r\n    editAddress: function(key, vmName) {\r\n      var adressEditing, areaArr;\r\n      if (key === '') {\r\n        _VM_[vmName].adressEditing = main.adressDefault();\r\n        areaArr = [0];\r\n      } else {\r\n        adressEditing = _VM_[vmName].adressEditing = _VM_[vmName].addresses[key];\r\n        areaArr = [0, adressEditing.province_id, adressEditing.city_id, adressEditing.area_id, adressEditing.street_id];\r\n        _VM_[vmName].areasList.provinces.cur_id = areaArr[1];\r\n        _VM_[vmName].areasList.cities.cur_id = areaArr[2];\r\n        _VM_[vmName].areasList.counties.cur_id = areaArr[3];\r\n        _VM_[vmName].areasList.streets.cur_id = areaArr[4];\r\n        areaArr.pop();\r\n      }\r\n      _VM_[vmName].adressEditing.is_default = !!~~_VM_[vmName].adressEditing.is_default;\r\n      return main._getArea(areaArr, 0, vmName);\r\n    },\r\n\r\n    /**\r\n     * 地址变化时的联动选项逻辑处理\r\n     * @description 如省级变化，则加载市级新的数据，并重置区县、街道为空，依此类推\r\n     * @param   string  type    provinces','cities','counties','streets'\r\n     * @param   string  vmName  如_VM_命名空间下的ViewModel—name  如cartList\r\n     */\r\n    selectChange: function(type, vmName) {\r\n      var _areasList, areaId, type1, type2, typeArr, typeId;\r\n      if (!_VM_.cartList.isAreaInit) {\r\n        return false;\r\n      }\r\n      typeArr = ['', 'provinces', 'cities', 'counties', 'streets'];\r\n      typeId = typeArr.indexOf(type);\r\n      areaId = _VM_[vmName].areasList[type].cur_id;\r\n      _areasList = main.areasList();\r\n      if (typeId < 4) {\r\n        main.startLoader();\r\n        main._setAreaData(areaId, typeId, vmName, function(key) {\r\n          main.endLoader();\r\n          return _VM_[vmName].areasList[key].cur_id = \"\";\r\n        });\r\n      }\r\n      switch (typeId) {\r\n        case 1:\r\n          type1 = typeArr[typeId + 2];\r\n          type2 = typeArr[typeId + 3];\r\n          _VM_[vmName].areasList[type1] = _areasList[type1];\r\n          return _VM_[vmName].areasList[type2] = _areasList[type2];\r\n        case 2:\r\n          type2 = typeArr[typeId + 2];\r\n          return _VM_[vmName].areasList[type2] = _areasList[type2];\r\n        case 3:\r\n          return false;\r\n        case 4:\r\n          return false;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 提交经过校验的数据\r\n     * @param   string  vmName  如_VM_命名空间下的ViewModel—name  如cartList\r\n     */\r\n    submitAddress: function(vmName) {\r\n      var _data;\r\n      if (main._sValidEvent(vmName)) {\r\n        main.startLoader();\r\n        _data = main.makePostDate(vmName);\r\n        return main._saveAddress(_data, function(res) {\r\n          if (res.code === '00000') {\r\n            _VM_[vmName].openPopBox('adress_main', 3, 0);\r\n            return main.endLoader();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    makePostDate: function(vmName) {\r\n      var _data, adressEditing, areasList;\r\n      adressEditing = _VM_[vmName].adressEditing;\r\n      areasList = _VM_[vmName].areasList;\r\n      adressEditing.is_default = ~~!!adressEditing.is_default;\r\n      _data = {\r\n        address_id: adressEditing.address_id,\r\n        true_name: adressEditing.true_name,\r\n        phone: adressEditing.mob_phone,\r\n        spare_phone: adressEditing.mob_phone,\r\n        address: adressEditing.address,\r\n        is_default: adressEditing.is_default,\r\n        identity: adressEditing.identity\r\n      };\r\n      _data.province_id = _VM_[vmName].areasList[main._getAreaType(0)].cur_id;\r\n      _data.city_id = _VM_[vmName].areasList[main._getAreaType(1)].cur_id;\r\n      _data.area_id = _VM_[vmName].areasList[main._getAreaType(2)].cur_id;\r\n      _data.street_id = _VM_[vmName].areasList[main._getAreaType(3)].cur_id;\r\n      return _data;\r\n    },\r\n\r\n    /**\r\n     * 设置地区的值\r\n     * @description 当地区选项变化时，AJAX请求最新的下级地区数据，并赋值给VM以更新视图\r\n     * @param   string  areaId  地区ID\r\n     * @param   string  typeId  0~3，0:省|1:市|2:区县级|3:街道级\r\n     * @param   string  vmName  如_VM_命名空间下的ViewModel—name  如cartList\r\n     * @param   function    cb  AJAX的成功回调\r\n     */\r\n    _setAreaData: function(areaId, typeId, vmName, cb) {\r\n      var type;\r\n      type = main._getAreaType(typeId);\r\n      return main._getAreaData(areaId, function(res) {\r\n        var area_list;\r\n        area_list = [];\r\n        if (res.code === '00000' && res.data && res.data.area_list) {\r\n          area_list = res.data.area_list;\r\n        }\r\n        area_list = [\r\n          {\r\n            area_id: \"\",\r\n            area_name: \"请选择...\"\r\n          }\r\n        ].concat(area_list);\r\n        if (typeId === 3) {\r\n          area_list.push({\r\n            area_id: \"0\",\r\n            area_name: \"其他\"\r\n          });\r\n        }\r\n        _VM_[vmName].areasList[type].val = area_list;\r\n        return cb && cb(type);\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 通过当前地区id获取其下级区域的地址列表数据\r\n     * @param   Number      areaId   地区的id\r\n     * @param   function    cb  AJAX的成功回调\r\n     */\r\n    _getAreaData: function(areaId, cb) {\r\n      var opts;\r\n      opts = {};\r\n      opts.area_id = areaId;\r\n      if (areaId !== \"\") {\r\n        return baseFn.ajaxData({\r\n          act: 'area',\r\n          data: opts,\r\n          cb: function(res) {\r\n            return cb && cb(res);\r\n          }\r\n        });\r\n      } else {\r\n        return cb && cb();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 保存 我的收货地址\r\n     * @param   opts =\r\n     *      address_id\t\t收货地址Id（为空时是新增）(***)\tform\tstring\r\n     *      true_name\t\t收件人(***)\tform\tstring\r\n     *      identity\t\t身份证号(***)\tform\tstring\r\n     *      country_id\t\t国家Id(可以不传或固定为45056 )(***)\tform\tstring\r\n     *      province_id\t    省Id(***)\tform\tstring\r\n     *      city_id\t\t    市Id(***)\tform\tstring\r\n     *      area_id\t\t    地区Id(***)\tform\tstring\r\n     *      street_id\t\t街道Id(***)\tform\tstring\r\n     *      address\t\t    详细地址(***)\tform\tstring\r\n     *      phone\t\t    手机号码(***)\tform\tstring\r\n     *      spare_phone\t\t备用手机号码(***)\tform\tstring\r\n     *      zipcode\t\t    邮编(***)\tform\tstring\r\n     *      is_default\t\t是否默认（0否；1是默认）(***)\tform\tstring\r\n     * @param   function    cb  AJAX的成功回调\r\n     */\r\n    _saveAddress: function(opts, cb) {\r\n      return baseFn.ajaxData({\r\n        act: 'saveAddress',\r\n        data: opts,\r\n        cb: function(res) {\r\n          return cb && cb(res);\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 删除选中的收货地址\r\n     * @param   string  addressId  address ID\r\n     * @param   function    cb  AJAX的成功回调\r\n     */\r\n    _delAddress: function(addressId, cb) {\r\n      var opts;\r\n      opts = {};\r\n      opts.address_id = addressId;\r\n      return addressId !== \"\" && baseFn.ajaxData({\r\n        act: 'deleteAddress',\r\n        data: opts,\r\n        cb: function(res) {\r\n          return cb && cb(res);\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 判断地区的类型\r\n     * @param  Number   id   0~3，0:省|1:市|2:区县级|3:街道级\r\n     */\r\n    _getAreaType: function(id) {\r\n      var type;\r\n      type = (function() {\r\n        switch (id) {\r\n          case 0:\r\n            return 'provinces';\r\n          case 1:\r\n            return 'cities';\r\n          case 2:\r\n            return 'counties';\r\n          case 3:\r\n            return 'streets';\r\n        }\r\n      })();\r\n      return type || '';\r\n    },\r\n\r\n    /**\r\n     * 数据校验\r\n     * @param   string  vmName  如_VM_命名空间下的ViewModel—name  如cartList\r\n     */\r\n    _sValidEvent: function(vmName) {\r\n      var opts;\r\n      opts = {\r\n        rules: {\r\n          username: {\r\n            chcharacter: \"chcharacter\",\r\n            required: true\r\n          },\r\n          mobile: {\r\n            required: true,\r\n            phone: 'phone'\r\n          },\r\n          provinces: \"required\",\r\n          cities: \"required\",\r\n          counties: \"required\",\r\n          streets: \"required\",\r\n          address: \"required\"\r\n        },\r\n        messages: {\r\n          username: {\r\n            chcharacter: \"收货人姓名不正确\",\r\n            required: \"收货人姓名必填\"\r\n          },\r\n          mobile: {\r\n            required: \"手机号必填\",\r\n            phone: \"手机号码不正确\"\r\n          },\r\n          provinces: \"请选择省份\",\r\n          cities: \"请选择城市\",\r\n          counties: \"请选择区县\",\r\n          streets: \"请选择街道\",\r\n          address: \"请填写详细地址\"\r\n        },\r\n        callback: function(eId, eMsg, eRules) {\r\n          var i;\r\n          if (eId.length > 0) {\r\n            i = 0;\r\n            return $.map(eMsg, function(idx, item) {\r\n              if (i === 0) {\r\n                Base.layer.tips(idx);\r\n              }\r\n              return i++;\r\n            });\r\n          }\r\n        }\r\n      };\r\n      if (_VM_[vmName].is_foreign === 1) {\r\n        opts.rules.identity = {\r\n          required: true,\r\n          isIdCardNo: \"isIdCardNo\"\r\n        };\r\n        opts.messages.identity = {\r\n          required: \"身份证号码必填\",\r\n          isIdCardNo: \"身份证号码不正确\"\r\n        };\r\n      }\r\n      $.sValid.init(opts);\r\n      return $.sValid();\r\n    },\r\n\r\n    /**\r\n     * 逐级获取地区详细列表\r\n     * @param   Array   areaArr 请求地区的数组\r\n     * @param   Number  level   0~3    0:省|1:市|2:区县级|3:街道级\r\n     * @param   string  vmName  如_VM_命名空间下的ViewModel—name  如cartList\r\n     */\r\n    _getArea: function(areaArr, level, vmName) {\r\n      var __getArea;\r\n      main.startLoader();\r\n      __getArea = function(typeId) {\r\n        var areaId;\r\n        areaId = areaArr.shift();\r\n        return main._setAreaData(areaId, typeId, vmName, function(val) {\r\n          if (areaArr.length > 0) {\r\n            return __getArea(++typeId);\r\n          } else {\r\n            _VM_[vmName].isAreaInit = true;\r\n            return main.endLoader();\r\n          }\r\n        });\r\n      };\r\n      return __getArea(level);\r\n    }\r\n  };\r\n  return sbLib.app.adressViewModel = main;\r\n});\r\n",
    "app/_common/cateBrand.js": "\r\n/*\r\n * @fileOverview cateBrand\r\n * @description 分类品牌页\r\n */\r\ndefine('app/_common/cateBrand',['app/_common','_base/layer','_base/iScroll'],function() {\r\n  var main, sbBase, sbCom, sbMods;\r\n    sbBase = sbLib.base;\r\n    sbMods = sbLib.mods;\r\n    sbCom = sbLib.common;\r\n    sbLib.app = sbLib.app || {};\r\n    sbLib.dom = sbLib.dom || {};\r\n  main = {\r\n    myScroll: null,\r\n    init: function() {\r\n        main.myScroll = new sbBase.iScroll('#scroll', { mouseWheel: true, click: true});\r\n        main.bindInitialFn();\r\n    },\r\n    /*字母点击事件*/\r\n    bindInitialFn: function(){\r\n      $('.alphabet li').on('tap',function(e){\r\n        var _this = $(this);\r\n        var alphabetHtml = _this.html();\r\n        e.stopPropagation();\r\n        $('.modal-letter').html(alphabetHtml).show();\r\n          setTimeout(function(){\r\n              $('.modal-letter').hide();\r\n          },500);\r\n\r\n          var _index = _this.index();\r\n          if(_index==26){\r\n            var selectedId = '#default';\r\n          }else{\r\n            var selectedId = '#' + alphabetHtml\r\n          }\r\n          main.myScroll.scrollToElement(selectedId);\r\n      });\r\n    }\r\n  };\r\n  return sbLib.app.commonCateBrand = main;\r\n});\r\n",
    "app/_common/cateGoodsList.js": "\r\n/*\r\n * @fileOverview cateGoodsList\r\n * @description 分类专场页无限加载和筛选\r\n */\r\ndefine('app/_common/cateGoodsList',['app/_common','_base/lazyLoad','_base/layer','_base/infiniteScroll','_base/iScroll'],function() {\r\n  var main, sbBase, sbCom, sbMods;\r\n    sbBase = sbLib.base;\r\n    sbMods = sbLib.mods;\r\n    sbCom = sbLib.common;\r\n    sbLib.app = sbLib.app || {};\r\n    sbLib.dom = sbLib.dom || {};\r\n  var _catId, _inStock, _sort, _order, _brand, _attrId, _page, translateH;\r\n    _catId = sbCom.getQueryString('catId')||'';\r\n    _inStock = sbCom.getQueryString('stock')||'';\r\n    _sort = sbCom.getQueryString('sort')||'';\r\n    _order = sbCom.getQueryString('order')||'';\r\n    _brand = sbCom.getQueryString('brand')||'';\r\n    _attrId = sbCom.getQueryString('attrId')||'';\r\n    _page = sbCom.getQueryString('page')||'';\r\n    translateH = translateH||'';\r\n  var ctrlEle = '.category-items li';\r\n  /*fz是px转rem的基数*/\r\n  var fontSize = document.getElementById('fz').style.fontSize;\r\n  var fz = fontSize.replace(/[^0-9,.]/ig,\"\");\r\n  var _infiniteScroll;\r\n  main = {\r\n    init: function() {\r\n      sbBase.lazyLoad.init({\r\n        isNew: true\r\n      });\r\n      sbBase.lazyLoad.trigger();\r\n      main.domCache();\r\n      main.infiniteScroll();\r\n      main.cateFilter();\r\n    },\r\n\r\n    /*\r\n     * @description 缓存dom\r\n     */\r\n    domCache: function() {\r\n      sbCom.setObjVariable(sbLib.dom, 'goodsList,loadText,cateFilter,goodsNav,filterMask', ',');\r\n    },\r\n\r\n    /*\r\n     * @description 滚动加载配置\r\n     */\r\n    catId: catId || sbCom.getQueryString('catId'),\r\n    listTolpage: parseInt(listTolpage, 10),\r\n    page: 1,\r\n    isGetList: false,\r\n    isEnd: false,\r\n\r\n    /*\r\n     * @description 获取商品列表数据\r\n     * @param {Number} page 第几页\r\n     * @param {Number} inStock 是否有货 (显示有货，可选参数，默认显示全部,1为有货，0为全部)\r\n     * @param {Number} sort 排序 默认销量高到低排序。可选值：renqi_desc,price_asc,price_desc)\r\n     * @param {Function} cb 回调\r\n     */\r\n    getCateListData: function(page, inStock, sort, order, brand, attrId, cb) {\r\n      var _data;\r\n      _data = {\r\n        catId: main.catId,\r\n        stock: inStock || \"\",\r\n        sort: sort || \"\",\r\n        order: order || \"\",\r\n        brand: brand || \"\",\r\n        attrId: attrId || \"\",\r\n        page: page\r\n      };\r\n      sbCom.ajaxData({\r\n        url: 'service/getCateList',\r\n        data: _data\r\n      }, function(result) {\r\n        var _code, _result;\r\n        _result = result || {\r\n          code: -1,\r\n          desc: \"网络繁忙！\"\r\n        };\r\n        _code = parseInt(_result.code, 10);\r\n        _data = _result.data || {\r\n          html: ''\r\n        };\r\n        /*if(typeof cb =='function') cb(_result, _code, _data);*/\r\n        cb && cb(_result, _code, _data);\r\n      });\r\n    },\r\n\r\n    /*\r\n     * @description 滚动加载\r\n     */\r\n    infiniteScroll: function() {\r\n      _infiniteScroll = sbBase.infiniteScroll.init({\r\n        bufferPx: 150,\r\n        time: 200,\r\n        onNear: function() {\r\n          if (main.isGetList) {\r\n            return false;\r\n          }\r\n          if (!main.isEnd) {\r\n            main.isGetList = true;\r\n            sbLib.dom.$loadText.show().find('legend').html(\"正在拼命加载中\");\r\n            main.page++;\r\n            _page = main.page;\r\n            main.getCateListData(_page, _inStock, _sort, _order, _brand, _attrId, function(_result, _code, _data) {\r\n              // console.log('a2');\r\n              main.isGetList = false;\r\n              if (_code === 0) {\r\n                if(_data.html != ''){\r\n                  sbLib.dom.$loadText.hide();\r\n                  sbLib.dom.$goodsList.append(_data.html);\r\n                  sbBase.lazyLoad.trigger();\r\n                }\r\n                if (main.page >= _data.totalPage) {\r\n                  main.isEnd = true;\r\n                }\r\n                // console.log('数据请求后isGetList是'+main.isGetList+\"嗯isEnd是\"+main.isEnd);\r\n              }\r\n            });\r\n          } else {\r\n            sbLib.dom.$loadText.show().find('legend').html(\"已经是最后一页\");\r\n            _infiniteScroll.remove();\r\n          }\r\n          // console.log('滚动时的数据请求isGetList是'+main.isGetList+\"嗯isEnd是\"+main.isEnd);\r\n        },\r\n        onEnd: null,\r\n        onScroll: function() {}\r\n      });\r\n      if (main.listTolpage <= 1) {\r\n        main.isEnd = true;\r\n      }\r\n      if (main.page >= 1) {\r\n        _infiniteScroll.start();\r\n      }\r\n    },\r\n\r\n    /*关闭筛选、确定筛选、倒退按钮的数据请求及配置*/\r\n    getData: function(){\r\n      if(main.page >= 1 || _page >= 1){\r\n        _page = 1;\r\n        main.page = 1;\r\n      }\r\n      main.isGetList = false;\r\n      main.isEnd = false;\r\n\r\n      main.getCateListData(_page, _inStock, _sort, _order, _brand, _attrId, function(_result, _code, _data) {\r\n        // console.log('a1');\r\n        if (_code === 0) {\r\n          /*alert(_data.html);*/\r\n          sbLib.dom.$goodsList.html(_data.html);\r\n          if(_data.html!=''){\r\n            var loadId = sbBase.layer.open({ type: 2 });\r\n            setTimeout(function() {\r\n              sbBase.layer.close(loadId);\r\n            }, 100);\r\n          }else{\r\n            //sbLib.dom.$loadText.find('.line-con').hide();\r\n            var loadNothing = sbBase.layer.tips('暂无商品信息，请重新筛选');\r\n            setTimeout(function() {\r\n              sbBase.layer.close(loadNothing);\r\n            }, 100);\r\n          }\r\n          main.infiniteScroll();\r\n          sbBase.lazyLoad.trigger();\r\n        } else {\r\n          _result.desc && sbBase.layer.tips(_result.desc);\r\n        }\r\n      });\r\n    },\r\n\r\n    /*关闭筛选、确定筛选、倒退按钮执行的数据*/\r\n    filterGetCateListData: function(){\r\n\r\n      main.getData();\r\n\r\n      isGetData = false;\r\n\r\n      main.historyState(_brand, _attrId, function(link) {\r\n        var params;\r\n        params = sbCom.urlParse(link).params;\r\n        _brand = params['brand'];\r\n        _attrId =params['attrId'];\r\n        //alert(params);\r\n        main.getData();\r\n\r\n        if(isGetData){\r\n          main.getData();\r\n        }\r\n\r\n      });\r\n    },\r\n\r\n    /*地址栏url动态改变*/\r\n    historyState: function(_brand, _attrId, changed){\r\n      var _url;\r\n      _url = '/cate_list.html?catId=' + _catId + '&brand=' + _brand + '&attrId=' + _attrId + '&sort=' + _sort + '&order=' + _order + '&stock=' + _inStock;\r\n      sbCom.historyState.init({\r\n        url: _url,\r\n        changed: function(link) {\r\n          changed && changed(link);\r\n        }\r\n      });\r\n    },\r\n\r\n    /*根据url判断筛选条件的选中状态*/\r\n    chooseStatus: function(myClass,attrName,queryAttr){\r\n      sbLib.dom.$cateFilter.find(myClass).each(function(){\r\n        var _eachBrand = $(this).attr(attrName);\r\n        if(queryAttr.indexOf(_eachBrand) > -1 ){\r\n          var idVal = $(this).parent().attr('id');\r\n          $(this).addClass('on').siblings().removeClass('on');\r\n          if(idVal !== 'brandItems'){\r\n            var selectedAttrId = $(this).attr('attrvalid') || '';\r\n            $(this).parent().attr('itemAttrvalid',selectedAttrId);\r\n            /*alert($(this).parent().attr('itemAttrvalid'));*/\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    /*iScroll滚动初始化*/\r\n    iscrollFn: function(){\r\n      main.myScroll = new sbBase.iScroll('.scroll-wrap', {\r\n        scrollX: false,\r\n        scrollY: true,\r\n        preventDefault: false\r\n      });\r\n    },\r\n\r\n    /*筛选条件--更多*/\r\n    moreFilter: function(myClass,defRem,cb){\r\n      var _sCategoryItems = $(myClass).find('.category-items');\r\n      var myHeight = _sCategoryItems.height();\r\n      var defHeight = defRem*fz;\r\n      var scrollWrapH = sbLib.dom.$cateFilter.find('.scroll-wrap').height();\r\n      var scrollFilterH = sbLib.dom.$cateFilter.find('.scroll-filter').height();\r\n        /*console.log(myClass);console.log(myHeight);console.log(defRem);console.log(defHeight);*/\r\n      if(myHeight > defHeight){\r\n          _sCategoryItems.height(defRem + 'rem');\r\n          sbLib.dom.$cateFilter.find(myClass).find('.more').show().on('tap',function(){\r\n            sbLib.dom.$cateFilter.find(myClass).find('.category-items').height('auto').find('.retract').show();\r\n            /*console.log($(this).parents(myClass));*/\r\n            $(this).hide().siblings().show();\r\n            /*点击'更多'后iScroll的滚动*/\r\n            sbLib.dom.$cateFilter.find('.scroll-filter').addClass('h-auto');\r\n            main.iscrollFn();\r\n        });\r\n      }else{\r\n        _sCategoryItems.height((myHeight)/fz + 'rem');\r\n        sbLib.dom.$cateFilter.find(myClass).find('.more').hide();\r\n      }\r\n      cb && cb();\r\n    },\r\n\r\n    /*筛选条件--收起*/\r\n    hideFilter: function(myClass,defRem){\r\n      sbLib.dom.$cateFilter.find(myClass).find('.retract').on('tap',function(){\r\n          $(this).hide().siblings().show();\r\n          sbLib.dom.$cateFilter.find(myClass).find('.category-items').height(defRem + 'rem');\r\n          /*点击'收起'后iScroll的滚动*/\r\n          sbLib.dom.$cateFilter.find('.scroll-filter').removeClass('h-auto');\r\n          main.iscrollFn();\r\n      });       \r\n    },\r\n\r\n    /*点击筛选后，url中的参数累加*/\r\n    urlFilter: function(){\r\n      _attrId = '';\r\n      sbLib.dom.$cateFilter.find('.category-class').find('ul').each(function(){\r\n        var _tempAttrId = $(this).attr('itemAttrvalid') || '';\r\n          if(_attrId == ''){\r\n            if(_tempAttrId == ''){\r\n              _attrId = '';\r\n            }else{\r\n              _attrId = _tempAttrId;\r\n            }\r\n          }else{\r\n            if(_tempAttrId == ''){\r\n              _attrId = _attrId;\r\n            }else{\r\n              _attrId += ',' + _tempAttrId;\r\n            }\r\n          }\r\n      });\r\n    },\r\n\r\n    /*筛选按钮状态*/\r\n    optionsStatus: function(){\r\n      if(_brand !== '' || _attrId !== ''){\r\n        sbLib.dom.$goodsNav.find('.options').addClass('in-options');\r\n      }else{\r\n        sbLib.dom.$goodsNav.find('.options').removeClass('in-options');\r\n      }      \r\n    },\r\n\r\n    /*绑定事件*/\r\n    bindFn: function(){\r\n\r\n      /*打开筛选*/\r\n      sbLib.dom.$goodsNav.find('.options').on('tap',function(){\r\n        sbLib.dom.$filterMask.addClass('show');\r\n        sbLib.dom.$cateFilter.addClass('show');\r\n        $('body').bind('touchmove',function(e){e.preventDefault();});\r\n        main.iscrollFn();\r\n      });\r\n\r\n      /*筛选条件的筛选点击事件*/\r\n      sbLib.dom.$cateFilter.find(ctrlEle).on('tap',function(){\r\n        var loadId = sbBase.layer.open({ type: 2 });\r\n        setTimeout(function() {\r\n          sbBase.layer.close(loadId);\r\n        }, 100);\r\n\r\n        $(this).toggleClass('on').siblings().removeClass('on');\r\n        var idVal = $(this).parent().attr('id');\r\n        var classVal = $(this).hasClass('on');\r\n        var selectedAttrId = $(this).attr('attrvalid') || '';\r\n\r\n        if(idVal == 'brandItems'){\r\n          if(classVal){\r\n            _brand = $(this).attr('brandid');\r\n          }else{\r\n            _brand = '';\r\n          }\r\n        }else{\r\n          if(classVal){\r\n            /*console.log('url增参');*/\r\n            $(this).parent().attr('itemAttrvalid',selectedAttrId);\r\n          }else{\r\n            /*console.log('url减参');*/\r\n            $(this).parent().attr('itemAttrvalid','');\r\n          }\r\n          main.urlFilter();\r\n        }\r\n      });\r\n\r\n      /*确定筛选*/\r\n      sbLib.dom.$cateFilter.find('.choose').on('tap',function(){\r\n        /*数据请求*/\r\n        main.filterGetCateListData();\r\n        // console.log('点击筛选时isGetList是'+main.isGetList+\"嗯isEnd是\"+main.isEnd);\r\n\r\n        /*筛选按钮状态*/\r\n        main.optionsStatus();\r\n        sbLib.dom.$cateFilter.removeClass('show');\r\n        sbLib.dom.$filterMask.removeClass('show');\r\n        $('body').unbind('touchmove');\r\n      });  \r\n\r\n      /*关闭筛选*/\r\n      sbLib.dom.$cateFilter.find('.close-filter').on('tap',function(){\r\n        _brand = '';\r\n        _attrId = '';\r\n        /*熄灭筛选按钮状态*/\r\n        sbLib.dom.$goodsNav.find('.options').removeClass('in-options');\r\n        sbLib.dom.$cateFilter.find(ctrlEle).removeClass('on');\r\n\r\n        /*数据请求*/\r\n        main.filterGetCateListData();\r\n        // console.log('关闭筛选时isGetList是'+main.isGetList+\"嗯isEnd是\"+main.isEnd);\r\n\r\n        sbLib.dom.$cateFilter.removeClass('show');\r\n        sbLib.dom.$filterMask.removeClass('show');\r\n        $('body').unbind('touchmove');\r\n      });\r\n    },\r\n\r\n    /*@description 分类筛选*/\r\n    cateFilter: function(){\r\n      main.bindFn();\r\n      /*筛选按钮状态*/\r\n      main.optionsStatus();\r\n      /*根据url执行品牌筛选的选中状态.category-brand 注意留空格*/\r\n      main.chooseStatus('.category-brand ' + ctrlEle,'brandid',_brand);\r\n      /*根据url执行其他筛选的选中状态.category-class 注意留空格*/\r\n      main.chooseStatus('.category-class ' + ctrlEle,'attrvalid',_attrId);\r\n      /*执行品牌筛选更多*/\r\n      main.moreFilter('.category-brand',2.5);\r\n      main.hideFilter('.category-brand',2.5);\r\n      /*执行其他筛选更多*/\r\n      var categoryClassLen = $('.category-class').length;\r\n      for (var i = 0; i <= categoryClassLen; i++){\r\n        main.moreFilter('.category-class'+i,3);\r\n        main.hideFilter('.category-class'+i,3);        \r\n      }\r\n    }\r\n\r\n  };\r\n  return sbLib.app.commonCateGoodsList = main;\r\n});\r\n",
    "app/_common/cateIndex.js": "\r\n/*\r\n * @fileOverview cateIndex\r\n * @description 分类首页\r\n */\r\ndefine('app/_common/cateIndex',['_base/lazyLoad'],function() {\r\n  var main, sbBase;\r\n    sbBase = sbLib.base;\r\n    sbLib.app = sbLib.app || {};\r\n  main = {\r\n    init: function() {\r\n      sbBase.lazyLoad.init({\r\n        isNew: true\r\n      });\r\n      sbBase.lazyLoad.trigger();\r\n    }\r\n  };\r\n  sbLib.app.commonCateIndex = main;\r\n});\r\n",
    "app/_common/goodsList.js": "\r\n/*\r\n * @fileOverview 列表-商品的无限加载模块\r\n * @author pjg\r\n */\r\ndefine('app/_common/goodsList',['app/_common','_base/lazyLoad','_base/layer','_base/infiniteScroll'],function() {\r\n  var main, sbBase, sbCom, sbMods;\r\n  sbBase = sbLib.base;\r\n  sbMods = sbLib.mods;\r\n  sbCom = sbLib.common;\r\n  sbLib.app = sbLib.app || {};\r\n  sbLib.dom = sbLib.dom || {};\r\n  main = {\r\n    init: function() {\r\n      sbBase.lazyLoad.init({\r\n        isNew: true\r\n      });\r\n      sbBase.lazyLoad.trigger();\r\n      main.domCache();\r\n      return main.infiniteScroll();\r\n    },\r\n\r\n    /*\r\n     * @description 缓存dom\r\n     */\r\n    domCache: function() {\r\n      return sbLib.common.setObjVariable(sbLib.dom, 'goodsList,loadText', ',');\r\n    },\r\n\r\n    /*\r\n     * @description 滚动加载配置\r\n     */\r\n    specialId: specialId || sbCom.getQueryString('special_id'),\r\n    listTolpage: parseInt(listTolpage, 10),\r\n    page: 1,\r\n    isGetList: false,\r\n    isEnd: false,\r\n\r\n    /*\r\n     * @description 获取商品列表数据\r\n     * @param {Number} page 第几页\r\n     * @param {Number} inStock 是否有货 (显示有货，可选参数，默认显示全部,1为有货，0为全部)\r\n     * @param {Number} sort 排序 默认销量高到低排序。可选值：renqi_desc,price_asc,price_desc)\r\n     * @param {Function} cb 回调\r\n     */\r\n    getGoodsListData: function(page, inStock, sort, cb) {\r\n      var _data;\r\n      _data = {\r\n        special_id: main.specialId,\r\n        in_stock: inStock || \"\",\r\n        sort: sort || \"\",\r\n        page: page\r\n      };\r\n      return sbCom.ajaxData({\r\n        url: '/service/getGoodsList',\r\n        data: _data\r\n      }, function(result) {\r\n        var _code, _result;\r\n        _result = result || {\r\n          code: -1,\r\n          desc: \"网络繁忙！\"\r\n        };\r\n        _code = parseInt(_result.code, 10);\r\n        _data = _result.data || {\r\n          html: ''\r\n        };\r\n        return cb(_result, _code, _data);\r\n      });\r\n    },\r\n\r\n    /*\r\n     * @description 滚动加载\r\n     */\r\n    infiniteScroll: function() {\r\n      var _infiniteScroll;\r\n      _infiniteScroll = sbBase.infiniteScroll.init({\r\n        bufferPx: 150,\r\n        time: 200,\r\n        onNear: function() {\r\n          var _inStock, _page, _sort;\r\n          if (main.isGetList) {\r\n            return false;\r\n          }\r\n          if (!main.isEnd) {\r\n            main.isGetList = true;\r\n            sbLib.dom.$loadText.show().find('legend').html(\"正在拼命加载中\");\r\n            main.page++;\r\n            _page = main.page;\r\n            _inStock = sbCom.getQueryString('in_stock');\r\n            _sort = sbCom.getQueryString('sort');\r\n            return main.getGoodsListData(_page, _inStock, _sort, function(_result, _code, _data) {\r\n              main.isGetList = false;\r\n              if (_code === 0) {\r\n                sbLib.dom.$loadText.hide();\r\n                sbLib.dom.$goodsList.append(_data.html);\r\n                sbBase.lazyLoad.trigger();\r\n                if (main.page >= _data.total_page) {\r\n                  return main.isEnd = true;\r\n                }\r\n              }\r\n            });\r\n          } else {\r\n            sbLib.dom.$loadText.show().find('legend').html(\"已经是最后一页\");\r\n            return _infiniteScroll.remove();\r\n          }\r\n        },\r\n        onEnd: null,\r\n        onScroll: function() {}\r\n      });\r\n      if (main.listTolpage <= 1) {\r\n        main.isEnd = true;\r\n      }\r\n      if (main.page >= 1) {\r\n        return _infiniteScroll.start();\r\n      }\r\n    }\r\n  };\r\n  return sbLib.app.commonGoodsList = main;\r\n});\r\n",
    "app/_common/payWay.js": "// Generated by CoffeeScript 1.9.3\r\ndefine('app/_common/payWay',['_base/docCookies','_base/layer','app/_common'],function() {\r\n    var sbLib = window.sbLib || (window.sbLib = {});\r\n    sbLib.app = sbLib.app || {};\r\n    var wxFlag = sbLib.common.isWeixin();\r\n    var _host = \"//\" + window.location.host;\r\n    var _ok_url = encodeURIComponent(encodeURIComponent(_host + '/payOk.html'));\r\n    var _fail_url = encodeURIComponent(encodeURIComponent(_host + '/payFail.html'));\r\n\r\n    // console.log(_ok_url,_fail_url);\r\n    var main = {\r\n        key: sbLib.base.docCookies.getItem('key'),\r\n\r\n        // 获取环境\r\n        getDomain: function(){\r\n            var domain = sbLib.common.getDomain()\r\n            if(domain=='local.') domain = 'test.';\r\n            return domain;\r\n        },\r\n\r\n        /*跳转 */\r\n        gotoPage: function(url) {\r\n            window.location.href = url;\r\n            return true;\r\n        },\r\n\r\n        /*获取微信支付地址并跳转 */\r\n        getWxUrl: function(pay_sn) {\r\n            var _accessToken, _domain, _pay_sn, _url;\r\n            _pay_sn = pay_sn;\r\n            _accessToken = main.key;\r\n            _domain = main.getDomain();\r\n            // 微信里面回调url必须带有协议名，即必须包含'http:'\r\n            var _okurl = encodeURIComponent(encodeURIComponent('http:' + _host + '/payOk.html'));\r\n            var _failurl = encodeURIComponent(encodeURIComponent('http:' + _host + '/payFail.html'));\r\n            if (pay_sn) {\r\n                _url = \"http://\" + _domain + \"cart.api.shenba.com/payment/pay?client=h5&accessToken=\" + _accessToken + \"&pay_sn=\" + _pay_sn + \"&payment_code=wxpay&payment_type=jsapi&ok_back_url=\" + _okurl + \"&fail_back_url=\" + _failurl;\r\n                main.gotoPage(_url);\r\n            }\r\n        },\r\n\r\n        /*银联国际支付 如果有海外购商品时启用 */\r\n        getUnionUrl: function(pay_sn) {\r\n            // 银联支付回调url必须不能带有协议名，即不包含'http:'\r\n            var _accessToken, _domain, _pay_sn, _url;\r\n            _pay_sn = pay_sn;\r\n            _accessToken = main.key;\r\n            _domain = main.getDomain();\r\n            if (pay_sn) {\r\n                debugger\r\n                _url = \"http://\" + _domain + \"cart.api.shenba.com/payment/pay?client=h5&accessToken=\" + _accessToken + \"&pay_sn=\" + _pay_sn + \"&payment_code=unionpay&payment_type=wap&ok_back_url=\" + _ok_url + \"&fail_back_url=\" + _fail_url;\r\n                main.gotoPage(_url);\r\n            }\r\n        },\r\n\r\n        /*获取支付url  目前获取支付宝支付地址 */\r\n        // 支付宝支付的不必传递回调url，由服务端直接绑定\r\n        getPayUrl: function(pay_sn, failFn) {\r\n\r\n            var _data, _failFn, _pay_sn, _payment_code, _payment_type, _self;\r\n            main = main;\r\n            _payment_code = 'alipay';\r\n            _payment_type = 'wap';\r\n            _pay_sn = pay_sn;\r\n            _failFn = failFn || function() {};\r\n            if (main.payStat) {\r\n                return false;\r\n            }\r\n            main.changePayStat(false);\r\n            _data = {\r\n                domain: 'cart',\r\n                act: 'payment',\r\n                op: 'pay',\r\n                data: {\r\n                    accessToken: main.key,\r\n                    pay_sn: _pay_sn,\r\n                    payment_code: _payment_code,\r\n                    payment_type: _payment_type//,\r\n                    // ok_back_url: _ok_url,\r\n                    // fail_back_url: _fail_url\r\n                },\r\n                failure: function(err) {\r\n                    main.changePayStat(true);\r\n                    _failFn();\r\n                },\r\n                error: function(msg) {\r\n                    main.changePayStat(true);\r\n                    sbLib.base.layer.alert('<p style=\"text-align:center;\">数据提交失败！</p>');\r\n                    _failFn();\r\n                }\r\n            };\r\n            sbLib.common.ajaxData(_data, function(result) {\r\n                var _code;\r\n                main.changePayStat(true);\r\n                _code = parseInt(result.code, 10);\r\n                if (_code === 0) {\r\n                    if (sbLib.common.isWeixin()) {\r\n                        _url = 'http:' + _host + '/cart/alipayInWx.html?url=' + encodeURIComponent(result.data.pay_url);\r\n                        // console.log(result.data.pay_url);\r\n                        // debugger\r\n                        main.gotoPage(_url);\r\n                    } else {\r\n                        main.gotoPage(result.data.pay_url);\r\n                    }\r\n                } else {\r\n                    sbLib.base.layer.alert('<p style=\"text-align:center;\">' + result.desc + '</p>');\r\n                }\r\n            });\r\n        },\r\n        payStat: false,\r\n        changePayStat: function(flag) {\r\n            return main.payStat = flag;\r\n        },\r\n        /**\r\n         * @description 初始化支付方式\r\n         * @return {Object} _obj 支付方式\r\n         */\r\n        initPayWay: function(payment_list) {\r\n            var _arr, _default, _obj, _temp;\r\n            _default = [{\r\n                payment_name: \"微信支付\",\r\n                payment_code: \"wxpay\",\r\n                is_default: 0\r\n            }, {\r\n                payment_name: \"支付宝\",\r\n                payment_code: \"alipay\",\r\n                is_default: 0\r\n            }, {\r\n                payment_name: \"银联支付\",\r\n                payment_code: \"unionpay\",\r\n                is_default: 0\r\n            }];\r\n            _temp = [];\r\n            _arr = [];\r\n            if ($.isArray(payment_list) && payment_list.length) {\r\n                _temp = payment_list;\r\n            } else {\r\n                _temp = _default;\r\n            }\r\n            $.each(_temp, function(index, obj) {\r\n                obj.is_default = 0;\r\n                if (obj.payment_code === 'wxpay') {\r\n                    if (wxFlag) {\r\n                        return _arr.push(obj);\r\n                    }\r\n                } else {\r\n                    return _arr.push(obj);\r\n                }\r\n            });\r\n            _arr[0].is_default = 1;\r\n            _obj = {\r\n                list: _arr,\r\n                type: _arr[0].payment_code\r\n            };\r\n            return _obj;\r\n        },\r\n        /**\r\n         * @description 判断支付方式并且执行相应的支付\r\n         * @param {String} type 支付方式\r\n         * @param {String} pay_sn 订单号\r\n         * @param {Function} cb 回调方法\r\n         */\r\n        goPay: function(type, pay_sn, cb) {\r\n            var _cb = cb || function() {};\r\n            switch (type) {\r\n                case \"wxpay\":\r\n                    main.getWxUrl(pay_sn);\r\n                    cb()\r\n                    break;\r\n                case \"alipay\":\r\n                    main.getPayUrl(pay_sn, cb);\r\n                    break;\r\n                case \"unionpay\":\r\n                    main.getUnionUrl(pay_sn);\r\n                    cb()\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n\r\n    sbLib.app.cartPayWay = main;\r\n});\r\n",
    "app/_common/paymentList.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/**\r\n * 支付方式选择组件\r\n * 应用于 购物车、订单列表（未支付的订单）、订单详情（未支付的订单）等\r\n * @author PJG\r\n * @update 2016-03-23 16:47:08\r\n */\r\ndefine('app/_common/paymentList',['vmcore','app/_common','app/_common/payWay','_base/layer','_data/cart'],function(vmcore, iTpl) {\r\n  var main, sbBase, sbCom, sbData;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  sbData = sbLib.data;\r\n  main = {\r\n    vmId: '',\r\n    isWeixin: sbCom.isWeixin(),\r\n    isAlipay: false,\r\n    getPaymentList: function(paySn) {\r\n      var _layer, opts, vmName;\r\n      vmName = main.vmId = this.vmId;\r\n      _layer = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      _VM_[vmName].paySn = paySn;\r\n      opts = {\r\n        pay_sn: paySn\r\n      };\r\n      return sbData.cart.getPaymentList(opts, function(res) {\r\n        if (res.code === '00000' && res.data && res.data && res.data.payment_list) {\r\n          _VM_[vmName].payment_list = main.payListInit(res.data.payment_list);\r\n          _VM_[vmName].isShowPayBox = true;\r\n          _VM_[vmName].isTouchMove = false;\r\n          main.setDefaultPayType();\r\n          return sbBase.layer.close(_layer);\r\n        } else {\r\n          sbBase.layer.close(_layer);\r\n          return sbBase.layer.tips(_result.desc);\r\n        }\r\n      });\r\n    },\r\n    payListInit: function(list) {\r\n      var isWeixin;\r\n      list = list || [];\r\n      isWeixin = main.isWeixin;\r\n      list.map(function(val) {\r\n        if (val.payment_code === 'alipay') {\r\n          main.isAlipay = true;\r\n        }\r\n        if (val.payment_code === 'wxpay') {\r\n          val.is_show = isWeixin;\r\n        } else {\r\n          val.is_show = true;\r\n        }\r\n        return val;\r\n      });\r\n      return list;\r\n    },\r\n    setPayType: function(type) {\r\n      var vmName;\r\n      vmName = main.vmId = this.vmId;\r\n      return _VM_[vmName].payType = type;\r\n    },\r\n    setDefaultPayType: function() {\r\n      var vmName;\r\n      vmName = main.vmId = this.vmId;\r\n      return _VM_[vmName].payType = main.isWeixin ? 'wxpay' : main.isAlipay ? 'alipay' : 'unionpay';\r\n    },\r\n    goToPay: function() {\r\n      var _layerId, _paySn, _payType, vmName;\r\n      vmName = main.vmId = this.vmId;\r\n      _layerId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      _payType = _VM_[vmName].payType;\r\n      _paySn = _VM_[vmName].paySn;\r\n      _VM_[vmName].isShowPayBox = false;\r\n      _VM_[vmName].isTouchMove = true;\r\n      sbLib.app.cartPayWay.goPay(_payType, _paySn, function() {});\r\n      return setTimeout(function() {\r\n        return sbBase.layer.close(_layerId);\r\n      }, 400);\r\n    },\r\n    closePayBox: function() {\r\n      var vmName;\r\n      vmName = main.vmId = this.vmId;\r\n      return _VM_[vmName].isShowPayBox = false;\r\n    },\r\n    stopTouchMove: function(e) {\r\n      var vmName;\r\n      vmName = main.vmId = this.vmId;\r\n      if (_VM_[vmName].isShowPayBox) {\r\n        e.preventDefault();\r\n        return e.stopPropagation();\r\n      }\r\n    }\r\n  };\r\n  return sbLib.app.paymentList = main;\r\n});\r\n",
    "app/_common/specialInit.js": "\r\n/*\r\n * @fileOverview 专场缩放，兼容移动布局\r\n * @author pjg\r\n */\r\ndefine('app/_common/specialInit',['_mods/ccweditor','_mods/spnav'],function() {\r\n  var sbMods;\r\n  sbMods = sbLib.mods;\r\n  sbLib.app = sbLib.app || {};\r\n  return sbLib.app.commonSpecialInit = function() {\r\n    var $wapSd, deviceWidth, scale;\r\n    $wapSd = $(\"#wapSd\");\r\n    deviceWidth = document.body.clientWidth;\r\n    scale = deviceWidth / 640;\r\n    if (scale < 1) {\r\n      $wapSd.attr('style', 'zoom:' + scale).show();\r\n    }\r\n    sbMods.ccweditor.struc();\r\n    return sbMods.spnav.init();\r\n  };\r\n});\r\n",
    "app/_common/tplIndexDialogAd.js": "\r\n/*\r\n * @description 顶部广告\r\n */\r\ndefine('app/_common/tplIndexDialogAd',['app/_common','_base/layer','_base/docCookies'],function() {\r\n  var sbBase, sbCom;\r\n  sbBase = sbLib.base;\r\n  sbCom = sbLib.common;\r\n  sbLib.app = sbLib.app || {};\r\n  return sbLib.app.tplIndexDialogAd = function() {\r\n    var $appDowload;\r\n    $appDowload = $('#appDowload');\r\n    if (sbBase.docCookies.getItem('dialogIndex')) {\r\n      return false;\r\n    }\r\n    return sbCom.ajaxData({\r\n      domain: 'pc',\r\n      act: 'index',\r\n      op: 'getOneAdvert',\r\n      data: {\r\n        ap_id: 49\r\n      }\r\n    }, function(result) {\r\n      var img, _ad, _code, _data, _result;\r\n      _result = result || {\r\n        code: -1,\r\n        desc: \"网络繁忙！\"\r\n      };\r\n      _code = parseInt(_result.code, 10);\r\n      _data = _result.data || [{}];\r\n      if (_code === 0) {\r\n        _ad = _data[0];\r\n        if (_ad.imageUrl && _ad.targetUrl) {\r\n          img = new Image();\r\n          img.src = _ad.imageUrl;\r\n          return img.onload = function() {\r\n            var tpl;\r\n            tpl = \"<div class=\\\"dialogBg\\\"></div>\\n<div class=\\\"dialog-wrap\\\" id=\\\"sdDialog\\\">\\n    <div class=\\\"dialog-index\\\">\\n        <a href=\\\"\" + _ad.targetUrl + \"\\\" class=\\\"dislogThumb\\\"><img src=\\\"\" + _ad.imageUrl + \"\\\" alt=\\\"\" + _ad.title + \"\\\"></a>\\n        <a href=\\\"javascript:void(0);\\\" class=\\\"icon icon-closeX iClose\\\"></a>\\n    </div>\\n</div>\";\r\n            $('body').append(tpl);\r\n            return $('#sdDialog').on('touchend', '.iClose', function(e) {\r\n              $('#sdDialog').hide().prev(\".dialogBg\").hide();\r\n              e.preventDefault();\r\n              return sbBase.docCookies.setItem('dialogIndex', true, 86400);\r\n            }).on(\"touchend\", \".dislogThumb\", function(e) {\r\n\r\n              /*将app私有协议以iframe形式打开，app下载链接以链接形式打开，以便优先打开已安装的app */\r\n              var ifr;\r\n              ifr = '<iframe frameborder=\"0\" name=\"Iframe1\" id=\"appDownFrame\" src=\"shenba://index?isfromwap=1\" width=\"0\" height=\"0\" style=\"display:none;\"></iframe>';\r\n              $('body').append(ifr);\r\n              e.preventDefault();\r\n              return setTimeout(function() {\r\n                return $('#appDownFrame').remove();\r\n              }, 2000);\r\n            });\r\n          };\r\n        }\r\n      }\r\n    });\r\n  };\r\n});\r\n",
    "app/_common/tplTopAd.js": "\r\n/*\r\n * @description 顶部广告\r\n */\r\ndefine('app/_common/tplTopAd',['app/_common','_base/docCookies'],function() {\r\n  var sbBase, sbCom;\r\n  sbBase = sbLib.base;\r\n  sbCom = sbLib.common;\r\n  sbLib.app = sbLib.app || {};\r\n  return sbLib.app.tplTopAd = function() {\r\n    var $appDowload;\r\n    $appDowload = $('#appDowload');\r\n    if (sbBase.docCookies.getItem('closeTopAd')) {\r\n      return false;\r\n    }\r\n    return sbCom.ajaxData({\r\n      domain: 'pc',\r\n      act: 'index',\r\n      op: 'getOneAdvert',\r\n      data: {\r\n        ap_id: 50\r\n      }\r\n    }, function(result) {\r\n      var img, _ad, _code, _data, _result;\r\n      _result = result || {\r\n        code: -1,\r\n        desc: \"网络繁忙！\"\r\n      };\r\n      _code = parseInt(_result.code, 10);\r\n      _data = _result.data || [];\r\n      if (_code === 0) {\r\n        _ad = _data[0];\r\n        if (_ad.imageUrl && _ad.targetUrl) {\r\n          img = new Image();\r\n          img.src = _ad.imageUrl;\r\n          return img.onload = function() {\r\n            var _tpl;\r\n            _tpl = \"<a href=\\\"\" + _ad.targetUrl + \"\\\" class=\\\"appdownThumb\\\"><img src=\\\"\" + _ad.imageUrl + \"\\\" alt=\\\"\" + _ad.title + \"\\\"></a>\\n<a href=\\\"javascript:void(0);\\\" class=\\\"icon icon-closeX appClose\\\"></a>\";\r\n            $appDowload.html(_tpl);\r\n            return $appDowload.on(\"tap\", \".appClose\", function() {\r\n              $appDowload.remove();\r\n              return sbBase.docCookies.setItem('closeTopAd', true, 86400 * 7);\r\n            });\r\n          };\r\n        }\r\n      }\r\n    });\r\n  };\r\n});\r\n",
    "app/_detail/baseFn.js": "\r\n/**\r\n * @fileOverview 详情页面用到的公共函数\r\n * @author pjg\r\n * @description\r\n */\r\ndefine('app/_detail/baseFn',['app/_common','_base/layer'],function() {\r\n  var dom, main, sbBase, sbCom;\r\n  sbBase = sbLib.base;\r\n  sbCom = sbLib.common;\r\n  sbLib.app = sbLib.app || {};\r\n  dom = sbLib.dom;\r\n  main = {\r\n    init: function() {},\r\n\r\n    /*\r\n     * @description 获取列表数据\r\n     * @param {Number} gid 商品id\r\n     * @param {Function} cb 回调\r\n     */\r\n    getGoodsData: function(gid, cb) {\r\n      return sbCom.ajaxData({\r\n        url: '/service/getGoodsDetail',\r\n        data: {\r\n          goods_id: gid\r\n        }\r\n      }, function(result) {\r\n        var _code, _data, _result;\r\n        _result = result || {\r\n          code: -1,\r\n          desc: \"网络繁忙！\"\r\n        };\r\n        _code = parseInt(_result.code, 10);\r\n        _data = _result.data || {\r\n          html: ''\r\n        };\r\n        return cb(_result, _code, _data);\r\n      });\r\n    },\r\n\r\n    /*\r\n     * @description 加入购物车接口\r\n     */\r\n    addCart: function(opts) {\r\n      return sbCom.ajaxData({\r\n        domain: 'cart',\r\n        act: 'cart',\r\n        op: 'add',\r\n        type: 'post',\r\n        data: {\r\n          accessToken: opts.token,\r\n          goods_id: opts.gid,\r\n          quantity: opts.quantity\r\n        },\r\n        success: opts.succ,\r\n        failure: opts.fail || function() {}\r\n      });\r\n    },\r\n    getCouponList: function(opts) {\r\n      return sbCom.ajaxData({\r\n        domain: 'item',\r\n        act: 'goods',\r\n        op: 'coupon_list',\r\n        type: 'get',\r\n        data: {\r\n          goods_id: opts.goods_id,\r\n          accessToken: opts.accessToken || \"\"\r\n        },\r\n        success: opts.succ,\r\n        failure: opts.fail || function() {}\r\n      });\r\n    },\r\n    receiveCoupon: function(opts) {\r\n      return sbCom.ajaxData({\r\n        domain: 'my',\r\n        act: 'coupon',\r\n        op: 'receiveCoupon',\r\n        type: 'get',\r\n        data: {\r\n          coupon_ids: opts.coupon_ids,\r\n          accessToken: opts.accessToken || \"\"\r\n        },\r\n        success: opts.succ,\r\n        failure: opts.fail || function() {}\r\n      });\r\n    },\r\n\r\n    /*参数点击 */\r\n    specClick: function(elem) {\r\n      var _elem;\r\n      _elem = $(elem);\r\n      return _elem.addClass('active').siblings().removeClass('active');\r\n    },\r\n\r\n    /*根据选中的内容找到goods_id */\r\n    getActiveGoodsId: function() {\r\n      var gid, _strArr;\r\n      gid = '';\r\n      _strArr = [];\r\n      dom.$param.each(function(index, item) {\r\n        var _elem;\r\n        _elem = $(item);\r\n        if (_elem.hasClass('active')) {\r\n          return _strArr.push(_elem.text());\r\n        }\r\n      });\r\n      gid = main.findGoodsId(_strArr.join(\"|\"));\r\n      return gid;\r\n    },\r\n    findGoodsId: function(paramStr) {\r\n      var gid, item, _i, _len, _specGoodsList;\r\n      gid = '';\r\n      _specGoodsList = spec_goods_list || [];\r\n      for (_i = 0, _len = _specGoodsList.length; _i < _len; _i++) {\r\n        item = _specGoodsList[_i];\r\n        if (item.spec_value === paramStr) {\r\n          gid = item.goods_id;\r\n          return gid;\r\n        }\r\n      }\r\n      return gid;\r\n    },\r\n\r\n    /*判断两个数组是否相等 */\r\n    checkGoodsSpec: function(strArr, specStr) {\r\n      var _flag, _flag1, _specArr;\r\n      _specArr = specStr.split(\"|\");\r\n      _flag1 = [];\r\n      _flag = false;\r\n      if (strArr.join('|') === specStr) {\r\n        _flag = true;\r\n      }\r\n      return _flag;\r\n    },\r\n    checkGoodsStatus: function() {\r\n      var tempObj, _specGoodsList, _typeList;\r\n      _specGoodsList = spec_goods_list || [];\r\n      _typeList = [];\r\n      tempObj = {};\r\n      dom.$layer.find('dt').each(function(index, item) {\r\n        var _type;\r\n        _type = item.innerText;\r\n        _typeList.push(_type);\r\n        return tempObj[_type] = '';\r\n      });\r\n      if (_typeList.length <= 1) {\r\n        return false;\r\n      } else {\r\n        return _typeList.forEach(function(val) {\r\n          var key, list, obj, type;\r\n          obj = dom.$layer.find('li.active:not([type=' + val + '])');\r\n          type = obj.text();\r\n          key = obj.attr('type');\r\n          list = dom.$layer.find('li[type=' + val + ']');\r\n          return list.each(function(index, item) {\r\n            var gid, k, param, v, _item;\r\n            _item = $(item);\r\n            tempObj[key] = type;\r\n            tempObj[val] = _item.text();\r\n            param = [];\r\n            for (k in tempObj) {\r\n              v = tempObj[k];\r\n              param.push(v);\r\n            }\r\n            gid = main.findGoodsId(param.join('|'));\r\n            if (gid) {\r\n              return _item.attr('gid', gid).removeClass('gray');\r\n            } else {\r\n              return _item.attr('gid', null).addClass('gray');\r\n            }\r\n          });\r\n        });\r\n      }\r\n    },\r\n\r\n    /*验证数字 */\r\n    checkNum: function(elem) {\r\n      var regx, _val;\r\n      _val = ~~$(elem).text();\r\n      regx = /^[1-9]\\d*$/;\r\n      if (!regx.test(_val)) {\r\n        return sbBase.layer.tips(\"请输入正确的数字\");\r\n      }\r\n    },\r\n\r\n    /*验证商品购买数量 */\r\n    goodsStorage: goods_storage,\r\n    checkQuantity: function() {\r\n      var _buynum;\r\n      _buynum = parseInt(dom.$amoutInput.text());\r\n      if (_buynum >= 1 && _buynum <= main.goodsStorage) {\r\n        return _buynum;\r\n      } else if (_buynum < 1) {\r\n        dom.$amoutInput.text(1);\r\n        sbBase.layer.tips('购买数目必须大于1');\r\n        _buynum = 1;\r\n        return _buynum;\r\n      } else if (_buynum > main.goodsStorage) {\r\n        sbBase.layer.tips('您最多可以购买' + main.goodsStorage + '件该商品');\r\n        dom.$amoutInput.text(main.goodsStorage);\r\n        _buynum = main.goodsStorage;\r\n        return _buynum;\r\n      } else {\r\n        sbBase.layer.tips('请正确选择购买数量');\r\n        return false;\r\n      }\r\n    },\r\n\r\n    /*跳转页面 */\r\n    gotoPage: function(url) {\r\n      window.location.href = url;\r\n      return true;\r\n    },\r\n    historyState: function(gid, changed) {\r\n      var _url;\r\n      changed = changed || function() {};\r\n      _url = window.location.href.split('?')[0] + \"?goods_id=\" + gid;\r\n      return sbCom.historyState.init({\r\n        url: _url,\r\n        changed: changed\r\n      });\r\n    },\r\n    startLoader: function() {\r\n      if (typeof main.loader === 'undefined') {\r\n        return main.loader = sbBase.layer.open({\r\n          type: 2\r\n        });\r\n      }\r\n    },\r\n    endLoader: function() {\r\n      return main.loader = sbBase.layer.close(main.loader);\r\n    }\r\n  };\r\n  return sbLib.app.detailBaseFn = main;\r\n});\r\n",
    "app/_detail/buy.js": "\r\n/**\r\n * @fileOverview 小店商品详情页面\r\n * @author pjg\r\n * @description 商品详情页面购买相关逻辑\r\n * @return {Object} export: 通过init方法执行数据和交互初始化\r\n */\r\ndefine('app/_detail/buy',['app/_common','_base/docCookies','_base/layer','_base/iScroll','app/_detail/domCache','app/_detail/baseFn','app/_detail/coupon'],function() {\r\n  var app, baseFn, buy, dom, sbBase, sbCom;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  dom = sbLib.dom;\r\n  app = sbLib.app;\r\n  baseFn = app.detailBaseFn;\r\n  buy = {\r\n    init: function() {\r\n\r\n      /* 加载DOM缓存 */\r\n      sbLib.app.detailDomCache();\r\n\r\n      /*绑定动作 */\r\n      buy.bindFn();\r\n\r\n      /*是否显示属性选择弹窗 */\r\n      baseFn.checkGoodsStatus();\r\n      return buy.initVm();\r\n    },\r\n    initVm: function() {\r\n      var vm;\r\n      vm = app.detailGetCoupon.viewModel.call(buy);\r\n      _VM_[vm[\"$id\"]] = vmcore.define(vm);\r\n      return vmcore.scan();\r\n    },\r\n    isGot: true,\r\n    myScroll: null,\r\n    baseUrl: window.location.href.split('?')[0],\r\n\r\n    /*获取token */\r\n    accessToken: sbBase.docCookies.getItem('key'),\r\n\r\n    /*获取商品库存 */\r\n    goodsStorage: goods_storage,\r\n\r\n    /*获取小店id */\r\n\r\n    /*获取商品ID */\r\n    goodsId: goodsId || sbCom.getQueryString('goods_id'),\r\n\r\n    /*商品购买数量 */\r\n    quantity: parseInt($('.amount-con .count').text()),\r\n\r\n    /*获取弹窗开关 */\r\n    skuSwitch: sbCom.getQueryString('show_sku'),\r\n\r\n    /*SPU商品列表存储数组 */\r\n    _specGoods: spec_goods_list,\r\n\r\n    /*商品属性存储数组 */\r\n    _specValue: [],\r\n    isTouchMove: true,\r\n    skuHeadTpl: '<a href=\"javascript:;\" class=\"top-back\" id=\"closeSelection\"></a><span class=\"bar-title\">选择规格</span>',\r\n    couponHeadTpl: '<a href=\"javascript:;\" class=\"top-back\" id=\"closeCouponList\"></a><span class=\"bar-title\">领取优惠劵</span>',\r\n    bindFn: function() {\r\n      buy.selectSize();\r\n      buy.closeSelection();\r\n      buy.goodsParams();\r\n      buy.goodsNum();\r\n      buy.buyBtnEvent();\r\n      buy.containerTouchMove();\r\n      return buy.getCouponList();\r\n    },\r\n    showLayerHeader: function(tpl) {\r\n      tpl = tpl || buy.skuHeadTpl;\r\n      dom.$layerTitle.html(tpl).addClass('show');\r\n      dom.$navBar.css({\r\n        \"visibility\": \"visible\"\r\n      });\r\n      return dom.$headerTitle.hide();\r\n    },\r\n    hideLayerHeader: function() {\r\n      dom.$layerTitle.removeClass('show');\r\n      dom.$headerTitle.show();\r\n      return dom.$navBar.css({\r\n        \"visibility\": \"hidden\"\r\n      });\r\n    },\r\n\r\n    /*是否显示元素 */\r\n    isShowElement: function(flag) {\r\n      flag = parseInt(flag);\r\n      if (flag && flag === 1) {\r\n        dom.$mask.addClass('show');\r\n        dom.$layer.addClass('show');\r\n        dom.$buyBtn.hide();\r\n        dom.$buyNow.show();\r\n        return buy.showLayerHeader();\r\n      } else {\r\n        dom.$layer.removeClass('show');\r\n        buy.hideLayerHeader();\r\n        dom.$buyBtn.show();\r\n        dom.$buyNow.hide();\r\n        return dom.$mask.removeClass('show');\r\n      }\r\n    },\r\n    isShowSku: function() {\r\n      var _switch;\r\n      _switch = buy.skuSwitch;\r\n      return buy.isShowElement(_switch);\r\n    },\r\n    containerTouchMove: function() {\r\n      return dom.$container.on('touchmove', function(e) {\r\n        if (!buy.isTouchMove) {\r\n          e.preventDefault();\r\n          return e.stopPropagation();\r\n        }\r\n      });\r\n    },\r\n    decreaseShow: function(num) {\r\n      if (num <= 1) {\r\n        return dom.$decreaseNum.addClass('disable');\r\n      } else {\r\n        return dom.$decreaseNum.removeClass('disable');\r\n      }\r\n    },\r\n    selectSize: function() {\r\n      return dom.$sizeBtn.on('tap', function(e) {\r\n        buy.isTouchMove = false;\r\n        buy.showLayerHeader();\r\n        dom.$mask.addClass('show');\r\n        dom.$layer.addClass('show');\r\n        return buy.setScroll();\r\n      });\r\n    },\r\n    closeSelection: function() {\r\n      return dom.$layerTitle.on('tap', '#closeSelection', function(e) {\r\n        buy.isTouchMove = true;\r\n        dom.$mask.removeClass('show');\r\n        dom.$layer.removeClass('show');\r\n        return buy.hideLayerHeader();\r\n      }).on('tap', '#closeCouponList', function(e) {\r\n        buy.isTouchMove = true;\r\n        app.detailGetCoupon.hideLayer.call(buy);\r\n        return buy.hideLayerHeader();\r\n      });\r\n    },\r\n    getCouponList: function() {\r\n      return dom.$getCoupon.on('touchend', function() {\r\n        buy.isTouchMove = false;\r\n        buy.showLayerHeader(buy.couponHeadTpl);\r\n        return app.detailGetCoupon.getData.call(buy);\r\n      });\r\n    },\r\n    changeCartCount: function(num) {\r\n      return dom.$cartCount.html(~~dom.$cartCount.text() + num);\r\n    },\r\n    buyBtnEvent: function() {\r\n\r\n      /*选择颜色尺码后再点购买按钮 */\r\n      return dom.$btnList.on('tap', '.btn-add-cart', function(e) {\r\n        buy.quantity = baseFn.checkQuantity();\r\n\r\n        /*验证商品购买数量 */\r\n        if (buy.quantity && sbCom.checkMember()) {\r\n          return buy.addCart(function(res) {\r\n            var _scuuTipId;\r\n            if (~~res.code === 0) {\r\n              buy.changeCartCount(buy.quantity);\r\n              return _scuuTipId = sbBase.layer.open({\r\n                content: '<p style=\"text-align:center;\">添加购物车成功<p>',\r\n                btn: ['<em>去结算</em>', '<em>继续逛逛</em>'],\r\n                shade: !0,\r\n                shadeClose: !0,\r\n                yes: function() {\r\n                  var _url;\r\n                  sbBase.layer.close(_scuuTipId);\r\n                  _url = '/cart/index.html';\r\n                  return baseFn.gotoPage(_url);\r\n                },\r\n                no: function() {\r\n                  return sbBase.layer.close(_scuuTipId);\r\n                }\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      }).on('tap', '.btn-buy-now', function(e) {\r\n        buy.quantity = baseFn.checkQuantity();\r\n        if (buy.quantity && sbCom.checkMember()) {\r\n          return buy.addCart(function(res) {\r\n            var _url;\r\n            if (~~res.code === 0) {\r\n              _url = '/cart/index.html?cart_id=' + res.data.cart_id;\r\n              return baseFn.gotoPage(_url);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    goodsParams: function() {\r\n      return dom.$param.on('tap', function(event) {\r\n        var $target, gid;\r\n        if ($(this).hasClass('active') || $(this).hasClass('gray')) {\r\n          return false;\r\n        }\r\n        $target = $(event.target);\r\n        gid = $(this).attr('gid');\r\n\r\n        /*点击商品属性 */\r\n        baseFn.specClick($target);\r\n        if (gid !== null) {\r\n          buy.goodsId = gid;\r\n          return buy.getGoods(gid, function() {\r\n            return baseFn.historyState(gid, function(link) {\r\n              var params, _gid;\r\n              params = sbCom.urlParse(link).params;\r\n              _gid = params['goods_id'];\r\n              return buy.getGoods(_gid, function() {});\r\n            });\r\n          });\r\n        }\r\n      });\r\n    },\r\n    goodsNum: function() {\r\n      dom.$decreaseNum.on('tap', function(event) {\r\n        var _buynum;\r\n        if ($(this).hasClass('disable')) {\r\n          return false;\r\n        }\r\n        _buynum = parseInt(dom.$amoutInput.text());\r\n        if (_buynum > 1) {\r\n          dom.$amoutInput.text(parseInt(--_buynum, 10));\r\n          buy.quantity = parseInt(dom.$amoutInput.text());\r\n        } else {\r\n          sbBase.layer.tips('购买数目必须大于1');\r\n          return false;\r\n        }\r\n        return buy.decreaseShow(_buynum);\r\n      });\r\n      dom.$increaseNum.on('tap', function(event) {\r\n        var _buynum;\r\n        _buynum = parseInt(dom.$amoutInput.text());\r\n        if (_buynum < buy.goodsStorage) {\r\n          dom.$decreaseNum.removeClass('disable');\r\n          dom.$amoutInput.text(parseInt(++_buynum, 10));\r\n          buy.quantity = parseInt(dom.$amoutInput.text());\r\n        } else {\r\n          dom.$amoutInput.text(buy.goodsStorage);\r\n          sbBase.layer.tips('您最多可以购买' + buy.goodsStorage + '件该商品');\r\n          return false;\r\n        }\r\n        return buy.decreaseShow(_buynum);\r\n      });\r\n      return dom.$amoutInput.on(\"blur\", function() {\r\n        return baseFn.checkNum(this);\r\n      });\r\n    },\r\n    goodsParams: function() {\r\n      return dom.$param.on('tap', function(event) {\r\n        var $target, gid;\r\n        if ($(this).hasClass('active') || $(this).hasClass('gray')) {\r\n          return false;\r\n        }\r\n        $target = $(event.target);\r\n        gid = $(this).attr('gid');\r\n\r\n        /*点击商品属性 */\r\n        baseFn.specClick($target);\r\n        if (gid !== null) {\r\n          buy.goodsId = gid;\r\n          return buy.getGoods(gid, function() {\r\n            return baseFn.historyState(gid, function(link) {\r\n              var params, _gid;\r\n              params = sbCom.urlParse(link).params;\r\n              _gid = params['goods_id'];\r\n              return buy.getGoods(_gid, function() {});\r\n            });\r\n          });\r\n        }\r\n      });\r\n    },\r\n    setScroll: function(selector) {\r\n      var _selector;\r\n      _selector = selector || \"#skuScroller\";\r\n      if (buy.myScroll) {\r\n        buy.myScroll.destroy();\r\n        buy.myScroll = null;\r\n      }\r\n      return buy.myScroll = new sbBase.iScroll(_selector);\r\n    },\r\n    getGoods: function(gid, cb) {\r\n      if (buy.isGot && gid) {\r\n        buy.isGot = false;\r\n        baseFn.startLoader();\r\n        baseFn.checkGoodsStatus();\r\n        return baseFn.getGoodsData(gid, function(result) {\r\n          var error, _data;\r\n          buy.isGot = true;\r\n          if (~~result.code === 0) {\r\n            _data = result.data;\r\n            dom.$container.html(_data.html);\r\n            dom.$layer.html(_data.info);\r\n            try {\r\n              sbLib.app.detailDomCache();\r\n              baseFn.checkGoodsStatus();\r\n              buy.bindFn();\r\n              buy.setScroll();\r\n              buy.selectSize();\r\n              sbLib.app.detailSwipe();\r\n              sbLib.app.detailTimer.init();\r\n              sbBase.lazyLoad.trigger();\r\n            } catch (_error) {\r\n              error = _error;\r\n              console.log(error);\r\n            }\r\n            cb && cb();\r\n          } else {\r\n            baseFn.endLoader();\r\n            result.desc && sbBase.layer.tips(result.desc);\r\n          }\r\n          return setTimeout(function() {\r\n            return baseFn.endLoader();\r\n          }, 100);\r\n        });\r\n      }\r\n    },\r\n\r\n    /*提交并确认订单 */\r\n    addCart: function(cb) {\r\n      var _goods_id, _quantity, _token;\r\n      baseFn.startLoader();\r\n      _token = buy.accessToken;\r\n      _goods_id = buy.goodsId;\r\n      _quantity = buy.quantity;\r\n      return baseFn.addCart({\r\n        gid: buy.goodsId,\r\n        quantity: buy.quantity,\r\n        token: buy.accessToken,\r\n        succ: function(result) {\r\n          var _code, _data;\r\n          baseFn.endLoader();\r\n          _data = result.data;\r\n          _code = parseInt(result.code);\r\n          if (_code === 0) {\r\n            return cb(result);\r\n          } else if (_code === 12021) {\r\n            sbCom.delUserCookie();\r\n            return sbCom.checkMember();\r\n          } else {\r\n            return sbBase.layer.tips(_data.error);\r\n          }\r\n        },\r\n        fail: function() {\r\n          baseFn.endLoader();\r\n          return sbBase.layer.tips('请求失败');\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return sbLib.app.detailBuy = buy;\r\n});\r\n",
    "app/_detail/coupon.js": "\r\n/**\r\n * 领取优惠券的组件\r\n * @description 应用于 详情页 等\r\n * @author PJG\r\n * @update 2016-03-23 16:47:08\r\n */\r\ndefine('app/_detail/coupon',['vmcore','_tpl/detail','_base/layer','app/_detail/baseFn'],function(vmcore, iTpl) {\r\n  var baseFn, dom, main, sbBase, sbCom;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  sbLib.app = sbLib.app || {};\r\n  baseFn = sbLib.app.detailBaseFn;\r\n  dom = sbLib.dom;\r\n  main = {\r\n    vmId: \"couponList\",\r\n    isGetCoupon: false,\r\n    viewModel: function() {\r\n      var self, vm;\r\n      self = this;\r\n      vmcore.templateCache[\"coupon.html\"] = vmcore.templateCache[\"coupon.html\"] || iTpl.coupon;\r\n      vm = {\r\n        $id: main.vmId,\r\n        tpl: 'coupon.html',\r\n        list: [],\r\n        isShowCouponList: false,\r\n        token: self.accessToken,\r\n        render: function() {\r\n          return this.innerHTML;\r\n        },\r\n        getCoupon: function(cid, key) {\r\n          sbCom.checkMember();\r\n          return cid && _VM_[main.vmId].token && baseFn.receiveCoupon({\r\n            coupon_ids: cid,\r\n            accessToken: _VM_[main.vmId].token,\r\n            succ: function(res) {\r\n              if (res.code === '00000') {\r\n                return _VM_[main.vmId].list[key].state = 3;\r\n              } else if (res.code === '60004') {\r\n                return sbCom.checkLogin(res);\r\n              } else {\r\n                return sbBase.layer.tips(res.desc?res.desc:\"网络繁忙\");\r\n              }\r\n            }\r\n          });\r\n        },\r\n        showLayer: function() {\r\n          return main.showLayer.call(self);\r\n        },\r\n        hideLayer: function() {\r\n          return main.hideLayer.call(self);\r\n        }\r\n      };\r\n      return vm;\r\n    },\r\n    showLayer: function() {\r\n      var self;\r\n      self = this;\r\n      dom.$mask.addClass('show');\r\n      dom.$buyBar.hide();\r\n      _VM_[main.vmId].isShowCouponList = true;\r\n      return self.setScroll('#couponScroller');\r\n    },\r\n    hideLayer: function() {\r\n      var self;\r\n      self = this;\r\n      dom.$mask.removeClass('show');\r\n      dom.$buyBar.show();\r\n      return _VM_[main.vmId].isShowCouponList = false;\r\n    },\r\n    getData: function() {\r\n      var self;\r\n      self = this;\r\n      main.showLayer.call(self);\r\n      if (!main.isGetCoupon) {\r\n        baseFn.startLoader();\r\n        return baseFn.getCouponList({\r\n          goods_id: self.goodsId,\r\n          accessToken: self.accessToken,\r\n          succ: function(res) {\r\n            baseFn.endLoader();\r\n            if (res.code === '00000' && res.data) {\r\n              _VM_[main.vmId].list = res.data;\r\n              main.isGetCoupon = true;\r\n              return main.showLayer.call(self);\r\n            } else {\r\n              return sbBase.layer.tips(res.desc);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };\r\n  return sbLib.app.detailGetCoupon = main;\r\n});\r\n",
    "app/_detail/domCache.js": "\r\n/**\r\n * @fileOverview 详情页面用到的dom\r\n * @author pjg\r\n * @description\r\n */\r\ndefine('app/_detail/domCache',[],function() {\r\n  var dom, main;\r\n  sbLib.app = sbLib.app || {};\r\n  dom = sbLib.dom = sbLib.dom || {};\r\n  main = function() {\r\n    dom.$doc = $(document);\r\n    dom.$container = $('.container');\r\n    dom.$headerTitle = $('#headerTitle');\r\n    dom.$layerTitle = $('#layerTitle');\r\n    dom.$navBar = $('div#navBar');\r\n\r\n    /*弹层 */\r\n    dom.$mask = $('.sku-mask');\r\n    dom.$layer = $('.sku-layer');\r\n    dom.$close = dom.$layerTitle.find('#closeSelection');\r\n    dom.$sizeBtn = $('.size-btn .item-content');\r\n    dom.$goodsInfo = dom.$layer.find('.goods-info');\r\n    dom.$getCoupon = $('#getCoupon');\r\n    dom.$couponLayer = $('.coupon-layer');\r\n    dom.$couponScroller = $('#couponScroller');\r\n\r\n    /*选择颜色尺码 */\r\n    dom.$skuList = $('.sku-list');\r\n    dom.$param = dom.$skuList.find('li');\r\n\r\n    /*选择数量 */\r\n    dom.$amoutInput = $(\"#num\");\r\n    dom.$decreaseNum = $(\"#minus\");\r\n    dom.$increaseNum = $(\"#add\");\r\n    dom.$buyBar = $('.buy-bar');\r\n    dom.$btnList = dom.$buyBar.find('.btn-list');\r\n    return dom.$cartCount = $('#cartCount');\r\n  };\r\n  return sbLib.app.detailDomCache = main;\r\n});\r\n",
    "app/_detail/swipe.js": "define('app/_detail/swipe',['_base/swiper'],function() {\r\n  var init, sbBase;\r\n  sbBase = sbLib.base;\r\n  sbLib.app = sbLib.app || {};\r\n  init = function() {\r\n    var $mySwipe, $swipeSlide, $swiperPagination, mySwiper, _index, _len;\r\n    $mySwipe = $(\"#mySwipe\");\r\n    $swiperPagination = $('.swiper-pagination');\r\n    $swipeSlide = $mySwipe.find(\".swiper-slide\");\r\n    _len = $swipeSlide.length;\r\n    _index = 0;\r\n    $swiperPagination.html(_index + 1 + '/' + _len);\r\n    return mySwiper = new sbBase.swiper('.swiper-container', {\r\n      direction: 'horizontal',\r\n      loop: false,\r\n      onInit: function() {\r\n        return $swiperPagination.show();\r\n      },\r\n      onSlideChangeEnd: function() {\r\n        return setTimeout(function() {\r\n          var _html;\r\n          $swipeSlide.each(function(index, item) {\r\n            var $this;\r\n            $this = $(this);\r\n            if ($this.hasClass('swiper-slide-active')) {\r\n              _index = index;\r\n              return _index = parseInt(_index);\r\n            }\r\n          });\r\n          _html = _index + 1 + '/' + _len;\r\n          return $swiperPagination.html(_html);\r\n        }, 150);\r\n      }\r\n    });\r\n  };\r\n  return sbLib.app.detailSwipe = init;\r\n});\r\n",
    "app/_detail/timer.js": "define('app/_detail/timer',['_pulgins/countdown'],function() {\r\n  var exports;\r\n  sbLib.app = sbLib.app || {};\r\n  exports = {\r\n    countDown: function() {\r\n      var $countDownObj, $timer;\r\n      $countDownObj = $('.count-down-con');\r\n      $timer = $('.end-time');\r\n      return $timer.cd({\r\n        isDeciSecond: false,\r\n        unStartHtml: '还有 dd天 hh:mm:ss 开始',\r\n        countingHtml: '剩余 dd天 hh:mm:ss',\r\n        endHtml: '商品售卖已结束',\r\n        callback: function() {\r\n          return $countDownObj.show();\r\n        }\r\n      });\r\n    },\r\n    seckill: function() {\r\n      var $timer;\r\n      $timer = $('.sec-timer');\r\n      return $timer.length && $timer.cd({\r\n        isDeciSecond: true,\r\n        unStartHtml: '(dd天hh:mm:ss:ds后开始)',\r\n        countingHtml: '(<em>dd天hh:mm:ss:ds</em>后恢复原价)',\r\n        endHtml: '(秒杀结束，已恢复原价!)',\r\n        callback: function() {}\r\n      });\r\n    },\r\n    init: function() {\r\n      exports.countDown();\r\n      return exports.seckill();\r\n    }\r\n  };\r\n  return sbLib.app.detailTimer = exports;\r\n});\r\n",
    "app/_index/baseFn.js": "\r\n/**\r\n * @fileOverview 首页用到的基础或公共函数\r\n * @author pjg\r\n * @description\r\n */\r\ndefine('app/_index/baseFn',['app/_common'],function() {\r\n  var Dom, main, sbCom;\r\n  sbCom = sbLib.common;\r\n  sbLib.app = sbLib.app || {};\r\n  Dom = sbLib.dom = sbLib.dom || {};\r\n  main = {\r\n\r\n    /*\r\n     * @description 缓存dom\r\n     */\r\n    domCache: function() {\r\n      sbCom.setObjVariable(Dom, 'brandMenu,menuScroller,menuTabs,moreBtn,moreCon,sdCon,specialCon,specialList,loadText', ',');\r\n      Dom.$win = $(window);\r\n      return Dom.$doc = $(document);\r\n    },\r\n\r\n    /*\r\n     * 修改history和URl状态\r\n     * @param tid 分类ID\r\n     * @param page 分页数\r\n     */\r\n    historyState: function(tid, changed) {\r\n      var _url;\r\n      _url = location.origin + location.pathname;\r\n      if (tid !== '101') {\r\n        _url += '?type_id=' + tid;\r\n      }\r\n      return sbCom.historyState.init({\r\n        url: _url,\r\n        changed: function(link) {\r\n          return changed && changed(link);\r\n        }\r\n      });\r\n    },\r\n\r\n    /*\r\n     * @description 修改菜单的选中状态\r\n     * @param {String} id 分类id\r\n     */\r\n    tplGuide: function(gid) {\r\n      return Dom.$brandMenu.find(\".guide\").each(function(index, elem) {\r\n        var _elem, _gid;\r\n        _elem = $(elem);\r\n        _gid = _elem.attr(\"data-gid\");\r\n        if (_gid === gid) {\r\n          return _elem.addClass(\"selected\");\r\n        } else {\r\n          return _elem.removeClass(\"selected\");\r\n        }\r\n      });\r\n    },\r\n\r\n    /*\r\n     * @description 获取列表数据\r\n     * @param {Number} type 列表类型id\r\n     * @param {Number} page 第几页\r\n     * @param {Function} cb 回调\r\n     */\r\n    getListData: function(type, page, cb) {\r\n      if (page == null) {\r\n        page = 1;\r\n      }\r\n      return sbCom.ajaxData({\r\n        url: '/service/getSpecialList',\r\n        data: {\r\n          type: type,\r\n          page: page\r\n        }\r\n      }, function(result) {\r\n        var _code, _data, _result;\r\n        _result = result || {\r\n          code: -1,\r\n          desc: \"网络繁忙！\"\r\n        };\r\n        _code = parseInt(_result.code, 10);\r\n        _data = _result.data || {\r\n          html: ''\r\n        };\r\n        return cb(_result, _code, _data);\r\n      });\r\n    },\r\n    conInit: function(gid) {\r\n      if (gid === '101') {\r\n        if (Dom.$sdCon.hasClass('show')) {\r\n          return false;\r\n        }\r\n        Dom.$sdCon.addClass('show');\r\n        return setTimeout(function() {\r\n          return Dom.$sdCon.removeClass('hide');\r\n        }, 200);\r\n      } else {\r\n        if (Dom.$sdCon.hasClass('hide')) {\r\n          return false;\r\n        }\r\n        return Dom.$sdCon.addClass('hide').removeClass('show');\r\n      }\r\n    }\r\n  };\r\n  return sbLib.app.indexBaseFn = main;\r\n});\r\n",
    "app/_index/menu.js": "\r\n/*\r\n * @fileOverview 首页-memu的特效\r\n * @author pjg\r\n * @description 首页业务相关逻辑和操作\r\n */\r\ndefine('app/_index/menu',['app/_common','_base/iScroll','app/_index/baseFn'],function(common) {\r\n  var App, Dom, main, sbBase, sbCom;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  App = sbLib.app = sbLib.app || {};\r\n  Dom = sbLib.dom = sbLib.dom || {};\r\n  main = {\r\n    init: function() {\r\n      return sbCom.objectCallFunction(main, 'domCache', 'menuInit', 'memuFixed');\r\n    },\r\n    myScroll: null,\r\n    toggleMemuArrow: function() {\r\n      return Dom.$moreBtn.children().toggleClass('up');\r\n    },\r\n    memuSlideUp: function() {\r\n      return Dom.$moreCon.removeClass('fadeIn').removeClass('show').height(0);\r\n    },\r\n\r\n    /*\r\n     * @description 初始化分类菜单\r\n     */\r\n    menuInit: function() {\r\n      var typeId, _width;\r\n      _width = 0;\r\n      main.mRight = 0;\r\n      main.mLeft = 0;\r\n      main.btnWidth = Dom.$moreBtn.width();\r\n      Dom.$menuTabs.find('.guide').each(function(index, item) {\r\n        var _elem;\r\n        _elem = $(item);\r\n        if (main.mRight === 0) {\r\n          main.mRight = parseFloat(_elem.css(\"margin-right\"));\r\n        }\r\n        if (main.mLeft === 0) {\r\n          main.mLeft = parseFloat(_elem.css(\"margin-left\"));\r\n        }\r\n        return _width += main.mLeft + _elem.width() + main.mRight;\r\n      });\r\n      Dom.$menuTabs.width(_width + main.btnWidth + 1);\r\n      Dom.$moreConHeight = Dom.$moreCon.height();\r\n      if (!Dom.$moreCon.hasClass('show')) {\r\n        Dom.$moreCon.height(0);\r\n      }\r\n      main.myScroll = new sbBase.iScroll('#menuScroller', {\r\n        scrollX: true,\r\n        scrollY: false,\r\n        preventDefault: false\r\n      });\r\n      typeId = sbCom.getQueryString('type_id');\r\n      return typeId && typeId !== '101' && main.scrollTo(typeId);\r\n    },\r\n    scrollTo: function(gid) {\r\n      var curMenu, curMenuPosition, maxArea, maxScrollX, obj, objPosition, offsetLeft, offsetRight, offsetX, scrollX, selectedMenu;\r\n      maxArea = main.myScroll.wrapperWidth;\r\n      scrollX = main.myScroll.x;\r\n      maxScrollX = main.myScroll.maxScrollX;\r\n      selectedMenu = Dom.$menuTabs.find(\".guide.selected\");\r\n      curMenu = selectedMenu.length ? selectedMenu : Dom.$menuTabs.find(\".guide\").eq(0);\r\n      curMenuPosition = curMenu.position();\r\n      obj = Dom.$menuTabs.find(\".guide[data-gid=\\'\" + gid + \"\\']\");\r\n      objPosition = obj.position();\r\n      if (objPosition.left > curMenuPosition.left) {\r\n        offsetRight = objPosition.left + obj.width() + main.mRight + main.btnWidth - maxArea;\r\n        offsetX = scrollX - offsetRight;\r\n        if (offsetX < maxScrollX) {\r\n          offsetX = maxScrollX;\r\n        }\r\n        return offsetRight > 0 && main.myScroll.scrollTo(offsetX, 0, 500, sbBase.iScroll.utils.ease.elastic);\r\n      } else {\r\n        offsetLeft = objPosition.left;\r\n        offsetX = scrollX - offsetLeft;\r\n        if (offsetX > 0) {\r\n          offsetX = 0;\r\n        }\r\n        return offsetLeft < 0 && main.myScroll.scrollTo(offsetX, 0, 500, sbBase.iScroll.utils.ease.elastic);\r\n      }\r\n    },\r\n    memuSlideDown: function() {\r\n      return Dom.$moreCon.toggleClass(function(index, oldClassName) {\r\n        var _cls, _this;\r\n        _this = $(this);\r\n        _cls = 'fadeIn show';\r\n        if (!_this.hasClass(_cls)) {\r\n          _this.height(Dom.$moreConHeight);\r\n        } else {\r\n          _this.height(0);\r\n        }\r\n        return _cls;\r\n      });\r\n    },\r\n\r\n    /*\r\n     * @description 分类菜单固定\r\n     */\r\n    memuFixed: function() {\r\n      var _offsetTop;\r\n      _offsetTop = Dom.$brandMenu.offset().top + 1;\r\n      return $(window).scroll(function() {\r\n        var _thisTop;\r\n        _thisTop = $(this).scrollTop();\r\n        if (_thisTop >= _offsetTop) {\r\n          Dom.$brandMenu.addClass('fixed');\r\n          return main.memuSlideUp();\r\n        } else {\r\n          return Dom.$brandMenu.removeClass('fixed');\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return sbLib.app.indexMemu = (function() {\r\n    return main;\r\n  })();\r\n});\r\n",
    "app/_index/slider.js": "\r\n/*\r\n * @description 首页的幻灯片效果\r\n * @author pjg\r\n */\r\ndefine('app/_index/slider',['_base/swiper'],function() {\r\n  var sbBase;\r\n  sbBase = sbLib.base;\r\n  sbLib.app = sbLib.app || {};\r\n  return sbLib.app.indexSlider = function() {\r\n    var $swiper, slider;\r\n    $swiper = $('.swiper-container');\r\n    return slider = new sbBase.swiper('.swiper-container', {\r\n      autoplay: 3000,\r\n      loop: !!1,\r\n      lazyLoading: !!1,\r\n      pagination: '.swiper-pagination'\r\n    });\r\n  };\r\n});\r\n",
    "app/_index/specialList.js": "\r\n/*\r\n * @fileOverview 首页-列表切换和无限加载模块\r\n * @author pjg\r\n */\r\ndefine('app/_index/specialList',['app/_common','_base/infiniteScroll','_base/lazyLoad','_base/layer','_mods/timer','app/_index/baseFn'],function() {\r\n  var App, Dom, main, sbBase, sbCom;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  App = sbLib.app = sbLib.app || {};\r\n  Dom = sbLib.dom = sbLib.dom || {};\r\n  main = {\r\n    init: function() {\r\n      var typeId;\r\n      sbCom.objectCallFunction(main, 'infiniteScroll');\r\n      typeId = sbCom.getQueryString('type_id');\r\n      if (typeId && typeId !== '101') {\r\n        App.indexBaseFn.tplGuide(typeId);\r\n        return main.tplList(typeId);\r\n      }\r\n    },\r\n    listType: listType,\r\n    listTolpage: parseInt(listTolpage, 10),\r\n    page: 1,\r\n    isGetList: true,\r\n    isEnd: false,\r\n\r\n    /*\r\n     * @description 切换列表\r\n     * @param {Object} elem 点击元素\r\n     */\r\n    tplList: function(gid, cb) {\r\n      var loadId, _id;\r\n      _id = gid;\r\n      if (!main.isGetList) {\r\n        return false;\r\n      }\r\n      if (main.listType === _id) {\r\n        return false;\r\n      }\r\n      loadId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      App.indexBaseFn.conInit(_id);\r\n      App.indexBaseFn.tplGuide(_id);\r\n      main.isGetList = false;\r\n      return App.indexBaseFn.getListData(_id, 1, function(_result, _code, _data) {\r\n        main.isGetList = true;\r\n        main.temp = [];\r\n        if (_code === 0) {\r\n          Dom.$win.scrollTop(0);\r\n          Dom.$specialList.hide().html(_data.html).show();\r\n          main.listType = _id;\r\n          main.listTolpage = _data.total_page;\r\n          main.page = 1;\r\n          main.isEnd = false;\r\n          sbLib.mods.timer();\r\n          sbBase.lazyLoad.trigger();\r\n          sbBase.layer.close(loadId);\r\n          return cb && cb();\r\n        } else {\r\n          sbBase.layer.close(loadId);\r\n          sbBase.layer.alert(_result.desc);\r\n          if (_index === 0) {\r\n            return Dom.$sdCon.show();\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    /*\r\n     * @description 滚动加载\r\n     */\r\n    infiniteScroll: function() {\r\n      var _infiniteScroll;\r\n      _infiniteScroll = sbBase.infiniteScroll.init({\r\n        bufferPx: 200,\r\n        time: 200,\r\n        onNear: function() {\r\n          var _id, _page;\r\n          if (!main.isGetList) {\r\n            return false;\r\n          }\r\n          if (main.page < main.listTolpage) {\r\n            main.page++;\r\n          } else {\r\n            main.isEnd = true;\r\n          }\r\n          if (!main.isEnd) {\r\n            Dom.$loadText.show().find('legend').html(\"正在拼命加载中\");\r\n            _page = main.page;\r\n            _id = main.listType;\r\n            main.isGetList = false;\r\n            return App.indexBaseFn.getListData(_id, _page, function(_result, _code, _data) {\r\n              main.isGetList = true;\r\n              if (_code === 0) {\r\n                Dom.$loadText.hide();\r\n                Dom.$specialList.append(_data.html);\r\n                main.listTolpage = _data.total_page;\r\n                sbLib.mods.timer();\r\n                return sbBase.lazyLoad.trigger();\r\n              }\r\n            });\r\n          } else {\r\n            return Dom.$loadText.show().find('legend').html(\"已经是最后一页\");\r\n          }\r\n        },\r\n        onEnd: null,\r\n        onScroll: function() {}\r\n      });\r\n      if (main.listTolpage <= 1) {\r\n        main.isEnd = true;\r\n      }\r\n      if (main.page >= 1) {\r\n        return _infiniteScroll.start();\r\n      }\r\n    }\r\n  };\r\n  return sbLib.app.indexSpecialList = main;\r\n});\r\n",
    "app/auth/forgetpwd.js": "\r\n/**\r\n * @fileOverview 商家找回密码\r\n * @author LJL\r\n * @description 商家找回密码 相关逻辑\r\n */\r\ndefine('app/auth/forgetpwd',['vmcore','app/auth/formBase','_tpl/forgetpwd','app/_common','_base/docCookies','_pulgins/sValid','_base/layer'],function(vmcore, formBase, iTpl) {\r\n  var backUrl, exports, sbBase, sbCom, _loginUrl, _regUrl;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  backUrl = formBase.backUrl;\r\n  _regUrl = \"/auth/reg.html\";\r\n  _loginUrl = \"/auth/index.html\";\r\n  if (backUrl) {\r\n    backUrl = \"?backUrl=\" + backUrl;\r\n    _regUrl += backUrl;\r\n    _loginUrl += backUrl;\r\n  }\r\n  exports = {\r\n    init: function() {\r\n      var _model, _self;\r\n      _self = this;\r\n      _model = _self.setModel();\r\n      _VM_.forgetPwd = vmcore.define(_model);\r\n      return sbCom.tplBottomBar.init();\r\n    },\r\n    setModel: function() {\r\n      var _data, _self;\r\n      vmcore.templateCache[\"index.html\"] = iTpl.index;\r\n      _self = this;\r\n      _data = {\r\n        $id: 'forgetpwdMod',\r\n        tpl: 'index.html',\r\n        isForget: true,\r\n        regUrl: _regUrl,\r\n        loginUrl: _loginUrl,\r\n        retrieveBtn: function() {\r\n          var _saveData;\r\n          formBase.objectCallFunction(exports, 'retrievePwdInit', 'sValidEvent');\r\n          if ($.sValid()) {\r\n            _saveData = {\r\n              phone: $.trim(formBase.$emailphone.val()),\r\n              phone_code: $.trim(formBase.$phonecaptcha.val())\r\n            };\r\n            return $.ajax({\r\n              url: '/proxy?domain=passports&act=forget&op=resetPhoeAuth',\r\n              type: 'GET',\r\n              dataType: 'json',\r\n              data: _saveData,\r\n              success: function(response) {\r\n                var code, desc;\r\n                code = response.code;\r\n                if (code !== '00000') {\r\n                  desc = '';\r\n                  if (code === '60067') {\r\n                    desc = '手机验证码错误';\r\n                    formBase.$phonecaptcha.focus();\r\n                  } else {\r\n                    desc = response.desc;\r\n                  }\r\n                  return sbBase.layer.tips(desc);\r\n                } else {\r\n                  _self.savaDate = _saveData;\r\n                  return _VM_.forgetPwd.isForget = false;\r\n                }\r\n              }\r\n            });\r\n          }\r\n        },\r\n        getcaptcha: function() {\r\n          formBase.objectCallFunction(exports, 'retrievePwdInit', 'sValidEvent');\r\n          if ($.sValid(formBase.$emailphone)) {\r\n            formBase.sendType = 'findpassword';\r\n            return formBase.sendCaptcha();\r\n          }\r\n        },\r\n        retrieveBtnOk: function() {\r\n          formBase.objectCallFunction(exports, 'retrievePwdInit', 'sValidEventOk');\r\n          if ($.sValid()) {\r\n            return $.ajax({\r\n              url: '/proxy?domain=passports&act=forget&op=resetPhoeSave',\r\n              type: 'POST',\r\n              dataType: 'json',\r\n              data: {\r\n                phone: $.trim(_self.savaDate.phone),\r\n                phone_code: $.trim(_self.savaDate.phone_code),\r\n                password: $.trim(formBase.$retPassword.val()),\r\n                password_confirm: $.trim(formBase.$retPasswordOk.val())\r\n              },\r\n              success: function(response) {\r\n                var code;\r\n                code = response.code;\r\n                if (code !== '00000') {\r\n                  return sbBase.layer.tips(response.desc);\r\n                } else {\r\n                  sbBase.layer.tips('密码重置成功');\r\n                  return location.href = backUrl ? backUrl : '/user/index.html';\r\n                }\r\n              }\r\n            });\r\n          }\r\n        }\r\n      };\r\n      return _data;\r\n    },\r\n    sValidEvent: function() {\r\n      return $.sValid.init({\r\n        rules: {\r\n          emailphone: {\r\n            required: true,\r\n            phone: 'phone'\r\n          },\r\n          phonecaptcha: 'required'\r\n        },\r\n        messages: {\r\n          emailphone: {\r\n            required: '请输入手机号',\r\n            phone: '请输入正确的手机号'\r\n          },\r\n          phonecaptcha: '请输入短信验证码'\r\n        },\r\n        callback: function(eId, eMsg, eRules) {\r\n          var i;\r\n          if (eId.length > 0) {\r\n            i = 0;\r\n            return $.map(eMsg, function(idx, item) {\r\n              if (i === 0) {\r\n                sbBase.layer.tips(idx);\r\n              }\r\n              return i++;\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    sValidEventOk: function() {\r\n      return $.sValid.init({\r\n        rules: {\r\n          retPassword: {\r\n            required: true,\r\n            password: 'password'\r\n          },\r\n          retPasswordOk: {\r\n            required: true,\r\n            equalTo: \"equalTo\"\r\n          }\r\n        },\r\n        messages: {\r\n          retPassword: {\r\n            required: '请输入密码',\r\n            password: '请输入8-20位字母和数字组成的密码'\r\n          },\r\n          retPasswordOk: {\r\n            required: '请再次输入密码',\r\n            equalTo: '两次密码不一致'\r\n          }\r\n        },\r\n        callback: function(eId, eMsg, eRules) {\r\n          var i;\r\n          if (eId.length > 0) {\r\n            i = 0;\r\n            return $.map(eMsg, function(idx, item) {\r\n              if (i === 0) {\r\n                sbBase.layer.tips(idx);\r\n              }\r\n              return i++;\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    saveDate: {},\r\n    retrievePwdInit: function() {\r\n\r\n      /* 找回密码初始化 */\r\n      return formBase.init();\r\n    }\r\n  };\r\n  return exports.init();\r\n});\r\n",
    "app/auth/formBase.js": "/*\r\n   登陆注册 通用模块\r\n   by ccw\r\n*/\r\ndefine('app/auth/formBase',['app/_common','_base/layer'],function () {\r\n    var captchaseconds = 60;\r\n    var sbBase = sbLib.base;\r\n    var exports = {\r\n        /*\r\n           sendType - 发送类型\r\n           参数:findpassword 找回密码 / register 注册\r\n        */\r\n        sendType:'',\r\n        /* domCache */\r\n        domCache: function () {\r\n            exports.$form = $('form');\r\n            exports.$emailphone = $('#emailphone');     //手机号码\r\n            exports.$password1 = $(\"#password1\");       //密码\r\n            exports.$phonecaptcha = $(\"#phonecaptcha\"); //短信验证码\r\n            exports.$getcaptcha = $(\"#getcaptcha\");     //获取短信验证码\r\n            exports.$retPassword = $(\"#retPassword\");   //找回密码\r\n            exports.$retPasswordOk = $(\"#retPasswordOk\");  //找回密码 确认\r\n\r\n            /* 移除chrome自动填充的默认黄色 */\r\n            setTimeout(function () {\r\n                $('input:-webkit-autofill').each(function() {\r\n                    var $this = $(this);\r\n                    $this.val('');\r\n                });\r\n            }, 300);\r\n        },\r\n        strclient: 'h5',\r\n        backUrl: sbLib.common.getQueryString(\"backUrl\"),\r\n\r\n        /* 校验用户名 */\r\n        checkUserName: function (ops, cb) {\r\n            var options = {\r\n                domain: 'passports',\r\n                act: 'login',\r\n                op: 'existPhone',\r\n            }\r\n            options = $.extend({}, options, ops);\r\n            sbLib.common.ajaxData(options, function (response) {\r\n                var code = response.code;\r\n                if (exports.sendType === 'register') {\r\n                    if (code === '00000') {\r\n                        if (typeof cb === \"function\") {\r\n                            cb(response);\r\n                        }\r\n                    } else {\r\n                        if (code === '70012') {\r\n                            sbBase.layer.tips('该手机号已被使用');\r\n                        } else {\r\n                            sbBase.layer.tips(response.desc);\r\n                        }\r\n                    }\r\n                }\r\n                else if (exports.sendType === 'findpassword') {\r\n                    /* 如果此块是00000,表示可以使用,即还没注册,还没注册就不能重置密码 */\r\n                    if (code === '00000') {\r\n                        sbBase.layer.tips('该手机号不存在');\r\n                    } else {\r\n                        if (typeof cb === \"function\") {\r\n                            cb(response);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /* 发送验证码 */\r\n        sendCaptcha: function () {\r\n            var that = exports.$form;\r\n            var $checkname = that.find('.checkname');\r\n            var captchaFunction = {\r\n                struc: function () {\r\n                    var options= {\r\n                        data: {\r\n                            phone: exports.$emailphone.val()\r\n                        }\r\n                    }\r\n                    exports.checkUserName(options, function () {\r\n                        captchaFunction.sendCaptcha();\r\n                    });\r\n                },\r\n                /* 发送验证码 */\r\n                sendCaptcha: function () {\r\n                    if (captchaseconds === 60) {\r\n\r\n                        /* 移除当前事件 */\r\n                        exports.$getcaptcha.off('click');\r\n\r\n                        var options = {\r\n                            domain: 'passports',\r\n                            act: 'forget',\r\n                            op: 'phone',\r\n                            data: {\r\n                                phone: exports.$emailphone.val()\r\n                            }\r\n                        }\r\n                        /* 发送 */\r\n                        sbLib.common.ajaxData(options, function (response) {\r\n                            var code = response.code;\r\n                            if(code === '00000'){\r\n                                sbBase.layer.tips('验证码'+response.desc)\r\n                            }\r\n                            if (code !== '00000') {\r\n                                var desc = '';\r\n                                if (code === '70002') {\r\n                                    desc = '验证码不正确';\r\n                                } else {\r\n                                    desc = response.desc;\r\n                                }\r\n                                sbBase.layer.tips(desc);\r\n                            } else {\r\n                                exports.$getcaptcha.data('text', exports.$getcaptcha.text());\r\n                                var getCode = function () {\r\n                                    if (captchaseconds === 0) {\r\n                                        captchaseconds = 60;\r\n                                        exports.$getcaptcha.removeClass('u-wait')\r\n                                            .text(exports.$getcaptcha.data('text'))\r\n                                            .on('click', exports.sendCaptchaEvent);\r\n                                        clearInterval(getCode);\r\n                                    } else {\r\n                                        exports.$getcaptcha.addClass('u-wait')\r\n                                            .text('(' + captchaseconds + ')');\r\n                                        captchaseconds--;\r\n                                        setTimeout(\r\n                                            function () {\r\n                                                getCode(exports.$getcaptcha);\r\n                                            },\r\n                                            1000);\r\n                                    }\r\n                                };\r\n                                getCode();\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            captchaFunction.struc();\r\n        },\r\n        /* 短信验证码事件 */\r\n        loadSendCaptchaEvent: function(cb) {\r\n            if (typeof cb === \"function\") {\r\n                exports.sendCaptchaEvent = cb;\r\n                exports.$getcaptcha.on('click', cb);\r\n            }\r\n        },\r\n        /**\r\n         * 对象-调用对象自身函数\r\n         * @param1 {Object} 调用的对象\r\n         * @params {arguments} 调用的对象的方法名\r\n         */\r\n        objectCallFunction: function (obj) {\r\n            var fn;\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                fn = obj[arguments[i]];\r\n                if (typeof fn === 'function') {\r\n                    fn();\r\n                }\r\n            }\r\n        },\r\n        /*\r\n         * 设置变量 将指定options转换为obj.$xxx的变量\r\n         * --------通常转换为固定的元素id或一系列的类\r\n         * @param1 {Object} Javascript简单对象\r\n         * @param2 {String} 转换的字符串,号分割  如\"a,b,c,d\"\r\n         * @param3 {String} 过滤字符串\r\n                            如:$(\"#mybutton1\") 如果该参数为\"my\"\r\n                            则:obj.$button1为转换的变量,否则为obj.$mybutton1\r\n         */\r\n        setObjVariable: function (obj, setStr, filter) {\r\n            if (setStr != undefined) {\r\n                if (typeof setStr == \"string\") {\r\n                    setStr = setStr.split(',');\r\n                    for (var i = 0; i < setStr.length; i++) {\r\n                        var rpoptoin = setStr[i];\r\n                        if (filter) {\r\n                            rpoptoin = rpoptoin.replace(filter, '');\r\n                        }\r\n                        var tag = '#';\r\n                        if (setStr[i].indexOf('.') >= 0) {\r\n                            rpoptoin = rpoptoin.replace(/\\./ig, '');\r\n                            tag = '';\r\n                        }\r\n                        obj[\"$\" + rpoptoin] = $(tag + setStr[i]);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        /* 初始化 */\r\n        init: function () {\r\n            this.domCache();\r\n        }\r\n    }\r\n    return exports;\r\n});\r\n",
    "app/auth/login.js": "/**\r\n * @fileOverview 商家登录\r\n * @author yy\r\n * @description 商家登录相关逻辑\r\n */\r\ndefine('app/auth/login',['vmcore','app/auth/formBase','app/_common','_base/docCookies','_pulgins/sValid','_base/layer'],function(vmcore, formBase) {\r\n    var $loginbtn,\r\n        logingcount = 0,\r\n        backUrl = formBase.backUrl,\r\n        sbCom = sbLib.common,\r\n        sbBase = sbLib.base;\r\n    // console.log(backUrl);\r\n    // var icode = sbCom.getQueryString('icode');\r\n    var view = {\r\n        /* domCache */\r\n        domCache: function() {\r\n            $loginbtn = $(\"#loginbtn\");\r\n        },\r\n        /* 验证 */\r\n        sValidEvent: function() {\r\n            $.sValid.init({\r\n                rules: {\r\n                    username: {\r\n                        required: true\r\n                    },\r\n                    userpwd: \"required\"\r\n                },\r\n                messages: {\r\n                    username: {\r\n                        required: \"输入手机号码\"\r\n                    },\r\n                    userpwd: \"请输入密码\"\r\n                },\r\n                callback: function(eId, eMsg, eRules) {\r\n                    if (eId.length > 0) {\r\n                        var i = 0;\r\n                        $.map(eMsg, function(idx, item) {\r\n                            if (i === 0) {\r\n                                sbBase.layer.tips(idx);\r\n                            }\r\n                            i++;\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /* 登陆按钮 */\r\n        loginBtnEvent: function() {\r\n            var _this = this;\r\n            $loginbtn.on(\"tap\", function() {\r\n                logingcount += 1;\r\n                if (logingcount > 1) {\r\n                    return false;\r\n                }\r\n                var phonevalue = $.trim($(\"#username\").val());\r\n                var pwdvalue = $.trim($(\"#userpwd\").val());\r\n                if ($.sValid()) {\r\n                    var thistext = $(this).text();\r\n                    $.ajax({\r\n                        type: \"post\",\r\n                        url: \"/proxy?domain=passports&act=login&op=index\",\r\n                        data: {\r\n                            phone: phonevalue,\r\n                            password: pwdvalue,\r\n                        },\r\n                        beforeSend: function() {\r\n                            $loginbtn.text(thistext + '中..');\r\n                        },\r\n                        complete: function() {\r\n                            $loginbtn.text(thistext);\r\n                            logingcount = 0;\r\n                        },\r\n                        dataType: \"json\",\r\n                        success: function(result) {\r\n                            var code = result.code,\r\n                                desc = \"\";\r\n                            if (code !== \"00000\") {\r\n                                if (code === \"60070\" || code === \"60069\") {\r\n                                    desc = \"账号或密码错误\";\r\n                                    $(\"#userpwd\").val(\"\");\r\n                                } else {\r\n                                    desc = result.desc;\r\n                                }\r\n                                sbBase.layer.tips(desc);\r\n                            } else {\r\n                                /* 登陆成功 */\r\n                                var _data = result.data;\r\n                                var url = backUrl ? backUrl : '/user/index.html';\r\n                                sbCom.setUserCookie(_data);\r\n                                location.href = url;\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    logingcount = 0;\r\n                }\r\n            });\r\n        },\r\n        /* 新用户注册 */\r\n        registerEvent: function() {\r\n            $('.toRegister').on('tap', function() {\r\n                var url = '/auth/reg.html';\r\n                backUrl && (url += '?backUrl=' + backUrl);\r\n                location.href = url;\r\n            });\r\n        },\r\n        /* 忘记密码 */\r\n        passwordEvent: function() {\r\n            $('.link-forget').on('tap', function() {\r\n                var url = '/auth/password.html';\r\n                backUrl && (url += '?backUrl=' + backUrl);\r\n                location.href = url;\r\n            });\r\n        },\r\n        /* 绑定事件 */\r\n        bindEvents: function() {\r\n            formBase.objectCallFunction(view, 'sValidEvent', 'loginBtnEvent');\r\n        },\r\n        /* 构造 */\r\n        struc: function() {\r\n            $(document).ready(function() {\r\n                formBase.objectCallFunction(view, 'domCache', 'bindEvents');\r\n                formBase.init();\r\n            });\r\n        }\r\n    };\r\n    var exports = {\r\n        init: function() {\r\n            view.struc();\r\n            view.registerEvent();\r\n            view.passwordEvent();\r\n            sbCom.tplBottomBar.init();\r\n        }\r\n    }\r\n    exports.init();\r\n});\r\n",
    "app/auth/register.js": "/**\r\n * @fileOverview 商家注册\r\n * @author LJL\r\n * @description 商家注册相关逻辑\r\n */\r\ndefine('app/auth/register',['vmcore','app/auth/formBase','app/_common','_base/docCookies','_pulgins/sValid','_base/layer'],function(vmcore,modulecommon){\r\n    var backUrl = modulecommon.backUrl,\r\n        sbCom = sbLib.common,\r\n        sbBase = sbLib.base,\r\n        icode = sbCom.getQueryString('icode');\r\n    var $registerbtn;\r\n    var view = {\r\n        /* domCache */\r\n        domCache: function () {\r\n            $registerbtn = $(\"#registerbtn\");\r\n        },\r\n        /* 验证 */\r\n        sValidEvent: function () {\r\n            $.sValid.init({\r\n                rules: {\r\n                    emailphone: {\r\n                        required: true,\r\n                        phone: 'phone'\r\n                    },\r\n                    captcha: \"required\",\r\n                    phonecaptcha: \"required\",\r\n                    password1: {\r\n                        required: true,\r\n                        password: 'password'\r\n                    }\r\n                },\r\n                messages: {\r\n                    emailphone: {\r\n                        required: '请输入手机号',\r\n                        phone: '请输入正确的手机号'\r\n                    },\r\n                    captcha: \"请输入验证码\",\r\n                    phonecaptcha: \"请输入短信验证码\",\r\n                    password1: {\r\n                        required: '请输入密码',\r\n                        password: '请输入8-20位字母和数字组成的密码'\r\n                    }\r\n                },\r\n                callback: function (eId, eMsg, eRules) {\r\n                    if (eId.length > 0) {\r\n                        var i = 0;\r\n                        $.map(eMsg, function (idx, item) {\r\n                            if (i === 0) {\r\n                                sbBase.layer.tips(idx);\r\n                            }\r\n                            i++;\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /* 获得短信验证码 */\r\n        getCaptchaEvent: function () {\r\n            var beforeSend = function () {\r\n                if ($.sValid(modulecommon.$emailphone)) {\r\n                    modulecommon.sendType = 'register';\r\n                    modulecommon.sendCaptcha();\r\n                }\r\n            };\r\n            modulecommon.loadSendCaptchaEvent(beforeSend);\r\n        },\r\n        /* 注册按钮 */\r\n        registerBtnEvent: function () {\r\n            $registerbtn.on('tap', function() {\r\n                var password1 = $.trim(modulecommon.$password1.val());\r\n                if ($.sValid()) {\r\n                    var options = {\r\n                        domain: 'passports',\r\n                        act: 'login',\r\n                        op: 'registerBSave',\r\n                        type: 'post',\r\n                        data: {\r\n                            phone: $.trim(modulecommon.$emailphone.val()),\r\n                            phone_code: $.trim(modulecommon.$phonecaptcha.val()),\r\n                            password: password1\r\n                        }\r\n                    };\r\n                    options = $.extend({}, options);\r\n                    sbLib.common.ajaxData(options, function (response) {\r\n                        var code = response.code;\r\n                        if (code !== '00000') {\r\n                            var desc = '';\r\n                            if (code === \"70009\") {\r\n                                desc = '短信验证码不正确';\r\n                                modulecommon.$phonecaptcha.focus();\r\n                            } else {\r\n                                desc = response.desc;\r\n                            }\r\n                            sbBase.layer.tips(desc);\r\n                        }else{\r\n                            /* 注册成功 */\r\n                            var _data = result.data;\r\n                            sbCom.setUserCookie(_data);\r\n                            location.href = backUrl ? backUrl : '/user/index.html';\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        /* 已有帐号，请登录 地址跳转 */\r\n        hasAccountEvent: function(){\r\n            $('.toLogin').on('tap', function(){\r\n                var url = backUrl? '/auth/index.html?backUrl=' + backUrl : '/auth/index.html'\r\n                console.log(url);\r\n                location.href = url;\r\n            });\r\n        },\r\n        /* 绑定事件 */\r\n        bindEvents: function () {\r\n            modulecommon.objectCallFunction(view, 'adEvent', 'sValidEvent', 'getCaptchaEvent', 'registerBtnEvent');\r\n        },\r\n        /* 初始化 */\r\n        init: function () {\r\n            modulecommon.init();\r\n        },\r\n        /* 构造 */\r\n        struc: function () {\r\n            $(document).ready(function () {\r\n                modulecommon.objectCallFunction(view, 'init', 'domCache','bindEvents');\r\n            });\r\n        }\r\n    };\r\n    var exports= {\r\n        init: function() {\r\n            view.struc();\r\n            view.hasAccountEvent();\r\n            sbCom.tplBottomBar.init();\r\n        }\r\n    };\r\n    exports.init();\r\n});\r\n",
    "app/cart/_baseFn.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/**\r\n * @fileOverview 首页用到的基础或公共函数\r\n * @author pjg\r\n * @description\r\n */\r\ndefine('app/cart/_baseFn',['vmcore','_tpl/cart','_tpl/cartPop','_tpl/adress','_base/docCookies','_base/layer','_data/cart','app/_common'],function(vmcore, cTpl, pTpl, aTpl) {\r\n  var App, Base, Common, Data, Dom, _VM_, main;\r\n  _VM_ = window._VM_ || (window._VM_ = {});\r\n  Common = sbLib.common;\r\n  Base = sbLib.base;\r\n  Data = sbLib.data;\r\n  App = sbLib.app = sbLib.app || {};\r\n  Dom = sbLib.dom = sbLib.dom || {};\r\n  main = {\r\n    vmId: \"cartList\",\r\n    accessToken: Base.docCookies.getItem('key'),\r\n    getCpsInfo: function() {\r\n      return Base.docCookies.getItem('F088_o2o_cps_info');\r\n    },\r\n\r\n    /*\r\n     * @description 缓存dom\r\n     */\r\n    domCache: function() {\r\n      Common.setObjVariable(Dom, 'cartList,popBox', ',');\r\n      Dom.$win = $(window);\r\n      Dom.$doc = $(document);\r\n      return Dom.$body = $('body');\r\n    },\r\n    fixFn: function() {\r\n      var ctrl;\r\n      ctrl = this;\r\n      return Dom.$win.on('scroll', function(e) {\r\n        return Dom.$cartList.find(\"#payAction\").css(\"bottom\", \"-1px\");\r\n      }).on('resize', function(e) {\r\n        Dom.$popBox.find('.pop-ft').css(\"bottom\", \"-1px\");\r\n        return setTimeout(function() {\r\n          return ctrl._scrollInit();\r\n        }, 400);\r\n      });\r\n    },\r\n    _buildTplCache: function(tpl, type) {\r\n      var key, results, val;\r\n      results = [];\r\n      for (key in tpl) {\r\n        val = tpl[key];\r\n        results.push(vmcore.templateCache[type + \"_\" + key] = val);\r\n      }\r\n      return results;\r\n    },\r\n    tplInit: function() {\r\n      main._buildTplCache(cTpl, 'cart');\r\n      main._buildTplCache(pTpl, 'pop');\r\n      return main._buildTplCache(aTpl, 'adress');\r\n    },\r\n    baseVm: function() {\r\n      var vm;\r\n      vm = {\r\n        $id: main.vmId,\r\n        tpl: \"cart_main\",\r\n        itemListTpl: \"cart_itemList\",\r\n        userInfoTpl: \"cart_userInfo\",\r\n        settlelistTpl: \"cart_settlelist\",\r\n        isWeixin: Common.isWeixin(),\r\n        isShowCartList: true,\r\n        isGet: false,\r\n        isGetCoupon: false,\r\n        isGetRedPacket: false,\r\n        store_cart_list: [],\r\n        coupon_data: {},\r\n        coupon_checked: [],\r\n        showCouponListType: 1,\r\n        coupon_codes: '',\r\n        red_packet_checked: [],\r\n        red_packet_all: [],\r\n        red_packet_code: '',\r\n        titleArr: [\"选择优惠活动专场\", \"选择优惠劵\", \"选择红包\", \"地址管理\", \"新增地址\", \"修改地址\", \"激活优惠劵\", \"激活红包\"],\r\n        isShowPop: false,\r\n        popTpl: \"\",\r\n        popTitle: \"\",\r\n        activeType: 0,\r\n        myScroll: null,\r\n        payType: '',\r\n        render: function() {\r\n          return this.innerHTML;\r\n        }\r\n      };\r\n      return vm;\r\n    },\r\n\r\n    /**\r\n     * 获取购物车列表数据\r\n     */\r\n    getCartListData: function() {\r\n      var cb, len, opts;\r\n      len = arguments.length;\r\n      cb = function() {};\r\n      opts = {};\r\n      opts.accessToken = main.accessToken;\r\n      if (len === 0 || len > 2) {\r\n        return false;\r\n      } else if (len === 1) {\r\n        cb = arguments[0];\r\n      } else if (len === 2) {\r\n        opts = vmcore.mix(arguments[0], opts);\r\n        cb = arguments[1];\r\n      }\r\n      return Data.cart['list'](opts, function(res) {\r\n        res.data.store_cart_list = res.data.store_cart_list || [];\r\n        return cb(res);\r\n      }, function(err) {\r\n        return console.log(err);\r\n      });\r\n    },\r\n    ajaxData: function() {\r\n      var opts;\r\n      if (arguments.length === 0) {\r\n        return false;\r\n      }\r\n      opts = arguments[0];\r\n      opts.data = opts.data || {};\r\n      opts.data.accessToken = main.accessToken;\r\n      if (_VM_.cartList.isGet === true) {\r\n        _VM_.cartList.isGet = false;\r\n        return Data.cart[opts.act](opts.data, function(res) {\r\n          _VM_.cartList.isGet = true;\r\n          return opts.cb && opts.cb(res);\r\n        });\r\n      }\r\n    },\r\n    updateUrlState: function(opts, changed) {\r\n      var _url, arr, key, val;\r\n      changed = changed || function() {};\r\n      arr = [];\r\n      for (key in opts) {\r\n        val = opts[key];\r\n        (key !== 'accessToken' && key !== 'price_hash') && arr.push(key + \"=\" + val);\r\n      }\r\n      _url = \"/cart/index.html?\" + arr.join('&');\r\n      if (!history.state || history.state.url !== _url) {\r\n        return Common.historyState.init({\r\n          url: _url,\r\n          changed: changed\r\n        });\r\n      }\r\n    },\r\n    toArray: function(obj) {\r\n      return Array.prototype.slice.call(obj);\r\n    }\r\n  };\r\n  return sbLib.app.cartBaseFn = main;\r\n});\r\n",
    "app/cart/_cartListCtrl.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/**\r\n * @fileOverview ViewModelController\r\n * @author pjg\r\n * @date  2016-03-12\r\n * @description 购物车的视图控制器, 通过操作ViewModel来控制页面视图\r\n */\r\nvar indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\r\n\r\ndefine('app/cart/_cartListCtrl',['vmcore','app/_common','app/_common/payWay','_base/layer','_base/iScroll','app/cart/_baseFn','app/cart/_cartListVm','app/_adress/viewModel'],function(vmcore) {\r\n  var App, Base, Common, Dom, _VM_, baseFn, main;\r\n  _VM_ = window._VM_ || (window._VM_ = {});\r\n  Common = sbLib.common;\r\n  Base = sbLib.base;\r\n  App = sbLib.app = sbLib.app || {};\r\n  Dom = sbLib.dom = sbLib.dom || {};\r\n  baseFn = sbLib.app.cartBaseFn;\r\n  main = {\r\n    isRedPacketInit: false,\r\n    isWeixin: Common.isWeixin(),\r\n    isAlipay: false,\r\n    startLoader: function() {\r\n      if (typeof main.loader === 'undefined') {\r\n        return main.loader = Base.layer.open({\r\n          type: 2\r\n        });\r\n      }\r\n    },\r\n    endLoader: function() {\r\n      return main.loader = Base.layer.close(main.loader);\r\n    },\r\n    init: function(cb) {\r\n      var opts;\r\n      main.o2o_cps_info = baseFn.getCpsInfo();\r\n      main.cart_id = Common.getQueryString('cart_id');\r\n      opts = {};\r\n      if (main.cart_id) {\r\n        opts.cart = main.cart_id;\r\n      }\r\n      main.loader = App.layerLoading;\r\n      return baseFn.getCartListData(function(res) {\r\n        Common.checkLogin(res);\r\n        return main.defineCartViewModel(res, function() {\r\n          App.adressViewModel.init();\r\n          if (res.code === '00000' && res.data.store_cart_list && res.data.store_cart_list.length > 0) {\r\n            if (opts.cart) {\r\n              main._selectOne(main.cart_id);\r\n            }\r\n          }\r\n          return cb && cb();\r\n        });\r\n      });\r\n    },\r\n    vmInit: function(data) {\r\n      var adressVm, cartVm;\r\n      adressVm = App.adressViewModel.baseVm.call(main);\r\n      cartVm = App.cartListVm.call(main, baseFn.baseVm());\r\n      data = main.payListInit(data);\r\n      return vmcore.mix(cartVm, adressVm, data);\r\n    },\r\n    payListInit: function(obj) {\r\n      var isWeixin;\r\n      isWeixin = main.isWeixin;\r\n      main.isAlipay = false;\r\n      obj.payment_list.map(function(val) {\r\n        if (val.payment_code === 'alipay') {\r\n          main.isAlipay = true;\r\n        }\r\n        if (val.payment_code === 'wxpay') {\r\n          val.is_show = isWeixin;\r\n        } else {\r\n          val.is_show = true;\r\n        }\r\n        return val;\r\n      });\r\n      return obj;\r\n    },\r\n    setDefaultPayType: function() {\r\n      return _VM_.cartList.payType = main.isWeixin ? 'wxpay' : main.isAlipay ? 'alipay' : 'unionpay';\r\n    },\r\n\r\n    /**\r\n     * 定义商品列表VM\r\n     */\r\n    defineCartViewModel: function(res, cb) {\r\n      var _cartList;\r\n      if (res.code === '00000') {\r\n        _cartList = main.vmInit(res.data);\r\n        _cartList.isGet = true;\r\n        _VM_.cartList = vmcore.define(_cartList);\r\n        main.setDefaultPayType();\r\n      } else {\r\n        _cartList = main.vmInit({});\r\n        _VM_.cartList = vmcore.define(_cartList);\r\n        Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n      }\r\n      return cb && cb(res);\r\n    },\r\n\r\n    /**\r\n    * 更新cartList\r\n     */\r\n    updateCartList: function(cb) {\r\n      var _update, opts, times;\r\n      if (!_VM_.cartList.isGet) {\r\n        return false;\r\n      }\r\n      main.startLoader();\r\n      opts = main.makeCheckQuery();\r\n      times = 3;\r\n      _VM_.cartList.isGet = false;\r\n      _update = function() {\r\n        return baseFn.getCartListData(opts, function(res) {\r\n          var _data;\r\n          if (res) {\r\n            _VM_.cartList.isGet = true;\r\n            if (res && res.code === '00000') {\r\n              _data = main.payListInit(res.data);\r\n              vmcore.each(_data, function(key, value) {\r\n                return _VM_.cartList[key] = value;\r\n              });\r\n              main.setDefaultPayType();\r\n              main.endLoader();\r\n              return cb && cb(res);\r\n            } else {\r\n              return Base.layer.tips(res.desc);\r\n            }\r\n          } else {\r\n            times === 1 && (opts = {});\r\n            times-- >= 0 && _update();\r\n            return times === 0 && cb && cb(res);\r\n          }\r\n        });\r\n      };\r\n      return _update();\r\n    },\r\n    makeCheckQuery: function() {\r\n      var cart_id, coupon_id, opts, red_packet_id;\r\n      opts = {};\r\n      cart_id = main._getSelectedCartId();\r\n      coupon_id = main._getSelectedCoupons();\r\n      red_packet_id = main._getSelectedRedPackets();\r\n      opts.cart_id = cart_id.toString();\r\n      opts.red_packet_id = red_packet_id.toString();\r\n      if (coupon_id.length) {\r\n        opts.coupon_id = coupon_id.toString();\r\n      }\r\n      if (_VM_.cartList.address_info.address_id) {\r\n        opts.address_id = _VM_.cartList.address_info.address_id;\r\n      }\r\n      return opts;\r\n    },\r\n    makeConfirmQuery: function() {\r\n      var o2o_cps_info, opts;\r\n      opts = vmcore.mix({}, main.makeCheckQuery());\r\n      opts.price_hash = _VM_.cartList.price_hash || \"\";\r\n      o2o_cps_info = main.o2o_cps_info || \"\";\r\n      return opts;\r\n    },\r\n\r\n    /**\r\n     * 选择或取消购物车中的商品\r\n     * 通过ajax获取数据，返回后更新VM视图即可\r\n     */\r\n    checkGoods: function(cartString) {\r\n      var _data, _redPacketIds;\r\n      main.startLoader();\r\n      _redPacketIds = main._getSelectedRedPackets();\r\n      _data = {\r\n        cart: cartString,\r\n        address_id: _VM_.cartList.address_info.address_id || '',\r\n        red_packet_id: _redPacketIds.toString()\r\n      };\r\n      return baseFn.ajaxData({\r\n        act: 'check',\r\n        data: _data,\r\n        cb: function(res) {\r\n          if (res.code !== '00000') {\r\n            main.endLoader();\r\n            return Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n          } else {\r\n            return main.updateCartList(function() {\r\n              return main.endLoader();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 编辑商品的数量\r\n     */\r\n    editGoods: function(cid, num) {\r\n      var _data;\r\n      _data = {\r\n        cart_id: cid,\r\n        quantity: num\r\n      };\r\n      main.startLoader();\r\n      return baseFn.ajaxData({\r\n        act: 'edit',\r\n        data: _data,\r\n        cb: function(res) {\r\n          if (res.code !== '00000') {\r\n            main.endLoader();\r\n            return Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n          } else {\r\n            return main.updateCartList(function() {\r\n              return main.endLoader();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 删除商品\r\n     */\r\n    removeGoods: function(cid) {\r\n      var _layerId;\r\n      if (!cid) {\r\n        return false;\r\n      }\r\n      return _layerId = Base.layer.open({\r\n        content: '<p style=\"text-align:center;\">您是否要从购物车中移除所选的商品?<p>',\r\n        btn: ['确定', '取消'],\r\n        shade: !0,\r\n        shadeClose: !0,\r\n        yes: function() {\r\n          var _data;\r\n          _data = {\r\n            cart_id: cid\r\n          };\r\n          return baseFn.ajaxData({\r\n            act: 'remove',\r\n            data: _data,\r\n            cb: function(res) {\r\n              if (res.code !== '00000') {\r\n                Base.layer.close(_layerId);\r\n                return Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n              } else {\r\n                Base.layer.close(_layerId);\r\n                main.startLoader();\r\n                return main.updateCartList(function() {\r\n                  return main.endLoader();\r\n                });\r\n              }\r\n            }\r\n          });\r\n        },\r\n        no: function() {\r\n          return Base.layer.close(_layerId);\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 选择或取消优惠劵接口\r\n     */\r\n    checkCoupon: function(opts, cb) {\r\n      main.startLoader();\r\n      return baseFn.ajaxData({\r\n        act: 'checkCoupon',\r\n        data: opts,\r\n        cb: function(res) {\r\n          if (res.code !== '00000') {\r\n            main.endLoader();\r\n            return Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n          } else {\r\n            _VM_.cartList.coupon_data = res.data;\r\n            main.endLoader();\r\n            return cb && cb(res);\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 获取红包列表\r\n     */\r\n    getRedPacket: function(opts, cb) {\r\n      var redPacketIds;\r\n      redPacketIds = main._getSelectedRedPackets();\r\n      if (main.isRedPacketInit) {\r\n        main.startLoader();\r\n        return baseFn.ajaxData({\r\n          act: 'redPacket',\r\n          data: opts,\r\n          cb: function(res) {\r\n            if (res.code !== '00000') {\r\n              main.endLoader();\r\n              return Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n            } else {\r\n              res.data.redPacketList.map(function(val) {\r\n                val.is_checked = redPacketIds.indexOf(val.red_packet_id) !== -1;\r\n                return val;\r\n              });\r\n              _VM_.cartList.red_packet_all = res.data.redPacketList;\r\n              main.isRedPacketInit = true;\r\n              main.endLoader();\r\n              return cb && cb(res);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 红包勾选的控制逻辑\r\n     * @description 接收2个参数或不传参数,当不传参数时，此函数将处理红包的全部勾选或取消逻辑;\r\n     *              当传入两个参数时，则处理当前选中的红包的勾选或取消 逻辑\r\n     * @param1 String   redPacketId,红包的id\r\n     * @param2 Number   index,当前选中红包列表的数组的索引，即 _VM_.cartList.red_packet_all 数组的索引\r\n     */\r\n    checkRedPacket: function() {\r\n      var index, isChecked, redPacketId, red_packet_total, tempArr;\r\n      if (arguments.length === 2) {\r\n        redPacketId = arguments[0];\r\n        index = arguments[1];\r\n        isChecked = _VM_.cartList.red_packet_all[index].is_checked = !_VM_.cartList.red_packet_all[index].is_checked;\r\n        if (isChecked) {\r\n          _VM_.cartList.red_packet_checked.push(redPacketId);\r\n          return _VM_.cartList.red_packet_total = (parseFloat(_VM_.cartList.red_packet_total) * 100 + parseFloat(_VM_.cartList.red_packet_all[index].money) * 100) / 100;\r\n        } else {\r\n          _VM_.cartList.red_packet_checked.remove(redPacketId);\r\n          return _VM_.cartList.red_packet_total = (parseFloat(_VM_.cartList.red_packet_total) * 100 - parseFloat(_VM_.cartList.red_packet_all[index].money) * 100) / 100;\r\n        }\r\n      } else {\r\n        tempArr = [];\r\n        red_packet_total = 0;\r\n        if (_VM_.cartList.red_packet_checked.length === _VM_.cartList.red_packet_all.length) {\r\n          _VM_.cartList.red_packet_all.map(function(val) {\r\n            val.is_checked = false;\r\n            return red_packet_total = 0;\r\n          });\r\n        } else {\r\n          _VM_.cartList.red_packet_all.map(function(val) {\r\n            val.is_checked = true;\r\n            tempArr.push(val.red_packet_id);\r\n            return red_packet_total += parseFloat(val.money) * 100;\r\n          });\r\n        }\r\n        _VM_.cartList.red_packet_checked = tempArr;\r\n        return _VM_.cartList.red_packet_total = red_packet_total / 100;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 激活红包\r\n     * @param   string  code    红包码\r\n     */\r\n    activeRedPacket: function(code, cb) {\r\n      var opts;\r\n      if (code === '') {\r\n        return Base.layer.tips('红包码不能为空');\r\n      } else {\r\n        main.startLoader();\r\n        opts = {\r\n          packet_code: code\r\n        };\r\n        return baseFn.ajaxData({\r\n          act: 'activeRedPacket',\r\n          data: opts,\r\n          cb: function(res) {\r\n            if (res.code === '00000') {\r\n              main.isRedPacketInit = false;\r\n              main.endLoader();\r\n              Base.layer.tips(res.desc);\r\n            } else {\r\n              Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n            }\r\n            return cb && cb(res);\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 激活优惠劵\r\n     * @param   string  codes   券码(多个用可用“,”分开)\r\n     */\r\n    activeCoupon: function(codes, cb) {\r\n      var opts;\r\n      if (codes === '') {\r\n        return Base.layer.tips('劵码不能为空');\r\n      } else {\r\n        main.startLoader();\r\n        opts = {\r\n          coupon_codes: codes\r\n        };\r\n        return baseFn.ajaxData({\r\n          act: 'activeCoupon',\r\n          data: opts,\r\n          cb: function(res) {\r\n            main.endLoader();\r\n            Base.layer.tips(res.desc?res.desc:'网络繁忙，请重试');\r\n            return cb && cb(res);\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 打开pop弹窗面板\r\n     * @param tplName: 弹窗模板名称\r\n     * @param index: main.titleArr 数组索引\r\n     */\r\n    _openPopBox: function(tplName, index) {\r\n      _VM_.cartList.popTpl = tplName;\r\n      _VM_.cartList.popTitle = _VM_.cartList.titleArr[index];\r\n      index === 3 && App.adressViewModel.getAddress('cartList', main._scrollInit);\r\n      if (index > 3) {\r\n        return _VM_.cartList.isShowCartList = false;\r\n      } else {\r\n        return setTimeout(function() {\r\n          return _VM_.cartList.isShowCartList = true;\r\n        }, 100);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 关闭pop弹窗面板\r\n     */\r\n    _closePopBox: function() {\r\n      _VM_.cartList.isShowPop = false;\r\n      _VM_.cartList.popTpl = \"\";\r\n      return main._destroyScroll();\r\n    },\r\n\r\n    /**\r\n     * 选择优惠券\r\n     * @return  Array   选中的id数组\r\n     */\r\n    _getSelectedCoupons: function() {\r\n      var _arr, _yesCouponList;\r\n      _arr = [];\r\n      _yesCouponList = _VM_.cartList.coupon_data.yesCouponList;\r\n      _yesCouponList && [].forEach.call(_yesCouponList, function(val) {\r\n        return val.is_coupon_checked === 1 && _arr.push(val.id);\r\n      });\r\n      return _arr;\r\n    },\r\n\r\n    /**\r\n     * 获取已经被选中的红包id\r\n     * @description 如果购物车初始化已经完成了，则使用过滤\r\n     * @return  Array   选中的红包id数组\r\n     */\r\n    _getSelectedRedPackets: function() {\r\n      var arr, redPacketArr;\r\n      arr = [];\r\n      redPacketArr = main.isRedPacketInit ? _VM_.cartList.red_packet_all : _VM_.cartList.red_packet;\r\n      if (main.isRedPacketInit) {\r\n        [].forEach.call(_VM_.cartList.red_packet_all, function(val) {\r\n          if (val.is_checked) {\r\n            return arr.push(val.red_packet_id);\r\n          }\r\n        });\r\n      } else {\r\n        [].forEach.call(_VM_.cartList.red_packet, function(val) {\r\n          return arr.push(val.red_packet_id);\r\n        });\r\n      }\r\n      return arr;\r\n    },\r\n\r\n    /**\r\n     * 选中的商品\r\n     * @return  Array   选中的cart_id数组\r\n     */\r\n    _getSelectedCartId: function() {\r\n      var arr;\r\n      arr = [];\r\n      [].forEach.call(_VM_.cartList.store_cart_list, function(val) {\r\n        return [].forEach.call(val.goods_list, function(item) {\r\n          return item.is_checked === 1 && arr.push(item.cart_id);\r\n        });\r\n      });\r\n      return arr;\r\n    },\r\n    _destroyScroll: function() {\r\n      if (_VM_.cartList.myScroll) {\r\n        _VM_.cartList.myScroll.destroy();\r\n        return _VM_.cartList.myScroll = null;\r\n      }\r\n    },\r\n    _editAddress: function(key) {\r\n      _VM_.cartList.openPopBox('adress_edit', 5, 0);\r\n      return App.adressViewModel.editAddress(key, 'cartList');\r\n    },\r\n    _selectChange: function(e) {\r\n      var type;\r\n      type = e.value.split('.')[1];\r\n      return _VM_.cartList.isAreaInit && App.adressViewModel.selectChange(type, 'cartList');\r\n    },\r\n    _submitAddress: function() {\r\n      return App.adressViewModel.submitAddress('cartList');\r\n    },\r\n    _choiceAddress: function(addressId) {\r\n      _VM_.cartList.address_info.address_id = addressId;\r\n      main.startLoader();\r\n      return main.updateCartList(function() {\r\n        main._closePopBox();\r\n        return main.endLoader();\r\n      });\r\n    },\r\n    _deleteAddress: function(addressId) {\r\n      return App.adressViewModel.deleteAddress(addressId, 'cartList', function() {\r\n        main._destroyScroll();\r\n        return main._scrollInit();\r\n      });\r\n    },\r\n    _redPacketTotal: function() {\r\n      return _VM_.cartList.red_packet_all.map(function(val) {\r\n        val.is_checked = true;\r\n        tempArr.push(val.red_packet_id);\r\n        return _total += parseFloat(val.money);\r\n      });\r\n    },\r\n    _getPayType: function() {\r\n      return _VM_.cartList.payType;\r\n    },\r\n    _scrollInit: function() {\r\n      var id, tplName;\r\n      main._destroyScroll();\r\n      tplName = _VM_.cartList.popTpl;\r\n      id = (function() {\r\n        switch (tplName) {\r\n          case 'pop_bouns':\r\n            return '#bounsList';\r\n          case 'pop_coupon':\r\n            return '#couponList';\r\n          case 'pop_special':\r\n            return '#specialList';\r\n          case 'pop_activation':\r\n            return '#cardActive';\r\n          case 'adress_main':\r\n            return '#adressList';\r\n          case 'adress_edit':\r\n            return '#adressFrom';\r\n        }\r\n      })();\r\n      return id && (_VM_.cartList.myScroll = new Base.iScroll(id));\r\n    },\r\n\r\n    /**\r\n     * 去支付，生成订单\r\n     * @param  {Object} obj 支付按钮对象，用于触发piwik统计\r\n     */\r\n    _payNow: function(obj) {\r\n      var confirmQuery, payType;\r\n      payType = main._getPayType();\r\n      if (payType === '') {\r\n        Base.layer.tips('请选择支付方式');\r\n        return false;\r\n      }\r\n      confirmQuery = main.makeConfirmQuery();\r\n      if (confirmQuery.cart_id === '') {\r\n        Base.layer.tips('请至少选中一件商品');\r\n        return false;\r\n      }\r\n      if (confirmQuery.price_hash === '') {\r\n        Base.layer.alert('<p style=\"text-align:center;\">参数不合法</p>', function() {\r\n          return window.location.reload();\r\n        });\r\n        return false;\r\n      }\r\n      main.startLoader();\r\n      return baseFn.ajaxData({\r\n        act: 'confirm',\r\n        data: confirmQuery,\r\n        cb: function(result) {\r\n          var _data, desc, e, error, tips, trackcontent;\r\n          main.endLoader();\r\n          _data = result.data || {};\r\n          if (result.code === '00000' && _data && _data.pay_sn) {\r\n            try {\r\n\r\n              /*数据跟踪 */\r\n              trackcontent = [\r\n                {\r\n                  index: 5,\r\n                  key: 'pay_sn',\r\n                  value: _data.pay_sn,\r\n                  scope: 'page'\r\n                }\r\n              ];\r\n              piwikTracker.track(obj, trackcontent);\r\n            } catch (error) {\r\n              e = error;\r\n              console.log(e);\r\n            }\r\n            if (_data.order_state === 1) {\r\n              return window.location.href = '/payOk.html?pay_sn=' + _data.pay_sn;\r\n            } else {\r\n              return App.cartPayWay.goPay(payType, _data.pay_sn, function() {});\r\n            }\r\n          } else {\r\n            desc = result.desc?result.desc:'网络繁忙，请重试';\r\n            tips = '<p style=\"text-align:center;\">' + desc + '</p>';\r\n            return Base.layer.alert(tips, function() {\r\n              return window.location.reload();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    _selectOne: function(cartIds) {\r\n      var _arr, store_cart_list;\r\n      cartIds = cartIds.split(',');\r\n      _arr = [];\r\n      store_cart_list = _VM_.cartList.store_cart_list;\r\n      [].forEach.call(store_cart_list, function(val) {\r\n        var goods_list;\r\n        goods_list = val.goods_list;\r\n        return [].forEach.call(goods_list, function(v) {\r\n          var ref;\r\n          return _arr.push((v.cart_id + \"|\") + ~~(ref = v.cart_id, indexOf.call(cartIds, ref) >= 0));\r\n        });\r\n      });\r\n      return main.checkGoods(_arr.toString());\r\n    }\r\n  };\r\n  return sbLib.app.cartListCtrl = main;\r\n});\r\n",
    "app/cart/_cartListVm.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/*\r\n * @fileOverview 购物车的ViewModel\r\n * @author pjg\r\n * @date  2016-03-08\r\n * @description 购物车的ViewModel,用于获取和定义MVVM数据\r\n */\r\ndefine('app/cart/_cartListVm',['vmcore'],function(vmcore) {\r\n  var App, Base, ViewModel, _VM_;\r\n  _VM_ = window._VM_ || (window._VM_ = {});\r\n  Base = sbLib.base;\r\n  App = sbLib.app = sbLib.app || {};\r\n\r\n  /**\r\n   * 购物车列表VM扩展对象或操作方法\r\n   */\r\n  ViewModel = function(data) {\r\n    var ctrl, vm;\r\n    ctrl = this;\r\n    data = data || {};\r\n    vm = {\r\n      renderPop: function() {\r\n        _VM_.cartList.isShowPop = true;\r\n        setTimeout(function() {\r\n          return ctrl._scrollInit();\r\n        }, 16);\r\n        return this.innerHTML;\r\n      },\r\n\r\n      /**\r\n       * 全部勾选或取消商品\r\n       * @param  Boolen isChecked is_checked: 0 or 1\r\n       */\r\n      selectTotal: function(isChecked) {\r\n        var goodsArr, store_cart_list;\r\n        goodsArr = [];\r\n        store_cart_list = _VM_.cartList.store_cart_list;\r\n        [].forEach.call(store_cart_list, function(val, key) {\r\n          var goods_list;\r\n          goods_list = val.goods_list;\r\n          return [].forEach.call(goods_list, function(v) {\r\n            return goodsArr.push(v.cart_id + \"|\" + (~~!isChecked));\r\n          });\r\n        });\r\n        return ctrl.checkGoods(goodsArr.toString());\r\n      },\r\n\r\n      /**\r\n       * 选择或取消同一供应商下的所有商品\r\n       * @param key 购物车中商品列表数组索引\r\n       * @param  Boolen isChecked is_checked: 0 or 1\r\n       */\r\n      selectAll: function(key, isChecked) {\r\n        var goodsArr, goods_list;\r\n        goodsArr = [];\r\n        goods_list = _VM_.cartList.store_cart_list[key].goods_list;\r\n        [].forEach.call(goods_list, function(v) {\r\n          return goodsArr.push(v.cart_id + \"|\" + (~~!isChecked));\r\n        });\r\n        return ctrl.checkGoods(goodsArr.toString());\r\n      },\r\n\r\n      /**\r\n       * 选择或取消当前选中的商品\r\n       * @param  String cid  cart_id\r\n       * @param  Boolen isChecked is_checked: 0 or 1\r\n       */\r\n      select: function(cid, isChecked) {\r\n        return ctrl.checkGoods(cid + \"|\" + (~~!isChecked));\r\n      },\r\n\r\n      /**\r\n       * 编辑购物车 加减商品数量\r\n       * @param  String cid  cart_id\r\n       * @param  Number num  goods_num\r\n       */\r\n      editGoods: function(cid, num, type) {\r\n        var _num;\r\n        _num = !!type ? ++num : --num;\r\n        if (_num < 1) {\r\n          return false;\r\n        } else {\r\n          return ctrl.editGoods(cid, num);\r\n        }\r\n      },\r\n\r\n      /**\r\n       * 删除选中的商品\r\n       * @param  String cid  cart_id\r\n       */\r\n      removeGoods: function(cid) {\r\n        return ctrl.removeGoods(cid);\r\n      },\r\n\r\n      /**\r\n       * 打开弹窗事件\r\n       * @param  {String} tplName [description]\r\n       * @param  {Number} index   头部导航的名字，按 VM_.cartList.titleArr 数组的次序选择\r\n       * @param  {Number} type    弹窗的头部右侧是否激活有激活按钮 0:没有，1:有\r\n       */\r\n      openPopBox: function(tplName, index, type) {\r\n        ctrl._openPopBox(tplName, index);\r\n        return type && (_VM_.cartList.activeType = type);\r\n      },\r\n      closePopBox: function() {\r\n        return ctrl._closePopBox();\r\n      },\r\n      stopTouchMove: function(e) {\r\n        if (_VM_.cartList.isShowPop) {\r\n          e.preventDefault();\r\n          return e.stopPropagation();\r\n        }\r\n      },\r\n      fixPopFooter: function(e) {\r\n        e.preventDefault();\r\n        return e.stopPropagation();\r\n      },\r\n      scrollInit: function() {\r\n        return ctrl._scrollInit();\r\n      },\r\n      getCoupon: function() {\r\n        var selectId;\r\n        _VM_.cartList.openPopBox('pop_coupon', 1, 1);\r\n        selectId = ctrl._getSelectedCoupons();\r\n        return ctrl.checkCoupon({\r\n          selectId: selectId.toString()\r\n        }, function(res) {\r\n          _VM_.cartList.coupon_checked = ctrl._getSelectedCoupons();\r\n          ctrl._destroyScroll();\r\n          return ctrl._scrollInit();\r\n        });\r\n      },\r\n      checkCoupon: function(cid, isChecked) {\r\n        var opt, selectId;\r\n        opt = {};\r\n        selectId = ctrl._getSelectedCoupons();\r\n        if (isChecked === 0) {\r\n          selectId.push(cid);\r\n          opt.currentId = cid;\r\n        } else {\r\n          selectId = selectId.filter(function(item) {\r\n            return item !== cid;\r\n          });\r\n          opt.currentId = '';\r\n        }\r\n        opt.selectId = selectId.toString();\r\n        return ctrl.checkCoupon(opt, function(res) {\r\n          return _VM_.cartList.coupon_checked = ctrl._getSelectedCoupons();\r\n        });\r\n      },\r\n\r\n      /**\r\n       * 切换优惠券:  可用和不可用切换\r\n       * @param   number  type  1:可用  0:不可用\r\n       */\r\n      showCouponList: function(type) {\r\n        ctrl._destroyScroll();\r\n        ctrl._scrollInit();\r\n        return _VM_.cartList.showCouponListType = type;\r\n      },\r\n      activeCoupon: function() {\r\n        var _codes;\r\n        $(this).removeClass('hover');\r\n        _codes = _VM_.cartList.coupon_codes;\r\n        return ctrl.activeCoupon(_codes, function() {\r\n          return _VM_.cartList.coupon_codes = \"\";\r\n        });\r\n      },\r\n      getRedPacket: function() {\r\n        var opt;\r\n        _VM_.cartList.openPopBox('pop_bouns', 2, 1);\r\n        opt = {\r\n          usedStatus: \"A\",\r\n          canPlatform: \"h5\"\r\n        };\r\n        return ctrl.getRedPacket(opt, function(res) {\r\n          _VM_.cartList.red_packet_checked = ctrl._getSelectedRedPackets();\r\n          ctrl._destroyScroll();\r\n          return ctrl._scrollInit();\r\n        });\r\n      },\r\n      checkRedPacket: function(redPacketId, index) {\r\n        if (arguments.length === 2) {\r\n          return ctrl.checkRedPacket(arguments[0], arguments[1]);\r\n        } else {\r\n          return ctrl.checkRedPacket();\r\n        }\r\n      },\r\n      activeRedPacket: function() {\r\n        var redPackeCode;\r\n        $(this).removeClass('hover');\r\n        redPackeCode = _VM_.cartList.red_packet_code;\r\n        return ctrl.activeRedPacket(redPackeCode, function(res) {\r\n          return _VM_.cartList.red_packet_code = '';\r\n        });\r\n      },\r\n      updateCartList: function() {\r\n        ctrl.updateCartList();\r\n        return ctrl._closePopBox();\r\n      },\r\n      closeInfoBox: function() {\r\n        return _VM_.cartList.message = '';\r\n      },\r\n      hoverStart: function() {\r\n        return $(this).addClass('hover');\r\n      },\r\n      hoverEnd: function() {\r\n        return $(this).removeClass('hover');\r\n      },\r\n      payNow: function() {\r\n        var obj;\r\n        obj = $(this);\r\n        obj.removeClass('hover');\r\n        return ctrl._payNow(obj);\r\n      },\r\n      setPayType: function(type) {\r\n        return _VM_.cartList.payType = type;\r\n      }\r\n    };\r\n    return vmcore.mix(vm, data);\r\n  };\r\n  return sbLib.app.cartListVm = ViewModel;\r\n});\r\n",
    "app/cart/alipayInWx.js": "/**\r\n * @fileOverview 微信里面跳转到支付宝页面\r\n * @author yy\r\n * @description 微信里面跳转到支付宝页面相关业务逻辑\r\n */\r\ndefine('app/cart/alipayInWx',['app/_common'],function() {\r\n    var exports;\r\n    exports = {\r\n        init: function() {\r\n            var _flagStr, _index, _url;\r\n            _flagStr = \"?url=\";\r\n            _url = window.location.href;\r\n            _index = _url.indexOf(_flagStr);\r\n            if (_index > -1) {\r\n                _url = decodeURIComponent(_url.slice(_index + _flagStr.length));\r\n                $('#iframe').attr(\"src\", _url)\r\n            }\r\n        },\r\n        goToWin: function(url) {\r\n            url = url || $('#iframe').attr(\"src\")\r\n            window.location.href = url;\r\n            return true;\r\n        }\r\n    };\r\n    exports.init();\r\n    $(function() {\r\n        setTimeout(function() {\r\n            window.goToWin = exports.goToWin;\r\n        }, 50);\r\n    });\r\n});\r\n",
    "app/cart/index.js": "define('app/cart/index',['vmcore','_tpl/cart','app/_common','_base/layer','_base/iScroll'],function(vmcore, iTpl) {\r\n  var cart, exports, sbBase, sbCom, sbData;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  sbData = sbLib.data;\r\n  cart = {\r\n    init: function() {\r\n\r\n      /*检查登录 */\r\n      var _layerBox;\r\n      sbCom.checkMember();\r\n      cart.loadId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      if (!this.hasInit) {\r\n        cart.hasInit = true;\r\n        vmcore.templateCache['cartList.html'] = iTpl.index;\r\n        vmcore.templateCache['coupon.html'] = iTpl.coupon;\r\n        _layerBox = cart.layerBox();\r\n        _VM_.cartList = vmcore.define(cart.cartList());\r\n        _VM_.layerBox = vmcore.define(_layerBox);\r\n      }\r\n      return cart.getCartInfo();\r\n    },\r\n    key: Cookie.getItem('key'),\r\n    hasInit: false,\r\n    priceHash: '',\r\n    loadId: 0,\r\n    getCartInfo: function(cb) {\r\n      var isGet, _def, _opt;\r\n      if (sbCom.checkMember()) {\r\n        isGet = true;\r\n        _opt = {\r\n          data: {\r\n            accessToken: cart.key,\r\n            priceHash: cart.price_hash,\r\n            coupon_id: '',\r\n            address_id: '',\r\n            red_packet_id: ''\r\n          }\r\n        };\r\n        _def = {\r\n          domain: 'cart',\r\n          act: 'v1.3/cart',\r\n          op: 'list',\r\n          type: \"get\"\r\n        };\r\n        _opt = $.extend(_def, _opt);\r\n        return sbCom.ajaxData(_opt, function(result) {\r\n          var _code, _data;\r\n          _code = parseInt(result.code, 10);\r\n          _data = result.data;\r\n          if (_code === 0) {\r\n            cart.price_hash = _data.price_hash;\r\n            _data.pay_amount = _data.pay_amount - _data.freight_total;\r\n            cart.initData(_data);\r\n            isGet = true;\r\n            cb && cb();\r\n          } else {\r\n            isGet = false;\r\n          }\r\n          return sbBase.layer.close(cart.loadId);\r\n        });\r\n      }\r\n    },\r\n    setCartScrollerHeight: function() {\r\n      var cartScrollItem, height;\r\n      height = 0;\r\n      cartScrollItem = $('.scroll-item');\r\n      cartScrollItem.each(function(index, item) {\r\n        return height += this.offsetHeight;\r\n      });\r\n      return $('.scroll-box').height = scrollerHeight;\r\n    },\r\n    cartScrollerInit: function() {\r\n      cart.setCartScrollerHeight;\r\n      if (!_VM_.cartList.cartScroller) {\r\n        return _VM_.cartList.myScroll = new sbBase.iScroll('#cartScroller');\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @description 购物车模型\r\n     * @return {Object} VM模型\r\n     */\r\n    cartList: function() {\r\n      var _data;\r\n      _data = {\r\n        $id: 'cartList',\r\n        tpl: 'cartList.html',\r\n        WapSiteUrl: '/',\r\n        store_cart_list: [],\r\n        pay_amount: 0,\r\n        isMeiZu: cart.isMeiZu,\r\n        hasRedpaket: false,\r\n        message: '',\r\n        render: function() {\r\n          cart.cartScrollerInit();\r\n          return this.innerHTML;\r\n        },\r\n\r\n        /**\r\n         * @description 商品数量-加法\r\n         * @param {Object} item 商品数据\r\n         */\r\n        plus: function(item) {\r\n          cart.clickcount++;\r\n          return cart.changeNum(this, item, 'plus');\r\n        },\r\n\r\n        /**\r\n         * @description 商品数量-减法\r\n         * @param {Object} item 商品数据\r\n         */\r\n        minus: function(item) {\r\n          cart.clickcount++;\r\n          return cart.changeNum(this, item, 'minus');\r\n        },\r\n\r\n        /**\r\n         * @description 商品删除\r\n         * @param {Object} item 商品数据\r\n         */\r\n        del: function(item) {\r\n          cart.clickcount++;\r\n          return cart.delGoods(item.cart_id);\r\n        },\r\n\r\n        /**\r\n         * @description 输入框失去焦点\r\n         * @param {Object} item 商品数据\r\n         */\r\n        blurIpt: function(item) {\r\n          var $input, oldNum, _value;\r\n          _value = parseInt(this.value, 10);\r\n          $input = $(this);\r\n          oldNum = $input.data('oldNum');\r\n          if (_value === oldNum) {\r\n            return false;\r\n          } else {\r\n            cart.clickcount++;\r\n            return cart.changeNum(this, item);\r\n          }\r\n        },\r\n\r\n        /**\r\n         * @description 聚焦输入框\r\n         */\r\n        focusIpt: function() {\r\n          var $input;\r\n          $input = $(this);\r\n          return $input.data('oldNum', this.value);\r\n        },\r\n\r\n        /**\r\n         * @description 选中全部\r\n         * @param {Object} el 购物车数据\r\n         */\r\n        checkAll: function(el) {\r\n          var _cart, _cartArr, _checked, _elem;\r\n          _elem = $(this);\r\n          _checked = _elem.hasClass('on') ? 0 : 1;\r\n          _cartArr = [];\r\n          _cart = '';\r\n          el.all_checked = _checked;\r\n          cart.clickcount++;\r\n          vmcore.each(el.goods_list, function(index, item) {\r\n            if (item.goods_state === 1) {\r\n              return _cartArr.push(item.cart_id + '|' + _checked);\r\n            }\r\n          });\r\n          _cart = _cartArr.join(',');\r\n          if (_cartArr.length) {\r\n            return cart.checkInput(_cart, function() {\r\n              el.all_checked = !_checked;\r\n              return cart.clickcount = 0;\r\n            });\r\n          } else {\r\n            el.all_checked = !_checked;\r\n            return cart.clickcount = 0;\r\n          }\r\n        },\r\n\r\n        /**\r\n         * @description 选中商品\r\n         * @param {Object} el 商品数据\r\n         */\r\n        check: function(el) {\r\n          var _cart, _checked, _elem;\r\n          _elem = $(this);\r\n          _checked = _elem.hasClass('on') ? 0 : 1;\r\n          _cart = el.cart_id + '|' + _checked;\r\n          if (el.goods_state === 20 && _checked) {\r\n            el.is_checked = 0;\r\n            sbBase.layer.alert('已超过购买限制或库存不足！');\r\n          }\r\n          cart.clickcount++;\r\n          return cart.checkInput(_cart, function() {\r\n            el.is_checked = !_checked;\r\n            return cart.clickcount = 0;\r\n          });\r\n        },\r\n\r\n        /**\r\n         * @description 获取选中的商品goods_id\r\n         * @return {Array} 获取选中的商品goods_id\r\n         */\r\n        getGoodsId: function() {\r\n          var _arr;\r\n          _arr = [];\r\n          vmcore.each(_VM_.cartList.store_cart_list, function(i, obj) {\r\n            return vmcore.each(obj.goods_list, function(j, item) {\r\n              if (item.is_checked) {\r\n                return _arr.push(item.goods_id);\r\n              }\r\n            });\r\n          });\r\n          return _arr;\r\n        }\r\n      };\r\n      return _data;\r\n    },\r\n    clickcount: 0,\r\n\r\n    /**\r\n     * @description 初始化数据\r\n     * @param {Object} data 购物车数据\r\n     */\r\n    initData: function(data) {\r\n      _VM_.cartList.store_cart_list = data.store_cart_list || [];\r\n      return _VM_.cartList.pay_amount = data.pay_amount;\r\n    },\r\n\r\n    /**\r\n     * @description 重新获取数据\r\n     * @param {Function} cb 成功回调\r\n     */\r\n    reGetData: function(cb) {\r\n      var loadId, _cb;\r\n      _cb = cb || function() {};\r\n      if (cart.clickcount > 1) {\r\n        return false;\r\n      }\r\n      loadId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      return cart.getCartInfo(function() {\r\n        return _cb();\r\n      });\r\n    },\r\n\r\n    /**\r\n     * @description 删除商品\r\n     * @param {Number} cart_id 购物车商品中的cart_id\r\n     */\r\n    delGoods: function(cart_id) {\r\n      var flag, _def, _opt;\r\n      flag = confirm('您是否要从购物车中移除所选的商品?');\r\n      if (flag) {\r\n        _opt = {\r\n          data: {\r\n            accessToken: cart.key,\r\n            cart_id: cart_id\r\n          }\r\n        };\r\n        _def = {\r\n          domain: 'cart',\r\n          act: 'cart',\r\n          op: 'remove',\r\n          type: \"get\"\r\n        };\r\n        _opt = $.extend(_def, _opt);\r\n        return sbCom.ajaxData(_opt, function(result) {\r\n          var _code, _data;\r\n          _code = parseInt(result.code, 10);\r\n          _data = result.data;\r\n          if (_code === 0) {\r\n            return cart.reGetData(function() {\r\n              return cart.clickcount = 0;\r\n            });\r\n          } else {\r\n            return sbBase.layer.alert(result.desc);\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @description 选中购物车的商品\r\n     * @param {String} cart 购物车中商品的cart_id，多个则是用','隔开\r\n     */\r\n    checkInput: function(cart) {\r\n      var loadId, _def, _opt;\r\n      cart = this;\r\n      if (cart.clickcount > 1) {\r\n        return false;\r\n      }\r\n      loadId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n\r\n      /*ajax 获取数据 */\r\n      _opt = {\r\n        data: {\r\n          accessToken: cart.key,\r\n          cart: cart,\r\n          coupon_id: \"\",\r\n          address_id: \"\",\r\n          red_packet_id: \"\"\r\n        }\r\n      };\r\n      _def = {\r\n        domain: 'cart',\r\n        act: 'v1.3/cart',\r\n        op: 'check',\r\n        type: \"get\"\r\n      };\r\n      _opt = $.extend(_def, _opt);\r\n      return sbCom.ajaxData(_opt, function(result) {\r\n        var _code, _data;\r\n        _code = parseInt(result.code, 10);\r\n        _data = result.data;\r\n        if (_code === 0) {\r\n          _data.pay_amount = _data.pay_amount - _data.freight_total;\r\n          cart.initData(_data);\r\n          cart.clickcount = 0;\r\n        } else {\r\n          sbBase.layer.alert(result.desc);\r\n        }\r\n        return sbBase.layer.close(loadId);\r\n      });\r\n    },\r\n    bindFn: function() {\r\n      cart = this;\r\n      return $(document).on('click', '.goto-settlement', function() {\r\n        return cart.goSettlement();\r\n      }).on('click', '.got-it,.seckill-close', function() {\r\n        return $('#overlay').hide();\r\n      }).on('click', '.red-pakect-use', function() {\r\n        return window.location.href = '#';\r\n      });\r\n    },\r\n    gotoPage: function(url) {\r\n      window.location.href = url;\r\n      return true;\r\n    },\r\n\r\n    /**\r\n     * @description 改变购物车数量\r\n     * @author ccw\r\n     * @param {Object} item 触发的元素\r\n     * @param {Object} module 对应的数据模型\r\n     * @param {String} type 触发的类型\r\n     */\r\n    changeNum: function(item, module, type) {\r\n      var $input, $this, oldNum, options, showAlert, that, value;\r\n      cart = this;\r\n      $this = $(item);\r\n      $input = $this.parent().find('.buynum');\r\n      that = $input.get(0);\r\n      oldNum = $input.data('oldNum');\r\n      value = $.trim($input.val());\r\n      if (module.goods_state !== 1 && module.goods_state !== 20) {\r\n        cart.clickcount = 0;\r\n        $this.val(oldNum);\r\n        return false;\r\n      }\r\n      showAlert = function(str, options) {\r\n        $this.val(oldNum);\r\n        cart.clickcount = 0;\r\n        return sbBase.layer.alert(str);\r\n      };\r\n      if (!/^[0-9]*$/.test(value)) {\r\n        return showAlert('商品数量超限');\r\n      } else {\r\n        value = parseInt(value);\r\n      }\r\n      if (typeof type !== \"undefined\") {\r\n        if (type === 'plus') {\r\n          value += 1;\r\n        } else if (type === 'minus') {\r\n          value -= 1;\r\n        }\r\n      }\r\n      if (value === '' || value === 0) {\r\n        return showAlert('商品数量必须大于0');\r\n      }\r\n      if (value > 200) {\r\n        return showAlert('商品数量不能大于200');\r\n      }\r\n      options = {\r\n        cart_id: module.cart_id,\r\n        quantity: value\r\n      };\r\n      if (value > module.goods_storage) {\r\n        options.quantity = module.goods_storage;\r\n        showAlert('已超过购买限制或库存不足！');\r\n        cart.updateNumber($this, options, function() {\r\n          return that.value = oldNum || that.value;\r\n        });\r\n      }\r\n      return cart.updateNumber($this, options, function() {\r\n        return that.value = oldNum || that.value;\r\n      });\r\n    },\r\n\r\n    /**\r\n     * @description 更新购物车数量\r\n     * @author ccw\r\n     * @param {Object} element 触发的元素\r\n     * @param {Object} option 改变数量ajax提交的数据\r\n     */\r\n    updateNumber: function(element, option) {\r\n      var _def, _opt;\r\n      if (cart.clickcount > 1) {\r\n        return false;\r\n      }\r\n      option.key = cart.key;\r\n      _opt = {\r\n        data: option\r\n      };\r\n      _def = {\r\n        domain: 'cart',\r\n        act: 'cart',\r\n        op: 'edit',\r\n        type: \"get\"\r\n      };\r\n      _opt = $.extend(_def, _opt);\r\n      return sbCom.ajaxData(_opt, function(result) {\r\n        var _code, _data;\r\n        _code = parseInt(result.code, 10);\r\n        _data = result.data;\r\n        if (_code === 0) {\r\n          return cart.reGetData(function() {\r\n            return cart.clickcount = 0;\r\n          });\r\n        } else {\r\n          return sbBase.layer.alert(result.desc);\r\n        }\r\n      });\r\n    },\r\n    goSettlement: function() {\r\n      var cartArr, cart_ids;\r\n      cartArr = _VM_.cartList.getGoodsId();\r\n      if (cartArr.length) {\r\n        cart_ids = cartArr.join(\",\");\r\n        return cart.gotoPage(\"/order/buy_step1.html?cart_id=\" + cart_ids);\r\n      } else {\r\n        return sbBase.layer.alert(\"请至少选中一件商品！\");\r\n      }\r\n    },\r\n    myScroll: null,\r\n    scrollInit: function() {\r\n      return cart.myScroll = new sbBase.iScroll('#scroller');\r\n    },\r\n    layerBox: function() {\r\n      var _data;\r\n      _data = {\r\n        $id: 'layerBox',\r\n        tpl: 'coupon.html',\r\n        isRendered: false,\r\n        isHover: false,\r\n        myScroll: null,\r\n        popTitle: '',\r\n        titleArr: [\"选择优惠活动专场\", \"选择优惠劵\", \"选择红包\", \"地址管理\", \"新增地址\", \"修改地址\", \"激活优惠劵\", \"激活红包\"],\r\n        isShowHdRight: false,\r\n        render: function(e) {\r\n          setTimeout(function() {\r\n            _VM_.layerBox.isRendered = true;\r\n            return _VM_.layerBox.scrollInit();\r\n          }, 0);\r\n          _VM_.layerBox.popTitle = _VM_.layerBox.titleArr[1];\r\n          return this.innerHTML;\r\n        },\r\n        scrollInit: function() {\r\n          return _VM_.layerBox.myScroll = new sbBase.iScroll('#couponList');\r\n        },\r\n        touchMoveEnd: function(e) {},\r\n        hoverStart: function(e) {\r\n          return $(this).addClass('hover');\r\n        },\r\n        hoverEnd: function(e) {\r\n          return $(this).removeClass('hover');\r\n        },\r\n        hidePop: function(e) {\r\n          _VM_.layerBox.isRendered = false;\r\n          return e.stopPropagation();\r\n        },\r\n        showPop: function(e) {\r\n          _VM_.layerBox.isRendered = true;\r\n          return e.stopPropagation();\r\n        }\r\n      };\r\n      return _data;\r\n    }\r\n  };\r\n  exports = cart;\r\n  return exports.init();\r\n});\r\n",
    "app/cart/main.js": "\r\n/*\r\n * @fileOverview 购物车列表页的逻辑入口\r\n * @author pjg\r\n * @description 购物车列表页的业务相关逻辑和操作\r\n */\r\ndefine('app/cart/main',['vmcore','app/_common','_base/layer','app/cart/_baseFn','app/cart/_cartListCtrl','app/_adress/viewModel'],function(vmcore) {\r\n  var App, Dom, main, sbBase, sbCom, sbMods;\r\n  sbBase = sbLib.base;\r\n  sbCom = sbLib.common;\r\n  sbMods = sbLib.mods;\r\n  App = sbLib.app;\r\n  Dom = sbLib.dom;\r\n  main = {\r\n\r\n    /*\r\n     * @description 初始化\r\n     */\r\n    init: function() {\r\n      App.layerLoading = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n\r\n      /*检查登录 */\r\n      sbCom.checkMember();\r\n      App.cartBaseFn.tplInit();\r\n      App.cartBaseFn.domCache();\r\n      return App.cartListCtrl.init(function() {\r\n        vmcore.scan();\r\n        App.layerLoading = sbBase.layer.close(App.layerLoading);\r\n        return App.cartBaseFn.fixFn.call(App.cartListCtrl);\r\n      });\r\n    }\r\n  };\r\n  return $(function() {\r\n    return main.init();\r\n  });\r\n});\r\n",
    "app/cart/payResult.js": "// Generated by CoffeeScript 1.10.0\r\ndefine('app/cart/payResult',['app/_common','_base/docCookies'],function() {\r\n  var exports, sbBase, sbCom;\r\n  sbBase = sbLib.base;\r\n  sbCom = sbLib.common;\r\n  exports = {\r\n    accessToken: sbBase.docCookies.getItem('key'),\r\n    pay_sn: sbCom.getQueryString('pay_sn'),\r\n    init: function() {\r\n      if (top.location.href !== location.href) {\r\n        return top.location.href = location.href;\r\n      } else {\r\n        exports.getInfo();\r\n        return exports.getAd(47);\r\n      }\r\n    },\r\n    getInfo: function() {\r\n      var _data, _self;\r\n      _self = this;\r\n      _data = {\r\n        scene: 'order',\r\n        pay_sn: _self.pay_sn,\r\n        accessToken: _self.accessToken\r\n      };\r\n      if (_self.pay_sn) {\r\n        return $.ajax({\r\n          url: '/proxy?domain=my&act=marketing_activity&op=scene',\r\n          dataType: \"json\",\r\n          data: _data,\r\n          success: function(result) {\r\n            var _code, _result, _url;\r\n            _result = result || {};\r\n            _code = parseInt(_result.code, 10);\r\n            _data = _result.data || {};\r\n            if (_code === 0) {\r\n              _url = _data.share[0].url;\r\n              if (_url) {\r\n                if (_url.indexOf('?')) {\r\n                  _url = _url + '&from=h5';\r\n                } else {\r\n                  _url = _url + '?from=h5';\r\n                }\r\n                $('#shareUrl').attr('href', _url);\r\n                return $('#shareCover').show();\r\n              }\r\n            } else {\r\n              return console.log(result);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n    getAd: function(id) {\r\n      return $.ajax({\r\n        url: '/proxy',\r\n        dataType: \"json\",\r\n        data: {\r\n          op: 'getOneAdvert',\r\n          ap_id: id\r\n        },\r\n        success: function(result) {\r\n          var _code, _data, _picUrl, _title, _url;\r\n          _data = result.data;\r\n          _code = result.code;\r\n          if (_data) {\r\n            _picUrl = _data[0].imageUrl;\r\n            _url = _data[0].targetUrl;\r\n            _title = _data[0].title;\r\n          }\r\n          if (_code === '00000') {\r\n            if (_picUrl) {\r\n              if (_url !== void 0) {\r\n                return $('#fullBack').append('<a href=\"' + _url + '\"><img src=\"' + _picUrl + '\" alt=\"' + _title + '\"></a></li>').show();\r\n              } else {\r\n                return $('#fullBack').append('<img src=\"' + _picUrl + '\" alt=\"' + _title + '\"></a></li>').show();\r\n              }\r\n            }\r\n          } else {\r\n            return console.log(result);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return exports.init();\r\n});\r\n",
    "app/member/formBase.js": "/*\r\n   登陆注册 通用模块\r\n   by ccw\r\n*/\r\ndefine('app/member/formBase',['app/_common','_base/layer'],function () {\r\n    var captchaseconds = 60;\r\n    var sbBase = sbLib.base;\r\n    var exports = {\r\n        /*\r\n           sendType - 发送类型\r\n           参数:findpassword 找回密码 / register 注册\r\n        */\r\n        sendType:'',\r\n        /* domCache */\r\n        domCache: function () {\r\n            exports.$form = $('form');\r\n            exports.$emailphone = $('#emailphone');     //手机号码\r\n            exports.$password1 = $(\"#password1\");       //密码\r\n            exports.$phonecaptcha = $(\"#phonecaptcha\"); //短信验证码\r\n            exports.$getcaptcha = $(\"#getcaptcha\");     //获取短信验证码\r\n            exports.$retPassword = $(\"#retPassword\");   //找回密码\r\n            exports.$retPasswordOk = $(\"#retPasswordOk\");  //找回密码 确认\r\n\r\n            /* 移除chrome自动填充的默认黄色 */\r\n            setTimeout(function () {\r\n                $('input:-webkit-autofill').each(function() {\r\n                    var $this = $(this);\r\n                    $this.val('');\r\n                });\r\n            }, 300);\r\n        },\r\n        strclient: 'h5',\r\n        backUrl: sbLib.common.getQueryString(\"backUrl\"),\r\n\r\n        /* 校验用户名 */\r\n        checkUserName: function (ops, cb) {\r\n            var options = {\r\n                domain: 'passports',\r\n                act: 'login',\r\n                op: 'existPhone',\r\n            }\r\n            options = $.extend({}, options, ops);\r\n            sbLib.common.ajaxData(options, function (response) {\r\n                var code = response.code;\r\n                if (exports.sendType === 'register') {\r\n                    if (code === '00000') {\r\n                        if (typeof cb === \"function\") {\r\n                            cb(response);\r\n                        }\r\n                    } else {\r\n                        if (code === '70012') {\r\n                            sbBase.layer.tips('该手机号已被使用');\r\n                        } else {\r\n                            sbBase.layer.tips(response.desc);\r\n                        }\r\n                    }\r\n                }\r\n                else if (exports.sendType === 'findpassword') {\r\n                    /* 如果此块是00000,表示可以使用,即还没注册,还没注册就不能重置密码 */\r\n                    if (code === '00000') {\r\n                        sbBase.layer.tips('该手机号不存在');\r\n                    } else {\r\n                        if (typeof cb === \"function\") {\r\n                            cb(response);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /* 发送验证码 */\r\n        sendCaptcha: function () {\r\n            var that = exports.$form;\r\n            var $checkname = that.find('.checkname');\r\n            var captchaFunction = {\r\n                struc: function () {\r\n                    var options= {\r\n                        data: {\r\n                            phone: exports.$emailphone.val()\r\n                        }\r\n                    }\r\n                    exports.checkUserName(options, function () {\r\n                        captchaFunction.sendCaptcha();\r\n                    });\r\n                },\r\n                /* 发送验证码 */\r\n                sendCaptcha: function () {\r\n                    if (captchaseconds === 60) {\r\n\r\n                        /* 移除当前事件 */\r\n                        exports.$getcaptcha.off('click');\r\n\r\n                        var options = {\r\n                            domain: 'passports',\r\n                            act: 'forget',\r\n                            op: 'phone',\r\n                            data: {\r\n                                phone: exports.$emailphone.val()\r\n                            }\r\n                        }\r\n                        /* 发送 */\r\n                        sbLib.common.ajaxData(options, function (response) {\r\n                            var code = response.code;\r\n                            if(code === '00000'){\r\n                                sbBase.layer.tips('验证码'+response.desc)\r\n                            }\r\n                            if (code !== '00000') {\r\n                                var desc = '';\r\n                                if (code === '70002') {\r\n                                    desc = '验证码不正确';\r\n                                } else {\r\n                                    desc = response.desc;\r\n                                }\r\n                                sbBase.layer.tips(desc);\r\n                            } else {\r\n                                exports.$getcaptcha.data('text', exports.$getcaptcha.text());\r\n                                var getCode = function () {\r\n                                    if (captchaseconds === 0) {\r\n                                        captchaseconds = 60;\r\n                                        exports.$getcaptcha.removeClass('u-wait')\r\n                                            .text(exports.$getcaptcha.data('text'))\r\n                                            .on('click', exports.sendCaptchaEvent);\r\n                                        clearInterval(getCode);\r\n                                    } else {\r\n                                        exports.$getcaptcha.addClass('u-wait')\r\n                                            .text('(' + captchaseconds + ')');\r\n                                        captchaseconds--;\r\n                                        setTimeout(\r\n                                            function () {\r\n                                                getCode(exports.$getcaptcha);\r\n                                            },\r\n                                            1000);\r\n                                    }\r\n                                };\r\n                                getCode();\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            captchaFunction.struc();\r\n        },\r\n        /* 短信验证码事件 */\r\n        loadSendCaptchaEvent: function(cb) {\r\n            if (typeof cb === \"function\") {\r\n                exports.sendCaptchaEvent = cb;\r\n                exports.$getcaptcha.on('click', cb);\r\n            }\r\n        },\r\n        /**\r\n         * 对象-调用对象自身函数\r\n         * @param1 {Object} 调用的对象\r\n         * @params {arguments} 调用的对象的方法名\r\n         */\r\n        objectCallFunction: function (obj) {\r\n            var fn;\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                fn = obj[arguments[i]];\r\n                if (typeof fn === 'function') {\r\n                    fn();\r\n                }\r\n            }\r\n        },\r\n        /*\r\n         * 设置变量 将指定options转换为obj.$xxx的变量\r\n         * --------通常转换为固定的元素id或一系列的类\r\n         * @param1 {Object} Javascript简单对象\r\n         * @param2 {String} 转换的字符串,号分割  如\"a,b,c,d\"\r\n         * @param3 {String} 过滤字符串\r\n                            如:$(\"#mybutton1\") 如果该参数为\"my\"\r\n                            则:obj.$button1为转换的变量,否则为obj.$mybutton1\r\n         */\r\n        setObjVariable: function (obj, setStr, filter) {\r\n            if (setStr != undefined) {\r\n                if (typeof setStr == \"string\") {\r\n                    setStr = setStr.split(',');\r\n                    for (var i = 0; i < setStr.length; i++) {\r\n                        var rpoptoin = setStr[i];\r\n                        if (filter) {\r\n                            rpoptoin = rpoptoin.replace(filter, '');\r\n                        }\r\n                        var tag = '#';\r\n                        if (setStr[i].indexOf('.') >= 0) {\r\n                            rpoptoin = rpoptoin.replace(/\\./ig, '');\r\n                            tag = '';\r\n                        }\r\n                        obj[\"$\" + rpoptoin] = $(tag + setStr[i]);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        /* 初始化 */\r\n        init: function () {\r\n            this.domCache();\r\n        }\r\n    }\r\n    return exports;\r\n});\r\n",
    "app/member/login.js": "// Generated by CoffeeScript 1.9.3\r\n\r\n/*\r\n\t@auther by hzl\r\n\t@desc 会员中心登陆\r\n */\r\ndefine('app/member/login',['vmcore'],function(vmcore) {\r\n  var login;\r\n  login = {\r\n    _formhash: \"\",\r\n    init: function() {\r\n      var _self;\r\n      _self = this;\r\n      return _self.getHash();\r\n    },\r\n    login: function() {\r\n      var phonevalue, pwdvalue;\r\n      phonevalue = $.trim($(\"#username\").val());\r\n      pwdvalue = $.trim($(\"#userpwd\").val());\r\n      return $.ajax({\r\n        type: \"post\",\r\n        url: \"/app/index.php?act=login&op=pclogin\",\r\n        data: {\r\n          username: phonevalue,\r\n          password: pwdvalue,\r\n          client: \"h5\",\r\n          formhash: this._formhash\r\n        },\r\n        dataType: \"json\",\r\n        success: function(result) {\r\n          var code, desc;\r\n          code = result.code;\r\n          desc = \"\";\r\n          if (code === !\"00000\") {\r\n            if (code === \"60070\" || code === \"60069\") {\r\n              desc = \"账号或密码错误\";\r\n              $(\"#userpwd\").val(\"\");\r\n            } else {\r\n              desc = result.desc;\r\n            }\r\n            return console.log(desc);\r\n          } else {\r\n            return console.log('登陆成功');\r\n          }\r\n        }\r\n      });\r\n    },\r\n    getHash: function() {\r\n      return $.ajax({\r\n        type: 'post',\r\n        url: '/app/index.php?act=login&op=getSecToken',\r\n        dataType: 'json',\r\n        success: function(result) {\r\n          console.log(result);\r\n          return this._formhash = result.data.formhash;\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return login.init();\r\n});\r\n",
    "app/user/addRefund.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/**\r\n * @fileOverview h5退款\r\n * @author yy\r\n * @description 退款申请\r\n */\r\ndefine('app/user/addRefund',['vmcore','_tpl/returnList','app/_common','_data/refund','_base/layer','_base/docCookies'],function(vmcore, iTpl) {\r\n  var exports, sbBase, sbCom, sbData;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  sbData = sbLib.data;\r\n  exports = {\r\n    init: function() {\r\n      var _self, loadId;\r\n      _self = this;\r\n      sbCom.checkMember();\r\n      $(document).on('click', '#refundBtn', function() {\r\n        return _self.submitRefundRequest();\r\n      });\r\n      loadId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      return sbData.refund.addRefund({\r\n        data: {\r\n          accessToken: _self.token,\r\n          order_id: _self.order_id\r\n        }\r\n      }, function(result) {\r\n        var _code, _data, _model, _result;\r\n        _result = result || {\r\n          code: -1,\r\n          desc: \"网络繁忙！\"\r\n        };\r\n        _code = parseInt(_result.code, 10);\r\n        _data = result.data || {};\r\n        sbCom.checkLogin(result);\r\n        sbBase.layer.close(loadId);\r\n        if (_code === 0) {\r\n          _model = _self.defineModel();\r\n          _VM_.addRefundPad = vmcore.define(_model);\r\n          _VM_.addRefundPad.data = _data;\r\n          return vmcore.scan('', _VM_.addRefundPad);\r\n        } else {\r\n          return sbBase.layer.tips(_result.desc, 1);\r\n        }\r\n      });\r\n    },\r\n    token: sbBase.docCookies.getItem('key'),\r\n    order_id: sbCom.getQueryString('order_id'),\r\n    defineModel: function() {\r\n      var _data, _self;\r\n      vmcore.templateCache[\"addRefund.html\"] = iTpl.addRefund;\r\n      _self = this;\r\n      _data = {\r\n        $id: 'addRefundPad',\r\n        tpl: 'addRefund.html',\r\n        data: {}\r\n      };\r\n      return _data;\r\n    },\r\n\r\n    /* 退款申请的提交 */\r\n    submitRefundRequest: function() {\r\n      var _self, loadingId, reason_id, res, text_value;\r\n      _self = this;\r\n      text_value = $('.u-text').val();\r\n      reason_id = $('.u-select').val();\r\n      res = _self.checkNeedContent(reason_id, text_value);\r\n      if (res) {\r\n        loadingId = sbBase.layer.open({\r\n          type: 2\r\n        });\r\n        return sbData.refund.addRefundExe({\r\n          data: {\r\n            'order_id': _self.order_id,\r\n            'reason_id': reason_id,\r\n            'buyer_message': text_value,\r\n            'accessToken': _self.token\r\n          }\r\n        }, function(result) {\r\n          var _code, _refund_id;\r\n          _code = result.code;\r\n          if (_code === '00000') {\r\n            _refund_id = result.data.refund_id;\r\n            window.location.href = '/user/refundView.html?refund_id=' + _refund_id;\r\n          } else {\r\n            sbBase.layer.tips(result.desc, 1);\r\n          }\r\n          return sbBase.layer.close(loadingId);\r\n        });\r\n      }\r\n    },\r\n\r\n    /*  检查申请原因和问题描述是否填写 */\r\n    checkNeedContent: function(_id, _text) {\r\n      if (_id === '0') {\r\n        sbBase.layer.tips('请选择申请原因', 1);\r\n        return false;\r\n      }\r\n      if (_text === '') {\r\n        sbBase.layer.tips('请填写问题描述', 1);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  };\r\n  return exports.init();\r\n});\r\n",
    "app/user/addReturn.js": "// Generated by CoffeeScript 1.9.3\r\n\r\n/**\r\n * @fileOverview h5端 退货退款申请\r\n * @author 原创:LJL 抄袭:Hzl  如有侵权与本人无关,代码并不代表个人立场!\r\n * @description 退货退款申请 相关逻辑\r\n */\r\ndefine('app/user/addReturn',['vmcore','_tpl/returnList','app/_common','_base/docCookies','_data/refund','_base/layer','_pulgins/form'],function(vmcore, iTpl) {\r\n  var exports, sbBase, sbCom, sbData;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  sbData = sbLib.data;\r\n  exports = {\r\n    init: function() {\r\n      var _self;\r\n      _self = this;\r\n      sbCom.checkMember();\r\n      _self.loadId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      return _self.getOrderList();\r\n    },\r\n    loadId: '',\r\n    token: sbBase.docCookies.getItem('key'),\r\n    order_id: sbCom.getQueryString('order_id'),\r\n    order_goods_id: sbCom.getQueryString('order_goods_id'),\r\n    defineModel: function() {\r\n      var _data, _maxNum, _num, _nunValue, _self;\r\n      _self = this;\r\n      _num = $('#num');\r\n      _nunValue = _num.val();\r\n      _maxNum = _num.attr('data-maxNumber');\r\n      vmcore.templateCache[\"index.html\"] = iTpl.addReturn;\r\n      _data = {\r\n        $id: 'addReturnPad',\r\n        tpl: 'index.html',\r\n        orderList: [],\r\n        reasonList: [],\r\n        goodsAmount: '',\r\n        goodsNum: '',\r\n        refundPayPrice: '',\r\n        refund_pic1: '',\r\n        refund_pic2: '',\r\n        refund_pic3: '',\r\n        getSelectType: function() {\r\n          var value;\r\n          value = this.value;\r\n          if (value === '0') {\r\n            return sbBase.layer.tips('请选择售后类型');\r\n          } else if (value === '1') {\r\n            return $('#formUploadFile').hide();\r\n          } else {\r\n            return $('#formUploadFile').show();\r\n          }\r\n        },\r\n        getSelectReason: function() {\r\n          var value;\r\n          value = this.value;\r\n          if (value === '0') {\r\n            return sbBase.layer.tips('请选择申请原因');\r\n          }\r\n        },\r\n        refundMoney: function() {\r\n          var _exp, _maxMoney, _moneyIpt, _moneyValue;\r\n          _moneyIpt = $('.money-input');\r\n          _exp = /^([1-9][\\d]{0,7}|0)(\\.[\\d]{1,2})?$/;\r\n          _maxMoney = _moneyIpt.attr('data-maxPrice');\r\n          _moneyValue = _moneyIpt.val();\r\n          if (!_exp.test(_moneyValue)) {\r\n            sbBase.layer.tips('请输入正确的金额');\r\n            return _moneyIpt.val(_maxMoney);\r\n          } else if (_moneyValue > _maxMoney) {\r\n            sbBase.layer.tips('输入的金额不能大于可退金额');\r\n            return _moneyIpt.val(_maxMoney);\r\n          }\r\n        },\r\n        setNum: function() {\r\n          var _exp;\r\n          _num = $('#num');\r\n          _nunValue = _num.val();\r\n          _maxNum = _num.attr('data-maxnumber');\r\n          _exp = /^[1-9]+$/;\r\n          if (!_exp.test(_nunValue)) {\r\n            sbBase.layer.tips('请输入正确的数量', 200);\r\n            return _nunValue = _num.val('1');\r\n          } else if (_nunValue > _maxNum) {\r\n            sbBase.layer.tips('最多只能退' + _maxNum + '件');\r\n            return _nunValue = _num.val(_maxNum);\r\n          }\r\n        },\r\n        minusEvent: function() {\r\n          _num = $('#num');\r\n          _nunValue = _num.val();\r\n          _maxNum = _num.attr('data-maxnumber');\r\n          _nunValue--;\r\n          if (_nunValue < 1) {\r\n            sbBase.layer.tips('数量不能小于1');\r\n            _nunValue = _num.val('1');\r\n            return false;\r\n          } else {\r\n            return _num.val(_nunValue);\r\n          }\r\n        },\r\n        addEvent: function() {\r\n          _num = $('#num');\r\n          _nunValue = _num.val();\r\n          _maxNum = _num.attr('data-maxnumber');\r\n          _nunValue++;\r\n          if (_nunValue > _maxNum) {\r\n            sbBase.layer.tips('最多只能退' + _maxNum + '件');\r\n            return _nunValue = _num.val(_maxNum);\r\n          } else {\r\n            return _num.val(_nunValue);\r\n          }\r\n        },\r\n        addFileImg: function() {\r\n          var _addItem, _elem, _id, _parent, _uploadImg, formData, xr;\r\n          _elem = $(this);\r\n          _id = this.id;\r\n          if (_elem.data('flag')) {\r\n            return false;\r\n          }\r\n          formData = new FormData;\r\n          formData.append('file', this.files[0]);\r\n          formData.append(\"k\", 'key');\r\n          formData.append(\"accessToken\", exports.token);\r\n          xr = new XMLHttpRequest;\r\n          xr.open(\"POST\", \"/service/uploadFile\", true);\r\n          _elem.data(\"flag\", 1);\r\n          _parent = _elem.parent();\r\n          _addItem = _parent.find('.add');\r\n          _uploadImg = _parent.children('.upload-img');\r\n          _addItem.show().addClass('uploading').html('上传中');\r\n          _uploadImg.hide();\r\n          xr.onload = function() {\r\n            var _code, _img, _imgElem, _result;\r\n            _elem.data(\"flag\", 0);\r\n            if (200 === xr.status || 4 === xr.readyState) {\r\n              _result = JSON.parse(xr.responseText);\r\n              _result = _result || {\r\n                code: -1,\r\n                desc: '网络错误！'\r\n              };\r\n              _code = parseInt(_result.code, 10);\r\n              if (_code === 0) {\r\n                _result.files = _result.files || [];\r\n                _img = _result.files[0];\r\n                _imgElem = _parent.find(\"img\");\r\n                if (_img) {\r\n                  _addItem.hide();\r\n                  if (_imgElem.length) {\r\n                    _uploadImg.show();\r\n                    _imgElem.attr('src', _img);\r\n                  } else {\r\n                    _parent.append('<div class=\"upload-img\"><img src=\"' + _img + '\"></div>');\r\n                  }\r\n                  return _VM_.customerPad[_id] = _img;\r\n                }\r\n              } else {\r\n                return sbBase.layer.tips(_result.desc);\r\n              }\r\n            } else {\r\n              return _addItem.html(\"+\").removeClass('uploading');\r\n            }\r\n          };\r\n          return xr.send(formData);\r\n        },\r\n        submitForm: function() {\r\n          var _buyerMessage, _goodsNum, _reasonId, _refundAmount, _refundType;\r\n          _refundType = $('#selectType').val();\r\n          _reasonId = $('#selectReason').val();\r\n          _buyerMessage = $('#buyerMessage').val();\r\n          _refundAmount = $('.money-input').val();\r\n          _goodsNum = $('#num').val();\r\n          if (_refundType === '0') {\r\n            sbBase.layer.tips('请选择售后类型', 0.5);\r\n            return false;\r\n          }\r\n          if (_reasonId === '0') {\r\n            sbBase.layer.tips('请选择申请原因', 0.5);\r\n            return false;\r\n          }\r\n          if (_buyerMessage.length === 0) {\r\n            sbBase.layer.tips('问题描述不能为空', 0.5);\r\n            return false;\r\n          }\r\n          _data = {\r\n            order_id: _self.order_id,\r\n            order_goods_id: _self.order_goods_id,\r\n            refund_amount: _refundAmount,\r\n            goods_num: _goodsNum,\r\n            reason_id: _reasonId,\r\n            refund_type: _refundType,\r\n            buyer_message: _buyerMessage,\r\n            refund_pic1: _self.urlReplace(_VM_.customerPad.refund_pic1),\r\n            refund_pic2: _self.urlReplace(_VM_.customerPad.refund_pic2),\r\n            refund_pic3: _self.urlReplace(_VM_.customerPad.refund_pic3),\r\n            accessToken: _self.token\r\n          };\r\n          console.log(_data);\r\n          return sbData.refund.addReturnExe({\r\n            data: _data\r\n          }, function(result) {\r\n            var _code, _result;\r\n            _result = result || {\r\n              code: -1,\r\n              desc: '网络繁忙！'\r\n            };\r\n            _code = parseInt(_result.code, 10);\r\n            _data = result.data || {};\r\n            if (_code === 0) {\r\n              sbBase.layer.tips('申请成功，请等待处理！');\r\n              return location.href = '/user/returnList.html';\r\n            } else {\r\n              return sbBase.layer.tips(_result.desc);\r\n            }\r\n          });\r\n        }\r\n      };\r\n      return _data;\r\n    },\r\n    urlReplace: function(_url) {\r\n      return _url.replace('http://img.shenba.com', '');\r\n    },\r\n    addReturnInfo: function(cb) {\r\n      var _data, _self;\r\n      _self = this;\r\n      _data = {\r\n        order_id: _self.order_id,\r\n        order_goods_id: _self.order_goods_id,\r\n        accessToken: _self.token\r\n      };\r\n      return sbData.refund.addReturn({\r\n        data: _data\r\n      }, function(result) {\r\n        var _cb, _code, _result;\r\n        _result = result || {\r\n          code: -1,\r\n          desc: '网络繁忙！'\r\n        };\r\n        _code = parseInt(_result.code, 10);\r\n        _data = result.data || {};\r\n        _cb = cb || function() {};\r\n        return _cb(_result, _code, _data);\r\n      });\r\n    },\r\n    getOrderList: function() {\r\n      var _self;\r\n      _self = this;\r\n      return _self.addReturnInfo(function(_result, _code, _data) {\r\n        var _model;\r\n        if (_code === 0) {\r\n          _model = _self.defineModel();\r\n          _VM_.customerPad = vmcore.define(_model);\r\n          _VM_.customerPad.orderList = _data.rightOrderList.goods_list;\r\n          _VM_.customerPad.reasonList = _data.reason_list;\r\n          _VM_.customerPad.goodsAmount = _data.rightOrderList.goods_amount;\r\n          _VM_.customerPad.goodsNum = _data.rightOrderList.goods_list[0].goods_num;\r\n          _VM_.customerPad.refundPayPrice = _data.rightOrderList.goods_list[0].refund_goods_pay_price;\r\n          vmcore.scan('', _VM_.customerPad);\r\n        } else {\r\n          sbBase.layer.tips(_result.desc);\r\n        }\r\n        return setTimeout(function() {\r\n          return sbBase.layer.close(_self.loadId);\r\n        }, 200);\r\n      });\r\n    }\r\n  };\r\n  return exports.init();\r\n});\r\n",
    "app/user/address.js": "/*\r\n *@author hzl\r\n *@desc 地址管理 删除 列表 编辑\r\n *@time by 15/11/26\r\n*/\r\ndefine('app/user/address',['vmcore','app/user/address/userAddressList','app/user/address/userAddressEvent','app/user/address/userAddressHandle'],function(vmcore,UserAddressList,UserAddressEvent,UserAddressHandle){\r\n\t//渲染模板和渲染模板数据\r\n\tvar userAddressList = new UserAddressList();\r\n\t//初始化模板的元素事件\r\n\tvar userAddressEvent = new UserAddressEvent();\r\n\t//地址操作层相关操作\r\n\tvar userAddressHandle = new UserAddressHandle();\r\n\r\n\tfunction PageModel(){\r\n\t\tthis.template;\r\n\t\tthis.elementEvent;\r\n\t\tthis.addressHandle;\r\n\t\tthis.add = function(_objects){\r\n\t\t\tthis.template = _objects[0];\r\n\t\t\tthis.elementEvent = _objects[1];\r\n\t\t\tthis.addressHandle = _objects[2];\r\n\t\t};\r\n\t\tthis.rock = function(){\r\n\t\t\tvar cb_this = this.addressHandle,\r\n\t\t\t\tcb_add_edit = this.addressHandle.initHandle;\r\n\t\t\tthis.template.initTempalte();\r\n\t\t\tthis.elementEvent.initBindEvent(cb_add_edit,cb_this);//传入hanldle对象的编辑回调和增加回调\r\n\t\t}\r\n\t};\r\n\tvar page = new PageModel();\r\n\tpage.add([userAddressList,userAddressEvent,userAddressHandle]);\r\n\tpage.rock();\r\n});\r\n",
    "app/user/coupon.js": "// Generated by CoffeeScript 1.9.3\r\n\r\n/*\r\n   会员中心 优惠券 hzl\r\n */\r\ndefine('app/user/coupon',['vmcore','_tpl/coupon','app/_common','_base/layer','_base/docCookies','_base/infiniteScroll'],function(vmcore, iTpl) {\r\n  var docCookies, infiniteScroll, layer, myCoupon, sbCommon;\r\n  sbCommon = sbLib.common;\r\n  layer = sbLib.base.layer;\r\n  docCookies = sbLib.base.docCookies;\r\n  infiniteScroll = sbLib.base.infiniteScroll;\r\n  myCoupon = {\r\n\r\n    /* 通过url获取的优惠券状态信息串 */\r\n    usedStatus: '',\r\n\r\n    /* 通过接口获取的优惠券的每页条数 */\r\n    pageSize: 10,\r\n\r\n    /* 当前获取优惠券的当前页码 */\r\n    curPage: 1,\r\n\r\n    /* 获取当前优惠券的页数 */\r\n    curPageTotal: 0,\r\n\r\n    /* 用户的登陆token */\r\n    key: 0,\r\n\r\n    /* 初始化入口 */\r\n    init: function() {\r\n      var _model, _self;\r\n      _self = this;\r\n      _self.key = docCookies.getItem('key');\r\n      _self.usedStatus = sbCommon.getQueryString('usedStatus') || '';\r\n\r\n      /* 定义avalon数据模型 */\r\n      _model = _self.couponModel();\r\n      _VM_.couponPad = vmcore.define(_model);\r\n\r\n      /* 判断优惠券的状态设置优惠券的样式 */\r\n      if (_self.usedStatus === 'A' || '') {\r\n        _VM_.couponPad.status = true;\r\n      } else {\r\n        _VM_.couponPad.status = false;\r\n      }\r\n\r\n      /*激活优惠码 */\r\n      $('#activate_btn').on('click', function() {\r\n        return _self.activeCode();\r\n      });\r\n\r\n      /* 获取各种优惠券状态的信息数据 */\r\n      _self.getCouponsData('default');\r\n\r\n      /* Tab按钮点击高亮切换 */\r\n      return _self.tabSwitchToLight();\r\n    },\r\n\r\n    /* 定义优惠券数据模型 */\r\n    couponModel: function() {\r\n      var _data, _self;\r\n      _self = this;\r\n      vmcore.templateCache['list.html'] = iTpl.list;\r\n      iTpl.list = null;\r\n      _data = {\r\n        $id: 'couponPad',\r\n        tpl: 'list.html',\r\n        status: true,\r\n        couponList: []\r\n      };\r\n      return _data;\r\n    },\r\n\r\n    /*激活优惠券码 */\r\n    activeCode: function() {\r\n      var _code, _data, _result, _self;\r\n      _self = this;\r\n      _code = $('#activate_code').val();\r\n      _result = _self.checkCode(_code);\r\n      if (_result) {\r\n        _data = {\r\n          'domain': 'my',\r\n          'act': 'coupon',\r\n          'op': 'activeCoupon',\r\n          'type': 'POST',\r\n          'dataType': 'json',\r\n          data: {\r\n            'accessToken': _self.key,\r\n            'coupon_codes': _code\r\n          }\r\n        };\r\n        return sbCommon.ajaxData(_data, function(result) {\r\n          if (result.code === '00000') {\r\n            return window.location.reload();\r\n          } else {\r\n            return layer.tips(result.desc, '1');\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    /*对激活码进行检测 */\r\n    checkCode: function(code) {\r\n      var _code;\r\n      _code = code.replace(/\\s+/g, '');\r\n      if (_code) {\r\n        if (/[^\\u0000-\\u00FF]/.test(code)) {\r\n          layer.tips('请输入正确的优惠券码', 1);\r\n          return false;\r\n        }\r\n        return true;\r\n      } else {\r\n        layer.tips('不能为空', 1);\r\n        return false;\r\n      }\r\n    },\r\n\r\n    /*获取优惠券列表的信息数据函数 */\r\n    getCouponsData: function(type) {\r\n      var _data, _self;\r\n      sbCommon.checkMember();\r\n      _self = this;\r\n      _data = {\r\n        'domain': 'my',\r\n        'act': 'users',\r\n        'op': 'coupon',\r\n        'dataType': 'json',\r\n        data: {\r\n          'usedStatus': _self.usedStatus,\r\n          'accessToken': _self.key,\r\n          'pageSize': _self.pageSize,\r\n          'curPage': _self.curPage\r\n        }\r\n      };\r\n      return sbCommon.ajaxData(_data, function(result) {\r\n\r\n        /* 定义优惠券的页数 */\r\n        var couponList, isPassed, isUsed, isUsing;\r\n        _self.curPageTotal = result.data.pageTotal;\r\n\r\n        /* 已使用|未使用|已过期的优惠券数量 定义 */\r\n        isUsing = result.data.totalCouponA;\r\n        isUsed = result.data.totalCouponB;\r\n        isPassed = result.data.totalcouponO;\r\n\r\n        /*  定义_VM_.couponPad 的数据定义 */\r\n        couponList = result.data.couponList;\r\n        if (type === 'default') {\r\n          _VM_.couponPad.couponList = couponList;\r\n\r\n          /* 当加载首屏后 --> 默认开启无限加载功能 */\r\n          _self.renderScroll();\r\n\r\n          /* 定义优惠券列表无限下拉 */\r\n          return _self.renderCouponNumber(isUsing, isUsed, isPassed);\r\n        } else {\r\n\r\n          /* 无限加载的时候,优惠券数据不断地在avalon绑定中无限渲染 */\r\n          return $.each(couponList, function(index, value) {\r\n            return _VM_.couponPad.couponList.push(value);\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    /* 把获取的数值渲染到顶部tab中去 */\r\n    renderCouponNumber: function(isUsingNumber, isUsedNumber, isPassedNumber) {\r\n      $('#isUsing').text(isUsingNumber).show();\r\n      $('#isUsed').text(isUsedNumber).show();\r\n      return $('#isPassed').text(isPassedNumber).show();\r\n    },\r\n\r\n    /* 点击优惠券切换按钮高亮 */\r\n    tabSwitchToLight: function() {\r\n      var _self;\r\n      _self = this;\r\n      $('.bouns-tag li').each(function() {\r\n        return $(this).removeClass('current');\r\n      });\r\n      switch (_self.usedStatus) {\r\n        case 'A':\r\n          $('.activate-bouns').show();\r\n          return $('.bouns-tag li').eq(0).addClass('current');\r\n        case 'B':\r\n          return $('.bouns-tag li').eq(1).addClass('current');\r\n        case 'O':\r\n          return $('.bouns-tag li').eq(2).addClass('current');\r\n        case '':\r\n          $('.activate-bouns').show();\r\n          return $('.bouns-tag li').eq(0).addClass('current');\r\n      }\r\n    },\r\n\r\n    /*  下拉无限加载优惠券列表数据 */\r\n    renderScroll: function() {\r\n      var _infiniteScroll, _self;\r\n      _self = this;\r\n      _infiniteScroll = infiniteScroll.init({\r\n        bufferPX: 150,\r\n        time: 200,\r\n        onNear: function() {\r\n          if (_self.curPage < _self.curPageTotal) {\r\n            _self.curPage++;\r\n            return _self.getCouponsData('scroll');\r\n          } else {\r\n            return _infiniteScroll && _infiniteScroll.remove();\r\n          }\r\n        },\r\n        onEnd: null,\r\n        onScroll: function() {}\r\n      });\r\n      if (_self.curPageTotal >= _self.curPage) {\r\n        return _infiniteScroll.start();\r\n      }\r\n    }\r\n  };\r\n  return myCoupon.init();\r\n});\r\n",
    "app/user/express.js": "/*\r\n *\r\n * 获取物流信息 by hzl at 15/11/30\t\r\n*/\r\ndefine('app/user/express',['vmcore','app/_common','_tpl/express','_base/docCookies','_base/layer'],function(vmcore,common,tpl){\r\n\tvar express = {\r\n\t\tlibs : {\r\n\t\t\tfGetQueryString : sbLib.common.getQueryString,\r\n\t\t\tfAjaxData : sbLib.common.ajaxData,\r\n\t\t\tfCookie:sbLib.base.docCookies,\r\n\t\t\tfLogin:sbLib.common.checkLogin,\r\n\t\t\tlayer:sbLib.base.layer\r\n\t\t},\r\n\t\tqueryString : function(name){\r\n\t\t\treturn this.libs.fGetQueryString(name);\r\n\t\t},\r\n\t\tqueryCookie : function(name){\r\n\t\t\treturn this.libs.fCookie.getItem(name);\r\n\t\t},\r\n\t\tajaxData : function(){\r\n\r\n\t\t\t//检查登陆\r\n\t\t\tsbLib.common.checkMember();\r\n\t\t\tvar _self = this;\r\n\t\t\tvmcore.templateCache[\"express.html\"] = tpl.express;\r\n\t\t\tvar expressModel = {\r\n\t    \t\t$id:\"expressInfoPage\",\r\n\t    \t\ttpl: \"express.html\",\r\n\t    \t\texpressInfo:{}\r\n\t    \t};\r\n\t    \tvar tokenKey = (function(){\r\n\t    \t\treturn _self.queryCookie('key');\r\n\t    \t})();\r\n\t\t\tvar data = {\r\n\t    \t\tdomain:'my',\r\n\t    \t\tact:'order',\r\n\t    \t\top:'checkExpress',\r\n\t    \t\tdata:{\r\n\t\t    \t\torder_id:_self.queryString('order_id'),\r\n\t\t    \t\taccessToken:tokenKey\r\n\t    \t\t}\r\n\t    \t};\r\n\t    \tvar loadingId = _self.libs.layer.open({type:2});\r\n\t    \t_self.libs.fAjaxData(data,function(data){\r\n\t    \t\tif(data && data.code === '00000'){\r\n\t    \t\t\t_VM_.expressInfoPage = vmcore.define(expressModel);\r\n\t    \t\t\t_VM_.expressInfoPage.expressInfo = data.data;\r\n\t    \t\t\tvmcore.scan($('.expressInfoPage')[0],_VM_.expressInfoPage);\r\n\t    \t\t}else{\r\n\t    \t\t\t_self.libs.layer.open({\r\n\t    \t\t\t\tstyle:\"text-align:center\",\r\n\t    \t\t\t\tcontent:data.desc,\r\n\t    \t\t\t\ttime:1,\r\n\t    \t\t\t\tend:function(){\r\n\t    \t\t\t\t\twindow.history.go(-1);\r\n\t    \t\t\t\t}\r\n\t    \t\t\t});\r\n\t    \t\t}\r\n\t    \t\tsetTimeout(function(){\r\n\t    \t\t\t_self.libs.layer.close(loadingId);\r\n\t    \t\t},500)\r\n\t    \t});\r\n\t\t}\r\n\t};\r\n\texpress.ajaxData();\r\n})",
    "app/user/index.js": "\r\n/*\r\n * h5重构版本 会员中心首页 by PJG\r\n */\r\ndefine('app/user/index',['app/_common','_base/docCookies','_base/layer'],function() {\r\n  var docCookies, layer, loading, main, sbCom;\r\n  docCookies = sbLib.base.docCookies;\r\n  layer = sbLib.base.layer;\r\n  sbCom = sbLib.common;\r\n  loading = layer.open({\r\n    type: 2\r\n  });\r\n  main = {\r\n    init: function() {\r\n      main.domCache();\r\n\r\n      /* 加载用户信息 */\r\n      this.getInfo();\r\n\r\n      /* 订单提醒 */\r\n      this.noticeOrder();\r\n      sbCom.tplBottomBar.init();\r\n\r\n      /* 绑定事件 */\r\n      return this.bindFn();\r\n    },\r\n    key: docCookies.getItem('key'),\r\n    memberName: '',\r\n    domCache: function() {\r\n      return sbCom.setObjVariable(main, 'userName,content,aboutUs,loginOut,orderNopayCount,orderNoreceiptCount,redpacketNum,couponNum', ',');\r\n    },\r\n    getInfo: function() {\r\n      var _href, _ylApi;\r\n      if (sbCom.checkMember()) {\r\n        if (sbCom.yaoLan.isYaoLanApp()) {\r\n          _ylApi = sbCom.yaoLan.ylApi || window.yl;\r\n          _ylApi.isEnter(function(isLogin) {\r\n            if (isLogin) {\r\n              return _ylApi.getAppUserId(function(Uid) {\r\n                return sbCom.yaoLan.getYaoLanUserInfo(Uid, function(res) {\r\n                  var __data;\r\n                  if (res && res.code === '00000') {\r\n                    __data = res.data;\r\n                    sbCom.yaoLan.setUserCookie(__data.sb_user);\r\n                    return sbCom.yaoLan.setYaoLanAppUserInfo(__data.yl_info.data);\r\n                  }\r\n                });\r\n              });\r\n            } else {\r\n              return _ylApi.goToEnter(function() {\r\n                return window.location.reload();\r\n              });\r\n            }\r\n          });\r\n          return setTimeout(function() {\r\n            var _ylAppUserInfo;\r\n            _ylAppUserInfo = sbCom.getYaoLanAppUserInfo();\r\n            !!_ylAppUserInfo && main.$userName.html(_ylAppUserInfo.NickName);\r\n            main.$aboutUs.hide();\r\n            main.$loginOut.hide();\r\n            return main.showContent();\r\n          }, 250);\r\n        } else {\r\n          return main.getMemberInfo();\r\n        }\r\n      } else {\r\n        if (sbCom.yaoLan.isYaoLanApp()) {\r\n          return sbCom.yaoLan.checkYaoLanAppUser();\r\n        } else {\r\n          _href = location.href;\r\n          return location.href = '/auth/index.html?backUrl=' + encodeURIComponent(_href);\r\n        }\r\n      }\r\n    },\r\n    getMemberInfo: function() {\r\n      var _key;\r\n      _key = docCookies.getItem('key');\r\n      return !!_key && $.ajax({\r\n        url: '/proxy?domain=my&act=users&op=memberInfo',\r\n        dataType: 'json',\r\n        data: {\r\n          accessToken: _key\r\n        },\r\n        success: function(result) {\r\n          var _code, _href, _info;\r\n          _code = ~~result.code;\r\n          if (_code === 0) {\r\n            main.showContent();\r\n            _info = result.data.memberInfo;\r\n            return main.setMemberInfo(_info);\r\n          } else if (_code === 60004) {\r\n            sbCom.delUserCookie();\r\n            _href = location.href;\r\n            location.href = '/auth/index.html?backUrl=' + encodeURIComponent(_href);\r\n            return false;\r\n          } else {\r\n            return layer.tips(result.desc);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    noticeOrder: function() {\r\n      return $.ajax({\r\n        url: '/proxy?domain=my&act=order&op=noticeOrder',\r\n        dataType: 'json',\r\n        data: {\r\n          accessToken: main.key\r\n        },\r\n        success: function(result) {\r\n          var _code, _noticeOrder;\r\n          _code = ~~result.code;\r\n          if (_code === 0) {\r\n            _noticeOrder = result.data.orderNotice;\r\n            main.$loginOut.removeClass('hidden');\r\n            if (_noticeOrder.order_nopay_count > 0) {\r\n              main.$orderNopayCount.html(_noticeOrder.order_nopay_count).removeClass('hide');\r\n            }\r\n            if (_noticeOrder.order_noreceipt_count > 0) {\r\n              main.$orderNoreceiptCount.html(_noticeOrder.order_noreceipt_count).removeClass('hide');\r\n            }\r\n            if (_noticeOrder.totalRedPacketA > 0) {\r\n              main.$redpacketNum.html(_noticeOrder.totalRedPacketA).removeClass('hide');\r\n            }\r\n            if (_noticeOrder.totalCouponA > 0) {\r\n              main.$couponNum.html(_noticeOrder.totalCouponA).removeClass('hide');\r\n            }\r\n            return layer.closeAll();\r\n          }\r\n        }\r\n      });\r\n    },\r\n    showContent: function() {\r\n      return main.$content.addClass('show');\r\n    },\r\n    setMemberInfo: function(info) {\r\n      main.memberName = info.member_name;\r\n      return main.$userName.html(info.member_name);\r\n    },\r\n    bindFn: function() {\r\n      return main.$loginOut.on('tap', function() {\r\n        return main.logOut();\r\n      });\r\n    },\r\n    logOut: function() {\r\n      var loginId;\r\n      return loginId = layer.open({\r\n        content: '<p style=\"text-align:center;\">退出神爸<p>',\r\n        btn: ['<em>确认</em>', '<em>取消</em>'],\r\n        shadeClose: false,\r\n        yes: function() {\r\n          return $.ajax({\r\n            url: \"/proxy?domain=my&act=users&op=logout\",\r\n            dataType: 'json',\r\n            type: \"post\",\r\n            data: {\r\n              accessToken: main.key,\r\n              phone: main.memberName\r\n            },\r\n            success: function(result) {\r\n              var code;\r\n              code = ~~result.code;\r\n              layer.close(loginId);\r\n              if (code === 60004 || code === 0) {\r\n                sbCom.delUserCookie();\r\n                return window.location.href = '/';\r\n              } else {\r\n                return layer.tips(result.desc, 1);\r\n              }\r\n            },\r\n            complete: function() {}\r\n          });\r\n        },\r\n        no: function() {\r\n          return layer.close(loginId);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return main.init();\r\n});\r\n",
    "app/user/lucky.js": "// Generated by CoffeeScript 1.9.3\r\n\r\n/*\r\n   会员中心 紅包 hzl\r\n */\r\ndefine('app/user/lucky',['vmcore','_tpl/lucky','app/_common','_base/layer','_base/docCookies','_base/infiniteScroll'],function(vmcore, iTpl) {\r\n  var docCookies, infiniteScroll, layer, myLucky, sbCommon;\r\n  sbCommon = sbLib.common;\r\n  layer = sbLib.base.layer;\r\n  docCookies = sbLib.base.docCookies;\r\n  infiniteScroll = sbLib.base.infiniteScroll;\r\n  myLucky = {\r\n\r\n    /* 通过url获取的紅包状态信息串 */\r\n    usedStatus: '',\r\n\r\n    /* 通过接口获取的紅包的每页条数 */\r\n    pageSize: 10,\r\n\r\n    /* 当前获取紅包的当前页码 */\r\n    curPage: 1,\r\n\r\n    /* 获取当前紅包的页数 */\r\n    curPageTotal: 0,\r\n\r\n    /* 用户的登陆token */\r\n    key: 0,\r\n\r\n    /* 初始化入口 */\r\n    init: function() {\r\n      var _model, _self;\r\n      _self = this;\r\n      _self.key = docCookies.getItem('key');\r\n      _self.usedStatus = sbCommon.getQueryString('usedStatus') || '';\r\n\r\n      /* 定义avalon数据模型 */\r\n      _model = _self.luckyModel();\r\n      _VM_.luckyPad = vmcore.define(_model);\r\n\r\n      /*激活优惠码 */\r\n      $('#activate_btn').on('click', function() {\r\n        return _self.activeCode();\r\n      });\r\n\r\n      /* 获取各种紅包状态的信息数据 */\r\n      _self.getLuckysData('default');\r\n\r\n      /* Tab按钮点击高亮切换 */\r\n      return _self.tabSwitchToLight();\r\n    },\r\n\r\n    /* 定义紅包数据模型 */\r\n    luckyModel: function() {\r\n      var _data, _self;\r\n      _self = this;\r\n      vmcore.templateCache['list.html'] = iTpl.list;\r\n      iTpl.list = null;\r\n      _data = {\r\n        $id: 'luckyPad',\r\n        tpl: 'list.html',\r\n        luckyList: []\r\n      };\r\n      return _data;\r\n    },\r\n\r\n    /*激活紅包码 */\r\n    activeCode: function() {\r\n      var _code, _data, _result, _self;\r\n      _self = this;\r\n      _code = $('#activate_code').val();\r\n      _result = _self.checkCode(_code);\r\n      if (_result) {\r\n        _data = {\r\n          'domain': 'my',\r\n          'act': 'redpacket',\r\n          'op': 'activeRedPacket',\r\n          'type': 'POST',\r\n          'dataType': 'json',\r\n          data: {\r\n            'accessToken': _self.key,\r\n            'packet_code': _code\r\n          }\r\n        };\r\n        return sbCommon.ajaxData(_data, function(result) {\r\n          if (result.code === '00000') {\r\n            return window.location.reload();\r\n          } else {\r\n            return layer.tips(result.desc, '1');\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    /*对激活码进行检测 */\r\n    checkCode: function(code) {\r\n      var _code;\r\n      _code = code.replace(/\\s+/g, '');\r\n      if (_code) {\r\n        if (/[^\\u0000-\\u00FF]/.test(code)) {\r\n          layer.tips('请输入正确的紅包码', 1);\r\n          return false;\r\n        }\r\n        return true;\r\n      } else {\r\n        layer.tips('不能为空', 1);\r\n        return false;\r\n      }\r\n    },\r\n\r\n    /*获取紅包列表的信息数据函数 */\r\n    getLuckysData: function(type) {\r\n      var _data, _self;\r\n      sbCommon.checkMember();\r\n      _self = this;\r\n      _data = {\r\n        'domain': 'my',\r\n        'act': 'users',\r\n        'op': 'redPacket',\r\n        'dataType': 'json',\r\n        data: {\r\n          'usedStatus': _self.usedStatus,\r\n          'accessToken': _self.key,\r\n          'pageSize': _self.pageSize,\r\n          'curPage': _self.curPage\r\n        }\r\n      };\r\n      return sbCommon.ajaxData(_data, function(result) {\r\n\r\n        /* 定义紅包的页数 */\r\n        var isPassed, isUsed, isUsing, luckyList;\r\n        _self.curPageTotal = result.data.pageTotal;\r\n\r\n        /* 已使用|未使用|已过期的紅包数量 定义 */\r\n        isUsing = result.data.totalRedPacketA;\r\n        isUsed = result.data.totalRedPacketB;\r\n        isPassed = result.data.totalRedPacketO;\r\n\r\n        /*  定义_VM_.luckyPad 的数据定义 */\r\n        luckyList = result.data.redPacketList;\r\n        if (type === 'default') {\r\n          _VM_.luckyPad.luckyList = luckyList;\r\n\r\n          /* 当加载首屏后 --> 默认开启无限加载功能 */\r\n          _self.renderScroll();\r\n\r\n          /* 定义紅包列表无限下拉 */\r\n          return _self.renderLuckyNumber(isUsing, isUsed, isPassed);\r\n        } else {\r\n\r\n          /* 无限加载的时候,紅包数据不断地在avalon绑定中无限渲染 */\r\n          return $.each(luckyList, function(index, value) {\r\n            return _VM_.luckyPad.luckyList.push(value);\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    /* 把获取的数值渲染到顶部tab中去 */\r\n    renderLuckyNumber: function(isUsingNumber, isUsedNumber, isPassedNumber) {\r\n      $('#isUsing').text(isUsingNumber).show();\r\n      $('#isUsed').text(isUsedNumber).show();\r\n      return $('#isPassed').text(isPassedNumber).show();\r\n    },\r\n\r\n    /* 点击紅包切换按钮高亮 */\r\n    tabSwitchToLight: function() {\r\n      var _self;\r\n      _self = this;\r\n      $('.bouns-tag li').each(function() {\r\n        return $(this).removeClass('current');\r\n      });\r\n      switch (_self.usedStatus) {\r\n        case 'A':\r\n          $('.activate-bouns').show();\r\n          return $('.bouns-tag li').eq(0).addClass('current');\r\n        case 'B':\r\n          return $('.bouns-tag li').eq(1).addClass('current');\r\n        case 'O':\r\n          return $('.bouns-tag li').eq(2).addClass('current');\r\n        case '':\r\n          $('.activate-bouns').show();\r\n          return $('.bouns-tag li').eq(0).addClass('current');\r\n      }\r\n    },\r\n\r\n    /*  下拉无限加载紅包列表数据 */\r\n    renderScroll: function() {\r\n      var _infiniteScroll, _self;\r\n      _self = this;\r\n      _infiniteScroll = infiniteScroll.init({\r\n        bufferPX: 150,\r\n        time: 200,\r\n        onNear: function() {\r\n          if (_self.curPage < _self.curPageTotal) {\r\n            _self.curPage++;\r\n            return _self.getLuckysData('scroll');\r\n          } else {\r\n            return _infiniteScroll && _infiniteScroll.remove();\r\n          }\r\n        },\r\n        onEnd: null,\r\n        onScroll: function() {}\r\n      });\r\n      if (_self.curPageTotal >= _self.curPage) {\r\n        return _infiniteScroll.start();\r\n      }\r\n    }\r\n  };\r\n  return myLucky.init();\r\n});\r\n",
    "app/user/orderDetail.js": "/**\r\n * @fileOverview 订单详情页\r\n * @author hzl/pjg\r\n * @description 订单详情数据展示\r\n */\r\ndefine('app/user/orderDetail',['vmcore','_tpl/orderDetail','_tpl/payBox','app/_common','app/_common/paymentList','_base/docCookies','_base/layer'],function(vmcore, iTpl,pTpl) {\r\n    var fAjaxData = sbLib.common.ajaxData;\r\n    var checkMember = sbLib.common.checkMember;\r\n    var fGetOrderId = sbLib.common.getQueryString;\r\n    var cookie = sbLib.base.docCookies;\r\n    var layer = sbLib.base.layer;\r\n    var App = sbLib.app;\r\n    var main = {\r\n        vmId: \"orderDetail\",\r\n        order_id: 0,\r\n        key: \"\",\r\n        init: function() {\r\n            checkMember();\r\n            $('.go-top').hide();\r\n            main.order_id = fGetOrderId('id');\r\n            main.key = cookie.getItem('key');\r\n            main.fGetOrderDetailData();\r\n        },\r\n        fGetOrderDetailData: function() {\r\n            var oData = {\r\n                domain: 'my',\r\n                act: 'order',\r\n                op: 'infoOrder',\r\n                data: {\r\n                    order_id: main.order_id,\r\n                    accessToken: main.key\r\n                }\r\n            };\r\n            //loading\r\n            var loadingId = layer.open({\r\n                type: 2\r\n            });\r\n\r\n            fAjaxData(oData, function(data) {\r\n                if (data && data.code == '00000') {\r\n                    main.fRenderOrderData(data);\r\n                } else {\r\n                    layer.open({\r\n                        style: \"text-align:center\",\r\n                        content: data.desc,\r\n                        time: 1,\r\n                        end: function() {\r\n                            window.history.go(-1);\r\n                        }\r\n                    });\r\n                }\r\n                setTimeout(function() {\r\n                    layer.close(loadingId);\r\n                }, 250)\r\n            });\r\n        },\r\n        fRenderOrderData: function(data) {\r\n            var viewModel = main.fDetailModel();\r\n            viewModel.order_info = data.data.order_info;\r\n            viewModel.paySn = data.data.order_info.pay_sn;\r\n            _VM_[main.vmId] = vmcore.define(viewModel);\r\n            App.paymentList.setDefaultPayType.call(main)\r\n            vmcore.scan();\r\n        },\r\n        fDetailModel: function() {\r\n            vmcore.templateCache[\"order.html\"] = iTpl.orderDetail;\r\n            vmcore.templateCache[\"paybox.html\"] = pTpl.main\r\n            var vm = {\r\n                $id: main.vmId,\r\n                tpl: 'order.html',\r\n                payTpl: 'paybox.html',\r\n                order_info: {},\r\n                payment_list: [],\r\n                payType: '',\r\n                paySn: '',\r\n                isShowPayBox: false,\r\n                stopTouchMove: function(e) {\r\n\r\n                    App.paymentList.stopTouchMove.call(main, e);\r\n                },\r\n                openPayBox: function(paySn) {\r\n                    // debugger\r\n                    _VM_[main.vmId].payment_list.length || App.paymentList.getPaymentList.call(main,paySn);\r\n                    _VM_[main.vmId].isShowPayBox = true;\r\n                },\r\n                closePayBox: function() {\r\n                    App.paymentList.closePayBox.call(main);\r\n                },\r\n                setPayType: function(type) {\r\n                    App.paymentList.setPayType.call(main, type);\r\n                },\r\n                goToPay: function() {\r\n                    App.paymentList.goToPay.call(main);\r\n                }\r\n            };\r\n            return vm;\r\n        }\r\n    };\r\n\r\n    main.init();\r\n});\r\n",
    "app/user/orderList.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/**\r\n * h5重构版本 会员中心 全部订单列表的coffee\r\n * @author PJG\r\n * @update 2016-03-23 16:47:08\r\n */\r\ndefine('app/user/orderList',['vmcore','_tpl/orderList','_tpl/payBox','app/_common','app/_common/paymentList','_base/layer','_base/infiniteScroll','_base/docCookies'],function(vmcore, iTpl, pTpl) {\r\n  var App, main, sbBase, sbCom, sbData;\r\n  sbCom = sbLib.common;\r\n  sbBase = sbLib.base;\r\n  sbData = sbLib.data;\r\n  App = sbLib.app;\r\n  main = {\r\n    vmId: \"orderList\",\r\n    baseUrl: location.origin + location.pathname,\r\n    token: sbBase.docCookies.getItem('key'),\r\n    page: 1,\r\n    listCount: 0,\r\n    pageSize: 10,\r\n    isEnd: false,\r\n    pageTotal: 1,\r\n    _scrollY: [0, 0],\r\n    $win: $(window),\r\n    isScrollLoad: false,\r\n    isGot: true,\r\n    init: function() {\r\n      var _model, loadId, stateType;\r\n      sbCom.checkMember();\r\n      loadId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      _model = main.defineModel();\r\n      _VM_.orderList = vmcore.define(_model);\r\n      stateType = sbCom.getQueryString('state_type') || 'all';\r\n      return main.getRecords(stateType, function(res) {\r\n        if (res.code === '00000' && res.data) {\r\n          _VM_.orderList.list = res.data.orders;\r\n          _VM_.orderList.type = stateType;\r\n        } else {\r\n          sbBase.layer.tips(res.desc);\r\n          sbCom.checkLogin(res);\r\n        }\r\n        setTimeout(function() {\r\n          sbBase.layer.close(loadId);\r\n          return main.bindFn();\r\n        }, 200);\r\n        return main.fRenderScroll();\r\n      });\r\n    },\r\n\r\n    /*\r\n        * @description 获取记录\r\n        * @param {String} type 记录类型  all(全部) /state_new(待付款) /state_pay(待发货) /state_send(待收货) /state_success(已完成)\r\n        * @param {Function} cb  回调方法\r\n     */\r\n    getRecords: function(type, cb) {\r\n      var _cb, opts;\r\n      _cb = cb || function() {};\r\n      if (type === 'all') {\r\n        type = '';\r\n      }\r\n      opts = {\r\n        state_type: type,\r\n        page: main.pageSize,\r\n        curpage: main.page,\r\n        accessToken: main.token\r\n      };\r\n      return main.myOrderList({\r\n        data: opts\r\n      }, function(result) {\r\n        var _result;\r\n        _result = result || {\r\n          code: -1,\r\n          desc: \"网络繁忙！\"\r\n        };\r\n        if (_result.code === '00000') {\r\n          main.pageTotal = result.data.page_total;\r\n        }\r\n        if (main.page >= main.pageTotal) {\r\n          main.isEnd = true;\r\n        }\r\n        return _cb(_result);\r\n      });\r\n    },\r\n    myOrderList: function(opt, cb) {\r\n      var _def, _opt;\r\n      _def = {\r\n        domain: 'my',\r\n        act: 'order',\r\n        op: 'myOrder'\r\n      };\r\n      _opt = $.extend(_def, opt);\r\n      if (main.isGot) {\r\n        main.isGot = false;\r\n        return sbCom.ajaxData(_opt, function(data) {\r\n          var _cb;\r\n          main.isGot = true;\r\n          _cb = cb || function() {};\r\n          return _cb(data);\r\n        });\r\n      }\r\n    },\r\n    bindFn: function() {\r\n      return main.$win.on(\"scroll\", function() {\r\n        var _myOrderTab, _old, _top;\r\n        _myOrderTab = $('#myOrderTab');\r\n        _top = main.$win.scrollTop();\r\n        _old = main._scrollY[1];\r\n        main._scrollY = [_old, _top];\r\n        if (_old > _top && _top > 0) {\r\n          return _myOrderTab.addClass('fixed');\r\n        } else {\r\n          return _myOrderTab.removeClass('fixed');\r\n        }\r\n      });\r\n    },\r\n    defineModel: function() {\r\n      var _data;\r\n      vmcore.templateCache[\"index.html\"] = iTpl.index;\r\n      vmcore.templateCache[\"paybox.html\"] = pTpl.main;\r\n      _data = {\r\n        $id: main.vmId,\r\n        tpl: 'index.html',\r\n        payTpl: 'paybox.html',\r\n        list: [],\r\n        type: 'all',\r\n        isShowPayBox: false,\r\n        payment_list: [],\r\n        payType: '',\r\n        paySn: '',\r\n        changeType: function(type) {\r\n          if (type === _VM_.orderList.type) {\r\n            return false;\r\n          }\r\n          main.page = 1;\r\n          main.isEnd = false;\r\n          return main.changeType(type, function() {\r\n            return main.setHistroyStatus(type);\r\n          });\r\n        },\r\n\r\n        /*\r\n         * [orderState 订单状态]\r\n         * @param  {[number]} state [状态值]\r\n         * @return {[string]} [返回订单状态]\r\n         */\r\n        orderState: function(state) {\r\n          var _desc, _state;\r\n          _state = parseInt(state);\r\n          _desc = (function() {\r\n            switch (_state) {\r\n              case 0:\r\n                return '已取消';\r\n              case 10:\r\n                return '未付款';\r\n              case 20:\r\n                return '已付款';\r\n              case 30:\r\n                return '已发货';\r\n              case 40:\r\n                return '已收货';\r\n            }\r\n          })();\r\n          return _desc;\r\n        },\r\n        getGoodsCount: function(obj) {\r\n          var count;\r\n          count = 0;\r\n          obj.forEach(function(el) {\r\n            return count += el.goods_count;\r\n          });\r\n          return count;\r\n        },\r\n        stopTouchMove: function(e) {\r\n          return App.paymentList.stopTouchMove.call(main, e);\r\n        },\r\n        openPayBox: function(paySn) {\r\n          return App.paymentList.getPaymentList.call(main, paySn);\r\n        },\r\n        closePayBox: function() {\r\n          return App.paymentList.closePayBox.call(main);\r\n        },\r\n        setPayType: function(type) {\r\n          return App.paymentList.setPayType.call(main, type);\r\n        },\r\n        goToPay: function() {\r\n          return App.paymentList.goToPay.call(main);\r\n        }\r\n      };\r\n      return _data;\r\n    },\r\n    setHistroyStatus: function(type) {\r\n      var baseUrl;\r\n      baseUrl = main.baseUrl;\r\n      if (type !== 'all' && type !== \"\") {\r\n        baseUrl += \"?state_type=\" + type;\r\n      }\r\n      return sbCom.historyState.init({\r\n        url: baseUrl,\r\n        changed: function(changedUrl) {\r\n          var _type;\r\n          _type = sbCom.getQueryString('state_type') || \"all\";\r\n          return main.changeType(_type);\r\n        }\r\n      });\r\n    },\r\n    changeType: function(type, cb) {\r\n      var loadId;\r\n      loadId = sbBase.layer.open({\r\n        type: 2\r\n      });\r\n      return main.getRecords(type, function(res) {\r\n        if (res.code === '00000' && res.data) {\r\n          _VM_.orderList.list = res.data.orders;\r\n          _VM_.orderList.type = type;\r\n          main.pageTotal = res.data.page_total;\r\n          cb && cb();\r\n        } else {\r\n          sbBase.layer.alert(res.desc);\r\n        }\r\n        return setTimeout(function() {\r\n          return sbBase.layer.closeAll();\r\n        }, 200);\r\n      });\r\n    },\r\n    fRenderScroll: function() {\r\n      var _infiniteScroll, _type;\r\n      main = main;\r\n      _type = _VM_.orderList.type;\r\n      _infiniteScroll = sbBase.infiniteScroll.init({\r\n        bufferPx: 150,\r\n        time: 200,\r\n        onNear: function() {\r\n          if (main.isScrollLoad) {\r\n            return true;\r\n          }\r\n          if (!main.isEnd) {\r\n            main.isScrollLoad = true;\r\n            $('#loadText').show().find('legend').html(\"正在拼命加载中\");\r\n            main.page++;\r\n            return main.getRecords(_type, function(res) {\r\n              main.isScrollLoad = false;\r\n              $('#loadText').hide();\r\n              if (res.code === '00000' && res.data && res.data.orders) {\r\n                return [].forEach.call(res.data.orders, function(value) {\r\n                  return _VM_.orderList.list.push(value);\r\n                });\r\n              } else {\r\n                return sbBase.layer.alert(res.desc);\r\n              }\r\n            });\r\n          } else {\r\n            return $('#loadText').show().find('legend').html(\"已经是最后一页\");\r\n          }\r\n        },\r\n        onEnd: null,\r\n        onScroll: function() {}\r\n      });\r\n      if (main.page >= 1) {\r\n        return _infiniteScroll.start();\r\n      }\r\n    }\r\n  };\r\n  return main.init();\r\n});\r\n",
    "app/user/refundView.js": "// Generated by CoffeeScript 1.10.0\r\n\r\n/*\r\n\t退款进度页面的javascript by Hzl\r\n */\r\ndefine('app/user/refundView',['vmcore','_tpl/returnList','app/_common','_base/docCookies','_base/layer','_data/refund'],function(vmcore, iTpl) {\r\n  var cookie, layer, refundApi, refundView, sbCom;\r\n  sbCom = sbLib.common;\r\n  cookie = sbLib.base.docCookies;\r\n  layer = sbLib.base.layer;\r\n  refundApi = sbLib.data.refund;\r\n\r\n  /* 定义该页面业务的JS模块对象 */\r\n  refundView = {\r\n\r\n    /* 模块默认的全局变量 */\r\n    refund_id: sbCom.getQueryString('refund_id'),\r\n    token: cookie.getItem('key'),\r\n\r\n    /* 初始化入口 */\r\n    init: function() {\r\n\r\n      /*  对象指针 */\r\n      var _self, loading_id;\r\n      _self = this;\r\n\r\n      /* 检测用户是否存在 */\r\n      sbCom.checkMember();\r\n\r\n      /* loading */\r\n      loading_id = layer.open({\r\n        type: 2\r\n      });\r\n\r\n      /* 请求接口获取数据 */\r\n      return refundApi.refundView({\r\n        data: {\r\n          'refund_id': _self.refund_id,\r\n          'accessToken': _self.token\r\n        }\r\n      }, function(result) {\r\n        var _code, _viewModel;\r\n        sbCom.checkLogin(result);\r\n        _code = parseInt(result.code, 10);\r\n        if (_code === 0) {\r\n\r\n          /* 定义avalon数据模型 */\r\n          _viewModel = _self.defineView();\r\n          _VM_.refundView = vmcore.define(_viewModel);\r\n          _VM_.refundView.data = result.data;\r\n          _VM_.refundView.list = result.data.rightOrderList.goods_list;\r\n          vmcore.scan('', _VM_.refundView);\r\n        } else {\r\n          layer.tips(result.desc, 1);\r\n        }\r\n        return layer.close(loading_id);\r\n      });\r\n    },\r\n\r\n    /* 定义avalon数据模型的构造方法 */\r\n    defineView: function() {\r\n      var _data;\r\n      vmcore.templateCache['refundView.html'] = iTpl.refundView;\r\n      iTpl.refundView = null;\r\n      _data = {\r\n        $id: 'refundViewPad',\r\n        tpl: 'refundView.html',\r\n        list: [],\r\n        data: {}\r\n      };\r\n      return _data;\r\n    }\r\n  };\r\n  return refundView.init();\r\n});\r\n",
    "app/user/returnList.js": "/**\r\n * @fileOverview h5端“退货退款列表”\r\n * @author Wy\r\n * @description\r\n * @命名：f表示函数,r表示正则,n表示数值\r\n */\r\ndefine('app/user/returnList',['vmcore','_tpl/returnList','app/_common','_base/layer','_base/docCookies','_base/infiniteScroll','_data/refund'],function(vmcore, tpl) {\r\n    var sbBase = sbLib.base;\r\n    var sbCom = sbLib.common;\r\n    //ajax请求数据\r\n    var fAjaxFunc = sbLib.common.ajaxData;\r\n    var experts = {\r\n        token: sbBase.docCookies.getItem('key'),\r\n        page: 1,\r\n        listCount: 0,\r\n        pageSize: 10,\r\n        isEnd: false,\r\n        pageTotal: 1,\r\n        init: function() {\r\n\r\n            sbCom.checkMember();\r\n\r\n            var _model, _self, loadId;\r\n            loadId = sbBase.layer.open({\r\n                type: 2\r\n            });\r\n            _self = this;\r\n            _model = _self.defineModel();\r\n            _VM_.setPad = vmcore.define(_model);\r\n\r\n            //退款列表\r\n            _self.returnListData(1, function(_result, _code, _data) {\r\n                _VM_.setPad.isInit = true;\r\n                _code = parseInt(_result.code, 10);\r\n                _data = _result.data || {};\r\n\r\n                if (_code === 0) {\r\n                    var list = _data.refund_return_list;\r\n                    _VM_.setPad.data = _data;\r\n                    _VM_.setPad.list = list;\r\n                } else {\r\n                    sbBase.layer.alert(_result.desc);\r\n                }\r\n\r\n                setTimeout(function() {\r\n                    sbBase.layer.close(loadId);\r\n                }, 200);\r\n\r\n                _self.renderScroll();\r\n            });\r\n\r\n        },\r\n        //退货退款列表数据\r\n        returnListData: function(type, cb) {\r\n            var _def, _opt, _page, _self = this;\r\n            _def = {\r\n                data: {\r\n                    accessToken: this.token,\r\n                    refund_type: type || _VM_.setPad.refund_type,\r\n                    curpage: _self.page,\r\n                    pageSize: _self.pageSize\r\n                }\r\n            };\r\n\r\n            sbLib.data.refund.refunds(_def, function(result) {\r\n                // 是否登录\r\n                var _cb, _code, _result;\r\n                _result = result || {\r\n                    code: -1,\r\n                    desc: \"网络繁忙！\"\r\n                };\r\n                _code = parseInt(_result.code, 10);\r\n                _data = result.data || {\r\n                    refund_return_list: []\r\n                };\r\n                if (_code === 0) {\r\n                    _self.pageTotal = _data.page_total;\r\n                }\r\n                if (_self.page >= _self.pageTotal) {\r\n                    _self.isEnd = true;\r\n                }\r\n                _cb = cb || function() {};\r\n\r\n                return _cb(_result, _code, _data);\r\n            });\r\n        },\r\n\r\n        //定义avalon模版\r\n        defineModel: function() {\r\n            var _data, _self;\r\n            vmcore.templateCache[\"returnList.html\"] = tpl.returnList;\r\n            _self = this;\r\n            _data = {\r\n                $id: 'setPad',\r\n                tpl: 'returnList.html',\r\n                sName: '',\r\n                refund_type: 1, // 1 是退款；2 是退款退货； 其他为全部（为了区分，只做两种选择）\r\n                list: [],\r\n                isInit: false,\r\n                tabCon: [{\r\n                    refund_type: 1,\r\n                    text: '退款'\r\n                }, {\r\n                    refund_type: 2,\r\n                    text: '退款退货'\r\n                }],\r\n                getUrl: function(el) {\r\n                    var _type = _VM_.setPad.refund_type,\r\n                        _url = \"\";\r\n                    if (_type === 1) {\r\n                        _url = \"/user/refundView.html\";\r\n                    } else {\r\n                        _url = \"/user/returnView.html\";\r\n                    }\r\n                    _url = _url + '?refund_id=' + el.refund_id;\r\n                    return _url;\r\n                },\r\n                changeType: function(type) {\r\n                    var _type = type || 1;\r\n                    //判断是否为当前的类型\r\n                    if (_type === _VM_.setPad.refund_type) {\r\n                        return false;\r\n                    }\r\n                    var loadId = sbBase.layer.open({\r\n                        type: 2\r\n                    });\r\n                    $('#loadText').hide();\r\n                    _self.returnListData(type, function(result) {\r\n                        var _code, _data, _result;\r\n                        _result = result || {\r\n                            code: -1,\r\n                            desc: \"网络繁忙！\"\r\n                        };\r\n                        _code = parseInt(_result.code, 10);\r\n                        _data = _result.data || {};\r\n                        if (_code === 0) {\r\n                            var list = _data.refund_return_list;\r\n\r\n                            _VM_.setPad.refund_type = type;\r\n                            _VM_.setPad.data = _data;\r\n                            _VM_.setPad.list = list;\r\n\r\n                        } else {\r\n                            sbBase.layer.alert(_result.desc);\r\n                        }\r\n                        setTimeout(function() {\r\n                            sbBase.layer.close(loadId);\r\n                        }, 200);\r\n                    });\r\n                }\r\n            };\r\n            return _data;\r\n        },\r\n        isScrollLoad: false,\r\n        renderScroll: function() {\r\n            var _infiniteScroll, _self;\r\n            _self = this;\r\n            _infiniteScroll = sbBase.infiniteScroll.init({\r\n                bufferPx: 150,\r\n                time: 200,\r\n                onNear: function() {\r\n                    if (_self.isScrollLoad) {\r\n                        return true;\r\n                    }\r\n                    if (!_self.isEnd) {\r\n                        _self.isScrollLoad = true;\r\n\r\n                        $('#loadText').show().find('legend').html(\"正在拼命加载中\");\r\n                        _self.page++;\r\n                        _self.returnListData(_VM_.setPad.refund_type, function(result) {\r\n                            _self.isScrollLoad = false;\r\n                            var _code = parseInt(result.code,10);\r\n                            $('#loadText').hide();\r\n                            if (_code === 0) {\r\n                                if (_data.refund_return_list.length) {\r\n                                    $.each(_data.refund_return_list, function(index, value) {\r\n                                        _VM_.setPad.list.push(value);\r\n                                    });\r\n                                } else {\r\n                                    _self.isEnd = true;\r\n                                }\r\n                            }\r\n                        });\r\n                    } else {\r\n                        _self.page = 1;//重置默认初始 '1\r\n                        $('#loadText').show().find('legend').html(\"已经是最后一页\");\r\n                    }\r\n                },\r\n                onEnd: null,\r\n                onScroll: function() {}\r\n            });\r\n            if (_self.page >= 1) {\r\n                _infiniteScroll.start();\r\n            }\r\n        }\r\n    };\r\n    experts.init();\r\n});\r\n",
    "app/user/returnView.js": "// Generated by CoffeeScript 1.9.3\r\n\r\n/*\r\n\t退货退款进度页面的javascript by Hzl\r\n */\r\ndefine('app/user/returnView',['vmcore','_tpl/returnList','app/_common','_base/docCookies','_base/layer','_data/refund'],function(vmcore, iTpl) {\r\n  var cookie, layer, refundApi, refundView, sbCom;\r\n  sbCom = sbLib.common;\r\n  cookie = sbLib.base.docCookies;\r\n  layer = sbLib.base.layer;\r\n  refundApi = sbLib.data.refund;\r\n\r\n  /* 定义该页面业务的JS模块对象 */\r\n  refundView = {\r\n\r\n    /* 模块默认的全局变量 */\r\n    refund_id: sbCom.getQueryString('refund_id'),\r\n    token: cookie.getItem('key'),\r\n\r\n    /* 初始化入口 */\r\n    init: function() {\r\n\r\n      /*  对象指针 */\r\n      var _self, loading_id;\r\n      _self = this;\r\n\r\n      /* 检测用户是否存在 */\r\n      sbCom.checkMember();\r\n\r\n      /* loading */\r\n      loading_id = layer.open({\r\n        type: 2\r\n      });\r\n\r\n      /* 请求接口获取数据 */\r\n      return refundApi.returnView({\r\n        data: {\r\n          'refund_id': _self.refund_id,\r\n          'accessToken': _self.token\r\n        }\r\n      }, function(result) {\r\n        var _code, _viewModel;\r\n        sbCom.checkLogin(result);\r\n        _code = parseInt(result.code, 10);\r\n        if (_code === 0) {\r\n\r\n          /* 定义avalon数据模型 */\r\n          _viewModel = _self.defineView();\r\n          _VM_.refundView = vmcore.define(_viewModel);\r\n          _VM_.refundView.data = result.data;\r\n          vmcore.scan('', _VM_.refundView);\r\n        } else {\r\n          layer.tips(result.desc, 1);\r\n        }\r\n        return layer.close(loading_id);\r\n      });\r\n    },\r\n\r\n    /* 定义avalon数据模型的构造方法 */\r\n    defineView: function() {\r\n      var _data, _self;\r\n      _self = this;\r\n      vmcore.templateCache['returnView.html'] = iTpl.returnView;\r\n      iTpl.refundView = null;\r\n      _data = {\r\n        $id: 'returnViewPad',\r\n        tpl: 'returnView.html',\r\n        data: {},\r\n        addShip: function() {\r\n          var _code, _id, loadId;\r\n          _id = parseInt($('#expressList').val() || 0, 10);\r\n          _code = $('#expressCode').val();\r\n          if (!_id) {\r\n            layer.alert(\"请选择物流公司！\");\r\n            return false;\r\n          }\r\n          if (!_code) {\r\n            layer.alert(\"物流单号不能为空！\");\r\n            return false;\r\n          }\r\n          loadId = layer.open({\r\n            type: 2\r\n          });\r\n          return refundApi.ship({\r\n            data: {\r\n              accessToken: _self.token,\r\n              return_id: _self.refund_id,\r\n              express_id: _id,\r\n              invoice_no: _code\r\n            }\r\n          }, function(result) {\r\n            var _result;\r\n            console.log(result);\r\n            _result = result || {\r\n              code: -1,\r\n              desc: \"网络繁忙！\"\r\n            };\r\n            _code = parseInt(_result.code, 10);\r\n            layer.close(loadId);\r\n            if (_code === 0) {\r\n              return window.location.reload();\r\n            } else {\r\n              return layer.alert(_result.desc);\r\n            }\r\n          });\r\n        }\r\n      };\r\n      return _data;\r\n    }\r\n  };\r\n  return refundView.init();\r\n});\r\n",
    "app/user/address/userAddressEvent.js": "define('app/user/address/userAddressEvent',['vmcore','app/_common','_base/docCookies','_base/layer'],function(vmcore,common){\r\n\r\n\r\n\tvar _AjaxData = sbLib.common.ajaxData,\r\n\t\t_cookie = sbLib.base.docCookies,\r\n\t\t_layer = sbLib.base.layer;\r\n\tfunction UserAddressEvent(){\r\n\r\n\t\t/*全局 -> this*/\r\n\t\tvar _self;\r\n\t\tvar _cb_add_edit;//增加地址/编辑地址的回调函数\r\n\t\t/*模板切换*/\r\n\t\tthis.templates = {\r\n\t\t\tpageList : {\r\n\t\t\t\tobject : $('.address'),\r\n\t\t\t\ttitle : \"地址管理\"\r\n\t\t\t},\r\n\t\t\tpageAdd : {\r\n\t\t\t\tobject : $('.address-add'),\r\n\t\t\t\ttitle  : \"添加地址\"\r\n\t\t\t},\r\n\t\t\tpageEdit: {\r\n\t\t\t\ttitle : \"编辑地址\"\r\n\t\t\t}\r\n\t\t};\r\n\t\t/*全局重复对象cache*/\r\n\t\tthis.OBJCACHE = {\r\n\t\t\ttopBack:$('.top-back'),\r\n\t\t\tbarTitle:$('.bar-title')\r\n\t\t};\r\n\t\t/*本地accessTokenKey*/\r\n\t\tthis.tokenKey = _cookie.getItem(\"key\");\r\n\t\t/*入口文件初始化页面事件*/\r\n\t\tthis.initBindEvent = function(cb_add_edit,cb_this){\r\n\t\t\t_self = this;\r\n            // console.log(_self);\r\n\t\t\t_self._cb_add_edit = cb_add_edit;\r\n\t\t\t_self._this = cb_this;//_self._this 代表 userAddressHandle对象\r\n\t\t\t$(document).on(\"click\",\".icon-delete\",_self.delete)\r\n\t\t\t.on(\"click\",\".user-address\",_self.edit)\r\n\t\t\t.on('click','.js-add-address',_self.add)\r\n\t\t};\r\n\t\t/*删除*/\r\n\t\tthis.delete = function(){\r\n\t\t\tvar nId = $(this).attr('address-id'); //地址id\r\n\t\t\t_layer.open({\r\n\t\t\t\tcontent:\"<p style=\\\"text-align:center;\\\">您是否删除该地址</p>\",\r\n\t\t\t\tbtn:['确认','取消'],\r\n\t\t\t\tyes:function(index){\r\n\t\t\t\t\toData = {\r\n\t\t\t\t\t\tdomain:'my',\r\n\t\t\t\t\t\tact:'users',\r\n\t\t\t\t\t\top:'deleteAddress',\r\n\t\t\t\t\t\ttype: 'post',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\taddress_id:nId,\r\n\t\t\t\t\t\t\taccessToken:_self.tokenKey\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n                    var loadId = _layer.open({type:2});\r\n\t\t\t\t\t_AjaxData(oData,function(result){\r\n                        _layer.close(loadId);\r\n\t\t\t\t\t\tif(result.code === \"00000\"){\r\n\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t};\r\n\t\t/*编辑*/\r\n\t\tthis.edit = function(){\r\n\t\t\t$('.top-back').hide();\r\n            var loadId = _layer.open({type:2});\r\n\t\t\tvar sAddressId = _self._this.address_id = $(this).attr(\"address-id\");\r\n\t\t\toData = {\r\n\t\t\t\tdomain:'my',\r\n\t\t\t\tact:'users',\r\n\t\t\t\top:'infoAddress',\r\n\t\t\t\tdata:{\r\n\t\t\t\t\taddress_id: sAddressId,\r\n\t\t\t\t\taccessToken: _self.tokenKey\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t_AjaxData(oData,function(result){\r\n                _layer.close(loadId);\r\n\t\t\t\tif(result.code === \"00000\"){\r\n\t\t\t\t\t_self.oAddressInfo =  result.data.address_info;\r\n\t\t\t\t\t$(\"#userName\").val(_self.oAddressInfo.true_name);\r\n\t\t\t\t\t$(\"#userPhone\").val(_self.oAddressInfo.phone);\r\n\t\t\t\t\t$(\"#userIdentity\").val(_self.oAddressInfo.identity);\r\n\t\t\t\t\t$(\"#detailAddress\").val(_self.oAddressInfo.address);\r\n\t\t\t\t\t_self.templates.pageList.object.hide(200);\r\n\t\t\t\t\t_self.templates.pageAdd.object.show(200);\r\n\t\t\t\t\t_self.OBJCACHE.barTitle.html(_self.templates.pageEdit.title);\r\n\t\t\t\t\t_self._cb_add_edit.apply(_self._this,['edit',_self.oAddressInfo]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\t/*添加*/\r\n\t\tthis.add = function(){\r\n\t\t\t_self._this.address_id = \"\";\r\n\t\t\t_self.OBJCACHE.topBack.hide();\r\n\t\t\t_self.templates.pageList.object.hide(200);\r\n\t\t\t_self.templates.pageAdd.object.show(200);\r\n\t\t\t_self.OBJCACHE.barTitle.html(_self.templates.pageAdd.title);\r\n\t\t\t_self._cb_add_edit.apply(_self._this,['add']);\r\n\t\t};\r\n\t}\r\n\treturn UserAddressEvent;\r\n\r\n})\r\n",
    "app/user/address/userAddressHandle.js": "define('app/user/address/userAddressHandle',['vmcore','app/_common','_pulgins/sValid','_base/docCookies','_base/layer'],function(vmcore,common){\r\n\r\n\tvar _AjaxData = sbLib.common.ajaxData,\r\n\t\t_cookie = sbLib.base.docCookies,\r\n\t\t_layer = sbLib.base.layer;\r\n\tfunction UserAddressHandle(){\r\n\t\tvar _self;\r\n\t\t/*默认地址*/\r\n\t\tthis.is_default = 1;\r\n\t\tthis.tokenKey = _cookie.getItem('key');\r\n\t\tthis.addressId = \" \";\r\n\t\t/*初始化操作入口*/\r\n\t\tthis.initHandle = function(){\r\n\t\t\t_self = this;\r\n\t\t\tthis.bindChange();//初始化地区联动和提交-返回\r\n\t\t\tswitch(arguments[0]){\r\n\t\t\t\tcase 'add':\r\n\t\t\t\t\tthis.getArea('',function(_data){ _self.setAreaInfo('province',_data);});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'edit':\r\n\t\t\t\t\t_self.addressId = _self.address_id;\r\n\t\t\t\t\t_self.oAddressInfo = arguments[1];\r\n\t\t\t\t\t_self.getArea(\"\",function(_data){_self.setEditAreaInfo(\"province\",_data);});\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t\t/*地址页面的元素监听*/\r\n\t\tthis.bindChange = function(){\r\n\t\t\t$(document).on('change','select.provSelect',_self.selectProvince)\r\n\t\t\t.on('change','select.citySelect',_self.selectCity)\r\n\t\t\t.on('change','select.areaSelect',_self.selectArea)\r\n\t\t\t.on(\"click\",\".setDefaultAddress\",_self.setDefaultAdd)\r\n\t\t\t.on(\"click\",\".addressSubmit\",_self.keepAddress)\r\n\t\t\t.on(\"click\",\".cancelSubmit\",_self.cancel)\r\n\t\t};\r\n\t\t/*省份*/\r\n\t\tthis.selectProvince=function(){\r\n\t\t\tvar nThisId = $(this).val();\r\n\t\t\t$(this).css('color','#333');\r\n\t\t\t_self.getArea(nThisId,function(_data){_self.setAreaInfo('city',_data);});\r\n\t\t};\r\n\t\t/*城市*/\r\n\t\tthis.selectCity=function(){\r\n\t\t\tvar nThisId = $(this).val();\r\n\t\t\t_self.getArea(nThisId,function(_data){_self.setAreaInfo('area',_data);});\r\n\t\t};\r\n\t\t/*地区*/\r\n\t\tthis.selectArea=function(){\r\n\t\t\tvar nThisId = $(this).val();\r\n\t\t\t_self.getArea(nThisId,function(_data){_self.setAreaInfo('street',_data);});\r\n\t\t};\r\n\t\t/*是否设置默认地址*/\r\n\t\tthis.setDefaultAdd=function(){\r\n\t\t\tvar _this = $(this).find('.icon');\r\n\t\t\tif(_this.hasClass(\"icon-noselect\")){\r\n\t\t\t\t_this.removeClass(\"icon-noselect\").addClass(\"icon-select\");\r\n\t\t\t\t_self.is_default = 1;\r\n\t\t\t}else{\r\n\t\t\t\t_this.addClass(\"icon-noselect\").removeClass(\"icon-select\");\r\n\t\t\t\t_self.is_default = 0;\r\n\t\t\t}\r\n\t\t};\r\n\t\t/*验证需要提交的地址数据*/\r\n\t\tthis.sValidAddressData = function(){\r\n\t\t\t$.sValid.init({\r\n\t            rules: {\r\n\t            \tuserName:{\r\n\t            \t\trequired:true\r\n\t            \t},\r\n\t            \tuserPhone:{\r\n\t            \t\trequired:true,\r\n\t            \t\tphone:'phone'\r\n\t            \t},\r\n\t            \tuserIdentity:{\r\n\t            \t\tisIdCardNo:\"isIdCardNo\"\r\n\t            \t},\r\n\t            \tdetailAddress:{\r\n\t            \t\trequired:true\r\n\t            \t},\r\n\t            \tvprov:{\r\n\t            \t\trequired:true\r\n\t            \t},\r\n\t            \tvcity:{\r\n\t            \t\trequired:true\r\n\t            \t},\r\n\t            \tvarea:{\r\n\t            \t\trequired:true\r\n\t            \t},\r\n\t            \tvstreet:{\r\n\t            \t\trequired:true\r\n\t            \t}\r\n\t            },\r\n\t            messages: {\r\n\t                userName: {\r\n\t                    required: '请输入姓名',\r\n\t                },\r\n\t                userPhone:{\r\n\t                \trequired: '请输入手机号码',\r\n\t                    phone: '请输入正确的手机号码'\r\n\t                },\r\n\t                userIdentity:{\r\n\t                \tisIdCardNo:'请输入正确的身份证号码'\r\n\t                },\r\n\t                detailAddress:{\r\n\t                \trequired:'请输入详细地址'\r\n\t                },\r\n\t                vprov:{\r\n\t                \trequired:'请选择省份'\r\n\t                },\r\n\t                vcity:{\r\n\t                \trequired:'请选择城市'\r\n\t                },\r\n\t                varea:{\r\n\t                \trequired:'请选择地区'\r\n\t                },\r\n\t                vstreet:{\r\n\t                \trequired:'请选择街区'\r\n\t                }\r\n\t            },\r\n\t            callback: function (eId, eMsg, eRules) {\r\n\t                if (eId.length > 0) {\r\n\t                    var i = 0;\r\n\t                    $.map(eMsg, function (idx, item) {\r\n\t                        if (i === 0) {\r\n\t                            _layer.tips(idx,0.5);\r\n\t                        }\r\n\t                        i++;\r\n\t                    });\r\n\t                }\r\n\t            }\r\n\t        });\r\n\t\t};\r\n\t\t/*提交地址保存*/\r\n\t\tthis.keepAddress = function(){\r\n\t\t\t_self.sValidAddressData();\r\n\t\t\tif($.sValid()){\r\n\t\t\t\tvar true_name = $('#userName').val(),\r\n\t\t        \tphone = $('#userPhone').val(),\r\n\t\t        \tidentity = $('#userIdentity').val(),\r\n\t\t\t        province_id = $('#vprov').val(),\r\n\t\t\t        city_id = $('#vcity').val(),\r\n\t\t\t        area_id = $('#varea').val(),\r\n\t\t\t        street_id = $('#vstreet').val(),\r\n\t\t\t        address = $('#detailAddress').val(),\r\n\t\t\t        is_default = _self.is_default,\r\n\t\t\t        address_id = _self.addressId,\r\n\t\t\t        data = {\r\n\t\t\t        \tdomain:'my',\r\n\t\t    \t\t\tact:'users',\r\n\t\t    \t\t\top:'saveAddress',\r\n\t\t    \t\t\ttype: 'post',\r\n\t\t    \t\t\tdata:{\r\n\t\t    \t\t\t\taddress_id:address_id,\r\n\t\t    \t\t\t\ttrue_name: true_name,\r\n\t\t\t\t\t        phone: phone,\r\n\t\t\t\t\t        province_id: province_id,\r\n\t\t\t\t\t        city_id: city_id,\r\n\t\t\t\t\t        area_id: area_id,\r\n\t\t\t\t\t        street_id: street_id,\r\n\t\t\t\t\t        address: address,\r\n\t\t\t\t\t        identity: identity,\r\n\t\t\t\t\t        is_default:is_default,\r\n\t\t\t\t\t        accessToken:_self.tokenKey\r\n\t\t    \t\t\t}\r\n\t\t            };\r\n\t            _AjaxData(data,function(result){\r\n\t            \tif(result.code === \"00000\"){\r\n\t            \t\twindow.location.reload();\r\n\t            \t}\r\n\t            });\r\n\t\t\t}\r\n\t\t};\r\n\t\t/*取消操作返回*/\r\n\t\tthis.cancel=function(){\r\n\t\t\t$('.top-back').show();\r\n\t\t\t_self.clearLeaveData();\r\n\t\t\t$('.address').show(200);\r\n\t\t\t$('.address-add').hide(200);\r\n\t\t\t$('.bar-title').html(\"地址管理\");\r\n\t\t};\r\n\t\t/*取消编辑或者新增地址时 清除干净遗留信息*/\r\n\t\tthis.clearLeaveData = function(){\r\n\t\t\tvar aInputs = $('.address-add').find('input'),\r\n\t\t\t\ti = 0,\r\n\t\t\t\tl = aInputs.length;\r\n\t\t\tfor (i; i < l; i++) {\r\n\t\t\t\taInputs.eq(i).val('');\r\n\t\t\t}\r\n\t\t};\r\n\t\t/*默认设置地区三级联动*/\r\n\t\tthis.getArea = function(_area_id,_cb){\r\n\t\t\tvar\tfCallBack = _cb;\r\n\t\t\tvar oData = {\r\n\t\t\t\tdomain:'passports',\r\n\t    \t\tact:'login',\r\n\t    \t\top:'area',\r\n\t    \t\tdata:{\r\n\t\t    \t\tarea_id:_area_id\r\n\t    \t\t}\r\n\t\t\t};\r\n\t\t\t_AjaxData(oData,function(result){\r\n\t\t\t\tif(result.code === '00000' && result.data){\r\n\t\t\t\t\tfCallBack(result.data.area_list);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\t/*发生Change监听事件*/\r\n\t\tthis.setAreaInfo = function(_type,_data){\r\n\t\t\tvar sTypeName = _type,\r\n\t\t\t\taAreaData = _data,\r\n\t\t\t\ti = 0,\r\n\t\t\t\tl = aAreaData.length,\r\n\t\t\t\tsAreaHtml = \"\";\r\n\t\t\tfor (i; i < l; i++) {\r\n\t\t\t\tvar oItem = aAreaData[i];\r\n\t\t\t\tsAreaHtml+=\"<option value='\" + oItem.area_id + \"'>\" + oItem.area_name + \"</option>\";\r\n\t\t\t}\r\n\t\t\tswitch(sTypeName){\r\n\t\t\t\tcase \"province\":\r\n\t\t\t\t\t$(\"#vprov\").append(sAreaHtml).find('option').not('first').css('color','#333');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"city\":\r\n\t\t\t\t\t$(\"#vcity\").html(sAreaHtml).css('color','#333');\r\n\t\t\t\t\tvar nCityId = $(\"#vcity\").val();\r\n\t\t\t\t\t_self.getArea(nCityId,function(_data){_self.setAreaInfo('area',_data);});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"area\":\r\n\t\t\t\t\t$(\"#varea\").html(sAreaHtml).css('color','#333');\r\n\t\t\t\t\tvar nAreaId = $(\"#varea\").val();\r\n\t\t\t\t\t_self.getArea(nAreaId,function(_data){_self.setAreaInfo('street',_data);});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"street\":\r\n\t\t\t\t\tsAreaHtml += \"<option value='0'>其他</option>\";\r\n\t\t\t\t\t$(\"#vstreet\").html(sAreaHtml).css('color','#333');\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t\t/*设置编辑地址时的地域接口请求*/\r\n\t\tthis.setEditAreaInfo = function(_type,_data){\r\n\t\t\tvar nProvinceId = _self.oAddressInfo.province_id,\r\n\t\t\t\tnCityId = _self.oAddressInfo.city_id,\r\n\t\t\t\tnAreaId = _self.oAddressInfo.area_id,\r\n\t\t\t\tnStreetId = _self.oAddressInfo.street_id,\r\n\t\t\t\tsTypeName = _type,\r\n\t\t\t\taAreaData = _data,\r\n\t\t\t\ti = 0,\r\n\t\t\t\tl = aAreaData.length,\r\n\t\t\t\tsAreaHtml = \"\";\r\n\t\t\tfor (i; i < l; i++) {\r\n\t\t\t\tvar oItem = aAreaData[i];\r\n\t\t\t\tsAreaHtml+=\"<option value='\" + oItem.area_id + \"'>\" + oItem.area_name + \"</option>\";\r\n\t\t\t}\r\n\t\t\tswitch(sTypeName){\r\n\t\t\t\tcase \"province\":\r\n\t\t\t\t\t$(\"#vprov\").append(sAreaHtml).css('color','#333');\r\n\t\t\t\t\t$(\"#vprov\").val(nProvinceId);\r\n\t\t\t\t\t_self.getArea(nProvinceId,function(_data){_self.setEditAreaInfo(\"city\",_data);});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"city\":\r\n\t\t\t\t\t$(\"#vcity\").html(sAreaHtml).css('color','#333');\r\n\t\t\t\t\t$(\"#vcity\").val(nCityId);\r\n\t\t\t\t\t_self.getArea(nCityId,function(_data){_self.setEditAreaInfo(\"area\",_data);});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"area\":\r\n\t\t\t\t\t$(\"#varea\").html(sAreaHtml).css('color','#333');\r\n\t\t\t\t\t$(\"#varea\").val(nAreaId);\r\n\t\t\t\t\t_self.getArea(nAreaId,function(_data){_self.setEditAreaInfo(\"street\",_data);});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"street\":\r\n\t\t\t\t\tsAreaHtml += \"<option value='0'>其他</option>\";\r\n\t\t\t\t\t$(\"#vstreet\").html(sAreaHtml).css('color','#333');\r\n\t\t\t\t\t$(\"#vstreet\").val(nStreetId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\treturn UserAddressHandle;\r\n})\r\n",
    "app/user/address/userAddressList.js": "define('app/user/address/userAddressList',['vmcore','_tpl/user','app/_common','_base/docCookies'],function(vmcore,tpl,common){\r\n\r\n\t/*\r\n\t\t收获人地址信息列表\r\n\t\t负责 renderTempalte and renderAddressData\r\n\t*/\r\n\tvar _AjaxData = sbLib.common.ajaxData,\r\n\t\t_checkLogin = sbLib.common.checkLogin,\r\n\t\t_cookie = sbLib.base.docCookies;\r\n\tfunction UserAddressList(){\r\n\r\n\t\t/*本地accessTokenKey*/\r\n\t\tthis.tokenKey = _cookie.getItem(\"key\");\r\n\r\n\t\t/*入口*/\r\n\t\tthis.initTempalte = function(){\r\n\t\t\tthis.fRenderTemplate();\r\n\t\t}\r\n\t\t/*渲染模板*/\r\n\t\tthis.fRenderTemplate = function(){\r\n\t\t\tvmcore.templateCache[\"userAddList.html\"] = tpl.userAddresslist;\r\n\t\t\tvmcore.templateCache[\"userAddEdit.html\"] = tpl.addUserAddress;\r\n\t    \tvar oAddressManage = {\r\n\t    \t\t$id:\"addressManagePage\",\r\n\t    \t\ttpl: 'userAddList.html',\r\n\t    \t\taddCount:0,\r\n\t    \t\taAddress:[]\r\n\t    \t};\r\n\t\t\tvar oEditManage = {\r\n\t    \t\t$id:\"addressAddPage\",\r\n\t    \t\ttpl: 'userAddEdit.html',\r\n\t    \t};\r\n\t    \tthis.addressList = vmcore.define(oAddressManage);//插入\r\n\t    \tvmcore.define(oEditManage);\r\n\t    \t//初始化数据 ->请求数据->渲染数据\r\n\t    \tthis.fRequestData();\r\n\t\t};\r\n\t\tthis.fRequestData = function(){\r\n\t\t    var _self = this;\r\n\t\t\tvar oData = {\r\n\t\t\t\tdomain:'my',\r\n\t    \t\tact:'users',\r\n\t    \t\top:'myAddress',\r\n\t    \t\tdata:{\r\n\t\t    \t\taccessToken:_self.tokenKey\r\n\t\t    \t}\r\n\t\t\t};\r\n\t\t\t_AjaxData(oData,function(result){\r\n\t\t\t\t// 是否登录\r\n\t\t\t\t_checkLogin(result);\r\n\t\t\t\tif(result.code === '00000' && result.data){\r\n\t\t\t\t\t_self.fRenderData(result.data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\tthis.fRenderData = function(_data){\r\n            // console.log(_data);\r\n\t\t\tthis.addressList.addCount = _data.count;\r\n\t\t\tthis.addressList.aAddress = _data.addresses;\r\n\t\t}\r\n\r\n\t}\r\n\treturn UserAddressList;\r\n})\r\n",
    "mods/index.js": "// Generated by CoffeeScript 1.9.1\r\ndefine('mods/index',['_lib/lazyload','mods/_index/slider','mods/_index/vmctrl'],function(lazyload, Slider, vmctrl) {\r\n    var init;\r\n    init = function() {\r\n        Slider.init();\r\n        $('img').lazyload({\r\n            placeholder: STATIC_PATH + '/img/dot.png'\r\n        });\r\n        vmctrl.run(function() {\r\n            $(window).resize(function() {\r\n                $(\"#iBar\").css({\r\n                    'height': $(window).height()\r\n                });\r\n            });\r\n        });\r\n    };\r\n    init();\r\n});\r\n",
    "_base/animate.js": "\r\n/**\r\n * @cnName 动画引擎\r\n * @enName mmAnimate\r\n * @introduce\r\n * <p>基于单时间轴的动画引擎</p>\r\n * <h3>使用方法</h3>\r\n * ```javascript\r\n vmcore(elem).animate( properties [, duration] [, easing] [, complete] )\r\n vmcore(elem).animate( properties, options )\r\n * ```\r\n */\r\ndefine('_base/animate',['vmcore'],function() {\r\n    /*********************************************************************\r\n     *                      主函数                                   *\r\n     **********************************************************************/\r\n    var effect = vmcore.fn.animate = function(properties, options) {\r\n        var frame = new Frame(this[0])\r\n        if (typeof properties === \"number\") { //如果第一个为数字\r\n            frame.duration = properties\r\n        } else if (typeof properties === \"object\") {\r\n            for (var name in properties) {//处理第一个参数\r\n                var p = vmcore.cssName(name) || name\r\n                if (name !== p) {\r\n                    properties[p] = properties[name] //转换为驼峰风格borderTopWidth, styleFloat\r\n                    delete properties[name] //去掉连字符风格 border-top-width, float\r\n                }\r\n            }\r\n            frame.props = properties\r\n        }\r\n        addOptions.apply(frame, arguments)//处理第二,第三...参数\r\n        //将关键帧插入到时间轴中或插到已有的某一帧的子列队,等此帧完毕,让它再进入时间轴\r\n        insertFrame(frame)\r\n        return this\r\n    }\r\n\r\n    //分解用户的传参\r\n    function addOptions(properties) {\r\n        //如果第二参数是对象\r\n        for (var i = 1; i < arguments.length; i++) {\r\n            addOption(this, arguments[i])\r\n        }\r\n        this.duration = typeof this.duration === \"number\" ? this.duration : 400//动画时长\r\n        this.queue = !!(this.queue == null || this.queue) //是否插入子列队\r\n        this.easing = vmcore.easing[this.easing] ? this.easing : \"swing\"//缓动公式的名字\r\n        this.update = true //是否能更新\r\n        this.gotoEnd = false//是否立即跑到最后一帧\r\n    }\r\n\r\n    function addOption(frame, p, name) {\r\n        if (p === \"slow\") {\r\n            frame.duration = 600\r\n        } else if (p === \"fast\") {\r\n            frame.duration = 200\r\n        } else {\r\n            switch (vmcore.type(p)) {\r\n                case \"object\":\r\n                    for (var i in p) {\r\n                        addOption(frame, p[i], i)\r\n                    }\r\n                    break\r\n                case \"number\":\r\n                    frame.duration = p\r\n                    break\r\n                case \"string\":\r\n                    frame.easing = p\r\n                    break\r\n                case \"function\"://绑定各种回调\r\n                    name = name || \"complete\"\r\n                    frame.bind(name, p)\r\n                    break\r\n            }\r\n        }\r\n    }\r\n    /*********************************************************************\r\n     *                          缓动公式                              *\r\n     **********************************************************************/\r\n    vmcore.mix(effect, {\r\n        fps: 30\r\n    })\r\n    var bezier = {\r\n        \"linear\": [0.250, 0.250, 0.750, 0.750],\r\n        \"ease\": [0.250, 0.100, 0.250, 1.000],\r\n        \"easeIn\": [0.420, 0.000, 1.000, 1.000],\r\n        \"easeOut\": [0.000, 0.000, 0.580, 1.000],\r\n        \"easeInOut\": [0.420, 0.000, 0.580, 1.000],\r\n        \"easeInQuad\": [0.550, 0.085, 0.680, 0.530],\r\n        \"easeInCubic\": [0.550, 0.055, 0.675, 0.190],\r\n        \"easeInQuart\": [0.895, 0.030, 0.685, 0.220],\r\n        \"easeInQuint\": [0.755, 0.050, 0.855, 0.060],\r\n        \"easeInSine\": [0.470, 0.000, 0.745, 0.715],\r\n        \"easeInExpo\": [0.950, 0.050, 0.795, 0.035],\r\n        \"easeInCirc\": [0.600, 0.040, 0.980, 0.335],\r\n        \"easeInBack\": [0.600, -0.280, 0.735, 0.045],\r\n        \"easeOutQuad\": [0.250, 0.460, 0.450, 0.940],\r\n        \"easeOutCubic\": [0.215, 0.610, 0.355, 1.000],\r\n        \"easeOutQuart\": [0.165, 0.840, 0.440, 1.000],\r\n        \"easeOutQuint\": [0.230, 1.000, 0.320, 1.000],\r\n        \"easeOutSine\": [0.390, 0.575, 0.565, 1.000],\r\n        \"easeOutExpo\": [0.190, 1.000, 0.220, 1.000],\r\n        \"easeOutCirc\": [0.075, 0.820, 0.165, 1.000],\r\n        \"easeOutBack\": [0.175, 0.885, 0.320, 1.275],\r\n        \"easeInOutQuad\": [0.455, 0.030, 0.515, 0.955],\r\n        \"easeInOutCubic\": [0.645, 0.045, 0.355, 1.000],\r\n        \"easeInOutQuart\": [0.770, 0.000, 0.175, 1.000],\r\n        \"easeInOutQuint\": [0.860, 0.000, 0.070, 1.000],\r\n        \"easeInOutSine\": [0.445, 0.050, 0.550, 0.950],\r\n        \"easeInOutExpo\": [1.000, 0.000, 0.000, 1.000],\r\n        \"easeInOutCirc\": [0.785, 0.135, 0.150, 0.860],\r\n        \"easeInOutBack\": [0.680, -0.550, 0.265, 1.550],\r\n        \"custom\": [0.000, 0.350, 0.500, 1.300],\r\n        \"random\": [Math.random().toFixed(3),\r\n            Math.random().toFixed(3),\r\n            Math.random().toFixed(3),\r\n            Math.random().toFixed(3)]\r\n    }\r\n    vmcore.easing = {//缓动公式\r\n        linear: function(pos) {\r\n            return pos\r\n        },\r\n        swing: function(pos) {\r\n            return (-Math.cos(pos * Math.PI) / 2) + 0.5\r\n        }\r\n    }\r\n    //https://github.com/rdallasgray/bez\r\n    //http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html\r\n    //https://github.com/rightjs/rightjs-core/blob/master/src/fx/fx.js\r\n    vmcore.each(bezier, function(key, value) {\r\n        vmcore.easing[key] = bezierToEasing([value[0], value[1]], [value[2], value[3]])\r\n    })\r\n    function bezierToEasing(p1, p2) {\r\n        var A = [null, null], B = [null, null], C = [null, null],\r\n                derivative = function(t, ax) {\r\n                    C[ax] = 3 * p1[ax], B[ax] = 3 * (p2[ax] - p1[ax]) - C[ax], A[ax] = 1 - C[ax] - B[ax];\r\n                    return t * (C[ax] + t * (B[ax] + t * A[ax]));\r\n                },\r\n                bezierXY = function(t) {\r\n                    return C[0] + t * (2 * B[0] + 3 * A[0] * t);\r\n                },\r\n                parametric = function(t) {\r\n                    var x = t, i = 0, z;\r\n                    while (++i < 14) {\r\n                        z = derivative(x, 0) - t;\r\n                        if (Math.abs(z) < 1e-3)\r\n                            break;\r\n                        x -= z / bezierXY(x);\r\n                    }\r\n                    return x;\r\n                };\r\n        return function(t) {\r\n            return derivative(parametric(t), 1);\r\n        }\r\n    }\r\n    /*********************************************************************\r\n     *                      时间轴                                    *\r\n     **********************************************************************/\r\n    /**\r\n     * @other\r\n     * <p>一个时间轴<code>vmcore.timeline</code>中包含许多帧, 一帧里面有各种渐变动画, 渐变的轨迹是由缓动公式所规定</p>\r\n     */\r\n    var timeline = vmcore.timeline = []\r\n    function insertFrame(frame) { //插入关键帧\r\n        if (frame.queue) { //如果插入到已有的某一帧的子列队\r\n            var gotoQueue = 1\r\n            for (var i = timeline.length, el; el = timeline[--i]; ) {\r\n                if (el.elem === frame.elem) { //★★★第一步\r\n                    el.troops.push(frame) //子列队\r\n                    gotoQueue = 0\r\n                    break\r\n                }\r\n            }\r\n            if (gotoQueue) { //★★★第二步\r\n                timeline.unshift(frame)\r\n            }\r\n        } else {//插入时间轴\r\n            timeline.push(frame)\r\n        }\r\n        if (insertFrame.id === null) { //时间轴只要存在帧就会执行定时器\r\n            insertFrame.id = setInterval(deleteFrame, 1000 / effect.fps)\r\n        }\r\n    }\r\n\r\n    insertFrame.id = null\r\n\r\n    function deleteFrame() {\r\n        var i = timeline.length\r\n        while (--i >= 0) {\r\n            if (!timeline[i].paused) { //如果没有被暂停\r\n                //如果返回false或元素不存在,就从时间轴中删掉此关键帧\r\n                if (!(timeline[i].elem && enterFrame(timeline[i], i))) {\r\n                    timeline.splice(i, 1)\r\n                }\r\n            }\r\n        }\r\n        //如果时间轴里面没有关键帧,那么停止定时器,节约性能\r\n        timeline.length || (clearInterval(insertFrame.id), insertFrame.id = null)\r\n    }\r\n\r\n    function enterFrame(frame, index) {\r\n        //驱动主列队的动画实例进行补间动画(update)，\r\n        //并在动画结束后，从子列队选取下一个动画实例取替自身\r\n        var now = +new Date\r\n        if (!frame.startTime) { //第一帧\r\n            frame.fire(\"before\")//动画开始前做些预操作\r\n            var elem = frame.elem\r\n            if (vmcore.css(elem, \"display\") === \"none\" && !elem.dataShow) {\r\n                frame.build()//如果是一开始就隐藏,那就必须让它显示出来\r\n            }\r\n            frame.createTweens()\r\n            frame.build()//如果是先hide再show,那么执行createTweens后再执行build则更为平滑\r\n            frame.startTime = now\r\n        } else { //中间自动生成的补间\r\n            var per = (now - frame.startTime) / frame.duration\r\n            var end = frame.gotoEnd || per >= 1 //gotoEnd可以被外面的stop方法操控,强制中止\r\n            if (frame.update) {\r\n                for (var i = 0, tween; tween = frame.tweens[i++]; ) {\r\n                    tween.run(per, end)\r\n                }\r\n                frame.fire(\"step\") //每执行一帧调用的回调\r\n            }\r\n            if (end) { //最后一帧\r\n                frame.fire(\"after\") //动画结束后执行的一些收尾工作\r\n                frame.fire(\"complete\") //执行用户回调\r\n                if (frame.revert) { //如果设置了倒带\r\n                    this.revertTweens()\r\n                    delete this.startTime\r\n                    this.gotoEnd = false\r\n                } else {\r\n                    var neo = frame.troops.shift()\r\n                    if (!neo) {\r\n                        return false\r\n                    } //如果存在排队的动画,让它继续\r\n                    timeline[index] = neo\r\n                    neo.troops = frame.troops\r\n                    //  insertFrame(frame)\r\n                }\r\n            }\r\n        }\r\n        return true\r\n    }\r\n    /*********************************************************************\r\n     *                                  逐帧动画                            *\r\n     **********************************************************************/\r\n    /**\r\n     * @other\r\n     * <p>vmcore.fn.delay, vmcore.fn.slideDown, vmcore.fn.slideUp,\r\n     * vmcore.fn.slideToggle, vmcore.fn.fadeIn, vmcore.fn.fadeOut,vmcore.fn.fadeToggle\r\n     * vmcore.fn.show, vmcore.fn.hide, vmcore.fn.toggle这些方法其实都是vmcore.fn.animate的\r\n     * 二次包装，包括<code>vmcore.fn.animate</code>在内，他们的功能都是往时间轴添加一个帧对象(Frame)</p>\r\n     *<p>帧对象能在时间轴内存在一段时间，持续修改某一元素的N个样式或属性。</p>\r\n     *<p><strong>Frame</strong>对象拥有以下方法与属性</p>\r\n     <table class=\"table-doc\" border=\"1\">\r\n     <colgroup>\r\n     <col width=\"180\"/> <col width=\"80\"/> <col width=\"120\"/>\r\n     </colgroup>\r\n     <tr>\r\n     <th>名字</th><th>类型</th><th>默认值</th><th>说明</th>\r\n     </tr>\r\n     <tr>\r\n     <td>elem</td><td>Element</td><td></td><td>处于动画状态的元素节点</td>\r\n     </tr>\r\n     <tr>\r\n     <td>$events</td><td>Object</td><td>{}</td><td>放置各种回调</td>\r\n     </tr>\r\n     <tr>\r\n     <td>troops</td><td>Array</td><td>[]</td><td>当queue为true，同一个元素产生的帧对象会放在这里</td>\r\n     </tr>\r\n     <tr>\r\n     <td>tweens</td><td>Array</td><td>[]</td><td>放置各种补间动画Tween</td>\r\n     </tr>\r\n     <tr>\r\n     <td>orig</td><td>Object</td><td>{}</td><td>保存动画之前的样式，用于在隐藏后还原</td>\r\n     </tr>\r\n     <tr>\r\n     <td>dataShow</td><td>Object</td><td>{}</td><td>保存元素在显示时的各种尺寸，用于在显示前还原</td>\r\n     </tr>\r\n     \r\n     <tr>\r\n     <td>bind(type, fn, unshift)</td><td></td><td></td><td>\r\n     <table border=\"1\">\r\n     <tbody><tr>\r\n     <th style=\"width:100px\">参数名/返回值</th><th style=\"width:70px\">类型</th> <th>说明</th> </tr>\r\n     <tr>\r\n     <td>type</td>\r\n     <td>String</td>\r\n     <td>事件名</td>\r\n     </tr>\r\n     <tr>\r\n     <td>fn</td>\r\n     <td>Function</td>\r\n     <td>回调，this为元素节点</td>\r\n     </tr>\r\n     <tr>\r\n     <td>unshift</td>\r\n     <td>Undefined|String</td>\r\n     <td>判定是插在最前还是最后</td>\r\n     </tr>\r\n     </tbody></table>\r\n     </td>\r\n     </tr>\r\n     <tr>\r\n     <td>fire(type, [otherArgs..])</td><td></td><td></td><td>触发回调，可以传N多参数</td></tr>           \r\n     </table>\r\n     */\r\n    function Frame(elem) {\r\n        this.$events = {}\r\n        this.elem = elem\r\n        this.troops = []\r\n        this.tweens = []\r\n        this.orig = []\r\n        this.props = {}\r\n        this.dataShow = {}\r\n    }\r\n    var root = document.documentElement\r\n\r\n    vmcore.isHidden = function(node) {\r\n        return  node.sourceIndex === 0 || vmcore.css(node, \"display\") === \"none\" || !vmcore.contains(root, node)\r\n    }\r\n\r\n    Frame.prototype = {\r\n        constructor: Frame,\r\n        bind: function(type, fn, unshift) {\r\n            var fns = this.$events[type] || (this.$events[type] = []);\r\n            var method = unshift ? \"unshift\" : \"push\"\r\n            fns[method](fn)\r\n        },\r\n        fire: function(type) {\r\n            var args = Array.prototype.slice.call(arguments, 1)\r\n            var fns = this.$events[type] || []\r\n            for (var i = 0, fn; fn = fns[i++]; ) {\r\n                fn.call(this.elem, args)\r\n            }\r\n        },\r\n        build: function() {\r\n            var frame = this\r\n            var elem = frame.elem\r\n            var props = frame.props\r\n            var style = elem.style\r\n            var inlineBlockNeedsLayout = !window.getComputedStyle\r\n            //show 开始时计算其width1 height1 保存原来的width height display改为inline-block或block overflow处理 赋值（width1，height1）\r\n            //hide 保存原来的width height 赋值为(0,0) overflow处理 结束时display改为none;\r\n            //toggle 开始时判定其是否隐藏，使用再决定使用何种策略\r\n            if (elem.nodeType === 1 && (\"height\" in props || \"width\" in props)) {\r\n                //如果是动画则必须将它显示出来\r\n                frame.overflow = [style.overflow, style.overflowX, style.overflowY]\r\n                var display = style.display || vmcore.css(elem, \"display\")\r\n                var oldDisplay = elem.getAttribute(\"olddisplay\")\r\n                if (!oldDisplay) {\r\n                    if (display === \"none\") {\r\n                        style.display = \"\"//尝试清空行内的display\r\n                        display = vmcore.css(elem, \"display\")\r\n                        if (display === \"none\") {\r\n                            display = vmcore.parseDisplay(elem.nodeName)\r\n                        }\r\n                    }\r\n                    elem.setAttribute(\"olddisplay\", display)\r\n                } else {\r\n                    if (display !== \"none\") {\r\n                        elem.setAttribute(\"olddisplay\", display)\r\n                    } else {\r\n                        display = oldDisplay\r\n                    }\r\n                }\r\n                style.display = display\r\n                //修正内联元素的display为inline-block，以让其可以进行width/height的动画渐变\r\n                if (display === \"inline\" && vmcore.css(elem, \"float\") === \"none\") {\r\n                    if (!inlineBlockNeedsLayout || vmcore.parseDisplay(elem.nodeName) === \"inline\") {\r\n                        style.display = \"inline-block\"\r\n                    } else {\r\n                        style.zoom = 1\r\n                    }\r\n                }\r\n            }\r\n            if (frame.overflow) {\r\n                style.overflow = \"hidden\"\r\n                frame.bind(\"after\", function() {\r\n                    style.overflow = frame.overflow[ 0 ]\r\n                    style.overflowX = frame.overflow[ 1 ]\r\n                    style.overflowY = frame.overflow[ 2 ]\r\n                    frame.overflow = null\r\n                })\r\n            }\r\n\r\n            frame.bind(\"after\", function() {\r\n                if (frame.showState === \"hide\") {\r\n                    this.style.display = \"none\"\r\n                    this.dataShow = {}\r\n                    for (var i in frame.orig) { //还原为初始状态\r\n                        this.dataShow[i] = frame.orig[i]\r\n                        vmcore.css(this, i, frame.orig[i])\r\n                    }\r\n                }\r\n            })\r\n            this.build = vmcore.noop //让其无效化\r\n        },\r\n        createTweens: function() {\r\n            var hidden = vmcore.isHidden(this.elem)\r\n            for (var i in this.props) {\r\n                createTweenImpl(this, i, this.props[i], hidden)\r\n            }\r\n        },\r\n        revertTweens: function() {\r\n            for (var i = 0, tween; tween = this.tweens[i++]; ) {\r\n                var start = tween.start\r\n                var end = tween.end\r\n                tween.start = end\r\n                tween.end = start\r\n                this.props[tween.name] = Array.isArray(tween.start) ?\r\n                        \"rgb(\" + tween.start + \")\" :\r\n                        (tween.unit ? tween.start + tween.unit : tween.start)\r\n            }\r\n            this.revert = !this.revert\r\n        }\r\n    }\r\n\r\n    var rfxnum = new RegExp(\"^(?:([+-])=|)(\" + (/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/).source + \")([a-z%]*)$\", \"i\")\r\n\r\n    function createTweenImpl(frame, name, value, hidden) {\r\n        var elem = frame.elem\r\n        var dataShow = elem.dataShow || {}\r\n        var tween = new Tween(name, frame)\r\n        var from = dataShow[name] || tween.cur() //取得起始值\r\n        var to\r\n        if (/color$/.test(name)) {\r\n            //用于分解属性包中的样式或属性,变成可以计算的因子\r\n            parts = [color2array(from), color2array(value)]\r\n        } else {\r\n            parts = rfxnum.exec(from)\r\n            var unit = parts && parts[ 3 ] || (vmcore.cssNumber[ name ] ? \"\" : \"px\")\r\n            //处理 toggle, show, hide\r\n            if (value === \"toggle\") {\r\n                value = hidden ? \"show\" : \"hide\"\r\n            }\r\n            if (value === \"show\") {\r\n                frame.showState = \"show\"\r\n                vmcore.css(elem, name, 0);\r\n                parts = [0, parseFloat(from)]\r\n            } else if (value === \"hide\") {\r\n                frame.showState = \"hide\"\r\n                frame.orig[name] = from\r\n                parts = [parseFloat(from), 0]\r\n                value = 0;\r\n            } else {// \"18em\"  \"+=18em\"\r\n                parts = rfxnum.exec(value)//[\"+=18em\", \"+=\", \"18\", \"em\"]\r\n                if (parts) {\r\n                    parts[2] = parseFloat(parts[2]) //18\r\n                    if (parts[3] && parts[ 3 ] !== unit) {//如果存在单位，并且与之前的不一样，需要转换\r\n                        var clone = elem.cloneNode(true)\r\n                        clone.style.visibility = \"hidden\"\r\n                        clone.style.position = \"absolute\"\r\n                        elem.parentNode.appendChild(clone)\r\n                        vmcore.css(clone, name, parts[2] + (parts[3] ? parts[3] : 0))\r\n                        parts[ 2 ] = parseFloat(vmcore.css(clone, name))\r\n                        elem.parentNode.removeChild(clone)\r\n                    }\r\n                    to = parts[2]\r\n                    from = parseFloat(from)\r\n                    if (parts[ 1 ]) {\r\n                        to = from + (parts[ 1 ] + 1) * parts[ 2 ]\r\n                    }\r\n                    parts = [from, to]\r\n                }\r\n            }\r\n        }\r\n        from = parts[0]\r\n        to = parts[1]\r\n        if (from + \"\" !== to + \"\") { //不处理起止值都一样的样式与属性\r\n            tween.start = from\r\n            tween.end = to\r\n            tween.unit = unit\r\n            frame.tweens.push(tween)\r\n        } else {\r\n            delete frame.props[name]\r\n        }\r\n    }\r\n    /*********************************************************************\r\n     *                                 渐变动画                            *\r\n     **********************************************************************/\r\n    /**\r\n     * @other\r\n     * <p>渐变动画<code>Tween</code>是我们实现各种特效的最小单位，它用于修改某一个属性值或样式值</p>\r\n     *<p><strong>Tween</strong>对象拥有以下方法与属性</p>\r\n     <table class=\"table-doc\" border=\"1\">\r\n     <colgroup>\r\n     <col width=\"180\"/> <col width=\"80\"/> <col width=\"120\"/>\r\n     </colgroup>\r\n     <tr>\r\n     <th>名字</th><th>类型</th><th>默认值</th><th>说明</th>\r\n     </tr>\r\n     <tr>\r\n     <td>elem</td><td>Element</td><td></td><td>元素节点</td>\r\n     </tr>\r\n     <tr>\r\n     <td>prop</td><td>String</td><td>\"\"</td><td>属性名或样式名，以驼峰风格存在</td>\r\n     </tr>\r\n     <tr>\r\n     <td>start</td><td>Number</td><td>0</td><td>渐变的开始值</td>\r\n     </tr>\r\n     <tr>\r\n     <td>end</td><td>Number</td><td>0</td><td>渐变的结束值</td>\r\n     </tr>\r\n     <tr>\r\n     <td>now</td><td>Number</td><td>0</td><td>当前值</td>\r\n     </tr>\r\n     <tr>\r\n     <td>run(per, end)</td><td></td><td></td><td>更新元素的某一样式或属性，内部调用</td>\r\n     </tr>\r\n     <tr>\r\n     <td>cur()</td><td></td><td></td><td>取得当前值</td>\r\n     </tr>\r\n     </table>\r\n     */\r\n    function Tween(prop, options) {\r\n        this.elem = options.elem\r\n        this.prop = prop\r\n        this.easing = vmcore.easing[options.easing]\r\n        if (/color$/i.test(prop)) {\r\n            this.update = this.updateColor\r\n        }\r\n    }\r\n\r\n    Tween.prototype = {\r\n        constructor: Tween,\r\n        cur: function() {//取得当前值\r\n            var hooks = Tween.propHooks[ this.prop ]\r\n            return hooks && hooks.get ?\r\n                    hooks.get(this) :\r\n                    Tween.propHooks._default.get(this)\r\n        },\r\n        run: function(per, end) {//更新元素的某一样式或属性\r\n            this.update(per, end)\r\n            var hook = Tween.propHooks[ this.prop ]\r\n            if (hook && hook.set) {\r\n                hook.set(this);\r\n            } else {\r\n                Tween.propHooks._default.set(this)\r\n            }\r\n        },\r\n        updateColor: function(per, end) {\r\n            if (end) {\r\n                var rgb = this.end\r\n            } else {\r\n                var pos = this.easing(per)\r\n                rgb = this.start.map(function(from, i) {\r\n                    return Math.max(Math.min(parseInt(from + (this.end[i] - from) * pos, 10), 255), 0)\r\n                }, this)\r\n            }\r\n            this.now = \"rgb(\" + rgb + \")\"\r\n        },\r\n        update: function(per, end) {\r\n            this.now = (end ? this.end : this.start + this.easing(per) * (this.end - this.start))\r\n        }\r\n    }\r\n\r\n    Tween.propHooks = {\r\n        _default: {\r\n            get: function(tween) {\r\n                var result = vmcore.css(tween.elem, tween.prop)\r\n                return !result || result === \"auto\" ? 0 : result\r\n            },\r\n            set: function(tween) {\r\n                vmcore.css(tween.elem, tween.prop, tween.now + tween.unit)\r\n            }\r\n        }\r\n    }\r\n\r\n    vmcore.each([\"scrollTop\", \"scollLeft\"], function(name) {\r\n        Tween.propHooks[name] = {\r\n            get: function(tween) {\r\n                return tween.elem[tween.name]\r\n            },\r\n            set: function(tween) {\r\n                tween.elem[tween.name] = tween.now\r\n            }\r\n        }\r\n    })\r\n    /*********************************************************************\r\n     *                                  原型方法                            *\r\n     **********************************************************************/\r\n\r\n    vmcore.fn.mix({\r\n        delay: function(ms) {\r\n            return this.animate(ms)\r\n        },\r\n        pause: function() {\r\n            var cur = this[0]\r\n            for (var i = 0, frame; frame = timeline[i]; i++) {\r\n                if (frame.elme === cur) {\r\n                    frame.paused = new Date - 0\r\n                }\r\n            }\r\n            return this\r\n        },\r\n        resume: function() {\r\n            var now = new Date\r\n            var elem = this[0]\r\n            for (var i = 0, fx; fx = timeline[i]; i++) {\r\n                if (fx.elem === elem) {\r\n                    fx.startTime += (now - fx.paused)\r\n                    delete fx.paused\r\n                }\r\n            }\r\n            return this\r\n        },\r\n        //如果clearQueue为true，是否清空列队\r\n        //如果gotoEnd 为true，是否跳到此动画最后一帧\r\n        stop: function(clearQueue, gotoEnd) {\r\n            clearQueue = clearQueue ? \"1\" : \"\"\r\n            gotoEnd = gotoEnd ? \"1\" : \"0\"\r\n            var stopCode = parseInt(clearQueue + gotoEnd, 2) //返回0 1 2 3\r\n            var node = this[0]\r\n            for (var i = 0, frame; frame = timeline[i]; i++) {\r\n                if (frame.elem === node) {\r\n                    frame.gotoEnd = true\r\n                    switch (stopCode) { //如果此时调用了stop方法\r\n                        case 0:\r\n                            //中断当前动画，继续下一个动画\r\n                            frame.update = frame.revert = false\r\n                            break\r\n                        case 1:\r\n                            //立即跳到最后一帧，继续下一个动画\r\n                            frame.revert = false\r\n                            break\r\n                        case 2:\r\n                            //清空该元素的所有动画\r\n                            delete frame.elem\r\n                            break\r\n                        case 3:\r\n                            //立即完成该元素的所有动画\r\n                            frame.troops.forEach(function(a) {\r\n                                a.gotoEnd = true\r\n                            })\r\n                            break\r\n                    }\r\n                }\r\n            }\r\n            return this\r\n        }\r\n    })\r\n    /*********************************************************************\r\n     *                                 常用特效                            *\r\n     **********************************************************************/\r\n    var fxAttrs = [\r\n        [\"height\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"],\r\n        [\"width\", \"marginLeft\", \"marginRight\", \"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\"],\r\n        [\"opacity\"]\r\n    ]\r\n    function genFx(type, num) { //生成属性包\r\n        var obj = {}\r\n        fxAttrs.concat.apply([], fxAttrs.slice(0, num)).forEach(function(name) {\r\n            obj[name] = type\r\n            if (~name.indexOf(\"margin\")) {\r\n                Tween.propHooks[name] = {\r\n                    get: Tween.propHooks._default.get,\r\n                    set: function(tween) {\r\n                        tween.elem.style[tween.name] = Math.max(tween.now, 0) + tween.unit\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return obj\r\n    }\r\n\r\n\r\n    var effects = {\r\n        slideDown: genFx(\"show\", 1),\r\n        slideUp: genFx(\"hide\", 1),\r\n        slideToggle: genFx(\"toggle\", 1),\r\n        fadeIn: {\r\n            opacity: \"show\"\r\n        },\r\n        fadeOut: {\r\n            opacity: \"hide\"\r\n        },\r\n        fadeToggle: {\r\n            opacity: \"toggle\"\r\n        }\r\n    }\r\n\r\n    vmcore.each(effects, function(method, props) {\r\n        vmcore.fn[method] = function() {\r\n            var args = [].concat.apply([props], arguments)\r\n            return this.animate.apply(this, args)\r\n        }\r\n    })\r\n\r\n    String(\"toggle,show,hide\").replace(vmcore.rword, function(name) {\r\n        vmcore.fn[name] = function() {\r\n            var args = [].concat.apply([genFx(name, 3)], arguments)\r\n            return this.animate.apply(this, args)\r\n        }\r\n    })\r\n    /*********************************************************************\r\n     *                      转换各种颜色值为RGB数组                            *\r\n     **********************************************************************/\r\n    var colorMap = {\r\n        \"black\": [0, 0, 0],\r\n        \"gray\": [128, 128, 128],\r\n        \"white\": [255, 255, 255],\r\n        \"orange\": [255, 165, 0],\r\n        \"red\": [255, 0, 0],\r\n        \"green\": [0, 128, 0],\r\n        \"yellow\": [255, 255, 0],\r\n        \"blue\": [0, 0, 255]\r\n    }\r\n    if (window.VBArray) {\r\n        var parseColor = new function() {\r\n            var body\r\n            try {\r\n                var doc = new ActiveXObject(\"htmlfile\")\r\n                doc.write(\"<body>\")\r\n                doc.close()\r\n                body = doc.body\r\n            } catch (e) {\r\n                body = createPopup().document.body\r\n            }\r\n            var range = body.createTextRange()\r\n            return function(color) {\r\n                body.style.color = String(color).trim()\r\n                var value = range.queryCommandValue(\"ForeColor\")\r\n                return [value & 0xff, (value & 0xff00) >> 8, (value & 0xff0000) >> 16]\r\n            }\r\n        }\r\n    }\r\n\r\n    function color2array(val) { //将字符串变成数组\r\n        var color = val.toLowerCase(),\r\n                ret = []\r\n        if (colorMap[color]) {\r\n            return colorMap[color]\r\n        }\r\n        if (color.indexOf(\"rgb\") === 0) {\r\n            var match = color.match(/(\\d+%?)/g),\r\n                    factor = match[0].indexOf(\"%\") !== -1 ? 2.55 : 1\r\n            return (colorMap[color] = [parseInt(match[0]) * factor, parseInt(match[1]) * factor, parseInt(match[2]) * factor])\r\n        } else if (color.charAt(0) === '#') {\r\n            if (color.length === 4)\r\n                color = color.replace(/([^#])/g, '$1$1')\r\n            color.replace(/\\w{2}/g, function(a) {\r\n                ret.push(parseInt(a, 16))\r\n            })\r\n            return (colorMap[color] = ret)\r\n        }\r\n        if (window.VBArray) {\r\n            return (colorMap[color] = parseColor(color))\r\n        }\r\n        return colorMap.white\r\n    }\r\n    vmcore.parseColor = color2array\r\n    return vmcore\r\n})\r\n",
    "_base/class.js": "/**\r\n * The base Class implementation.\r\n * @module _utils/class\r\n * @date 2014-04-10 15:37:25\r\n * @version $Id: class.js$\r\n * @example\r\n *  var Pig = Class.create({\r\n *      initialize: function(name) {\r\n *          this.name = name;\r\n *      },\r\n *      talk: function() {\r\n *          alert('我是' + this.name);\r\n *      }\r\n *  });\r\n *  var RedPig = Pig.extend({\r\n *      initialize: function(name) {\r\n *          RedPig.superclass.initialize.call(this, name);\r\n *      },\r\n *      color: '红色'\r\n *  });\r\n *  \r\n */\r\ndefine('_base/class',function(){\r\n    // The base Class implementation.\r\n    var Class = function(o) {\r\n        // Convert existed function to Class.\r\n        if (!(this instanceof Class) && isFunction(o)) {\r\n            return classify(o);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * {@link https://github.com/aralejs/class class} \r\n     */\r\n    var toString = Object.prototype.toString;\r\n    var isArray = Array.isArray || function(val) {\r\n        return toString.call(val) === \"[object Array]\";\r\n    };\r\n    var isFunction = function(val) {\r\n        return toString.call(val) === \"[object Function]\";\r\n    };\r\n    var indexOf = Array.prototype.indexOf ? function(arr, item) {\r\n        return arr.indexOf(item);\r\n    } : function(arr, item) {\r\n        for (var i = 0, len = arr.length; i < len; i++) {\r\n            if (arr[i] === item) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n\r\n    Class.create = function(parent, properties) {\r\n        if (!isFunction(parent)) {\r\n            properties = parent;\r\n            parent = null;\r\n        }\r\n        properties || (properties = {});\r\n        parent || (parent = properties.Extends || Class);\r\n        properties.Extends = parent;\r\n        // The created class constructor\r\n        function SubClass() {\r\n            // Call the parent constructor.\r\n            parent.apply(this, arguments);\r\n            // Only call initialize in self constructor.\r\n            if (this.constructor === SubClass && this.initialize) {\r\n                this.initialize.apply(this, arguments);\r\n            }\r\n        }\r\n        // Inherit class (static) properties from parent.\r\n        if (parent !== Class) {\r\n            mix(SubClass, parent, parent.StaticsWhiteList);\r\n        }\r\n        // Add instance properties to the subclass.\r\n        implement.call(SubClass, properties);\r\n        // Make subclass extendable.\r\n        return classify(SubClass);\r\n    };\r\n    function implement(properties) {\r\n        var key, value;\r\n        for (key in properties) {\r\n            value = properties[key];\r\n            if (Class.Mutators.hasOwnProperty(key)) {\r\n                Class.Mutators[key].call(this, value);\r\n            } else {\r\n                this.prototype[key] = value;\r\n            }\r\n        }\r\n    }\r\n    // Create a sub Class based on `Class`.\r\n    Class.extend = function(properties) {\r\n        properties || (properties = {});\r\n        properties.Extends = this;\r\n        return Class.create(properties);\r\n    };\r\n    function classify(cls) {\r\n        cls.extend = Class.extend;\r\n        cls.implement = implement;\r\n        return cls;\r\n    }\r\n    // Mutators define special properties.\r\n    Class.Mutators = {\r\n        Extends: function(parent) {\r\n            var existed = this.prototype;\r\n            var proto = createProto(parent.prototype);\r\n            // Keep existed properties.\r\n            mix(proto, existed);\r\n            // Enforce the constructor to be what we expect.\r\n            proto.constructor = this;\r\n            // Set the prototype chain to inherit from `parent`.\r\n            this.prototype = proto;\r\n            // Set a convenience property in case the parent's prototype is\r\n            // needed later.\r\n            this.superclass = parent.prototype;\r\n        },\r\n        Implements: function(items) {\r\n            isArray(items) || (items = [ items ]);\r\n            var proto = this.prototype, item;\r\n            while (item = items.shift()) {\r\n                mix(proto, item.prototype || item);\r\n            }\r\n        },\r\n        Statics: function(staticProperties) {\r\n            mix(this, staticProperties);\r\n        }\r\n    };\r\n    // Shared empty constructor function to aid in prototype-chain creation.\r\n    function Ctor() {}\r\n    // See: http://jsperf.com/object-create-vs-new-ctor\r\n    var createProto = Object.__proto__ ? function(proto) {\r\n        return {\r\n            __proto__: proto\r\n        };\r\n    } : function(proto) {\r\n        Ctor.prototype = proto;\r\n        return new Ctor();\r\n    };\r\n    // Helpers\r\n    // ------------\r\n    function mix(r, s, wl) {\r\n        // Copy \"all\" properties including inherited ones.\r\n        for (var p in s) {\r\n            if (s.hasOwnProperty(p)) {\r\n                if (wl && indexOf(wl, p) === -1) continue;\r\n                // 在 iPhone 1 代等设备的 Safari 中，prototype 也会被枚举出来，需排除\r\n                if (p !== \"prototype\") {\r\n                    r[p] = s[p];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return Class; \r\n});\r\n",
    "_base/history.js": "/*\r\n * 浏览历史记录控制模块\r\n */\r\ndefine('_base/history',['vmcore'],function(vmcore) {\r\n    var anchorElement = document.createElement('a')\r\n\r\n    var History = vmcore.History = function() {\r\n        this.location = location\r\n    }\r\n\r\n    History.started = false\r\n    //取得当前IE的真实运行环境\r\n    History.IEVersion = (function() {\r\n        var mode = document.documentMode\r\n        return mode ? mode : window.XMLHttpRequest ? 7 : 6\r\n    })()\r\n\r\n    History.defaults = {\r\n        basepath: \"/\",\r\n        html5Mode: false,\r\n        hashPrefix: \"!\",\r\n        iframeID: null, //IE6-7，如果有在页面写死了一个iframe，这样似乎刷新的时候不会丢掉之前的历史\r\n        interval: 50, //IE6-7,使用轮询，这是其时间时隔\r\n        fireAnchor: true//决定是否将滚动条定位于与hash同ID的元素上\r\n    }\r\n\r\n    var oldIE = window.VBArray && History.IEVersion <= 7\r\n    var supportPushState = !!(window.history.pushState)\r\n    var supportHashChange = !!(\"onhashchange\" in window && (!window.VBArray || !oldIE))\r\n    History.prototype = {\r\n        constructor: History,\r\n        getFragment: function(fragment) {\r\n            if (fragment == null) {\r\n                if (this.monitorMode === \"popstate\") {\r\n                    fragment = this.getPath()\r\n                } else {\r\n                    fragment = this.getHash()\r\n                }\r\n            }\r\n            return fragment.replace(/^[#\\/]|\\s+$/g, \"\")\r\n        },\r\n        getHash: function(window) {\r\n            // IE6直接用location.hash取hash，可能会取少一部分内容\r\n            // 比如 http://www.cnblogs.com/rubylouvre#stream/xxxxx?lang=zh_c\r\n            // ie6 => location.hash = #stream/xxxxx\r\n            // 其他浏览器 => location.hash = #stream/xxxxx?lang=zh_c\r\n            // firefox 会自作多情对hash进行decodeURIComponent\r\n            // 又比如 http://www.cnblogs.com/rubylouvre/#!/home/q={%22thedate%22:%2220121010~20121010%22}\r\n            // firefox 15 => #!/home/q={\"thedate\":\"20121010~20121010\"}\r\n            // 其他浏览器 => #!/home/q={%22thedate%22:%2220121010~20121010%22}\r\n            var path = (window || this).location.href\r\n            return this._getHash(path.slice(path.indexOf(\"#\")))\r\n        },\r\n        _getHash: function(path) {\r\n            if (path.indexOf(\"#/\") === 0) {\r\n                return decodeURIComponent(path.slice(2))\r\n            }\r\n            if (path.indexOf(\"#!/\") === 0) {\r\n                return decodeURIComponent(path.slice(3))\r\n            }\r\n            return \"\"\r\n        },\r\n        getPath: function() {\r\n            var path = decodeURIComponent(this.location.pathname + this.location.search)\r\n            var root = this.basepath.slice(0, -1)\r\n            if (!path.indexOf(root))\r\n                path = path.slice(root.length)\r\n            return path.slice(1)\r\n        },\r\n        _getAbsolutePath: function(a) {\r\n            return !a.hasAttribute ? a.getAttribute(\"href\", 4) : a.href\r\n        },\r\n        start: function(options) {\r\n            if (History.started)\r\n                throw new Error(\"vmcore.history has already been started\")\r\n            History.started = true\r\n            this.options = vmcore.mix({}, History.defaults, options)\r\n            //IE6不支持maxHeight, IE7支持XMLHttpRequest, IE8支持window.Element，querySelector, \r\n            //IE9支持window.Node, window.HTMLElement, IE10不支持条件注释\r\n            //确保html5Mode属性存在,并且是一个布尔\r\n            this.html5Mode = !!this.options.html5Mode\r\n            //监听模式\r\n            this.monitorMode = this.html5Mode ? \"popstate\" : \"hashchange\"\r\n            if (!supportPushState) {\r\n                if (this.html5Mode) {\r\n                    vmcore.log(\"如果浏览器不支持HTML5 pushState，强制使用hash hack!\")\r\n                    this.html5Mode = false\r\n                }\r\n                this.monitorMode = \"hashchange\"\r\n            }\r\n            if (!supportHashChange) {\r\n                this.monitorMode = \"iframepoll\"\r\n            }\r\n            this.prefix = \"#\" + this.options.hashPrefix + \"/\"\r\n            //确认前后都存在斜线， 如\"aaa/ --> /aaa/\" , \"/aaa --> /aaa/\", \"aaa --> /aaa/\", \"/ --> /\"\r\n            this.basepath = (\"/\" + this.options.basepath + \"/\").replace(/^\\/+|\\/+$/g, \"/\")  // 去最左右两边的斜线\r\n\r\n            this.fragment = this.getFragment()\r\n\r\n            anchorElement.href = this.basepath\r\n            this.rootpath = this._getAbsolutePath(anchorElement)\r\n            var that = this\r\n\r\n            var html = '<!doctype html><html><body>@</body></html>'\r\n            if (this.options.domain) {\r\n                html = html.replace(\"<body>\", \"<script>document.domain =\" + this.options.domain + \"</script><body>\")\r\n            }\r\n            this.iframeHTML = html\r\n            if (this.monitorMode === \"iframepoll\") {\r\n                //IE6,7在hash改变时不会产生历史，需要用一个iframe来共享历史\r\n                vmcore.ready(function() {\r\n                    var iframe = that.iframe || document.getElementById(that.iframeID) || document.createElement('iframe')\r\n                    iframe.src = 'javascript:0'\r\n                    iframe.style.display = 'none'\r\n                    iframe.tabIndex = -1\r\n                    document.body.appendChild(iframe)\r\n                    that.iframe = iframe.contentWindow\r\n                    that._setIframeHistory(that.prefix + that.fragment)\r\n                })\r\n\r\n            }\r\n\r\n            // 支持popstate 就监听popstate\r\n            // 支持hashchange 就监听hashchange\r\n            // 否则的话只能每隔一段时间进行检测了\r\n            function checkUrl(e) {\r\n                var iframe = that.iframe\r\n                if (that.monitorMode === \"iframepoll\" && !iframe) {\r\n                    return false\r\n                }\r\n                var pageHash = that.getFragment(), hash\r\n                if (iframe) {//IE67\r\n                    var iframeHash = that.getHash(iframe)\r\n                    //与当前页面hash不等于之前的页面hash，这主要是用户通过点击链接引发的\r\n                    if (pageHash !== that.fragment) {\r\n                        that._setIframeHistory(that.prefix + pageHash)\r\n                        hash = pageHash\r\n                        //如果是后退按钮触发hash不一致\r\n                    } else if (iframeHash !== that.fragment) {\r\n                        that.location.hash = that.prefix + iframeHash\r\n                        hash = iframeHash\r\n                    }\r\n\r\n                } else if (pageHash !== that.fragment) {\r\n                    hash = pageHash\r\n                }\r\n                if (hash !== void 0) {\r\n                    that.fragment = hash\r\n                    that.fireRouteChange(hash, {fromHistory: true})\r\n                }\r\n            }\r\n\r\n            //thanks https://github.com/browserstate/history.js/blob/master/scripts/uncompressed/history.html4.js#L272\r\n\r\n            // 支持popstate 就监听popstate\r\n            // 支持hashchange 就监听hashchange(IE8,IE9,FF3)\r\n            // 否则的话只能每隔一段时间进行检测了(IE6, IE7)\r\n            switch (this.monitorMode) {\r\n                case \"popstate\":\r\n                    this.checkUrl = vmcore.bind(window, \"popstate\", checkUrl)\r\n                    this._fireLocationChange = checkUrl\r\n                    break\r\n                case  \"hashchange\":\r\n                    this.checkUrl = vmcore.bind(window, \"hashchange\", checkUrl)\r\n                    break;\r\n                case  \"iframepoll\":\r\n                    this.checkUrl = setInterval(checkUrl, this.options.interval)\r\n                    break;\r\n            }\r\n            //根据当前的location立即进入不同的路由回调\r\n            vmcore.ready(function() {\r\n                that.fireRouteChange(that.fragment || \"/\", {replace: true})\r\n            })\r\n        },\r\n        fireRouteChange: function(hash, options) {\r\n            var router = vmcore.router\r\n            if (router && router.navigate) {\r\n                router.setLastPath(hash)\r\n                router.navigate(hash === \"/\" ? hash : \"/\" + hash, options)\r\n            }\r\n            if (this.options.fireAnchor) {\r\n                scrollToAnchorId(hash.replace(/\\?.*/g,\"\"))\r\n            }\r\n        },\r\n        // 中断URL的监听\r\n        stop: function() {\r\n            vmcore.unbind(window, \"popstate\", this.checkUrl)\r\n            vmcore.unbind(window, \"hashchange\", this.checkUrl)\r\n            clearInterval(this.checkUrl)\r\n            History.started = false\r\n        },\r\n        updateLocation: function(hash, options) {\r\n            var options = options || {},\r\n                rp = options.replace,\r\n                st =    options.silent\r\n            if (this.monitorMode === \"popstate\") {\r\n                var path = this.rootpath + hash\r\n                if(path != this.location.pathname) history[rp ? \"replaceState\" : \"pushState\"]({path: path}, document.title, path)\r\n                if(!st) this._fireLocationChange()\r\n            } else {\r\n                var newHash = this.prefix + hash\r\n                if(st && hash != this.getHash()) {\r\n                    this._setIframeHistory(newHash, rp)\r\n                    this.fragment = this._getHash(newHash)\r\n                }\r\n                this._setHash(this.location, newHash, rp)\r\n            }\r\n        },\r\n        _setHash: function(location, hash, replace){\r\n            var href = location.href.replace(/(javascript:|#).*$/, '')\r\n            if (replace){\r\n                location.replace(href + hash)\r\n            }\r\n            else location.hash = hash\r\n        },\r\n        _setIframeHistory: function(hash, replace) {\r\n            if(!this.iframe) return\r\n            var idoc = this.iframe.document\r\n                idoc.open()\r\n                idoc.write(this.iframeHTML)\r\n                idoc.close()\r\n            this._setHash(idoc.location, hash, replace)\r\n        }\r\n    }\r\n\r\n    vmcore.history = new History\r\n\r\n    //https://github.com/asual/jquery-address/blob/master/src/jquery.address.js\r\n\r\n    //劫持页面上所有点击事件，如果事件源来自链接或其内部，\r\n    //并且它不会跳出本页，并且以\"#/\"或\"#!/\"开头，那么触发updateLocation方法\r\n    vmcore.bind(document, \"click\", function(event) {\r\n        var defaultPrevented = \"defaultPrevented\" in event ? event['defaultPrevented'] : event.returnValue === false\r\n        if (defaultPrevented || event.ctrlKey || event.metaKey || event.which === 2)\r\n            return\r\n        var target = event.target\r\n        while (target.nodeName !== \"A\") {\r\n            target = target.parentNode\r\n            if (!target || target.tagName === \"BODY\") {\r\n                return\r\n            }\r\n        }\r\n\r\n        if (targetIsThisWindow(target.target)) {\r\n            var href = oldIE ? target.getAttribute(\"href\", 2) : target.getAttribute(\"href\") || target.getAttribute(\"xlink:href\")\r\n            var prefix = vmcore.history.prefix\r\n            if (href === null) { // href is null if the attribute is not present\r\n                return\r\n            }\r\n            var hash = href.replace(prefix, \"\").trim()\r\n            if (href.indexOf(prefix) === 0 && hash !== \"\") {\r\n                event.preventDefault()\r\n                vmcore.router && vmcore.router.navigate(hash)\r\n            }\r\n        }\r\n    })\r\n\r\n    //判定A标签的target属性是否指向自身\r\n    //thanks https://github.com/quirkey/sammy/blob/master/lib/sammy.js#L219\r\n    function targetIsThisWindow(targetWindow) {\r\n        if (!targetWindow || targetWindow === window.name || targetWindow === '_self' || (targetWindow === 'top' && window == window.top)) {\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n    //得到页面第一个符合条件的A标签\r\n    function getFirstAnchor(list) {\r\n        for (var i = 0, el; el = list[i++]; ) {\r\n            if (el.nodeName === \"A\") {\r\n                return el\r\n            }\r\n        }\r\n    }\r\n\r\n    function scrollToAnchorId(hash, el) {\r\n        if ((el = document.getElementById(hash))) {\r\n            el.scrollIntoView()\r\n        } else if ((el = getFirstAnchor(document.getElementsByName(hash)))) {\r\n            el.scrollIntoView()\r\n        } else {\r\n            window.scrollTo(0, 0)\r\n        }\r\n    }\r\n    return vmcore\r\n})\r\n\r\n// 主要参数有 basepath  html5Mode  hashPrefix  interval domain fireAnchor\r\n",
    "_base/promise.js": "define('_base/promise',['vmcore'],function(vmcore) {\r\n//chrome36的原生Promise还多了一个defer()静态方法，允许不通过传参就能生成Promise实例，\r\n//另还多了一个chain(onSuccess, onFail)原型方法，意义不明\r\n//目前，firefox24, opera19也支持原生Promise(chrome32就支持了，但需要打开开关，自36起直接可用)\r\n//本模块提供的Promise完整实现ECMA262v6 的Promise规范\r\n    var mmPromise\r\n    if (/native code/.test(window.Promise)) {\r\n        mmPromise = window.Promise\r\n    } else {\r\n        var msPromise = function(executor) {\r\n            this._callbacks = []\r\n            var that = this\r\n            if (typeof this !== 'object')\r\n                throw new TypeError('Promises must be constructed via new')\r\n            if (typeof executor !== 'function')\r\n                throw new TypeError('not a function')\r\n            executor(function(value) {\r\n                _resolve(that, value)\r\n            }, function(reason) {\r\n                _reject(that, reason)\r\n            })\r\n        }\r\n        var setImmediate = typeof window.setImmediate === \"function\" ? function(fn) {\r\n            window.setImmediate(fn)\r\n        } : function(fn) {\r\n            window.setTimeout(fn, 0)\r\n        }\r\n        //返回一个已经处于`resolved`状态的Promise对象\r\n        msPromise.resolve = function(value) {\r\n            return new msPromise(function(resolve) {\r\n                resolve(value)\r\n            })\r\n        }\r\n        //返回一个已经处于`rejected`状态的Promise对象\r\n        msPromise.reject = function(reason) {\r\n            return new msPromise(function(resolve, reject) {\r\n                reject(reason)\r\n            })\r\n        }\r\n\r\n        msPromise.prototype = {\r\n            //一个Promise对象一共有3个状态：\r\n            //- `pending`：还处在等待状态，并没有明确最终结果\r\n            //- `resolved`：任务已经完成，处在成功状态\r\n            //- `rejected`：任务已经完成，处在失败状态\r\n            constructor: msPromise,\r\n            _state: \"pending\",\r\n            _fired: false, //判定是否已经被触发\r\n            _fire: function(onSuccess, onFail) {\r\n                if (this._state === \"rejected\") {\r\n                    if (typeof onFail === \"function\") {\r\n                        onFail(this._value)\r\n                    } else {\r\n                        throw this._value\r\n                    }\r\n                } else {\r\n                    if (typeof onSuccess === \"function\") {\r\n                        onSuccess(this._value)\r\n                    }\r\n                }\r\n            },\r\n            _then: function(onSuccess, onFail) {\r\n                if (this._fired) {//在已有Promise上添加回调\r\n                    var that = this\r\n                    setImmediate(function() {\r\n                        that._fire(onSuccess, onFail)\r\n                    });\r\n                } else {\r\n                    this._callbacks.push({onSuccess: onSuccess, onFail: onFail})\r\n                }\r\n            },\r\n            then: function(onSuccess, onFail) {\r\n                var parent = this//在新的Promise上添加回调\r\n\r\n                return new msPromise(function(resolve, reject) {\r\n                    parent._then(function(value) {\r\n                        if (typeof onSuccess === \"function\") {\r\n                            try {\r\n                                value = onSuccess(value)\r\n                            } catch (e) {\r\n                                reject(e)\r\n                                return\r\n                            }\r\n                        }\r\n                        resolve(value)\r\n                    }, function(value) {\r\n                        if (typeof onFail === \"function\") {\r\n                            try {\r\n                                value = onFail(value)\r\n                            } catch (e) {\r\n                                reject(e)\r\n                                return\r\n                            }\r\n                            resolve(value)\r\n                        } else {\r\n                            reject(value)\r\n                        }\r\n                    })\r\n                })\r\n            },\r\n            \"done\": done,\r\n            \"catch\": fail,\r\n            \"fail\": fail\r\n        }\r\n        function _resolve(promise, value) {//触发成功回调\r\n            if (promise._state !== \"pending\")\r\n                return;\r\n            promise._state = \"fulfilled\"\r\n            if (value && typeof value.then === \"function\") {\r\n                //thenable对象使用then，Promise实例使用_then\r\n                var method = value instanceof msPromise ? \"_then\" : \"then\"\r\n                value[method](function(val) {\r\n                    _transmit(promise, val)\r\n                }, function(reason) {\r\n                    promise._state = \"rejected\"\r\n                    _transmit(promise, reason)\r\n                });\r\n            } else {\r\n                _transmit(promise, value);\r\n            }\r\n        }\r\n        function _reject(promise, value) {//触发失败回调\r\n            if (promise._state !== \"pending\")\r\n                return\r\n            promise._state = \"rejected\"\r\n            _transmit(promise, value)\r\n        }\r\n        //改变Promise的_fired值，并保持用户传参，触发所有回调\r\n        function _transmit(promise, value) {\r\n            promise._fired = true;\r\n            promise._value = value;\r\n            setImmediate(function() {\r\n                promise._callbacks.forEach(function(data) {\r\n                    promise._fire(data.onSuccess, data.onFail);\r\n                })\r\n            })\r\n        }\r\n        function _some(any, iterable) {\r\n            iterable = Array.isArray(iterable) ? iterable : []\r\n            var n = 0, result = [], end\r\n            return new msPromise(function(resolve, reject) {\r\n                // 空数组直接resolve\r\n                if(!iterable.length) resolve()\r\n                function loop(a, index) {\r\n                    a.then(function(ret) {\r\n                        if (!end) {\r\n                            result[index] = ret//保证回调的顺序\r\n                            n++\r\n                            if (any || n >= iterable.length) {\r\n                                resolve(any ? ret : result)\r\n                                end = true\r\n                            }\r\n                        }\r\n                    }, function(e) {\r\n                        end = true\r\n                        reject(e)\r\n                    })\r\n                }\r\n                for (var i = 0, l = iterable.length; i < l; i++) {\r\n                    loop(iterable[i], i)\r\n                }\r\n            })\r\n        }\r\n\r\n        msPromise.all = function(iterable) {\r\n            return _some(false, iterable)\r\n        }\r\n        msPromise.race = function(iterable) {\r\n            return _some(true, iterable)\r\n        }\r\n        mmPromise = msPromise\r\n    }\r\n    function done(onSuccess) {//添加成功回调\r\n        return this.then(onSuccess)\r\n    }\r\n    function fail(onFail) {//添加出错回调\r\n        return this.then(null, onFail)\r\n    }\r\n\r\n    mmPromise.prototype.done = done\r\n    mmPromise.prototype.fail = fail\r\n    mmPromise.any = mmPromise.race\r\n    if (!mmPromise.defer) { //chrome实现的私有方法\r\n        mmPromise.defer = function() {\r\n            var ret = {};\r\n            ret.promise = new this(function(resolve, reject) {\r\n                ret.resolve = resolve\r\n                ret.reject = reject\r\n            });\r\n            return ret\r\n        }\r\n    }\r\n    return window.Promise = vmcore.Promise = mmPromise\r\n})\r\n//https://github.com/ecomfe/er/blob/master/src/Deferred.js\r\n//http://jser.info/post/77696682011/es6-promises\r\n",
    "_base/request.js": "//=========================================\r\n//  数据交互模块\r\n//==========================================\r\ndefine('_base/request',['vmcore','_base/promise'],function(vmcore) {\r\n    var global = this || (0, eval)(\"this\")\r\n    var DOC = global.document\r\n    var encode = encodeURIComponent\r\n    var decode = decodeURIComponent\r\n\r\n    var rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/\r\n    var rheaders = /^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg\r\n    var rnoContent = /^(?:GET|HEAD)$/\r\n    var rprotocol = /^\\/\\//\r\n    var rhash = /#.*$/\r\n    var rquery = /\\?/\r\n    var r20 = /%20/g\r\n\r\n    var originAnchor = document.createElement(\"a\")\r\n    originAnchor.href = location.href\r\n        //告诉WEB服务器自己接受什么介质类型，*/* 表示任何类型，type/* 表示该类型下的所有子类型，type/sub-type。\r\n    var accepts = {\r\n        xml: \"application/xml, text/xml\",\r\n        html: \"text/html\",\r\n        text: \"text/plain\",\r\n        json: \"application/json, text/javascript\",\r\n        script: \"text/javascript, application/javascript\",\r\n        \"*\": [\"*/\"] + [\"*\"] //避免被压缩掉\r\n    }\r\n\r\n    function IE() {\r\n        if (window.VBArray) {\r\n            var mode = document.documentMode\r\n            return mode ? mode : window.XMLHttpRequest ? 7 : 6\r\n        } else {\r\n            return 0\r\n        }\r\n    }\r\n    var useOnload = IE() === 0 || IE() > 8\r\n\r\n    function parseJS(code) {\r\n        var indirect = eval\r\n        code = code.trim()\r\n        if (code) {\r\n            if (code.indexOf(\"use strict\") === 1) {\r\n                var script = document.createElement(\"script\")\r\n                script.text = code;\r\n                head.appendChild(script).parentNode.removeChild(script)\r\n            } else {\r\n                indirect(code)\r\n            }\r\n        }\r\n    }\r\n\r\n    var head = DOC.getElementsByTagName(\"head\")[0] //HEAD元素\r\n    var isLocal = false\r\n    try {\r\n        //在IE下如果重置了document.domain，直接访问window.location会抛错，但用document.URL就ok了\r\n        //http://www.cnblogs.com/WuQiang/archive/2012/09/21/2697474.html\r\n        isLocal = rlocalProtocol.test(location.protocol)\r\n    } catch (e) {}\r\n\r\n    new function() {\r\n        //http://www.cnblogs.com/rubylouvre/archive/2010/04/20/1716486.html\r\n        var s = [\"XMLHttpRequest\",\r\n            \"ActiveXObject('MSXML2.XMLHTTP.6.0')\",\r\n            \"ActiveXObject('MSXML2.XMLHTTP.3.0')\",\r\n            \"ActiveXObject('MSXML2.XMLHTTP')\",\r\n            \"ActiveXObject('Microsoft.XMLHTTP')\"\r\n        ]\r\n        s[0] = IE() < 8 && isLocal ? \"!\" : s[0] //IE下只能使用ActiveXObject\r\n        for (var i = 0, axo; axo = s[i++];) {\r\n            try {\r\n                if (eval(\"new \" + axo)) {\r\n                    vmcore.xhr = new Function(\"return new \" + axo)\r\n                    break;\r\n                }\r\n            } catch (e) {}\r\n        }\r\n    }\r\n    var supportCors = \"withCredentials\" in vmcore.xhr()\r\n\r\n\r\n\r\n\r\n    function parseXML(data, xml, tmp) {\r\n        try {\r\n            var mode = document.documentMode\r\n            if (window.DOMParser && (!mode || mode > 8)) { // Standard\r\n                tmp = new DOMParser()\r\n                xml = tmp.parseFromString(data, \"text/xml\")\r\n            } else { // IE\r\n                xml = new ActiveXObject(\"Microsoft.XMLDOM\") //\"Microsoft.XMLDOM\"\r\n                xml.async = \"false\";\r\n                xml.loadXML(data)\r\n            }\r\n        } catch (e) {\r\n            xml = void 0\r\n        }\r\n        if (!xml || !xml.documentElement || xml.getElementsByTagName(\"parsererror\").length) {\r\n            vmcore.error(\"Invalid XML: \" + data)\r\n        }\r\n        return xml\r\n    }\r\n\r\n    //ajaxExtend是一个非常重要的内部方法，负责将用法参数进行规整化\r\n    //1. data转换为字符串\r\n    //2. type转换为大写\r\n    //3. url正常化，加querystring, 加时间戮\r\n    //4. 判定有没有跨域\r\n    //5. 添加hasContent参数\r\n    var defaults = {\r\n        type: \"GET\",\r\n        contentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n        async: true,\r\n        jsonp: \"callback\"\r\n    }\r\n\r\n    function ajaxExtend(opts) {\r\n        opts = vmcore.mix({}, defaults, opts)\r\n        opts.type = opts.type.toUpperCase()\r\n        var querystring = typeof opts.data === \"string\" ? opts.data : vmcore.param(opts.data)\r\n        opts.querystring = querystring || \"\"\r\n        opts.url = opts.url.replace(rhash, \"\").replace(rprotocol, location.protocol + \"//\")\r\n\r\n        if (typeof opts.crossDomain !== \"boolean\") { //判定是否跨域\r\n            var urlAnchor = document.createElement(\"a\");\r\n            // Support: IE8-11+\r\n            // IE throws exception if url is malformed, e.g. http://example.com:80x/\r\n            try {\r\n                urlAnchor.href = opts.url;\r\n                urlAnchor.href = urlAnchor.href;\r\n                opts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\r\n                    urlAnchor.protocol + \"//\" + urlAnchor.host;\r\n            } catch (e) {\r\n                opts.crossDomain = true;\r\n            }\r\n        }\r\n        opts.hasContent = !rnoContent.test(opts.type) //是否为post请求\r\n        if (!opts.hasContent) {\r\n            if (querystring) { //如果为GET请求,则参数依附于url上\r\n                opts.url += (rquery.test(opts.url) ? \"&\" : \"?\") + querystring;\r\n            }\r\n            if (opts.cache === false) { //添加时间截\r\n                opts.url += (rquery.test(opts.url) ? \"&\" : \"?\") + \"_time=\" + (new Date - 0)\r\n            }\r\n        }\r\n        return opts;\r\n    }\r\n\r\n    /**\r\n     * 伪XMLHttpRequest类,用于屏蔽浏览器差异性\r\n     * var ajax = new(self.XMLHttpRequest||ActiveXObject)(\"Microsoft.XMLHTTP\")\r\n     * ajax.onreadystatechange = function(){\r\n     *   if (ajax.readyState==4 && ajax.status==200){\r\n     *        alert(ajax.responseText)\r\n     *   }\r\n     * }\r\n     * ajax.open(\"POST\", url, true)\r\n     * ajax.send(\"key=val&key1=val2\")\r\n     */\r\nvar XHRMethods = {\r\n        setRequestHeader: function(name, value) {\r\n            this.requestHeaders[name] = value;\r\n            return this;\r\n        },\r\n        getAllResponseHeaders: function() {\r\n            return this.readyState === 4 ? this.responseHeadersString : null;\r\n        },\r\n        getResponseHeader: function(name, match) {\r\n            if (this.readyState === 4) {\r\n                while ((match = rheaders.exec(this.responseHeadersString))) {\r\n                    this.responseHeaders[match[1]] = match[2];\r\n                }\r\n                match = this.responseHeaders[name];\r\n            }\r\n            return match === undefined ? null : match;\r\n        },\r\n        overrideMimeType: function(type) {\r\n            this.mimeType = type;\r\n            return this;\r\n        },\r\n        // 中止请求\r\n        abort: function(statusText) {\r\n            statusText = statusText || \"abort\";\r\n            if (this.transport) {\r\n                this.respond(0, statusText)\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * 用于派发success,error,complete等回调\r\n         * http://www.cnblogs.com/rubylouvre/archive/2011/05/18/2049989.html\r\n         * @param {Number} status 状态码\r\n         * @param {String} statusText 对应的扼要描述\r\n         */\r\n        dispatch: function(status, nativeStatusText) {\r\n            var statusText = nativeStatusText\r\n                // 只能执行一次，防止重复执行\r\n            if (!this.transport) { //2:已执行回调\r\n                return;\r\n            }\r\n            this.readyState = 4;\r\n            var isSuccess = status >= 200 && status < 300 || status === 304\r\n            if (isSuccess) {\r\n                if (status === 204) {\r\n                    statusText = \"nocontent\";\r\n                } else if (status === 304) {\r\n                    statusText = \"notmodified\";\r\n                } else {\r\n                    //如果浏览器能直接返回转换好的数据就最好不过,否则需要手动转换\r\n                    if (typeof this.response === \"undefined\" && (this.responseText || this.responseXML)) {\r\n                        var dataType = this.options.dataType || this.options.mimeType\r\n                        if (!dataType) { //如果没有指定dataType，则根据mimeType或Content-Type进行揣测\r\n                            dataType = this.getResponseHeader(\"Content-Type\") || \"\"\r\n                            dataType = dataType.match(/json|xml|script|html/) || [\"text\"]\r\n                            dataType = dataType[0];\r\n                        }\r\n                        try {\r\n                            this.response = vmcore.ajaxConverters[dataType].call(this, this.responseText, this.responseXML)\r\n                        } catch (e) {\r\n                            isSuccess = false\r\n                            this.error = e\r\n                            statusText = \"parsererror\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.status = status;\r\n            this.statusText = statusText + \"\"\r\n            if (this.timeoutID) {\r\n                clearTimeout(this.timeoutID)\r\n                delete this.timeoutID\r\n            }\r\n            this._transport = this.transport;\r\n            // 到这要么成功，调用success, 要么失败，调用 error, 最终都会调用 complete\r\n            if (isSuccess) {\r\n                vmcore.log(\"成功加载数据\")\r\n                this._resolve(this.response, statusText, this)\r\n            } else {\r\n                this._reject(this, statusText, this.error || statusText)\r\n            }\r\n            var completeFn = this.options.complete\r\n            if (typeof completeFn === \"function\") {\r\n                completeFn.call(this, this, statusText)\r\n            }\r\n            delete this.transport\r\n        }\r\n    }\r\n    //ajax主函数\r\n    vmcore.ajax = function(opts, promise) {\r\n        if (!opts || !opts.url) {\r\n            vmcore.error(\"参数必须为Object并且拥有url属性\")\r\n        }\r\n        opts = ajaxExtend(opts) //处理用户参数，比如生成querystring, type大写化\r\n            //创建一个伪XMLHttpRequest,能处理complete,success,error等多投事件\r\n        var XHRProperties = {\r\n            responseHeadersString: \"\",\r\n            responseHeaders: {},\r\n            requestHeaders: {},\r\n            querystring: opts.querystring,\r\n            readyState: 0,\r\n            uniqueID: (\"\" + Math.random()).replace(/0\\./, \"\"),\r\n            status: 0\r\n        }\r\n        var _reject, _resolve\r\n        var promise = new Promise(function(resolve, reject) {\r\n            _resolve = resolve\r\n            _reject = reject\r\n        })\r\n\r\n        promise.options = opts\r\n        promise._reject = _reject\r\n        promise._resolve = _resolve\r\n\r\n        vmcore.mix(promise, XHRProperties, XHRMethods)\r\n        promise.then(opts.success, opts.error)\r\n        \"success error\".replace(vmcore.rword, function(name) { //绑定回调\r\n            delete opts[name]\r\n        })\r\n\r\n        var dataType = opts.dataType //目标返回数据类型\r\n        var transports = vmcore.ajaxTransports\r\n\r\n        if (opts.crossDomain && !supportCors && dataType === \"json\" && opts.type === \"GET\") {\r\n            dataType = opts.dataType = \"jsonp\"\r\n        }\r\n        var name = opts.form ? \"upload\" : dataType\r\n        var transport = transports[name] || transports.xhr\r\n        vmcore.mix(promise, transport) //取得传送器的request, respond, preproccess\r\n        if (promise.preproccess) { //这用于jsonp upload传送器\r\n            dataType = promise.preproccess() || dataType\r\n        }\r\n        //设置首部 1、Content-Type首部\r\n        if (opts.contentType) {\r\n            promise.setRequestHeader(\"Content-Type\", opts.contentType)\r\n        }\r\n        //2.处理Accept首部\r\n        promise.setRequestHeader(\"Accept\", accepts[dataType] ? accepts[dataType] + \", */*; q=0.01\" : accepts[\"*\"])\r\n        for (var i in opts.headers) { //3. 处理headers里面的首部\r\n            promise.setRequestHeader(i, opts.headers[i])\r\n        }\r\n        // 4.处理超时\r\n        if (opts.async && opts.timeout > 0) {\r\n            promise.timeoutID = setTimeout(function() {\r\n                promise.abort(\"timeout\")\r\n                promise.dispatch(0, \"timeout\")\r\n            }, opts.timeout)\r\n        }\r\n        promise.request()\r\n        return promise\r\n    };\r\n    \"get,post\".replace(vmcore.rword, function(method) {\r\n        vmcore[method] = function(url, data, callback, type) {\r\n            if (typeof data === \"function\") {\r\n                type = type || callback\r\n                callback = data\r\n                data = void 0\r\n            }\r\n            return vmcore.ajax({\r\n                type: method,\r\n                url: url,\r\n                data: data,\r\n                success: callback,\r\n                dataType: type\r\n            })\r\n        };\r\n    })\r\n\r\n    vmcore.getScript = function(url, callback) {\r\n        return vmcore.get(url, null, callback, \"script\")\r\n    }\r\n    vmcore.getJSON = function(url, data, callback) {\r\n        return vmcore.get(url, data, callback, \"json\")\r\n    }\r\n    vmcore.upload = function(url, form, data, callback, dataType) {\r\n        if (typeof data === \"function\") {\r\n            dataType = callback;\r\n            callback = data;\r\n            data = void 0;\r\n        }\r\n        return vmcore.ajax({\r\n            url: url,\r\n            type: \"post\",\r\n            dataType: dataType,\r\n            form: form,\r\n            data: data,\r\n            success: callback\r\n        });\r\n    }\r\n    vmcore.ajaxConverters = { //转换器，返回用户想要做的数据\r\n        text: function(text) {\r\n            return text || \"\";\r\n        },\r\n        xml: function(text, xml) {\r\n            return xml !== void 0 ? xml : parseXML(text)\r\n        },\r\n        html: function(text) {\r\n            return vmcore.parseHTML(text) //一个文档碎片,方便直接插入DOM树\r\n        },\r\n        json: function(text) {\r\n            if (!vmcore.parseJSON) {\r\n                vmcore.log(\"vmcore.parseJSON不存在,请升级到最新版\")\r\n            }\r\n            return vmcore.parseJSON(text)\r\n        },\r\n        script: function(text) {\r\n            parseJS(text)\r\n        },\r\n        jsonp: function() {\r\n            var json = vmcore[this.jsonpCallback];\r\n            delete vmcore[this.jsonpCallback];\r\n            return json;\r\n        }\r\n    }\r\n\r\n    vmcore.param = function(json) {\r\n        if (!vmcore.isPlainObject(json)) {\r\n            return \"\"\r\n        }\r\n        var buffer = []\r\n        paramInner(json, \"\", buffer)\r\n        return buffer.join(\"&\").replace(r20, \"+\")\r\n    }\r\n\r\n    function isDate(a) {\r\n        return Object.prototype.toString.call(a) === \"[object Date]\"\r\n    }\r\n\r\n    function isValidParamValue(val) {\r\n        var t = typeof val; // 值只能为 null, undefined, number, string, boolean\r\n        return val == null || (t !== 'object' && t !== 'function')\r\n    }\r\n\r\n    function paramInner(json, prefix, buffer) {\r\n        prefix = prefix || \"\"\r\n        for (var key in json) {\r\n            if (json.hasOwnProperty(key)) {\r\n                var val = json[key]\r\n                var name = prefix ? prefix + encode(\"[\" + key + \"]\") : encode(key)\r\n                if (isDate(val)) {\r\n                    buffer.push(name + \"=\" + val.toISOString())\r\n                } else if (isValidParamValue(val)) { //如果是简单数据类型\r\n                    buffer.push(name + \"=\" + encode(val))\r\n                } else if (Array.isArray(val) || vmcore.isPlainObject(val)) {\r\n                    vmcore.each(val, function(subKey, subVal) {\r\n                        if (isValidParamValue(subVal)) {\r\n                            buffer.push(name + encode(\"[\" + subKey + \"]\") + \"=\" + encode(subVal))\r\n                        } else if (Array.isArray(val) || vmcore.isPlainObject(val)) {\r\n                            paramInner(subVal, name + encode(\"[\" + subKey + \"]\"), buffer)\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    if (!Date.prototype.toISOString) {\r\n        new function() {\r\n            function pad(number) {\r\n                if (number < 10) {\r\n                    return '0' + number\r\n                }\r\n                return number\r\n            }\r\n            Date.prototype.toISOString = function() {\r\n                return this.getUTCFullYear() +\r\n                    '-' + pad(this.getUTCMonth() + 1) +\r\n                    '-' + pad(this.getUTCDate()) +\r\n                    'T' + pad(this.getUTCHours()) +\r\n                    ':' + pad(this.getUTCMinutes()) +\r\n                    ':' + pad(this.getUTCSeconds()) +\r\n                    '.' + (this.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) +\r\n                    'Z';\r\n            }\r\n        }\r\n    }\r\n\r\n    //将一个字符串转换为对象\r\n    //https://github.com/cowboy/jquery-bbq/blob/master/jquery.ba-bbq.js\r\n    vmcore.unparam = function(url, query) {\r\n        var json = {};\r\n        if (!url || !vmcore.type(url) === \"string\") {\r\n            return json;\r\n        }\r\n        url = url.replace(/^[^?=]*\\?/ig, '').split('#')[0]; //去除网址与hash信息\r\n        //考虑到key中可能有特殊符号如“[].”等，而[]却有是否被编码的可能，所以，牺牲效率以求严谨，就算传了key参数，也是全部解析url。\r\n        var pairs = url.split(\"&\"),\r\n            pair, key, val, i = 0,\r\n            len = pairs.length;\r\n        for (; i < len; ++i) {\r\n            pair = pairs[i].split(\"=\")\r\n            key = decode(pair[0])\r\n            try {\r\n                val = decode(pair[1] || \"\")\r\n            } catch (e) {\r\n                vmcore.log(e + \"decodeURIComponent error : \" + pair[1], 3)\r\n                val = pair[1] || \"\";\r\n            }\r\n            key = key.replace(/\\[\\]$/, \"\") //如果参数名以[]结尾，则当作数组\r\n            var item = json[key];\r\n            if (item === void 0) {\r\n                json[key] = val; //第一次\r\n            } else if (Array.isArray(item)) {\r\n                item.push(val) //第三次或三次以上\r\n            } else {\r\n                json[key] = [item, val]; //第二次,将它转换为数组\r\n            }\r\n        }\r\n        return query ? json[query] : json;\r\n    }\r\n\r\n    var rinput = /select|input|button|textarea/i\r\n    var rcheckbox = /radio|checkbox/\r\n    var rline = /\\r?\\n/g\r\n\r\n    function trimLine(val) {\r\n        return val.replace(rline, \"\\r\\n\")\r\n    }\r\n        //表单元素变字符串, form为一个元素节点\r\n    vmcore.serialize = function(form) {\r\n        var json = {};\r\n        // 不直接转换form.elements，防止以下情况：   <form > <input name=\"elements\"/><input name=\"test\"/></form>\r\n        Array.prototype.filter.call(form.getElementsByTagName(\"*\"), function(el) {\r\n            if (rinput.test(el.nodeName) && el.name && !el.disabled) {\r\n                return rcheckbox.test(el.type) ? el.checked : true //只处理拥有name并且没有disabled的表单元素\r\n            }\r\n        }).forEach(function(el) {\r\n            var val = vmcore(el).val()\r\n            val = Array.isArray(val) ? val.map(trimLine) : trimLine(val)\r\n            var name = el.name\r\n            if (name in json) {\r\n                if (Array.isArray(val)) {\r\n                    json[name].push(val)\r\n                } else {\r\n                    json[name] = [json[name], val]\r\n                }\r\n            } else {\r\n                json[name] = val\r\n            }\r\n        })\r\n        return vmcore.param(json, false) // 名值键值对序列化,数组元素名字前不加 []\r\n    }\r\n\r\n    var transports = vmcore.ajaxTransports = {\r\n        xhr: {\r\n            //发送请求\r\n            request: function() {\r\n                var self = this;\r\n                var opts = this.options;\r\n                vmcore.log(\"XhrTransport.request.....\")\r\n                var transport = this.transport = new vmcore.xhr;\r\n                transport.open(opts.type, opts.url, opts.async, opts.username, opts.password)\r\n                if (this.mimeType && transport.overrideMimeType) {\r\n                    transport.overrideMimeType(this.mimeType)\r\n                }\r\n                if (opts.crossDomain) {\r\n                    transport.withCredentials = true\r\n                }\r\n                this.requestHeaders[\"X-Requested-With\"] = \"XMLHttpRequest\"\r\n                for (var i in this.requestHeaders) {\r\n                    transport.setRequestHeader(i, this.requestHeaders[i] + \"\")\r\n                }\r\n                var dataType = this.options.dataType;\r\n                if (\"responseType\" in transport && /^(blob|arraybuffer|text)$/.test(dataType)) {\r\n                    transport.responseType = dataType\r\n                    this.useResponseType = true\r\n                }\r\n                //必须要支持 FormData 和 file.fileList 的浏览器 才能用 xhr 发送\r\n                //标准规定的 multipart/form-data 发送必须用 utf-8 格式， 记得 ie 会受到 document.charset 的影响\r\n                transport.send(opts.hasContent && (this.formdata || this.querystring) || null)\r\n                    //在同步模式中,IE6,7可能会直接从缓存中读取数据而不会发出请求,因此我们需要手动发出请求\r\n\r\n                if (!opts.async || transport.readyState === 4) {\r\n                    this.respond()\r\n                } else {\r\n                    if (useOnload) { //如果支持onerror, onload新API\r\n                        transport.onload = transport.onerror = function(e) {\r\n                            this.readyState = 4 //IE9+ \r\n                            this.status = e.type === \"load\" ? 200 : 500\r\n                            self.respond()\r\n                        }\r\n                    } else {\r\n                        transport.onreadystatechange = function() {\r\n                            self.respond()\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            //用于获取原始的responseXMLresponseText 修正status statusText\r\n            //第二个参数为1时中止清求\r\n            respond: function(event, forceAbort) {\r\n                var transport = this.transport\r\n                if (!transport) {\r\n                    return\r\n                }\r\n                try {\r\n                    var completed = transport.readyState === 4\r\n                    if (forceAbort || completed) {\r\n                        transport.onreadystatechange = vmcore.noop\r\n                        if (useOnload) { //IE6下对XHR对象设置onerror属性可能报错\r\n                            transport.onerror = transport.onload = null\r\n                        }\r\n                        if (forceAbort) {\r\n                            if (!completed && typeof transport.abort === \"function\") { // 完成以后 abort 不要调用\r\n                                transport.abort()\r\n                            }\r\n                        } else {\r\n                            var status = transport.status\r\n                                //设置responseText\r\n                            var text = transport.responseText\r\n\r\n                            this.responseText = typeof text === \"string\" ? text : void 0\r\n                                //设置responseXML\r\n                            try {\r\n                                //当responseXML为[Exception: DOMException]时，\r\n                                //访问它会抛“An attempt was made to use an object that is not, or is no longer, usable”异常\r\n                                var xml = transport.responseXML\r\n                                this.responseXML = xml.documentElement\r\n                            } catch (e) {}\r\n                            //设置response\r\n                            if (this.useResponseType) {\r\n                                this.response = transport.response\r\n                            }\r\n                            //设置responseHeadersString\r\n                            this.responseHeadersString = transport.getAllResponseHeaders()\r\n\r\n                            try { //火狐在跨城请求时访问statusText值会抛出异常\r\n                                var statusText = transport.statusText\r\n                            } catch (e) {\r\n                                this.error = e\r\n                                statusText = \"firefoxAccessError\"\r\n                            }\r\n                            //用于处理特殊情况,如果是一个本地请求,只要我们能获取数据就假当它是成功的\r\n                            if (!status && isLocal && !this.options.crossDomain) {\r\n                                status = this.responseText ? 200 : 404\r\n                                    //IE有时会把204当作为1223\r\n                            } else if (status === 1223) {\r\n                                status = 204\r\n                            }\r\n                            this.dispatch(status, statusText)\r\n                        }\r\n                    }\r\n                } catch (err) {\r\n                    // 如果网络问题时访问XHR的属性，在FF会抛异常\r\n                    // http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)\r\n                    if (!forceAbort) {\r\n                        this.dispatch(500, err)\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        jsonp: {\r\n            preproccess: function() {\r\n                var opts = this.options;\r\n                var name = this.jsonpCallback = opts.jsonpCallback || \"jsonp\" + setTimeout(\"1\")\r\n                opts.url = opts.url + (rquery.test(opts.url) ? \"&\" : \"?\") + opts.jsonp + \"=vmcore.\" + name\r\n                    //将后台返回的json保存在惰性函数中\r\n                vmcore[name] = function(json) {\r\n                    vmcore[name] = json\r\n                }\r\n                return \"script\"\r\n            }\r\n        },\r\n        script: {\r\n            request: function() {\r\n                var opts = this.options;\r\n                var node = this.transport = DOC.createElement(\"script\")\r\n                vmcore.log(\"ScriptTransport.sending.....\")\r\n                if (opts.charset) {\r\n                    node.charset = opts.charset\r\n                }\r\n                var self = this;\r\n                node.onerror = node[useOnload ? \"onload\" : \"onreadystatechange\"] = function() {\r\n                    self.respond()\r\n                };\r\n                node.src = opts.url\r\n                head.insertBefore(node, head.firstChild)\r\n            },\r\n            respond: function(event, forceAbort) {\r\n                var node = this.transport\r\n                if (!node) {\r\n                    return\r\n                }\r\n                var execute = /loaded|complete|undefined/i.test(node.readyState)\r\n                if (forceAbort || execute) {\r\n                    node.onerror = node.onload = node.onreadystatechange = null\r\n                    var parent = node.parentNode;\r\n                    if (parent) {\r\n                        parent.removeChild(node)\r\n                    }\r\n                    if (!forceAbort) {\r\n                        var args = typeof vmcore[this.jsonpCallback] === \"function\" ? [500, \"error\"] : [200, \"success\"]\r\n                        this.dispatch.apply(this, args)\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        upload: {\r\n            preproccess: function() {\r\n                var opts = this.options,\r\n                    formdata\r\n                if (typeof opts.form.append === \"function\") { //简单判断opts.form是否为FormData\r\n                    formdata = opts.form;\r\n                } else {\r\n                    formdata = new FormData(opts.form) //将二进制什么一下子打包到formdata\r\n                }\r\n                vmcore.each(opts.data, function(key, val) {\r\n                    formdata.append(key, val) //添加客外数据\r\n                })\r\n                this.formdata = formdata\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    vmcore.mix(transports.jsonp, transports.script)\r\n    vmcore.mix(transports.upload, transports.xhr)\r\n\r\n    if (!window.FormData) {\r\n        var str = 'Function BinaryToArray(binary)\\r\\n\\\r\n             Dim oDic\\r\\n\\\r\n             Set oDic = CreateObject(\"scripting.dictionary\")\\r\\n\\\r\n             length = LenB(binary) - 1\\r\\n\\\r\n             For i = 1 To length\\r\\n\\\r\n                 oDic.add i, AscB(MidB(binary, i, 1))\\r\\n\\\r\n             Next\\r\\n\\\r\n             BinaryToArray = oDic.Items\\r\\n\\\r\n          End Function'\r\n        execScript(str, \"VBScript\");\r\n        vmcore.fixAjax = function() {\r\n            vmcore.ajaxConverters.arraybuffer = function() {\r\n                var body = this.tranport && this.tranport.responseBody\r\n                if (body) {\r\n                    return new VBArray(BinaryToArray(body)).toArray();\r\n                }\r\n            };\r\n\r\n            function createIframe(ID) {\r\n                var iframe = vmcore.parseHTML(\"<iframe \" + \" id='\" + ID + \"'\" +\r\n                    \" name='\" + ID + \"'\" + \" style='position:absolute;left:-9999px;top:-9999px;'/>\").firstChild;\r\n                return (DOC.body || DOC.documentElement).insertBefore(iframe, null);\r\n            }\r\n\r\n            function addDataToForm(form, data) {\r\n                    var ret = [],\r\n                        d, isArray, vs, i, e;\r\n                    for (d in data) {\r\n                        isArray = Array.isArray(data[d]);\r\n                        vs = isArray ? data[d] : [data[d]];\r\n                        // 数组和原生一样对待，创建多个同名输入域\r\n                        for (i = 0; i < vs.length; i++) {\r\n                            e = DOC.createElement(\"input\");\r\n                            e.type = 'hidden';\r\n                            e.name = d;\r\n                            e.value = vs[i];\r\n                            form.appendChild(e);\r\n                            ret.push(e);\r\n                        }\r\n                    }\r\n                    return ret;\r\n                }\r\n                //https://github.com/codenothing/Pure-Javascript-Upload/blob/master/src/upload.js\r\n            vmcore.ajaxTransports.upload = {\r\n                request: function() {\r\n                    var self = this;\r\n                    var opts = this.options;\r\n                    var ID = \"iframe-upload-\" + this.uniqueID;\r\n                    var form = opts.form;\r\n                    var iframe = this.transport = createIframe(ID);\r\n                    //form.enctype的值\r\n                    //1:application/x-www-form-urlencoded   在发送前编码所有字符（默认）\r\n                    //2:multipart/form-data 不对字符编码。在使用包含文件上传控件的表单时，必须使用该值。\r\n                    //3:text/plain  空格转换为 \"+\" 加号，但不对特殊字符编码。\r\n                    var backups = {\r\n                        target: form.target || \"\",\r\n                        action: form.action || \"\",\r\n                        enctype: form.enctype,\r\n                        method: form.method\r\n                    };\r\n                    var fields = opts.data ? addDataToForm(form, opts.data) : [];\r\n                    //必须指定method与enctype，要不在FF报错\r\n                    //表单包含文件域时，如果缺少 method=POST 以及 enctype=multipart/form-data，\r\n                    // 设置target到隐藏iframe，避免整页刷新\r\n                    form.target = ID;\r\n                    form.action = opts.url;\r\n                    form.method = \"POST\";\r\n                    form.enctype = \"multipart/form-data\";\r\n                    vmcore.log(\"iframe transport...\");\r\n                    this.uploadcallback = vmcore.bind(iframe, \"load\", function(event) {\r\n                        self.respond(event);\r\n                    });\r\n                    form.submit();\r\n                    //还原form的属性\r\n                    for (var i in backups) {\r\n                        form[i] = backups[i];\r\n                    }\r\n                    //移除之前动态添加的节点\r\n                    fields.forEach(function(input) {\r\n                        form.removeChild(input);\r\n                    });\r\n                },\r\n                respond: function(event) {\r\n                    var node = this.transport,\r\n                        child\r\n                        // 防止重复调用,成功后 abort\r\n                    if (!node) {\r\n                        return;\r\n                    }\r\n                    if (event && event.type === \"load\") {\r\n                        var doc = node.contentWindow.document;\r\n                        this.responseXML = doc;\r\n                        if (doc.body) { //如果存在body属性,说明不是返回XML\r\n                            this.responseText = doc.body.innerHTML;\r\n                            //当MIME为'application/javascript' 'text/javascript\",浏览器会把内容放到一个PRE标签中\r\n                            if ((child = doc.body.firstChild) && child.nodeName.toUpperCase() === 'PRE' && child.firstChild) {\r\n                                this.responseText = child.firstChild.nodeValue;\r\n                            }\r\n                        }\r\n                        this.dispatch(200, \"success\");\r\n                    }\r\n                    this.uploadcallback = vmcore.unbind(node, \"load\", this.uploadcallback);\r\n                    delete this.uploadcallback;\r\n                    setTimeout(function() { // Fix busy state in FF3\r\n                        node.parentNode.removeChild(node);\r\n                        vmcore.log(\"iframe.parentNode.removeChild(iframe)\");\r\n                    });\r\n                }\r\n            };\r\n            delete vmcore.fixAjax;\r\n        };\r\n        vmcore.fixAjax()\r\n    }\r\n    return vmcore\r\n})\r\n/**\r\n 2011.8.31\r\n 将会传送器的abort方法上传到vmcore.XHR.abort去处理\r\n 修复serializeArray的bug\r\n 对XMLHttpRequest.abort进行try...catch\r\n 2012.3.31 v2 大重构,支持XMLHttpRequest Level2\r\n 2013.4.8 v3 大重构 支持二进制上传与下载\r\n http://www.cnblogs.com/heyuquan/archive/2013/05/13/3076465.html\r\n 2014.12.25  v4 大重构\r\n */\r\n",
    "_base/router.js": "\r\n/*\r\n * 路由器模块，实现类似angular ui-router的功能\r\n */\r\ndefine('_base/router',['vmcore','_base/history'],function(vmcore,history) {\r\n\r\n    function Router() {\r\n        var table = {}\r\n        \"get,post,delete,put\".replace(vmcore.rword, function(name) {\r\n            table[name] = []\r\n        })\r\n        this.routingTable = table\r\n    }\r\n\r\n    function parseQuery(url) {\r\n        var array = url.split(\"?\"), query = {}, path = array[0], querystring = array[1]\r\n        if (querystring) {\r\n            var seg = querystring.split(\"&\"),\r\n                    len = seg.length, i = 0, s;\r\n            for (; i < len; i++) {\r\n                if (!seg[i]) {\r\n                    continue\r\n                }\r\n                s = seg[i].split(\"=\")\r\n                query[decodeURIComponent(s[0])] = decodeURIComponent(s[1])\r\n            }\r\n        }\r\n        return {\r\n            path: path,\r\n            query: query\r\n        }\r\n    }\r\n\r\n\r\n    function queryToString(obj) {\r\n        if(typeof obj == 'string') return obj\r\n        var str = []\r\n        for(var i in obj) {\r\n            if(i == \"query\") continue\r\n            str.push(i + '=' + encodeURIComponent(obj[i]))\r\n        }\r\n        return str.length ? '?' + str.join(\"&\") : ''\r\n    }\r\n\r\n    var placeholder = /([:*])(\\w+)|\\{(\\w+)(?:\\:((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g\r\n    Router.prototype = {\r\n        error: function(callback) {\r\n            this.errorback = callback\r\n        },\r\n        _pathToRegExp: function(pattern, opts) {\r\n            var keys = opts.keys = [],\r\n                    //      segments = opts.segments = [],\r\n                    compiled = '^', last = 0, m, name, regexp, segment;\r\n\r\n            while ((m = placeholder.exec(pattern))) {\r\n                name = m[2] || m[3]; // IE[78] returns '' for unmatched groups instead of null\r\n                regexp = m[4] || (m[1] == '*' ? '.*' : 'string')\r\n                segment = pattern.substring(last, m.index);\r\n                var type = this.$types[regexp]\r\n                var key = {\r\n                    name: name\r\n                }\r\n                if (type) {\r\n                    regexp = type.pattern\r\n                    key.decode = type.decode\r\n                }\r\n                keys.push(key)\r\n                compiled += quoteRegExp(segment, regexp, false)\r\n                //  segments.push(segment)\r\n                last = placeholder.lastIndex\r\n            }\r\n            segment = pattern.substring(last);\r\n            compiled += quoteRegExp(segment) + (opts.strict ? opts.last : \"\\/?\") + '$';\r\n            var sensitive = typeof opts.caseInsensitive === \"boolean\" ? opts.caseInsensitive : true\r\n            //  segments.push(segment);\r\n            opts.regexp = new RegExp(compiled, sensitive ? 'i' : undefined);\r\n            return opts\r\n\r\n        },\r\n        //添加一个路由规则\r\n        add: function(method, path, callback, opts) {\r\n            var array = this.routingTable[method.toLowerCase()]\r\n            if (path.charAt(0) !== \"/\") {\r\n                throw \"path必须以/开头\"\r\n            }\r\n            opts = opts || {}\r\n            opts.callback = callback\r\n            if (path.length > 2 && path.charAt(path.length - 1) === \"/\") {\r\n                path = path.slice(0, -1)\r\n                opts.last = \"/\"\r\n            }\r\n            vmcore.Array.ensure(array, this._pathToRegExp(path, opts))\r\n        },\r\n        //判定当前URL与已有状态对象的路由规则是否符合\r\n        route: function(method, path, query) {\r\n            path = path.trim()\r\n            var states = this.routingTable[method]\r\n            for (var i = 0, el; el = states[i++]; ) {\r\n                var args = path.match(el.regexp)\r\n                if (args) {\r\n                    el.query = query || {}\r\n                    el.path = path\r\n                    el.params = {}\r\n                    var keys = el.keys\r\n                    args.shift()\r\n                    if (keys.length) {\r\n                        this._parseArgs(args, el)\r\n                    }\r\n                    return  el.callback.apply(el, args)\r\n                }\r\n            }\r\n            if (this.errorback) {\r\n                this.errorback()\r\n            }\r\n        },\r\n        _parseArgs: function(match, stateObj) {\r\n            var keys = stateObj.keys\r\n            for (var j = 0, jn = keys.length; j < jn; j++) {\r\n                var key = keys[j]\r\n                var value = match[j] || \"\"\r\n                if (typeof key.decode === \"function\") {//在这里尝试转换参数的类型\r\n                    var val = key.decode(value)\r\n                } else {\r\n                    try {\r\n                        val = JSON.parse(value)\r\n                    } catch (e) {\r\n                        val = value\r\n                    }\r\n                }\r\n                match[j] = stateObj.params[key.name] = val\r\n            }\r\n        },\r\n        getLastPath: function() {\r\n            return getCookie(\"msLastPath\")\r\n        },\r\n        setLastPath: function(path) {\r\n            setCookie(\"msLastPath\", path)\r\n        },\r\n        /*\r\n         *  @interface vmcore.router.redirect\r\n         *  @param hash 访问的url hash\r\n         */\r\n        redirect: function(hash) {\r\n            this.navigate(hash, {replace: true})\r\n        },\r\n        /*\r\n         *  @interface vmcore.router.navigate\r\n         *  @param hash 访问的url hash\r\n         *  @param options 扩展配置\r\n         *  @param options.replace true替换history，否则生成一条新的历史记录\r\n         *  @param options.silent true表示只同步url，不触发url变化监听绑定\r\n        */\r\n        navigate: function(hash, options) {\r\n            var parsed = parseQuery((hash.charAt(0) !== \"/\" ? \"/\" : \"\") + hash),\r\n                options = options || {}\r\n            if(hash.charAt(0) === \"/\")\r\n                hash = hash.slice(1)// 修正出现多扛的情况 fix http://localhost:8383/index.html#!//\r\n            // 在state之内有写history的逻辑\r\n            if(!vmcore.state || options.silent) vmcore.history && vmcore.history.updateLocation(hash, vmcore.mix({}, options, {silent: true}))\r\n            // 只是写历史而已\r\n            if(!options.silent) {\r\n                this.route(\"get\", parsed.path, parsed.query, options)\r\n            }\r\n        },\r\n        /*\r\n         *  @interface vmcore.router.when 配置重定向规则\r\n         *  @param path 被重定向的表达式，可以是字符串或者数组\r\n         *  @param redirect 重定向的表示式或者url\r\n        */\r\n        when: function(path, redirect) {\r\n            var me = this,\r\n                path = path instanceof Array ? path : [path]\r\n            vmcore.each(path, function(index, p) {\r\n                me.add(\"get\", p, function() {\r\n                    var info = me.urlFormate(redirect, this.params, this.query)\r\n                    me.navigate(info.path + info.query, {replace: true})\r\n                })\r\n            })\r\n            return this\r\n        },\r\n        /*\r\n         *  @interface vmcore.router.get 添加一个router规则\r\n         *  @param path url表达式\r\n         *  @param callback 对应这个url的回调\r\n        */\r\n        get: function(path, callback) {},\r\n        urlFormate: function(url, params, query) {\r\n            var query = query ? queryToString(query) : \"\",\r\n                hash = url.replace(placeholder, function(mat) {\r\n                    var key = mat.replace(/[\\{\\}]/g, '').split(\":\")\r\n                    key = key[0] ? key[0] : key[1]\r\n                    return params[key] || ''\r\n                }).replace(/^\\//g, '')\r\n            return {\r\n                path: hash,\r\n                query: query\r\n            }\r\n        },\r\n        /* *\r\n         `'/hello/'` - 匹配'/hello/'或'/hello'\r\n         `'/user/:id'` - 匹配 '/user/bob' 或 '/user/1234!!!' 或 '/user/' 但不匹配 '/user' 与 '/user/bob/details'\r\n         `'/user/{id}'` - 同上\r\n         `'/user/{id:[^/]*}'` - 同上\r\n         `'/user/{id:[0-9a-fA-F]{1,8}}'` - 要求ID匹配/[0-9a-fA-F]{1,8}/这个子正则\r\n         `'/files/{path:.*}'` - Matches any URL starting with '/files/' and captures the rest of the\r\n         path into the parameter 'path'.\r\n         `'/files/*path'` - ditto.\r\n         */\r\n        // vmcore.router.get(\"/ddd/:dddID/\",callback)\r\n        // vmcore.router.get(\"/ddd/{dddID}/\",callback)\r\n        // vmcore.router.get(\"/ddd/{dddID:[0-9]{4}}/\",callback)\r\n        // vmcore.router.get(\"/ddd/{dddID:int}/\",callback)\r\n        // 我们甚至可以在这里添加新的类型，vmcore.router.$type.d4 = { pattern: '[0-9]{4}', decode: Number}\r\n        // vmcore.router.get(\"/ddd/{dddID:d4}/\",callback)\r\n        $types: {\r\n            date: {\r\n                pattern: \"[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])\",\r\n                decode: function(val) {\r\n                    return new Date(val.replace(/\\-/g, \"/\"))\r\n                }\r\n            },\r\n            string: {\r\n                pattern: \"[^\\\\/]*\"\r\n            },\r\n            bool: {\r\n                decode: function(val) {\r\n                    return parseInt(val, 10) === 0 ? false : true;\r\n                },\r\n                pattern: \"0|1\"\r\n            },\r\n            int: {\r\n                decode: function(val) {\r\n                    return parseInt(val, 10);\r\n                },\r\n                pattern: \"\\\\d+\"\r\n            }\r\n        }\r\n    }\r\n\r\n    \"get,put,delete,post\".replace(vmcore.rword, function(method) {\r\n        return  Router.prototype[method] = function(a, b, c) {\r\n            this.add(method, a, b, c)\r\n        }\r\n    })\r\n    function quoteRegExp(string, pattern, isOptional) {\r\n        var result = string.replace(/[\\\\\\[\\]\\^$*+?.()|{}]/g, \"\\\\$&\");\r\n        if (!pattern)\r\n            return result;\r\n        var flag = isOptional ? '?' : '';\r\n        return result + flag + '(' + pattern + ')' + flag;\r\n    }\r\n    function supportLocalStorage() {\r\n        try {\r\n            localStorage.setItem(\"vmcore\", 1)\r\n            localStorage.removeItem(\"vmcore\")\r\n            return true\r\n        } catch (e) {\r\n            return false\r\n        }\r\n    }\r\n\r\n    if (supportLocalStorage()) {\r\n        Router.prototype.getLastPath = function() {\r\n            return localStorage.getItem(\"msLastPath\")\r\n        }\r\n        Router.prototype.setLastPath = function(path) {\r\n            localStorage.setItem(\"msLastPath\", path)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function escapeCookie(value) {\r\n        return String(value).replace(/[,;\"\\\\=\\s%]/g, function(character) {\r\n            return encodeURIComponent(character)\r\n        });\r\n    }\r\n    function setCookie(key, value) {\r\n        var date = new Date()//将date设置为10天以后的时间 \r\n        date.setTime(date.getTime() + 60 * 60 * 24)\r\n        document.cookie = escapeCookie(key) + '=' + escapeCookie(value) + \";expires=\" + date.toGMTString()\r\n    }\r\n    function getCookie(name) {\r\n        var m = String(document.cookie).match(new RegExp('(?:^| )' + name + '(?:(?:=([^;]*))|;|$)')) || [\"\", \"\"]\r\n        return decodeURIComponent(m[1])\r\n    }\r\n\r\n    vmcore.router = new Router\r\n\r\n    return vmcore\r\n})\r\n/*\r\n <!DOCTYPE html>\r\n <html>\r\n <head>\r\n <meta charset=\"utf-8\">\r\n <title>路由系统</title>\r\n <script src=\"vmcore.js\"></script>\r\n <script>\r\n require([\"mmRouter\"], function() {\r\n var model = vmcore.define('xxx', function(vm) {\r\n vm.currPath = \"\"\r\n })\r\n vmcore.router.get(\"/aaa\", function(a) {\r\n model.currPath = this.path\r\n })\r\n vmcore.router.get(\"/bbb\", function(a) {\r\n model.currPath = this.path\r\n })\r\n vmcore.router.get(\"/ccc\", function(a) {\r\n model.currPath = this.path\r\n })\r\n vmcore.router.get(\"/ddd/:ddd\", function(a) {//:ddd为参数\r\n vmcore.log(a)\r\n model.currPath = this.path\r\n })\r\n vmcore.router.get(\"/eee\", function(a) {\r\n model.currPath = this.path\r\n })\r\n vmcore.history.start({\r\n html5Mode: true,\r\n basepath: \"/vmcore\"\r\n })\r\n vmcore.scan()\r\n })\r\n </script>\r\n </head>\r\n <body >\r\n <div ms-controller=\"xxx\">\r\n <ul>\r\n <li><a href=\"#!/aaa\">aaa</a></li>\r\n <li><a href=\"#!/bbb\">bbb</a></li>\r\n <li><a href=\"#!/ccc\">ccc</a></li>\r\n <li><a href=\"#!/ddd/222\">ddd</a></li>\r\n <li><a href=\"#!/eee\">eee</a></li>\r\n </ul>\r\n <div style=\"color:red\">{{currPath}}</div>\r\n <div style=\"height: 600px;width:1px;\">\r\n \r\n </div>\r\n <p id=\"eee\">会定位到这里</p>\r\n </div>\r\n \r\n </body>\r\n </html>\r\n \r\n */\r\n",
    "_data/ibar.js": "\r\n/*\r\n * 侧边栏的数据接口\r\n */\r\ndefine('_data/ibar',['_utils/doajax'],function(doAjax) {\r\n  var cachetime, exports;\r\n  cachetime = new Date().getTime();\r\n  exports = {\r\n    userInfo: function(cb) {\r\n      var url;\r\n      url = \"/json/login.json?_\" + cachetime;\r\n      return doAjax.get(url, {}, function(data) {\r\n        return cb(data);\r\n      });\r\n    },\r\n    asset: function(cb) {\r\n      var url;\r\n      url = \"/json/asset.json?_\" + cachetime;\r\n      return doAjax.get(url, {}, function(data) {\r\n        return cb(data);\r\n      });\r\n    },\r\n    cartList: function(cb) {\r\n      var url;\r\n      url = \"/json/cart_6.json?_\" + cachetime;\r\n      return doAjax.get(url, {}, function(data) {\r\n        return cb(data);\r\n      });\r\n    },\r\n    favorite: function(cb) {\r\n      var url;\r\n      url = \"/json/favorite.json?_\" + cachetime;\r\n      return doAjax.get(url, {}, function(data) {\r\n        return cb(data);\r\n      });\r\n    },\r\n    history: function(cb) {\r\n      var url;\r\n      url = \"/json/history.json?_\" + cachetime;\r\n      return doAjax.get(url, {}, function(data) {\r\n        return cb(data);\r\n      });\r\n    }\r\n  };\r\n  return exports;\r\n});\r\n",
    "_lib/base64.js": "define('_lib/base64',function(){\r\n    var expotrs = {};\r\n\r\n    var _PADCHAR = \"=\",\r\n        _ALPHA = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",\r\n        _VERSION = \"1.0\";\r\n\r\n    var _getbyte64 = function( s, i ) {\r\n        // This is oddly fast, except on Chrome/V8.\r\n        // Minimal or no improvement in performance by using a\r\n        // object with properties mapping chars to value (eg. 'A': 0)\r\n\r\n        var idx = _ALPHA.indexOf( s.charAt( i ) );\r\n\r\n        if ( idx === -1 ) {\r\n            throw \"Cannot decode base64\";\r\n        }\r\n\r\n        return idx;\r\n    };\r\n\r\n\r\n    var _getbyte = function ( s, i ) {\r\n        var x = s.charCodeAt( i );\r\n\r\n        if ( x > 255 ) {\r\n            throw \"INVALID_CHARACTER_ERR: DOM Exception 5\";\r\n        }\r\n\r\n        return x;\r\n    };\r\n\r\n    expotrs.decode = function( s ) {\r\n        var pads = 0,\r\n            i,\r\n            b10,\r\n            imax = s.length,\r\n            x = [];\r\n\r\n        s = String( s );\r\n\r\n        if ( imax === 0 ) {\r\n            return s;\r\n        }\r\n\r\n        if ( imax % 4 !== 0 ) {\r\n            throw \"Cannot decode base64\";\r\n        }\r\n\r\n        if ( s.charAt( imax - 1 ) === _PADCHAR ) {\r\n            pads = 1;\r\n\r\n            if ( s.charAt( imax - 2 ) === _PADCHAR ) {\r\n                pads = 2;\r\n            }\r\n\r\n            // either way, we want to ignore this last block\r\n            imax -= 4;\r\n        }\r\n\r\n        for ( i = 0; i < imax; i += 4 ) {\r\n            b10 = ( _getbyte64( s, i ) << 18 ) | ( _getbyte64( s, i + 1 ) << 12 ) | ( _getbyte64( s, i + 2 ) << 6 ) | _getbyte64( s, i + 3 );\r\n            x.push( String.fromCharCode( b10 >> 16, ( b10 >> 8 ) & 0xff, b10 & 0xff ) );\r\n        }\r\n\r\n        switch ( pads ) {\r\n            case 1:\r\n                b10 = ( _getbyte64( s, i ) << 18 ) | ( _getbyte64( s, i + 1 ) << 12 ) | ( _getbyte64( s, i + 2 ) << 6 );\r\n                x.push( String.fromCharCode( b10 >> 16, ( b10 >> 8 ) & 0xff ) );\r\n                break;\r\n\r\n            case 2:\r\n                b10 = ( _getbyte64( s, i ) << 18) | ( _getbyte64( s, i + 1 ) << 12 );\r\n                x.push( String.fromCharCode( b10 >> 16 ) );\r\n                break;\r\n        }\r\n\r\n        return x.join( \"\" );\r\n    };\r\n\r\n\r\n\r\n    expotrs.encode = function(s) {\r\n        if ( arguments.length !== 1 ) {\r\n            throw \"SyntaxError: exactly one argument required\";\r\n        }\r\n\r\n        s = String( s );\r\n\r\n        var i,\r\n            b10,\r\n            x = [],\r\n            imax = s.length - s.length % 3;\r\n\r\n        if ( s.length === 0 ) {\r\n            return s;\r\n        }\r\n\r\n        for ( i = 0; i < imax; i += 3 ) {\r\n            b10 = ( _getbyte( s, i ) << 16 ) | ( _getbyte( s, i + 1 ) << 8 ) | _getbyte( s, i + 2 );\r\n            x.push( _ALPHA.charAt( b10 >> 18 ) );\r\n            x.push( _ALPHA.charAt( ( b10 >> 12 ) & 0x3F ) );\r\n            x.push( _ALPHA.charAt( ( b10 >> 6 ) & 0x3f ) );\r\n            x.push( _ALPHA.charAt( b10 & 0x3f ) );\r\n        }\r\n\r\n        switch ( s.length - imax ) {\r\n            case 1:\r\n                b10 = _getbyte( s, i ) << 16;\r\n                x.push( _ALPHA.charAt( b10 >> 18 ) + _ALPHA.charAt( ( b10 >> 12 ) & 0x3F ) + _PADCHAR + _PADCHAR );\r\n                break;\r\n\r\n            case 2:\r\n                b10 = ( _getbyte( s, i ) << 16 ) | ( _getbyte( s, i + 1 ) << 8 );\r\n                x.push( _ALPHA.charAt( b10 >> 18 ) + _ALPHA.charAt( ( b10 >> 12 ) & 0x3F ) + _ALPHA.charAt( ( b10 >> 6 ) & 0x3f ) + _PADCHAR );\r\n                break;\r\n        }\r\n\r\n        return x.join( \"\" );\r\n    };\r\n\r\n//    return {\r\n//        decode: _decode,\r\n//        encode: _encode,\r\n//        VERSION: _VERSION\r\n//    };\r\n\r\n    return expotrs;\r\n\r\n});",
    "_lib/easing.js": "define('_lib/easing',function() {\r\n    $.easing['jswing'] = $.easing['swing'];\r\n    $.extend($.easing, {\r\n        def: 'easeOutQuad',\r\n        swing: function(x, t, b, c, d) {\r\n            return $.easing[$.easing.def](x, t, b, c, d);\r\n        },\r\n        easeInQuad: function(x, t, b, c, d) {\r\n            return c * (t /= d) * t + b;\r\n        },\r\n        easeOutQuad: function(x, t, b, c, d) {\r\n            return -c * (t /= d) * (t - 2) + b\r\n        },\r\n        easeInOutQuad: function(x, t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t + b;\r\n            return -c / 2 * ((--t) * (t - 2) - 1) + b\r\n        },\r\n        easeInCubic: function(x, t, b, c, d) {\r\n            return c * (t /= d) * t * t + b\r\n        },\r\n        easeOutCubic: function(x, t, b, c, d) {\r\n            return c * ((t = t / d - 1) * t * t + 1) + b\r\n        },\r\n        easeInOutCubic: function(x, t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\r\n            return c / 2 * ((t -= 2) * t * t + 2) + b\r\n        },\r\n        easeInQuart: function(x, t, b, c, d) {\r\n            return c * (t /= d) * t * t * t + b\r\n        },\r\n        easeOutQuart: function(x, t, b, c, d) {\r\n            return -c * ((t = t / d - 1) * t * t * t - 1) + b\r\n        },\r\n        easeInOutQuart: function(x, t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\r\n            return -c / 2 * ((t -= 2) * t * t * t - 2) + b\r\n        },\r\n        easeInQuint: function(x, t, b, c, d) {\r\n            return c * (t /= d) * t * t * t * t + b\r\n        },\r\n        easeOutQuint: function(x, t, b, c, d) {\r\n            return c * ((t = t / d - 1) * t * t * t * t + 1) + b\r\n        },\r\n        easeInOutQuint: function(x, t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;\r\n            return c / 2 * ((t -= 2) * t * t * t * t + 2) + b\r\n        },\r\n        easeInSine: function(x, t, b, c, d) {\r\n            return -c * Math.cos(t / d * (Math.PI / 2)) + c + b\r\n        },\r\n        easeOutSine: function(x, t, b, c, d) {\r\n            return c * Math.sin(t / d * (Math.PI / 2)) + b\r\n        },\r\n        easeInOutSine: function(x, t, b, c, d) {\r\n            return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b\r\n        },\r\n        easeInExpo: function(x, t, b, c, d) {\r\n            return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b\r\n        },\r\n        easeOutExpo: function(x, t, b, c, d) {\r\n            return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b\r\n        },\r\n        easeInOutExpo: function(x, t, b, c, d) {\r\n            if (t == 0) return b;\r\n            if (t == d) return b + c;\r\n            if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\r\n            return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b\r\n        },\r\n        easeInCirc: function(x, t, b, c, d) {\r\n            return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b\r\n        },\r\n        easeOutCirc: function(x, t, b, c, d) {\r\n            return c * Math.sqrt(1 - (t = t / d - 1) * t) + b\r\n        },\r\n        easeInOutCirc: function(x, t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\r\n            return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b\r\n        },\r\n        easeInElastic: function(x, t, b, c, d) {\r\n            var s = 1.70158;\r\n            var p = 0;\r\n            var a = c;\r\n            if (t == 0) return b;\r\n            if ((t /= d) == 1) return b + c;\r\n            if (!p) p = d * .3;\r\n            if (a < Math.abs(c)) {\r\n                a = c;\r\n                var s = p / 4;\r\n            } else var s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b\r\n        },\r\n        easeOutElastic: function(x, t, b, c, d) {\r\n            var s = 1.70158;\r\n            var p = 0;\r\n            var a = c;\r\n            if (t == 0) return b;\r\n            if ((t /= d) == 1) return b + c;\r\n            if (!p) p = d * .3;\r\n            if (a < Math.abs(c)) {\r\n                a = c;\r\n                var s = p / 4;\r\n            } else var s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b\r\n        },\r\n        easeInOutElastic: function(x, t, b, c, d) {\r\n            var s = 1.70158;\r\n            var p = 0;\r\n            var a = c;\r\n            if (t == 0) return b;\r\n            if ((t /= d / 2) == 2) return b + c;\r\n            if (!p) p = d * (.3 * 1.5);\r\n            if (a < Math.abs(c)) {\r\n                a = c;\r\n                var s = p / 4;\r\n            } else var s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\r\n            return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b\r\n        },\r\n        easeInBack: function(x, t, b, c, d, s) {\r\n            if (s == undefined) s = 1.70158;\r\n            return c * (t /= d) * t * ((s + 1) * t - s) + b\r\n        },\r\n        easeOutBack: function(x, t, b, c, d, s) {\r\n            if (s == undefined) s = 1.70158;\r\n            return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b\r\n        },\r\n        easeInOutBack: function(x, t, b, c, d, s) {\r\n            if (s == undefined) s = 1.70158;\r\n            if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\r\n            return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b\r\n        },\r\n        easeInBounce: function(x, t, b, c, d) {\r\n            return c - $.easing.easeOutBounce(x, d - t, 0, c, d) + b\r\n        },\r\n        easeOutBounce: function(x, t, b, c, d) {\r\n            if ((t /= d) < (1 / 2.75)) {\r\n                return c * (7.5625 * t * t) + b;\r\n            } else if (t < (2 / 2.75)) {\r\n                return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;\r\n            } else if (t < (2.5 / 2.75)) {\r\n                return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;\r\n            } else {\r\n                return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;\r\n            }\r\n        },\r\n        easeInOutBounce: function(x, t, b, c, d) {\r\n            if (t < d / 2) return $.easing.easeInBounce(x, t * 2, 0, c, d) * .5 + b;\r\n            return $.easing.easeOutBounce(x, t * 2 - d, 0, c, d) * .5 + c * .5 + b;\r\n        }\r\n    });\r\n    return $.easing;\r\n});\r\n",
    "_lib/lazyload.js": "/*\r\n * Lazy Load - jQuery plugin for lazy loading images\r\n *\r\n * Copyright (c) 2007-2013 Mika Tuupola\r\n *\r\n * Licensed under the MIT license:\r\n *   http://www.opensource.org/licenses/mit-license.php\r\n *\r\n * Project home:\r\n *   http://www.appelsiini.net/projects/lazyload\r\n *\r\n * Version:  1.9.3\r\n *\r\n */\r\ndefine('_lib/lazyload',function() {\r\n\r\n    var $window = $(window);\r\n\r\n    $.fn.lazyload = function(options) {\r\n        var elements = this;\r\n        var $container;\r\n        var settings = {\r\n            threshold: 0,\r\n            failure_limit: 0,\r\n            event: \"scroll\",\r\n            effect: \"show\",\r\n            container: window,\r\n            data_attribute: \"src\",\r\n            skip_invisible: true,\r\n            appear: null,\r\n            load: null,\r\n            placeholder: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\"\r\n        };\r\n\r\n        function update() {\r\n            var counter = 0;\r\n\r\n            elements.each(function() {\r\n                var $this = $(this);\r\n                if (settings.skip_invisible && !$this.is(\":visible\")) {\r\n                    return;\r\n                }\r\n                if ($.abovethetop(this, settings) ||\r\n                    $.leftofbegin(this, settings)) {\r\n                    /* Nothing. */\r\n                } else if (!$.belowthefold(this, settings) &&\r\n                    !$.rightoffold(this, settings)) {\r\n                    $this.trigger(\"appear\");\r\n                    /* if we found an image we'll load, reset the counter */\r\n                    counter = 0;\r\n                } else {\r\n                    if (++counter > settings.failure_limit) {\r\n                        return false;\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        if (options) {\r\n            /* Maintain BC for a couple of versions. */\r\n            if (undefined !== options.failurelimit) {\r\n                options.failure_limit = options.failurelimit;\r\n                delete options.failurelimit;\r\n            }\r\n            if (undefined !== options.effectspeed) {\r\n                options.effect_speed = options.effectspeed;\r\n                delete options.effectspeed;\r\n            }\r\n\r\n            $.extend(settings, options);\r\n        }\r\n\r\n        /* Cache container as jQuery as object. */\r\n        $container = (settings.container === undefined ||\r\n            settings.container === window) ? $window : $(settings.container);\r\n\r\n        /* Fire one scroll event per scroll. Not one scroll event per image. */\r\n        if (0 === settings.event.indexOf(\"scroll\")) {\r\n            $container.bind(settings.event, function() {\r\n                return update();\r\n            });\r\n        }\r\n\r\n        this.each(function() {\r\n            var self = this;\r\n            var $self = $(self);\r\n\r\n            self.loaded = false;\r\n\r\n            /* If no src attribute given use data:uri. */\r\n            if ($self.attr(\"src\") === undefined || $self.attr(\"src\") === false) {\r\n                if ($self.is(\"img\")) {\r\n                    $self.attr(\"src\", settings.placeholder);\r\n                }\r\n            }\r\n\r\n            /* When appear is triggered load original image. */\r\n            $self.one(\"appear\", function() {\r\n                if (!this.loaded) {\r\n                    if (settings.appear) {\r\n                        var elements_left = elements.length;\r\n                        settings.appear.call(self, elements_left, settings);\r\n                    }\r\n                    $(\"<img />\")\r\n                        .bind(\"load\", function() {\r\n\r\n                            var original = $self.attr(\"data-\" + settings.data_attribute);\r\n                            $self.hide();\r\n                            if ($self.is(\"img\")) {\r\n                                $self.attr(\"src\", original);\r\n                            } else {\r\n                                $self.css(\"background-image\", \"url('\" + original + \"')\");\r\n                            }\r\n                            $self[settings.effect](settings.effect_speed);\r\n\r\n                            self.loaded = true;\r\n\r\n                            /* Remove image from array so it is not looped next time. */\r\n                            var temp = $.grep(elements, function(element) {\r\n                                return !element.loaded;\r\n                            });\r\n                            elements = $(temp);\r\n\r\n                            if (settings.load) {\r\n                                var elements_left = elements.length;\r\n                                settings.load.call(self, elements_left, settings);\r\n                            }\r\n                        })\r\n                        .attr(\"src\", $self.attr(\"data-\" + settings.data_attribute));\r\n                    $self.addClass('iLoaded');\r\n                }\r\n            });\r\n\r\n            /* When wanted event is triggered load original image */\r\n            /* by triggering appear.                              */\r\n            if (0 !== settings.event.indexOf(\"scroll\")) {\r\n                $self.bind(settings.event, function() {\r\n                    if (!self.loaded) {\r\n                        $self.trigger(\"appear\");\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        /* Check if something appears when window is resized. */\r\n        $window.bind(\"resize\", function() {\r\n            update();\r\n        });\r\n\r\n        /* With IOS5 force loading images when navigating with back button. */\r\n        /* Non optimal workaround. */\r\n        if ((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)) {\r\n            $window.bind(\"pageshow\", function(event) {\r\n                if (event.originalEvent && event.originalEvent.persisted) {\r\n                    elements.each(function() {\r\n                        $(this).trigger(\"appear\");\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        /* Force initial check if images should appear. */\r\n        $(document).ready(function() {\r\n            update();\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n    /* Convenience methods in jQuery namespace.           */\r\n    /* Use as  $.belowthefold(element, {threshold : 100, container : window}) */\r\n\r\n    $.belowthefold = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = (window.innerHeight ? window.innerHeight : $window.height()) + $window.scrollTop();\r\n        } else {\r\n            fold = $(settings.container).offset().top + $(settings.container).height();\r\n        }\r\n\r\n        return fold <= $(element).offset().top - settings.threshold;\r\n    };\r\n\r\n    $.rightoffold = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = $window.width() + $window.scrollLeft();\r\n        } else {\r\n            fold = $(settings.container).offset().left + $(settings.container).width();\r\n        }\r\n\r\n        return fold <= $(element).offset().left - settings.threshold;\r\n    };\r\n\r\n    $.abovethetop = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = $window.scrollTop();\r\n        } else {\r\n            fold = $(settings.container).offset().top;\r\n        }\r\n\r\n        return fold >= $(element).offset().top + settings.threshold + $(element).height();\r\n    };\r\n\r\n    $.leftofbegin = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = $window.scrollLeft();\r\n        } else {\r\n            fold = $(settings.container).offset().left;\r\n        }\r\n\r\n        return fold >= $(element).offset().left + settings.threshold + $(element).width();\r\n    };\r\n\r\n    $.inviewport = function(element, settings) {\r\n        return !$.rightoffold(element, settings) && !$.leftofbegin(element, settings) &&\r\n            !$.belowthefold(element, settings) && !$.abovethetop(element, settings);\r\n    };\r\n    $.previewport= function(element, settings) {\r\n        return $.rightoffold(element, settings) || $.leftofbegin(element, settings) ||\r\n            $.belowthefold(element, settings) || $.abovethetop(element, settings);\r\n    };\r\n    /* Custom selectors for your convenience.  为了您的方便自定义选择器。 */\r\n    /* Use as $(\"img:below-the-fold\").something() or */\r\n    /* $(\"img\").filter(\":below-the-fold\").something() which is faster */\r\n\r\n    $.extend($.expr[\":\"], {\r\n        \"below-the-fold\": function(a) {\r\n            return $.belowthefold(a, {\r\n                threshold: 0\r\n            });\r\n        },\r\n        \"above-the-top\": function(a) {\r\n            return !$.belowthefold(a, {\r\n                threshold: 0\r\n            });\r\n        },\r\n        \"right-of-screen\": function(a) {\r\n            return $.rightoffold(a, {\r\n                threshold: 0\r\n            });\r\n        },\r\n        \"left-of-screen\": function(a) {\r\n            return !$.rightoffold(a, {\r\n                threshold: 0\r\n            });\r\n        },\r\n        \"in-viewport\": function(a) {\r\n            return $.inviewport(a, {\r\n                threshold: 0\r\n            });\r\n        },\r\n        \"pre-viewport\": function(a) {\r\n            return $.previewport(a, {\r\n                threshold: 0\r\n            });\r\n        },\r\n        /* Maintain BC for couple of versions. */\r\n        \"above-the-fold\": function(a) {\r\n            return !$.belowthefold(a, {\r\n                threshold: 0\r\n            });\r\n        },\r\n        \"right-of-fold\": function(a) {\r\n            return $.rightoffold(a, {\r\n                threshold: 0\r\n            });\r\n        },\r\n        \"left-of-fold\": function(a) {\r\n            return !$.rightoffold(a, {\r\n                threshold: 0\r\n            });\r\n        }\r\n    });\r\n    return $.fn;\r\n})",
    "_lib/slide.js": "/*!\r\n * SuperSlide v2.1.1 \r\n * 轻松解决网站大部分特效展示问题\r\n * 详尽信息请看官网：http://www.SuperSlide2.com/\r\n */\r\n\r\ndefine('_lib/slide',['_lib/easing'],function(easing) {\r\n\r\n    $.fn.slide=function(options){\r\n        $.fn.slide.defaults={\r\n        type:\"slide\", \r\n        effect:\"fade\", \r\n        autoPlay:false, \r\n        delayTime:500, \r\n        interTime:2500,\r\n        triggerTime:150,\r\n        defaultIndex:0,\r\n        titCell:\".hd li\",\r\n        mainCell:\".bd\",\r\n        targetCell:null,\r\n        trigger:\"mouseover\",\r\n        scroll:1,\r\n        vis:1,\r\n        titOnClassName:\"on\",\r\n        autoPage:false, \r\n        prevCell:\".prev\",\r\n        nextCell:\".next\",\r\n        pageStateCell:\".pageState\",\r\n        opp: false, \r\n        pnLoop:true, \r\n        easing:\"swing\", \r\n        startFun:null,\r\n        endFun:null,\r\n        switchLoad:null,\r\n\r\n        playStateCell:\".playState\",\r\n        mouseOverStop:true,\r\n        defaultPlay:true,\r\n        returnDefault:false \r\n        };\r\n\r\n        return this.each(function() {\r\n\r\n            var opts = $.extend({},$.fn.slide.defaults,options);\r\n            var slider = $(this);\r\n            var effect = opts.effect;\r\n            var prevBtn = $(opts.prevCell, slider);\r\n            var nextBtn = $(opts.nextCell, slider);\r\n            var pageState = $(opts.pageStateCell, slider);\r\n            var playState = $(opts.playStateCell, slider);\r\n\r\n            var navObj = $(opts.titCell, slider);//导航子元素结合\r\n            var navObjSize = navObj.size();\r\n            var conBox = $(opts.mainCell , slider);//内容元素父层对象\r\n            var conBoxSize=conBox.children().size();\r\n            var sLoad=opts.switchLoad;\r\n            var tarObj = $(opts.targetCell, slider);\r\n\r\n            /*字符串转换*/\r\n            var index=parseInt(opts.defaultIndex);\r\n            var delayTime=parseInt(opts.delayTime);\r\n            var interTime=parseInt(opts.interTime);\r\n            var triggerTime=parseInt(opts.triggerTime);\r\n            var scroll=parseInt(opts.scroll);\r\n            var vis=parseInt(opts.vis);\r\n            var autoPlay = (opts.autoPlay==\"false\"||opts.autoPlay==false)?false:true;\r\n            var opp = (opts.opp==\"false\"||opts.opp==false)?false:true;\r\n            var autoPage = (opts.autoPage==\"false\"||opts.autoPage==false)?false:true;\r\n            var pnLoop = (opts.pnLoop==\"false\"||opts.pnLoop==false)?false:true;\r\n            var mouseOverStop = (opts.mouseOverStop==\"false\"||opts.mouseOverStop==false)?false:true;\r\n            var defaultPlay = (opts.defaultPlay==\"false\"||opts.defaultPlay==false)?false:true;\r\n            var returnDefault = (opts.returnDefault==\"false\"||opts.returnDefault==false)?false:true;\r\n\r\n            var slideH=0;\r\n            var slideW=0;\r\n            var selfW=0;\r\n            var selfH=0;\r\n            var easing=opts.easing;\r\n            var inter=null;//autoPlay-setInterval \r\n            var mst =null;//trigger-setTimeout\r\n            var rtnST=null;//returnDefault-setTimeout\r\n            var titOn = opts.titOnClassName;\r\n\r\n            var onIndex = navObj.index( slider.find( \".\"+titOn) );\r\n            var oldIndex = index = onIndex==-1?index:onIndex;\r\n            var defaultIndex = index;\r\n\r\n\r\n            var _ind = index;\r\n            var cloneNum = conBoxSize>=vis?( conBoxSize%scroll!=0?conBoxSize%scroll:scroll):0; \r\n            var _tar;\r\n            var isMarq = effect==\"leftMarquee\" || effect==\"topMarquee\"?true:false;\r\n\r\n            var doStartFun=function(){ if ( $.isFunction( opts.startFun) ){ opts.startFun( index,navObjSize,slider,$(opts.titCell, slider),conBox,tarObj,prevBtn,nextBtn ) } }\r\n            var doEndFun=function(){ if ( $.isFunction( opts.endFun ) ){ opts.endFun( index,navObjSize,slider,$(opts.titCell, slider),conBox,tarObj,prevBtn,nextBtn ) } }\r\n            var resetOn=function(){ navObj.removeClass(titOn); if( defaultPlay ) navObj.eq(defaultIndex).addClass(titOn)  }\r\n\r\n\r\n\r\n            //单独处理菜单效果\r\n            if( opts.type==\"menu\" ){\r\n\r\n                if( defaultPlay ){ navObj.removeClass(titOn).eq(index).addClass(titOn); }\r\n                navObj.hover(\r\n                        function(){\r\n                            _tar=$(this).find( opts.targetCell );\r\n                            var hoverInd =navObj.index($(this));\r\n                        \r\n                            mst = setTimeout(function(){  \r\n                                index=hoverInd;\r\n                                navObj.removeClass(titOn).eq    (index).addClass(titOn);\r\n                                doStartFun();\r\n                                switch (effect)\r\n                                {\r\n                                    case \"fade\":_tar.stop(true,true).animate({opacity:\"show\"}, delayTime,easing,doEndFun ); break;\r\n                                    case \"slideDown\":_tar.stop(true,true).animate({height:\"show\"}, delayTime,easing,doEndFun ); break;\r\n                                }\r\n                            } ,opts.triggerTime);\r\n\r\n                        },function(){\r\n                            clearTimeout(mst);\r\n                            switch (effect){ case \"fade\":_tar.animate( {opacity:\"hide\"},delayTime,easing ); break; case \"slideDown\":_tar.animate( {height:\"hide\"},delayTime,easing ); break; }\r\n                        }\r\n                );\r\n\r\n                if (returnDefault){ \r\n                    slider.hover(function(){clearTimeout(rtnST);},function(){ rtnST = setTimeout( resetOn,delayTime ); });\r\n                }\r\n                \r\n\r\n                return;\r\n            }\r\n\r\n            \r\n            //处理分页\r\n            if( navObjSize==0 )navObjSize=conBoxSize;//只有左右按钮\r\n            if( isMarq ) navObjSize=2;\r\n            if( autoPage ){\r\n                if(conBoxSize>=vis){\r\n                    if( effect==\"leftLoop\" || effect==\"topLoop\" ){ navObjSize=conBoxSize%scroll!=0?(conBoxSize/scroll^0)+1:conBoxSize/scroll; }\r\n                    else{ \r\n                            var tempS = conBoxSize-vis;\r\n                            navObjSize=1+parseInt(tempS%scroll!=0?(tempS/scroll+1):(tempS/scroll)); \r\n                            if(navObjSize<=0)navObjSize=1; \r\n                    }\r\n                }\r\n                else{ navObjSize=1 }\r\n                \r\n                navObj.html(\"\"); \r\n                var str=\"\";\r\n\r\n                if( opts.autoPage==true || opts.autoPage==\"true\" ){ for( var i=0; i<navObjSize; i++ ){ str+=\"<li>\"+(i+1)+\"</li>\" } }\r\n                else{ for( var i=0; i<navObjSize; i++ ){ str+=opts.autoPage.replace(\"$\",(i+1))  } }\r\n                navObj.html(str); \r\n                \r\n                var navObj = navObj.children();//重置导航子元素对象\r\n            }\r\n\r\n\r\n            if(conBoxSize>=vis){ //当内容个数少于可视个数，不执行效果。\r\n                conBox.children().each(function(){ //取最大值\r\n                    if( $(this).width()>selfW ){ selfW=$(this).width(); slideW=$(this).outerWidth(true);  }\r\n                    if( $(this).height()>selfH ){ selfH=$(this).height(); slideH=$(this).outerHeight(true);  }\r\n                });\r\n\r\n                var _chr = conBox.children();\r\n                var cloneEle = function(){ \r\n                    for( var i=0; i<vis ; i++ ){ _chr.eq(i).clone().addClass(\"clone\").appendTo(conBox); } \r\n                    for( var i=0; i<cloneNum ; i++ ){ _chr.eq(conBoxSize-i-1).clone().addClass(\"clone\").prependTo(conBox); }\r\n                }\r\n                \r\n                switch(effect)\r\n                {\r\n                    case \"fold\": conBox.css({\"position\":\"relative\",\"width\":slideW,\"height\":slideH}).children().css( {\"position\":\"absolute\",\"width\":selfW,\"left\":0,\"top\":0,\"display\":\"none\"} ); break;\r\n                    case \"top\": conBox.wrap('<div class=\"tempWrap\" style=\"overflow:hidden; position:relative; height:'+vis*slideH+'px\"></div>').css( { \"top\":-(index*scroll)*slideH, \"position\":\"relative\",\"padding\":\"0\",\"margin\":\"0\"}).children().css( {\"height\":selfH} ); break;\r\n                    case \"left\": conBox.wrap('<div class=\"tempWrap\" style=\"overflow:hidden; position:relative; width:'+vis*slideW+'px\"></div>').css( { \"width\":conBoxSize*slideW,\"left\":-(index*scroll)*slideW,\"position\":\"relative\",\"overflow\":\"hidden\",\"padding\":\"0\",\"margin\":\"0\"}).children().css( {\"float\":\"left\",\"width\":selfW} ); break;\r\n                    case \"leftLoop\":\r\n                    case \"leftMarquee\":\r\n                        cloneEle();\r\n                        conBox.wrap('<div class=\"tempWrap\" style=\"overflow:hidden; position:relative; width:'+vis*slideW+'px\"></div>').css( { \"width\":(conBoxSize+vis+cloneNum)*slideW,\"position\":\"relative\",\"overflow\":\"hidden\",\"padding\":\"0\",\"margin\":\"0\",\"left\":-(cloneNum+index*scroll)*slideW}).children().css( {\"float\":\"left\",\"width\":selfW}  ); break;\r\n                    case \"topLoop\":\r\n                    case \"topMarquee\":\r\n                        cloneEle();\r\n                        conBox.wrap('<div class=\"tempWrap\" style=\"overflow:hidden; position:relative; height:'+vis*slideH+'px\"></div>').css( { \"height\":(conBoxSize+vis+cloneNum)*slideH,\"position\":\"relative\",\"padding\":\"0\",\"margin\":\"0\",\"top\":-(cloneNum+index*scroll)*slideH}).children().css( {\"height\":selfH} ); break;\r\n                }\r\n            }\r\n\r\n\r\n\r\n            //针对leftLoop、topLoop的滚动个数\r\n            var scrollNum=function(ind){ \r\n                var _tempCs= ind*scroll; \r\n                if( ind==navObjSize ){ _tempCs=conBoxSize; }else if( ind==-1 && conBoxSize%scroll!=0){ _tempCs=-conBoxSize%scroll; }\r\n                return _tempCs;\r\n            }\r\n\r\n            //切换加载\r\n            var doSwitchLoad=function(objs){ \r\n\r\n                    var changeImg=function(t){\r\n                        for ( var i= t; i<( vis+ t); i++ ){\r\n                                objs.eq(i).find(\"img[\"+sLoad+\"]\").each(function(){ \r\n                                    var _this =  $(this);\r\n                                    _this.attr(\"src\",_this.attr(sLoad)).removeAttr(sLoad);\r\n                                    if( conBox.find(\".clone\")[0] ){ //如果存在.clone\r\n                                        var chir = conBox.children();\r\n                                        for ( var j=0 ; j< chir.size() ; j++ )\r\n                                        {\r\n                                            chir.eq(j).find(\"img[\"+sLoad+\"]\").each(function(){\r\n                                                if( $(this).attr(sLoad)==_this.attr(\"src\") ) $(this).attr(\"src\",$(this).attr(sLoad)).removeAttr(sLoad) \r\n                                            })\r\n                                        }\r\n                                    }\r\n                                })\r\n                            }\r\n                    }\r\n\r\n                    switch(effect)\r\n                    {\r\n                        case \"fade\": case \"fold\": case \"top\": case \"left\": case \"slideDown\":\r\n                            changeImg( index*scroll );\r\n                            break;\r\n                        case \"leftLoop\": case \"topLoop\":\r\n                            changeImg( cloneNum+scrollNum(_ind) );\r\n                            break;\r\n                        case \"leftMarquee\":case \"topMarquee\": \r\n                            var curS = effect==\"leftMarquee\"? conBox.css(\"left\").replace(\"px\",\"\"):conBox.css(\"top\").replace(\"px\",\"\"); \r\n                            var slideT = effect==\"leftMarquee\"? slideW:slideH; \r\n                            var mNum=cloneNum;\r\n                            if( curS%slideT!=0 ){\r\n                                var curP = Math.abs(curS/slideT^0);\r\n                                if( index==1 ){ mNum=cloneNum+curP }else{  mNum=cloneNum+curP-1  }\r\n                            }\r\n                            changeImg( mNum );\r\n                            break;\r\n                    }\r\n            }//doSwitchLoad end\r\n\r\n\r\n            //效果函数\r\n            var doPlay=function(init){\r\n                 // 当前页状态不触发效果\r\n                if( defaultPlay && oldIndex==index && !init && !isMarq ) return;\r\n                \r\n                //处理页码\r\n                if( isMarq ){ if ( index>= 1) { index=1; } else if( index<=0) { index = 0; } }\r\n                else{ \r\n                    _ind=index; if ( index >= navObjSize) { index = 0; } else if( index < 0) { index = navObjSize-1; }\r\n                }\r\n\r\n                doStartFun();\r\n\r\n                //处理切换加载\r\n                if( sLoad!=null ){ doSwitchLoad( conBox.children() ) }\r\n\r\n                //处理targetCell\r\n                if(tarObj[0]){ \r\n                    _tar = tarObj.eq(index);\r\n                    if( sLoad!=null ){ doSwitchLoad( tarObj ) }\r\n                    if( effect==\"slideDown\" ){\r\n                            tarObj.not(_tar).stop(true,true).slideUp(delayTime); \r\n                            _tar.slideDown( delayTime,easing,function(){ if(!conBox[0]) doEndFun() }); \r\n                    }\r\n                    else{\r\n                            tarObj.not(_tar).stop(true,true).hide();\r\n                            _tar.animate({opacity:\"show\"},delayTime,function(){ if(!conBox[0]) doEndFun() }); \r\n                    }\r\n                }\r\n                \r\n                if(conBoxSize>=vis){ //当内容个数少于可视个数，不执行效果。\r\n                    switch (effect)\r\n                    {\r\n                        case \"fade\":conBox.children().stop(true,true).eq(index).animate({opacity:\"show\"},delayTime,easing,function(){doEndFun()}).siblings().hide(); break;\r\n                        case \"fold\":conBox.children().stop(true,true).eq(index).animate({opacity:\"show\"},delayTime,easing,function(){doEndFun()}).siblings().animate({opacity:\"hide\"},delayTime,easing);break;\r\n                        case \"top\":conBox.stop(true,false).animate({\"top\":-index*scroll*slideH},delayTime,easing,function(){doEndFun()});break;\r\n                        case \"left\":conBox.stop(true,false).animate({\"left\":-index*scroll*slideW},delayTime,easing,function(){doEndFun()});break;\r\n                        case \"leftLoop\":\r\n                            var __ind = _ind;\r\n                            conBox.stop(true,true).animate({\"left\":-(scrollNum(_ind)+cloneNum)*slideW},delayTime,easing,function(){\r\n                                if( __ind<=-1 ){ conBox.css(\"left\",-(cloneNum+(navObjSize-1)*scroll)*slideW);  }else if( __ind>=navObjSize ){ conBox.css(\"left\",-cloneNum*slideW); }\r\n                                doEndFun();\r\n                            });\r\n                            break;//leftLoop end\r\n\r\n                        case \"topLoop\":\r\n                            var __ind = _ind;\r\n                            conBox.stop(true,true).animate({\"top\":-(scrollNum(_ind)+cloneNum)*slideH},delayTime,easing,function(){\r\n                                if( __ind<=-1 ){ conBox.css(\"top\",-(cloneNum+(navObjSize-1)*scroll)*slideH);  }else if( __ind>=navObjSize ){ conBox.css(\"top\",-cloneNum*slideH); }\r\n                                doEndFun();\r\n                            });\r\n                            break;//topLoop end\r\n\r\n                        case \"leftMarquee\":\r\n                            var tempLeft = conBox.css(\"left\").replace(\"px\",\"\"); \r\n                            if(index==0 ){\r\n                                    conBox.animate({\"left\":++tempLeft},0,function(){\r\n                                        if( conBox.css(\"left\").replace(\"px\",\"\")>= 0){ conBox.css(\"left\",-conBoxSize*slideW) }\r\n                                    });\r\n                            }\r\n                            else{\r\n                                    conBox.animate({\"left\":--tempLeft},0,function(){\r\n                                        if(  conBox.css(\"left\").replace(\"px\",\"\")<= -(conBoxSize+cloneNum)*slideW){ conBox.css(\"left\",-cloneNum*slideW) }\r\n                                    });\r\n                            }break;// leftMarquee end\r\n\r\n                            case \"topMarquee\":\r\n                            var tempTop = conBox.css(\"top\").replace(\"px\",\"\"); \r\n                            if(index==0 ){\r\n                                    conBox.animate({\"top\":++tempTop},0,function(){\r\n                                        if( conBox.css(\"top\").replace(\"px\",\"\")>= 0){ conBox.css(\"top\",-conBoxSize*slideH) }\r\n                                    });\r\n                            }\r\n                            else{\r\n                                    conBox.animate({\"top\":--tempTop},0,function(){\r\n                                        if(  conBox.css(\"top\").replace(\"px\",\"\")<= -(conBoxSize+cloneNum)*slideH){ conBox.css(\"top\",-cloneNum*slideH) }\r\n                                    });\r\n                            }break;// topMarquee end\r\n\r\n                    }//switch end\r\n                }\r\n\r\n                    navObj.removeClass(titOn).eq(index).addClass(titOn);\r\n                    oldIndex=index;\r\n                    if( !pnLoop ){ //pnLoop控制前后按钮是否继续循环\r\n                        nextBtn.removeClass(\"nextStop\"); prevBtn.removeClass(\"prevStop\");\r\n                        if (index==0 ){ prevBtn.addClass(\"prevStop\"); }\r\n                        if (index==navObjSize-1 ){ nextBtn.addClass(\"nextStop\"); }\r\n                    }\r\n\r\n                    pageState.html( \"<span>\"+(index+1)+\"</span>/\"+navObjSize);\r\n\r\n            };// doPlay end\r\n\r\n            //初始化执行\r\n            if( defaultPlay ){ doPlay(true); }\r\n\r\n            if (returnDefault)//返回默认状态\r\n            {\r\n                slider.hover(function(){ clearTimeout(rtnST) },function(){\r\n                        rtnST = setTimeout( function(){\r\n                            index=defaultIndex;\r\n                            if(defaultPlay){ doPlay(); }\r\n                            else{\r\n                                if( effect==\"slideDown\" ){ _tar.slideUp( delayTime, resetOn ); }\r\n                                else{ _tar.animate({opacity:\"hide\"},delayTime,resetOn ); }\r\n                            }\r\n                            oldIndex=index;\r\n                        },300 );\r\n                });\r\n            }\r\n            \r\n            ///自动播放函数\r\n            var setInter = function(time){ inter=setInterval(function(){  opp?index--:index++; doPlay() }, !!time?time:interTime);  }\r\n            var setMarInter = function(time){ inter = setInterval(doPlay, !!time?time:interTime);  }\r\n            // 处理mouseOverStop\r\n            var resetInter = function(){ if( !mouseOverStop ){clearInterval(inter); setInter() } }\r\n            // 前后按钮触发\r\n            var nextTrigger = function(){ if ( pnLoop || index!=navObjSize-1 ){ index++; doPlay(); if(!isMarq)resetInter(); } }\r\n            var prevTrigger = function(){ if ( pnLoop || index!=0 ){ index--; doPlay(); if(!isMarq)resetInter(); } }\r\n            //处理playState\r\n            var playStateFun = function(){ clearInterval(inter); isMarq?setMarInter():setInter(); playState.removeClass(\"pauseState\") }\r\n            var pauseStateFun = function(){ clearInterval(inter);playState.addClass(\"pauseState\"); }\r\n\r\n            //自动播放\r\n            if (autoPlay) {\r\n                    if( isMarq ){ \r\n                        opp?index--:index++; setMarInter();\r\n                        if(mouseOverStop) conBox.hover(pauseStateFun,playStateFun);\r\n                    }else{\r\n                        setInter();\r\n                        if(mouseOverStop) slider.hover( pauseStateFun,playStateFun );\r\n                    }\r\n            }\r\n            else{ if( isMarq ){ opp?index--:index++; } playState.addClass(\"pauseState\"); }\r\n\r\n            playState.click(function(){  playState.hasClass(\"pauseState\")?playStateFun():pauseStateFun()  });\r\n\r\n            //titCell事件\r\n            if(opts.trigger==\"mouseover\"){\r\n                navObj.hover(function(){ var hoverInd = navObj.index(this);  mst = setTimeout(function(){  index=hoverInd; doPlay(); resetInter();  },opts.triggerTime); }, function(){ clearTimeout(mst) });\r\n            }else{ navObj.click(function(){ index=navObj.index(this); doPlay(); resetInter(); })  }\r\n\r\n            //前后按钮事件\r\n            if (isMarq){\r\n                \r\n                nextBtn.mousedown(nextTrigger);\r\n                prevBtn.mousedown(prevTrigger);\r\n                //前后按钮长按10倍加速\r\n                if (pnLoop)\r\n                {   \r\n                    var st;\r\n                    var marDown = function(){ st=setTimeout(function(){ clearInterval(inter); setMarInter( interTime/10^0 ) },150) }\r\n                    var marUp = function(){ clearTimeout(st); clearInterval(inter); setMarInter() }\r\n                    nextBtn.mousedown(marDown); nextBtn.mouseup(marUp);\r\n                    prevBtn.mousedown(marDown); prevBtn.mouseup(marUp);\r\n                }\r\n                //前后按钮mouseover事件\r\n                if( opts.trigger==\"mouseover\"  ){ nextBtn.hover(nextTrigger,function(){}); prevBtn.hover(prevTrigger,function(){}); }\r\n            }else{\r\n                nextBtn.click(nextTrigger);\r\n                prevBtn.click(prevTrigger);\r\n            }\r\n\r\n        });//each End\r\n\r\n    };//slide End\r\n    return $.fn.slide\r\n});\r\n",
    "_tpl/ggmod.js": "define('_tpl/ggmod',function(){return {\"_poptips\":\"<script id=\\\"tpl_ggmod_poptips\\\" type=\\\"text/html\\\"><div class=\\\"envelopeBubble png\\\" style=\\\"right: 200px; display: block;\\\"><div class=\\\"ebClose\\\"></div><div class=\\\"ebtime\\\"><i><span>23</span><strong>时</strong></i><i><span>25</span><strong>分</strong></i><i style=\\\"margin-right:0\\\"><span>59</span><strong>秒</strong></i></div><div class=\\\"ebbmont\\\"><a href=\\\"http://www.jumei.com/i/membership/show_promocards\\\"><span>查看您的</span><span class=\\\"price_l\\\">165</span><span>元现金券</span></a></div></div></script>\"};});",
    "_tpl/header.js": "define('_tpl/header',function(){return {\"cartbtn\":\"<div class=\\\"cart_box\\\" id=\\\"cart_box\\\" vm-class=\\\"car-current:isOn\\\"><a rel=\\\"nofollow\\\" href=\\\"http://cart.jumei.com/i/cart/show?from=header_cart\\\" class=\\\"cart_link\\\" id=\\\"cart\\\" vm-mouseenter=\\\"movein\\\" vm-mouseleave=\\\"moveout\\\"><img width=\\\"28\\\" height=\\\"28\\\" class=\\\"cart_gif\\\" src=\\\"http://p0.jmstatic.com/assets/cart.gif\\\"><span class=\\\"text\\\">去购物车结算</span><span class=\\\"num\\\" vm-if=\\\"cartInfo.quantity > 0\\\">{{cartInfo.quantity}}</span><s class=\\\"icon_arrow_right\\\"></s></a><div id=\\\"cart_content\\\" class=\\\"cart_content\\\" vm-include=\\\"tpl_cart\\\" data-include-rendered=\\\"render\\\" vm-mouseenter=\\\"movein\\\" vm-mouseleave=\\\"moveout\\\"></div></div>\",\"userinfo\":\"<ul id=\\\"headerTopLeft\\\" class=\\\"header_top_left\\\" vm-if=\\\"isLogin\\\"><li class=\\\"signin\\\">欢迎您，<span class=\\\"col_jumei\\\"><a target=\\\"_blank\\\" href=\\\"http://www.jumei.com/i/order/list\\\">JM135ACCE2090</a></span> [ <a href=\\\"http://passport.jumei.com/i/account/logout\\\" class=\\\"signout\\\">退出</a> ]</li></ul><ul class=\\\"header_top_left\\\" id=\\\"headerTopLeft\\\" vm-if=\\\"!isLogin\\\"><li>欢迎来到聚美！</li><li><a href=\\\"http://www.jumei.com/i/account/login\\\" rel=\\\"nofollow\\\">请登录</a></li><li><a href=\\\"http://www.jumei.com/i/account/signup\\\" rel=\\\"nofollow\\\">快速注册</a></li></ul>\",\"_cartlist\":\"<script id=\\\"tpl_header_cartlist\\\" type=\\\"text/html\\\"><i class=\\\"cart-icons\\\"></i><div class=\\\"cart_content_null\\\" vm-if=\\\"cartInfo.quantity == 0\\\"> 购物车中还没有商品， <br>快去挑选心爱的商品吧！</div><div class=\\\"cart_content_all\\\" vm-if=\\\"cartInfo.quantity > 0\\\"><div class=\\\"cart_left_time\\\"><span class=\\\"cart_timer\\\">16分27.6</span>后购物车将被清空,请及时结算</div><div class=\\\"cart_content_center\\\"><div class=\\\"cart_con_over cart_con_single\\\" vm-repeat=\\\"cartInfo.product.items\\\"><div class=\\\"single_pic\\\"><a vm-attr-alt=\\\"el.short_name\\\" target=\\\"_blank\\\" vm-href=\\\"el.url + '?from=home_cart_float'\\\"><img vm-src=\\\"el.image_60\\\"></a></div><div class=\\\"single_info\\\"><a class=\\\"name\\\" vm-attr-alt=\\\"el.short_name\\\" target=\\\"_blank\\\" vm-href=\\\"el.url + '?from=home_cart_float'\\\">{{el.short_name}}</a><span class=\\\"price\\\">￥{{el.item_price}}</span><span class=\\\"price_plus\\\"> x </span><span class=\\\"price_num\\\">{{el.quantity}}</span></div></div></div><div class=\\\"con_all\\\"><div class=\\\"price_whole\\\"><span>共<span class=\\\"num_all\\\">{{cartInfo.quantity}}</span>件商品</span></div><div><span class=\\\"price_gongji\\\">共计<em>￥</em><span class=\\\"total_price\\\">{{cartInfo.total_amount}}</span></span><a rel=\\\"nofollow\\\" class=\\\"cart_btn\\\" href=\\\"http://cart.jumei.com/i/cart/show/?from=header_cart\\\">去购物车结算</a></div></div></div></script>\"};});",
    "_tpl/ibar.js": "define('_tpl/ibar',function(){return {\"main\":\"<div id=\\\"iBar\\\" class=\\\"ibar\\\" vm-controller=\\\"global_ibar\\\"><div class=\\\"ibar_main_panel\\\" style=\\\"left: 0px;\\\"><ul class=\\\"ibar_mp_center\\\"><li class=\\\"mpbtn_login\\\"><a href=\\\"javascript:;\\\" vm-click=\\\"openLogin\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"><s></s><span>登录</span></a></li><li class=\\\"mpbtn_cart\\\"><a href=\\\"javascript:;\\\" vm-click=\\\"openPanel(1)\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"><s></s><span class=\\\"text\\\">购物车</span><span class=\\\"cart_num\\\">{{cartInfo.quantity}}</span></a></li><li class=\\\"mpbtn_asset\\\"><a href=\\\"javascript:;\\\" vm-mouseenter=\\\"showTips(-122,-92)\\\" vm-mouseleave=\\\"hideTips(-122)\\\" vm-click=\\\"openPanel(4)\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"><s></s><span>我的财产</span></a><div class=\\\"mp_tooltip\\\">我的财产 <s class=\\\"icon_arrow_right_black\\\"></s></div></li><li class=\\\"mpbtn_favorite\\\"><a href=\\\"javascript:;\\\" vm-mouseenter=\\\"showTips(-122,-92)\\\" vm-mouseleave=\\\"hideTips(-122)\\\" vm-click=\\\"openPanel(2)\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"><s></s><span>我的心愿单</span></a><div class=\\\"mp_tooltip\\\">我的心愿单 <s class=\\\"icon_arrow_right_black\\\"></s></div></li><li class=\\\"mpbtn_histroy\\\"><a href=\\\"javascript:;\\\" vm-mouseenter=\\\"showTips(-122,-92)\\\" vm-mouseleave=\\\"hideTips(-122)\\\" vm-click=\\\"openPanel(3)\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"><s></s><span>我看过的</span></a><div class=\\\"mp_tooltip\\\">我看过的 <s class=\\\"icon_arrow_right_black\\\"></s></div></li><li class=\\\"mpbtn_recharge\\\"><a href=\\\"javascript:;\\\" vm-mouseenter=\\\"showTips(-122,-92)\\\" vm-mouseleave=\\\"hideTips(-122)\\\" vm-click=\\\"openPanel(5)\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"><s></s><span class=\\\"text\\\">充</span></a><div class=\\\"mp_tooltip\\\">我要充值 <s class=\\\"icon_arrow_right_black\\\"></s></div></li></ul><ul class=\\\"ibar_mp_bottom\\\"><li class=\\\"mpbtn_qrcode\\\"><a href=\\\"javascript:;\\\" vm-mouseenter=\\\"showTips(-188,-168)\\\" vm-mouseleave=\\\"hideTips(-188)\\\" vm-click=\\\"hidePanel(20)\\\"><s></s>手机聚美</a><div class=\\\"mp_qrcode\\\"><img width=\\\"148\\\" height=\\\"175\\\" src=\\\"http://s0.jmstatic.com/templates/jumei/images/ibar/qrcode.png?v=0\\\"><s class=\\\"icon_arrow_white\\\"></s></div></li><li class=\\\"mpbtn_support\\\"><a href=\\\"javascript:;\\\" vm-mouseenter=\\\"showTips(-122,-92)\\\" vm-mouseleave=\\\"hideTips(-122)\\\" vm-click=\\\"hidePanel(20)\\\"><s></s>客服中心</a><div class=\\\"mp_tooltip\\\">客服中心 <s class=\\\"icon_arrow_right_black\\\"></s></div></li><li id=\\\"gotop\\\" class=\\\"mpbtn_gotop\\\"><a href=\\\"javascript:;\\\" class=\\\"btn_gotop\\\" vm-mouseenter=\\\"showTips(-122,-92)\\\" vm-mouseleave=\\\"hideTips(-122)\\\" vm-click=\\\"goTop\\\" vm-click-1=\\\"hidePanel(20)\\\" style=\\\"visibility: visible;\\\"><s></s>返回顶部</a><div class=\\\"mp_tooltip\\\">返回顶部 <s class=\\\"icon_arrow_right_black\\\"></s></div></li></ul></div><div class=\\\"ibar_tips_box\\\" vm-include=\\\"tpl_tips\\\" data-include-rendered=\\\"render\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"></div><div class=\\\"ibar_login_box status_login\\\" vm-include=\\\"tpl_login\\\" data-include-rendered=\\\"render\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"></div><div class=\\\"ibar_sub_panel\\\" vm-include=\\\"tpl_panel\\\" data-include-rendered=\\\"render\\\" vm-mouseenter=\\\"openPanel()\\\" vm-mouseleave=\\\"hidePanel(2000)\\\"></div></div>\",\"_asset\":\"<script id=\\\"tpl_ibar_asset\\\" type=\\\"text/html\\\"><a title=\\\"关闭\\\" class=\\\"ibar_closebtn\\\" href=\\\"javascript:;\\\" vm-click=\\\"hidePanel(20)\\\"></a><span class=\\\"ibar_loading_text\\\">正在为您努力加载数据！</span><div class=\\\"ibar-Asset-wrap ibar-moudle-wrap ibar_plugin\\\" id=\\\"iBarAsset\\\" style=\\\"display: block;\\\"><h2 class=\\\"ibar_plugin_title\\\"><span class=\\\"ibar_plugin_name\\\">我的财产</span></h2><div class=\\\"ibar_plugin_content\\\" style=\\\"height: 720px; overflow-y: auto;\\\"><div class=\\\"ia-head-list clearfix\\\"><a href=\\\"http://www.jumei.com/i/membership/show_promocards?from=ibar_property_xianjinquan\\\" target=\\\"_blank\\\" class=\\\"ihl-quan fl\\\"><div class=\\\"num\\\">0</div><div class=\\\"text\\\">现金券</div></a><a href=\\\"http://www.jumei.com/i/membership/show_red_envelope?from=ibar_property_hongbao\\\" target=\\\"_blank\\\" class=\\\"ihl-hg fl\\\"><div class=\\\"num\\\">0</div><div class=\\\"text\\\">红包</div></a><a href=\\\"http://www.jumei.com/i/account/balance?from=ibar_property_yue\\\" target=\\\"_blank\\\" class=\\\"ihl-money fl\\\"><div class=\\\"num\\\">¥0</div><div class=\\\"text\\\">余额</div></a></div><div class=\\\"ga-expiredsoon\\\"><div class=\\\"es-head\\\">即将过期现金券</div><div class=\\\"ia-none\\\">您还没有可用的现金券哦！</div></div><div class=\\\"ga-expiredsoon\\\"><div class=\\\"es-head\\\">即将过期红包</div><div class=\\\"ia-none\\\">您还没有可用的红包哦！</div></div></div></div></script>\",\"_cart\":\"<script id=\\\"tpl_ibar_cart\\\" type=\\\"text/html\\\"><a title=\\\"关闭\\\" class=\\\"ibar_closebtn\\\" href=\\\"javascript:;\\\" vm-click=\\\"hidePanel(20)\\\"></a><span class=\\\"ibar_loading_text\\\">正在为您努力加载数据！</span><div class=\\\"ibar_plugin ibar_cart_content\\\" id=\\\"iBarCart\\\"><div class=\\\"ibar_plugin_title\\\"><span class=\\\"ibar_plugin_name\\\">购物车<span class=\\\"ibar_cart_timer\\\" style=\\\"display: inline;\\\">已超时，请尽快结算</span></span></div><div class=\\\"ibar_plugin_content ibar_cart_content\\\"><div class=\\\"ibar_cart_group_container\\\" style=\\\"position: absolute;\\\"><div class=\\\"ibar_cart_group ibar_cart_product\\\"><div class=\\\"ibar_cart_group_header clearfix\\\"><span class=\\\"ibar_cart_group_title\\\">聚美优品</span><span class=\\\"ibar_cart_group_shop ibar_text_ellipsis\\\"></span><span class=\\\"ibar_cart_group_baoyou ibar_pink\\\">新用户首单满<i>39</i>元包邮</span></div><ul class=\\\"ibar_cart_group_items\\\"><li class=\\\"ibar_cart_item clearfix\\\" vm-repeat=\\\"cartInfo.product.items\\\"><div class=\\\"ibar_cart_item_pic\\\"><a target=\\\"_blank\\\" vm-attr-title=\\\"el.short_name\\\" vm-href=\\\"el.url + '?from=ibar_cart'\\\"><img vm-attr-alt=\\\"el.short_name\\\" vm-src=\\\"el.image_100\\\"><span class=\\\"ibar_cart_item_tag png\\\" vm-class=\\\"ibar_cart_item_tag_active ibar_cart_item_tag_soldout:el.sale_status != ''\\\"></span></a></div><div class=\\\"ibar_cart_item_desc\\\"><span class=\\\"ibar_cart_item_name_wrapper\\\"><span class=\\\"ibar_cart_item_global\\\">[极速免税店]</span><a target=\\\"_blank\\\" class=\\\"ibar_cart_item_name\\\" vm-attr-title=\\\"el.short_name\\\" vm-href=\\\"el.url + '?from=ibar_cart'\\\">{{el.short_name}}</a></span><div class=\\\"ibar_cart_item_sku ibar_text_ellipsis\\\"><span>{{el.attribute}}</span></div><div class=\\\"ibar_cart_item_price ibar_pink\\\"><span class=\\\"unit_price\\\">￥{{el.item_price}}</span><span class=\\\"unit_plus\\\"> x </span><span class=\\\"ibar_cart_item_count\\\">{{el.quantity}}</span></div></div></li></ul></div><p class=\\\"ibar_cart_loading_text\\\">正在为您努力地加载数据！</p></div><div class=\\\"ibar_cart_handler ibar_cart_handler_attached\\\" style=\\\"display: block; bottom: 45px\\\"><div class=\\\"ibar_cart_handler_header clearfix\\\"><span class=\\\"ibar_cart_handler_header_left\\\">共 <span class=\\\"ibar_cart_total_quantity ibar_pink\\\">{{cartInfo.quantity}}</span> 件商品</span><span class=\\\"ibar_cart_total_price ibar_pink\\\">￥{{cartInfo.total_amount}}</span></div><a target=\\\"_blank\\\" href=\\\"http://cart.jumei.com/i/cart/show?from=ibar_cart_button\\\" class=\\\"ibar_cart_go_btn\\\">去购物车结算</a></div></div></div></script>\",\"_favorite\":\"<script id=\\\"tpl_ibar_favorite\\\" type=\\\"text/html\\\"><a href=\\\"javascript:;\\\" class=\\\"ibar_closebtn\\\" title=\\\"关闭\\\" vm-click=\\\"hidePanel(20)\\\"></a><span class=\\\"ibar_loading_text\\\">正在为您努力加载数据！</span><div class=\\\"ibar-moudle-wrap ibar_plugin\\\" id=\\\"iBarFavorite\\\" style=\\\"display: block;\\\"><h2 class=\\\"ibar_plugin_title\\\"><span class=\\\"ibar_plugin_name\\\">今日疯抢</span></h2><div class=\\\"ibar_plugin_content\\\" style=\\\"height: 700px; overflow-y: auto;\\\"><div class=\\\"ibar-nothing\\\"><div class=\\\"txt\\\">您没有在售中的 <br><span>心愿商品喔！</span></div></div><div class=\\\"ibar-moudle-product soon\\\"><h2>即将开抢</h2><div class=\\\"imp_item\\\"><div class=\\\"imp-starttime\\\">03月25日10:00:00开抢</div><a href=\\\"http://gz.jumei.com/i/deal/d150325p21839zc.html?from=ibar_mywish_willsale\\\" title=\\\"15ml欧莱雅复颜抗皱紧致滋润眼霜\\\" target=\\\"_blank\\\" class=\\\"pic\\\"><img src=\\\"http://p4.jmstatic.com/product/000/021/21839_std/21839_100_100.jpg\\\" width=\\\"100\\\" height=\\\"100\\\"></a><p class=\\\"tit\\\"><a href=\\\"http://gz.jumei.com/i/deal/d150325p21839zc.html?from=ibar_mywish_willsale\\\" title=\\\"15ml欧莱雅复颜抗皱紧致滋润眼霜\\\" target=\\\"_blank\\\">15ml欧莱雅复颜抗皱紧致滋润眼霜</a></p><p class=\\\"wish-num\\\">已有318人许愿</p><p></p><p class=\\\"price\\\"><em>¥</em>189 <del>¥210</del></p></div><div class=\\\"imp_item\\\"><div class=\\\"imp-starttime\\\">03月25日10:00:00开抢</div><a href=\\\"http://gz.jumei.com/i/deal/d150325p817644zc.html?from=ibar_mywish_willsale\\\" title=\\\"套欧莱雅限量清润保湿护肤礼盒套装\\\" target=\\\"_blank\\\" class=\\\"pic\\\"><img src=\\\"http://p4.jmstatic.com/product/000/817/817644_std/817644_100_100.jpg\\\" width=\\\"100\\\" height=\\\"100\\\"></a><p class=\\\"tit\\\"><a href=\\\"http://gz.jumei.com/i/deal/d150325p817644zc.html?from=ibar_mywish_willsale\\\" title=\\\"套欧莱雅限量清润保湿护肤礼盒套装\\\" target=\\\"_blank\\\">套欧莱雅限量清润保湿护肤礼盒套装</a></p><p class=\\\"wish-num\\\">已有1139人许愿</p><p></p><p class=\\\"price\\\"><em>¥</em>330 <del>¥509</del></p></div></div></div></div><div class=\\\"ibar-Asset-wrap ibar-moudle-wrap ibar_plugin\\\" id=\\\"iBarAsset\\\" style=\\\"display: none;\\\"><h2 class=\\\"ibar_plugin_title\\\"><span class=\\\"ibar_plugin_name\\\">我的财产</span></h2><div class=\\\"ibar_plugin_content\\\" style=\\\"height: 700px; overflow-y: auto;\\\"><div class=\\\"ia-head-list clearfix\\\"><a href=\\\"http://www.jumei.com/i/membership/show_promocards?from=ibar_property_xianjinquan\\\" target=\\\"_blank\\\" class=\\\"ihl-quan fl\\\"><div class=\\\"num\\\">0</div><div class=\\\"text\\\">现金券</div></a><a href=\\\"http://www.jumei.com/i/membership/show_red_envelope?from=ibar_property_hongbao\\\" target=\\\"_blank\\\" class=\\\"ihl-hg fl\\\"><div class=\\\"num\\\">0</div><div class=\\\"text\\\">红包</div></a><a href=\\\"http://www.jumei.com/i/account/balance?from=ibar_property_yue\\\" target=\\\"_blank\\\" class=\\\"ihl-money fl\\\"><div class=\\\"num\\\">¥0</div><div class=\\\"text\\\">余额</div></a></div><div class=\\\"ga-expiredsoon\\\"><div class=\\\"es-head\\\">即将过期现金券</div><div class=\\\"ia-none\\\">您还没有可用的现金券哦！</div></div><div class=\\\"ga-expiredsoon\\\"><div class=\\\"es-head\\\">即将过期红包</div><div class=\\\"ia-none\\\">您还没有可用的红包哦！</div></div></div></div></script>\",\"_history\":\"<script id=\\\"tpl_ibar_history\\\" type=\\\"text/html\\\"><a title=\\\"关闭\\\" class=\\\"ibar_closebtn\\\" href=\\\"javascript:;\\\" vm-click=\\\"hidePanel(20)\\\"></a><span class=\\\"ibar_loading_text\\\">正在为您努力加载数据！</span><div id=\\\"iBarHistroy\\\" class=\\\"ibar-moudle-wrap ibar_plugin\\\"><h2 class=\\\"ibar_plugin_title\\\"><span class=\\\"ibar_plugin_name\\\">最近查看</span></h2><div class=\\\"ibar_plugin_content\\\"><div class=\\\"ibar-history-head\\\">共5件商品<a id=\\\"ibar-btn-clearhistory\\\" href=\\\"javascript:;\\\">清空</a></div><div class=\\\"ibar-moudle-product\\\"><div class=\\\"imp_item\\\"><a class=\\\"pic\\\" target=\\\"_blank\\\" title=\\\"小美盒碧欧泉主题盒七件套1\\\" href=\\\"http://item.jumei.com/gz150318p1309926.html?from=ibar_view_recent_product\\\"><img width=\\\"100\\\" height=\\\"100\\\" src=\\\"http://p1.jmstatic.com/product/001/309/1309926_std/1309926_100_100.jpg\\\"></a><p class=\\\"tit\\\"><a target=\\\"_blank\\\" title=\\\"小美盒碧欧泉主题盒七件套1\\\" href=\\\"http://item.jumei.com/gz150318p1309926.html?from=ibar_view_recent_product\\\">小美盒碧欧泉主题盒七件套1</a></p><p class=\\\"price\\\"><em>¥</em>200</p><a img=\\\"http://p1.jmstatic.com/product/001/309/1309926_std/1309926_100_100.jpg\\\" type=\\\"deal\\\" key=\\\"gz150318p1309926\\\" class=\\\"imp-addCart\\\" target=\\\"_blnak\\\" href=\\\"javascript:;\\\">加入购物车</a><div class=\\\"sku_box\\\"><select class=\\\"sku_select\\\"><option value=\\\"0\\\">型号选择</option></select></div></div><div class=\\\"imp_item\\\"><a class=\\\"pic\\\" target=\\\"_blank\\\" title=\\\"兰蔻奇迹香氛30ml\\\" href=\\\"http://item.jumei.com/d150318p1150zc.html?from=ibar_view_recent_product\\\"><img width=\\\"100\\\" height=\\\"100\\\" src=\\\"http://p0.jmstatic.com/product/000/001/1150_std/1150_100_100.jpg\\\"></a><p class=\\\"tit\\\"><a target=\\\"_blank\\\" title=\\\"兰蔻奇迹香氛30ml\\\" href=\\\"http://item.jumei.com/d150318p1150zc.html?from=ibar_view_recent_product\\\">兰蔻奇迹香氛30ml</a></p><p class=\\\"price\\\"><em>¥</em>389</p><a img=\\\"http://p0.jmstatic.com/product/000/001/1150_std/1150_100_100.jpg\\\" type=\\\"deal\\\" key=\\\"d150318p1150zc\\\" class=\\\"imp-addCart\\\" target=\\\"_blnak\\\" href=\\\"javascript:;\\\">加入购物车</a><div class=\\\"sku_box\\\"><select class=\\\"sku_select\\\"><option value=\\\"0\\\">型号选择</option></select></div></div><div class=\\\"imp_item\\\"><a class=\\\"pic\\\" target=\\\"_blank\\\" title=\\\"珀莱雅新柔皙美白补水套装\\\" href=\\\"http://item.jumei.com/gz150105p230856bk.html?from=ibar_view_recent_product\\\"><img width=\\\"100\\\" height=\\\"100\\\" src=\\\"http://p1.jmstatic.com/product/000/230/230856_std/230856_100_100.jpg\\\"></a><p class=\\\"tit\\\"><a target=\\\"_blank\\\" title=\\\"珀莱雅新柔皙美白补水套装\\\" href=\\\"http://item.jumei.com/gz150105p230856bk.html?from=ibar_view_recent_product\\\">珀莱雅新柔皙美白补水套装</a></p><p class=\\\"price\\\"><em>¥</em>99</p><a img=\\\"http://p1.jmstatic.com/product/000/230/230856_std/230856_100_100.jpg\\\" type=\\\"deal\\\" key=\\\"gz150105p230856bk\\\" class=\\\"imp-addCart\\\" target=\\\"_blnak\\\" href=\\\"javascript:;\\\">加入购物车</a><div class=\\\"sku_box\\\"><select class=\\\"sku_select\\\"><option value=\\\"0\\\">型号选择</option></select></div></div><div class=\\\"imp_item\\\"><a class=\\\"pic\\\" target=\\\"_blank\\\" title=\\\"完美芦荟胶一对40g*2\\\" href=\\\"http://item.jumei.com/gz150105p34bk.html?from=ibar_view_recent_product\\\"><img width=\\\"100\\\" height=\\\"100\\\" src=\\\"http://p4.jmstatic.com/product/000/000/34_std/34_100_100.jpg\\\"></a><p class=\\\"tit\\\"><a target=\\\"_blank\\\" title=\\\"完美芦荟胶一对40g*2\\\" href=\\\"http://item.jumei.com/gz150105p34bk.html?from=ibar_view_recent_product\\\">完美芦荟胶一对40g*2</a></p><p class=\\\"price\\\"><em>¥</em>59.9</p><a img=\\\"http://p4.jmstatic.com/product/000/000/34_std/34_100_100.jpg\\\" type=\\\"deal\\\" key=\\\"gz150105p34bk\\\" class=\\\"imp-addCart\\\" target=\\\"_blnak\\\" href=\\\"javascript:;\\\">加入购物车</a><div class=\\\"sku_box\\\"><select class=\\\"sku_select\\\"><option value=\\\"0\\\">型号选择</option></select></div></div><div class=\\\"imp_item\\\"><a class=\\\"pic\\\" target=\\\"_blank\\\" title=\\\"兰蔻清滢柔肤水400ml\\\" href=\\\"http://item.jumei.com/d150318p646884zc.html?from=ibar_view_recent_product\\\"><img width=\\\"100\\\" height=\\\"100\\\" src=\\\"http://p4.jmstatic.com/product/000/646/646884_std/646884_100_100.jpg\\\"></a><p class=\\\"tit\\\"><a target=\\\"_blank\\\" title=\\\"兰蔻清滢柔肤水400ml\\\" href=\\\"http://item.jumei.com/d150318p646884zc.html?from=ibar_view_recent_product\\\">兰蔻清滢柔肤水400ml</a></p><p class=\\\"price\\\"><em>¥</em>299</p><a img=\\\"http://p4.jmstatic.com/product/000/646/646884_std/646884_100_100.jpg\\\" type=\\\"deal\\\" key=\\\"d150318p646884zc\\\" class=\\\"imp-addCart\\\" target=\\\"_blnak\\\" href=\\\"javascript:;\\\">加入购物车</a><div class=\\\"sku_box\\\"><select class=\\\"sku_select\\\"><option value=\\\"0\\\">型号选择</option></select></div></div></div></div></div></script>\",\"_login\":\"<script id=\\\"tpl_ibar_login\\\" type=\\\"text/html\\\"><div class=\\\"avatar_box\\\" vm-mouseenter=\\\"openLogin\\\" vm-mouseleave=\\\"hideLogin\\\"><p class=\\\"avatar_imgbox\\\"><img src=\\\"http://p0.jmstatic.com/product_report/default/avatar/avatar_small.png\\\" alt=\\\"头像\\\" width=\\\"62\\\" height=\\\"62\\\"></p><ul class=\\\"user_info\\\"><li>用户名：JM135ACCE2090</li><li>级 别：普通会员</li></ul></div><div class=\\\"login_btnbox\\\" vm-mouseenter=\\\"openLogin\\\" vm-mouseleave=\\\"hideLogin\\\"><a href=\\\"http://www.jumei.com/i/order/list\\\" class=\\\"login_order\\\" target=\\\"_blank\\\">我的订单</a><a href=\\\"http://www.jumei.com/i/product/fav_products\\\" class=\\\"login_favorite\\\" target=\\\"_blank\\\">我的收藏</a></div><s class=\\\"icon_arrow_white\\\"></s><a href=\\\"javascript:;\\\" class=\\\"ibar_closebtn\\\" title=\\\"关闭\\\" vm-click=\\\"hidePanel(20)\\\"></a></script>\",\"_recharge\":\"<script id=\\\"tpl_ibar_recharge\\\" type=\\\"text/html\\\"><a title=\\\"关闭\\\" class=\\\"ibar_closebtn\\\" href=\\\"javascript:;\\\" vm-click=\\\"hidePanel(20)\\\"></a><span class=\\\"ibar_loading_text\\\">正在为您努力加载数据！</span><div class=\\\"ibar_plugin ibar_recharge_content\\\" id=\\\"iBarRecharge\\\"><div class=\\\"ibar_plugin_title\\\"><span class=\\\"ibar_plugin_name\\\">手机充话费</span></div><div class=\\\"ibar_plugin_content\\\"><form class=\\\"ibar_recharge_form \\\" method=\\\"get\\\" target=\\\"_blank\\\" action=\\\"//cart.jumei.com/m/forward/\\\"><div style=\\\"*z-index: 3; *position: relative\\\" class=\\\"ibar_recharge-field ibar_recharge-num\\\"><label>号码</label><div class=\\\"ibar_recharge-input ibar_recharge-fl\\\"><div class=\\\"ibar_recharge-iwrapper\\\"><input type=\\\"text\\\" autocomplete=\\\"off\\\" placeholder=\\\"手机号码\\\" name=\\\"hp\\\" maxlength=\\\"13\\\"></div><i title=\\\"查看充值历史\\\" class=\\\"ibar_recharge-contact\\\"></i><div class=\\\"ibar_recharge-tooltip\\\" style=\\\"display: none;\\\"><p class=\\\"no-phone ibar_pink\\\">请填写您的手机号码</p><p class=\\\"phone-error ibar_pink\\\">请填写正确的手机号码</p><p class=\\\"zoom-in ibar_pink\\\"></p><ul class=\\\"phone-list\\\"></ul><p class=\\\"no-history ibar_pink\\\">您还没有充值记录</p></div></div></div><div style=\\\"*z-index: 2\\\" class=\\\"ibar_recharge-field\\\"><label>面值</label><div class=\\\"ibar_recharge-fl ibar_recharge-vwrapper\\\"><p class=\\\"ibar_recharge-mod\\\"><span class=\\\"ibar_recharge-val\\\">100</span> 元</p><i class=\\\"ibar_recharge-arrow\\\"></i><div class=\\\"ibar_recharge-vbox clearfix\\\" style=\\\"display: none;\\\"><ul><li class=\\\"selected\\\"><span>100</span>元</li><li><span>200</span>元</li><li><span>300</span>元</li><li><span>500</span>元</li></ul><ul class=\\\"last-ul\\\"><li><span>10</span>元</li><li><span>20</span>元</li><li><span>30</span>元</li><li><span>50</span>元</li></ul></div></div></div><div class=\\\"ibar_recharge-field ibar_recharge-pwrapper\\\"><label>售价</label><div class=\\\"ibar_recharge-fl\\\"><p><span class=\\\"ibar_pink sell-status\\\"><span class=\\\"on-sell\\\"><span class=\\\"ibar_recharge-price\\\">98.70 ~ 99.80</span> 元</span><span class=\\\"sold-out\\\">暂时缺货</span></span><span class=\\\"ibar_recharge-operator\\\"></span></p><input type=\\\"hidden\\\" value=\\\"\\\" name=\\\"sku_no\\\"><input type=\\\"hidden\\\" value=\\\"\\\" name=\\\"customers_price\\\"><input type=\\\"hidden\\\" value=\\\"\\\" name=\\\"market_price\\\"><input type=\\\"hidden\\\" value=\\\"ibar_mobile_recharge\\\" name=\\\"from\\\"><input type=\\\"hidden\\\" value=\\\"\\\" name=\\\"province\\\"><input type=\\\"hidden\\\" value=\\\"\\\" name=\\\"mall_id\\\"></div></div><div class=\\\"ibar_recharge-btn\\\"><input type=\\\"submit\\\" value=\\\"立即充值\\\"></div></form></div></div></script>\"};});",
    "_utils/doajax.js": "// Generated by CoffeeScript 1.9.1\r\n\r\n/*\r\n * ajax接口封装\r\n */\r\ndefine('_utils/doajax',function() {\r\n  var exports;\r\n  exports = {};\r\n  exports.get = function(url, datas, cb) {\r\n    var _cb;\r\n    _cb = cb || function() {};\r\n    return $.ajax({\r\n      url: url,\r\n      dataType: \"json\",\r\n      data: datas || {},\r\n      type: 'GET',\r\n      success: function(ajaxobj) {\r\n        return _cb(ajaxobj);\r\n      },\r\n      error: function(ajaxobj) {\r\n        return _cb(ajaxobj);\r\n      }\r\n    });\r\n  };\r\n  exports.post = function(url, datas, cb) {\r\n    var _cb;\r\n    _cb = cb || function() {};\r\n    return $.ajax({\r\n      url: url,\r\n      dataType: \"json\",\r\n      data: datas || {},\r\n      type: 'POST',\r\n      success: function(ajaxobj) {\r\n        return _cb(ajaxobj);\r\n      },\r\n      error: function(ajaxobj) {\r\n        return _cb(ajaxobj);\r\n      }\r\n    });\r\n  };\r\n  return exports;\r\n});\r\n",
    "mods/_ggmod/poptips.js": "// Generated by CoffeeScript 1.9.1\r\ndefine('mods/_ggmod/poptips',['_base/class','_tpl/ggmod'],function(Class, Tpl) {\r\n  return Class.create({\r\n    initialize: function() {\r\n      var $body;\r\n      $body = $('body');\r\n      this.tpl_poptips = $(Tpl._poptips);\r\n      return this.tpl_poptips.appendTo($body);\r\n    }\r\n  });\r\n});\r\n",
    "mods/_common/header.js": "// Generated by CoffeeScript 1.9.1\r\ndefine('mods/_common/header',['vmcore','_base/class','_tpl/header'],function(vmcore, Class, hdTpl) {\r\n  var TplInit, _timer;\r\n  TplInit = Class.create({\r\n    initialize: function() {\r\n      var $body, $cartBtn, $hd_user;\r\n      $body = $('body');\r\n      $hd_user = $('#hd_user');\r\n      $cartBtn = $('.header_icon_wrap');\r\n      this.tpl_cartbtn = $(hdTpl.cartbtn);\r\n      this.tpl_user = $(hdTpl.userinfo);\r\n      this.tpl_cartlist = $(hdTpl._cartlist);\r\n      this.tpl_user.appendTo($hd_user);\r\n      this.tpl_cartbtn.appendTo($cartBtn);\r\n      return this.tpl_cartlist.appendTo($body);\r\n    }\r\n  });\r\n\r\n  /*模板实例化 */\r\n  new TplInit();\r\n  _timer = null;\r\n\r\n  /*header_user的vm模型 */\r\n  _VM_.header_user = vmcore.define({\r\n    $id: \"header_user\",\r\n    tpl_tips: \"tpl_ggmod_userinfo\",\r\n    userInfo: {},\r\n    isLogin: false,\r\n    render: function() {\r\n      return this.innerHTML;\r\n    }\r\n  });\r\n\r\n  /*header_cart按钮的vm模型 */\r\n  _VM_.header_cart = vmcore.define({\r\n    $id: \"header_cart\",\r\n    tpl_cart: \"\",\r\n    cartInfo: {},\r\n    isOn: false,\r\n    render: function() {\r\n      return this.innerHTML;\r\n    },\r\n    movein: function() {\r\n      if (_timer) {\r\n        clearTimeout(_timer);\r\n      }\r\n      _VM_.header_cart.tpl_cart = \"tpl_header_cartlist\";\r\n      _VM_.header_cart.isOn = true;\r\n      return $('.cart_content_all').slideDown();\r\n    },\r\n    moveout: function() {\r\n      return _timer = setTimeout(function() {\r\n        _VM_.header_cart.tpl_cart = \"\";\r\n        _VM_.header_cart.isOn = false;\r\n        return $('.cart_content_all').slideUp();\r\n      }, 1500);\r\n    }\r\n  });\r\n  return _VM_;\r\n});\r\n",
    "mods/_ibar/main.js": "// Generated by CoffeeScript 1.9.1\r\ndefine('mods/_ibar/main',['vmcore','mods/_ibar/tplinit','_data/ibar'],function(vmcore, ibarTpl, getData) {\r\n  var _timer, timer;\r\n  new ibarTpl();\r\n  timer = null;\r\n  _timer = null;\r\n\r\n  /*全局的ibar购物车模型 */\r\n  _VM_.ibar = vmcore.define({\r\n    $id: \"global_ibar\",\r\n    userInfo: {},\r\n    cartInfo: {},\r\n    myAsset: {},\r\n    myFavorite: {},\r\n    myHistory: {},\r\n    tpl_login: \"\",\r\n    tpl_panel: \"\",\r\n    tpl_tips: \"\",\r\n    isLogin: false,\r\n    iscurrent: false,\r\n    render: function() {\r\n      console.log(this);\r\n      return this.innerHTML;\r\n    },\r\n    openLogin: function() {\r\n      var _top;\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n      _top = $('.mpbtn_login').offsetTop;\r\n      _VM_.ibar.tpl_login = 'tpl_ibar_login';\r\n      $('.ibar_login_box').css({\r\n        top: _top,\r\n        visibility: 'visible'\r\n      }).fadeIn();\r\n      return $('.ibar_sub_panel').fadeOut().css({\r\n        left: 0,\r\n        visibility: 'hidden'\r\n      });\r\n    },\r\n    hideLogin: function() {},\r\n    openPanel: function(type) {\r\n      var _this, _type;\r\n      _this = $(this);\r\n      _this.next('div').stop().animate({\r\n        opacity: 0\r\n      }, 'fast').css({\r\n        left: -92,\r\n        visibility: 'hidden'\r\n      });\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n      _type = type || 1;\r\n      switch (_type) {\r\n        case 1:\r\n          _VM_.ibar.tpl_panel = 'tpl_ibar_cart';\r\n          break;\r\n        case 2:\r\n          _VM_.ibar.tpl_panel = 'tpl_ibar_favorite';\r\n          getData.favorite(function(data) {\r\n            return _VM_.ibar.myFavorite = data;\r\n          });\r\n          break;\r\n        case 3:\r\n          _VM_.ibar.tpl_panel = 'tpl_ibar_history';\r\n          getData.history(function(data) {\r\n            return _VM_.ibar.myHistory = data;\r\n          });\r\n          break;\r\n        case 4:\r\n          _VM_.ibar.tpl_panel = 'tpl_ibar_asset';\r\n          getData.asset(function(data) {\r\n            return _VM_.ibar.myAsset = data;\r\n          });\r\n          break;\r\n        case 5:\r\n          _VM_.ibar.tpl_panel = 'tpl_ibar_recharge';\r\n      }\r\n      $('.ibar_login_box').fadeOut().css({\r\n        visibility: 'hidden'\r\n      });\r\n      return $('.ibar_sub_panel').css({\r\n        visibility: 'visible'\r\n      }).fadeIn().animate({\r\n        left: -287\r\n      }, 250);\r\n    },\r\n    hidePanel: function(t) {\r\n      var _t;\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n      _t = t || 1500;\r\n      timer = setTimeout(function() {\r\n        _VM_.ibar.tpl_panel = '';\r\n        _VM_.ibar.tpl_login = '';\r\n        $('.ibar_login_box').fadeOut().css({\r\n          visibility: 'hidden'\r\n        });\r\n        return $('.ibar_sub_panel').fadeOut().css({\r\n          left: 0,\r\n          visibility: 'hidden'\r\n        });\r\n      }, _t);\r\n    },\r\n    showTips: function(start, end) {\r\n      var _this;\r\n      _this = $(this);\r\n      _this.addClass('current');\r\n      return _this.next('div').css({\r\n        left: start,\r\n        opacity: 0,\r\n        visibility: 'visible'\r\n      }).stop().animate({\r\n        left: end,\r\n        opacity: 1\r\n      }, 400);\r\n    },\r\n    hideTips: function(end) {\r\n      var _this;\r\n      _this = $(this);\r\n      _this.next('div').stop().animate({\r\n        opacity: 0\r\n      }, 'fast').css({\r\n        left: end,\r\n        visibility: 'hidden'\r\n      });\r\n      return _this.removeClass('current');\r\n    },\r\n    goTop: function() {\r\n      return $(\"body,html\").animate({\r\n        scrollTop: 0\r\n      }, 400);\r\n    }\r\n  });\r\n  return _VM_;\r\n});\r\n",
    "mods/_ibar/tplinit.js": "// Generated by CoffeeScript 1.9.1\r\n\r\n/*初始化ibar模板 */\r\ndefine('mods/_ibar/tplinit',['_base/class','_tpl/ibar'],function(Class, Tpl) {\r\n  var tplInit;\r\n  return tplInit = Class.create({\r\n    initialize: function() {\r\n      var $body;\r\n      $body = $(\"body\");\r\n\r\n      /*\r\n       * 注入主模块，注入依赖\r\n       */\r\n\r\n      /* 载入主模板 */\r\n      this.tpl_main = $(Tpl.main);\r\n\r\n      /* 载入子模板 - 用户信息 */\r\n      this.tpl_login = $(Tpl._login);\r\n\r\n      /* 载入子模板 - 购物车信息 */\r\n      this.tpl_cart = $(Tpl._cart);\r\n\r\n      /* 载入子模板 - 我的财产 */\r\n      this.tpl_asset = $(Tpl._asset);\r\n\r\n      /* 载入子模板 - 我的心愿单 */\r\n      this.tpl_favorite = $(Tpl._favorite);\r\n\r\n      /* 载入子模板 - 我的浏览记录 */\r\n      this.tpl_history = $(Tpl._history);\r\n\r\n      /* 载入子模板 - 附属信息 */\r\n      this.tpl_recharge = $(Tpl._recharge);\r\n\r\n      /* 将模板注入到页面中 */\r\n      this.tpl_main.appendTo($body);\r\n      this.tpl_login.appendTo($body);\r\n      this.tpl_cart.appendTo($body);\r\n      this.tpl_asset.appendTo($body);\r\n      this.tpl_favorite.appendTo($body);\r\n      this.tpl_history.appendTo($body);\r\n      return this.tpl_recharge.appendTo($body);\r\n    }\r\n  });\r\n});\r\n",
    "mods/_index/main.js": "define('mods/_index/main',['_lib/lazyload','mods/_index/slider','mods/_index/vmctrl'],function(lazyload, Slider, vmctrl) {\r\n  var init;\r\n  init = function() {\r\n    Slider.init();\r\n    $('img').lazyload({\r\n      placeholder: STATIC_PATH + \"/img/dot.png\"\r\n    });\r\n    return vmctrl.run(function() {\r\n      return $(window).resize(function() {\r\n        return $(\"#iBar\").css({\r\n          'height': $(window).height()\r\n        });\r\n      });\r\n    });\r\n  };\r\n  return init();\r\n});\r\n",
    "mods/_index/slider.js": "// Generated by CoffeeScript 1.9.1\r\n\r\n/*\r\n * 首页幻灯片效果\r\n */\r\ndefine('mods/_index/slider',['_lib/slide'],function(slide) {\r\n  var exports;\r\n  exports = {};\r\n  exports.init = function() {\r\n    var $fullSlide, $sliderBox, _LoadError, _imgLoadimg, _loaded, _loading, _showBox, imgs, now_img;\r\n    $sliderBox = $('.slider_box');\r\n    $fullSlide = $('.slider_index');\r\n    imgs = $fullSlide.find('.bd .preload');\r\n    now_img = $fullSlide.find('.bd img').eq(0);\r\n    $sliderBox.hide();\r\n    $fullSlide.find('.pnBtn').hide();\r\n    $fullSlide.find('.hd').hide();\r\n\r\n    /*\r\n     * 判断图片加载的函数\r\n     * 参数说明：\r\n     * arr：可以是存放图片路径的一个数组，也可以是选取到的img的jquery对象；\r\n     * funLoading：每一个单独的图片加载完成后执行的操作；\r\n     * funOnLoad：全部图片都加载完成后的操作；\r\n     * funOnError：单个图片加载出错时的操作。\r\n     */\r\n    _imgLoadimg = function(arr, funLoading, funOnLoad, funOnError) {\r\n      var a, isObject, numError, numLoaded, preload, results, src;\r\n      numLoaded = 0;\r\n      numError = 0;\r\n      isObject = Object.prototype.toString.call(arr) == \"[object Object]\" ? true : false;\r\n      arr = isObject ? arr.get() : arr;\r\n      preload = function(src, obj) {\r\n        var img;\r\n        img = new Image();\r\n        img.onload = function() {\r\n          numLoaded++;\r\n          funLoading && funLoading(numLoaded, arr.length, src, obj);\r\n          return funOnLoad && numLoaded === arr.length && funOnLoad(numError);\r\n        };\r\n        img.onerror = function() {\r\n          numLoaded++;\r\n          numError++;\r\n          return funOnError && funOnError(numLoaded, arr.length, src, obj);\r\n        };\r\n        return img.src = src;\r\n      };\r\n      results = [];\r\n      for (a in arr) {\r\n        src = isObject ? $(arr[a]).attr(\"data-src\") : arr[a];\r\n        console.log(src);\r\n        results.push(preload(src, arr[a]));\r\n      }\r\n      return results;\r\n    };\r\n    _showBox = function() {\r\n      $sliderBox.show().animate({\r\n        height: '272px'\r\n      }, 500);\r\n      $fullSlide.find('.bd ul').css({\r\n        'margin-left': '-402px'\r\n      });\r\n      return $fullSlide.fadeIn();\r\n    };\r\n    _loaded = function() {\r\n      $fullSlide.hover(function() {\r\n        $fullSlide.find('.pnBtn').stop().fadeIn();\r\n      }, function() {\r\n        $fullSlide.find('.pnBtn').fadeOut();\r\n      });\r\n      return $fullSlide.slide({\r\n        titCell: \".hd ul\",\r\n        mainCell: \".bd ul\",\r\n        switchLoad: \"data-src\",\r\n        effect: \"leftLoop\",\r\n        autoPlay: true,\r\n        vis: 1,\r\n        autoPage: true,\r\n        delayTime: 500,\r\n        interTime: 5000,\r\n        trigger: \"click\",\r\n        startFun: function() {\r\n          return $fullSlide.find('.hd').fadeIn();\r\n        }\r\n      });\r\n    };\r\n    _loading = function(n, total, src, obj) {\r\n      return $(obj).attr(\"src\", src).fadeIn();\r\n    };\r\n    _LoadError = function(n) {\r\n      return console.log(\"the \" + n + \"st img loaded Error!\");\r\n    };\r\n    _imgLoadimg(now_img, _loading, _showBox, null);\r\n    return _imgLoadimg(imgs, _loading, _loaded, _LoadError);\r\n  };\r\n  return exports;\r\n});\r\n",
    "mods/_index/vmctrl.js": "define('mods/_index/vmctrl',['vmcore','_data/ibar','mods/_common/header','mods/_ibar/main'],function(vmcore, getData, header, iBar) {\r\n  var exports;\r\n  exports = {};\r\n  exports.run = function(cb) {\r\n    var timer;\r\n    vmcore.scan();\r\n    timer = null;\r\n    getData.cartList(function(data) {\r\n      return _VM_.ibar.cartInfo = _VM_.header_cart.cartInfo = data;\r\n    });\r\n    getData.userInfo(function(data) {\r\n      _VM_.ibar.userInfo = _VM_.header_user.userInfo = data;\r\n      if (data.status === 1) {\r\n        return _VM_.ibar.isLogin = _VM_.header_user.isLogin = true;\r\n      }\r\n    });\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n    }\r\n    timer = setTimeout(function() {\r\n      return $(\"#iBar\").css({\r\n        'height': $(window).height()\r\n      }).slideDown(500);\r\n    }, 400);\r\n    return cb();\r\n  };\r\n  return exports;\r\n});\r\n",
    "vendor/jquery/jquery.js": "/*!\r\n * jQuery JavaScript Library v1.8.3\r\n * http://jquery.com/\r\n *\r\n * Includes Sizzle.js\r\n * http://sizzlejs.com/\r\n *\r\n * Copyright 2012 jQuery Foundation and other contributors\r\n * Released under the MIT license\r\n * http://jquery.org/license\r\n *\r\n * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)\r\n */\r\n(function( window, undefined ) {\r\nvar\r\n\t// A central reference to the root jQuery(document)\r\n\trootjQuery,\r\n\r\n\t// The deferred used on DOM ready\r\n\treadyList,\r\n\r\n\t// Use the correct document accordingly with window argument (sandbox)\r\n\tdocument = window.document,\r\n\tlocation = window.location,\r\n\tnavigator = window.navigator,\r\n\r\n\t// Map over jQuery in case of overwrite\r\n\t_jQuery = window.jQuery,\r\n\r\n\t// Map over the $ in case of overwrite\r\n\t_$ = window.$,\r\n\r\n\t// Save a reference to some core methods\r\n\tcore_push = Array.prototype.push,\r\n\tcore_slice = Array.prototype.slice,\r\n\tcore_indexOf = Array.prototype.indexOf,\r\n\tcore_toString = Object.prototype.toString,\r\n\tcore_hasOwn = Object.prototype.hasOwnProperty,\r\n\tcore_trim = String.prototype.trim,\r\n\r\n\t// Define a local copy of jQuery\r\n\tjQuery = function( selector, context ) {\r\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\r\n\t\treturn new jQuery.fn.init( selector, context, rootjQuery );\r\n\t},\r\n\r\n\t// Used for matching numbers\r\n\tcore_pnum = /[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source,\r\n\r\n\t// Used for detecting and trimming whitespace\r\n\tcore_rnotwhite = /\\S/,\r\n\tcore_rspace = /\\s+/,\r\n\r\n\t// Make sure we trim BOM and NBSP (here's looking at you, Safari 5.0 and IE)\r\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\r\n\r\n\t// A simple way to check for HTML strings\r\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\r\n\trquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/,\r\n\r\n\t// Match a standalone tag\r\n\trsingleTag = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\r\n\r\n\t// JSON RegExp\r\n\trvalidchars = /^[\\],:{}\\s]*$/,\r\n\trvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g,\r\n\trvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,\r\n\trvalidtokens = /\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/g,\r\n\r\n\t// Matches dashed string for camelizing\r\n\trmsPrefix = /^-ms-/,\r\n\trdashAlpha = /-([\\da-z])/gi,\r\n\r\n\t// Used by jQuery.camelCase as callback to replace()\r\n\tfcamelCase = function( all, letter ) {\r\n\t\treturn ( letter + \"\" ).toUpperCase();\r\n\t},\r\n\r\n\t// The ready event handler and self cleanup method\r\n\tDOMContentLoaded = function() {\r\n\t\tif ( document.addEventListener ) {\r\n\t\t\tdocument.removeEventListener( \"DOMContentLoaded\", DOMContentLoaded, false );\r\n\t\t\tjQuery.ready();\r\n\t\t} else if ( document.readyState === \"complete\" ) {\r\n\t\t\t// we're here because readyState === \"complete\" in oldIE\r\n\t\t\t// which is good enough for us to call the dom ready!\r\n\t\t\tdocument.detachEvent( \"onreadystatechange\", DOMContentLoaded );\r\n\t\t\tjQuery.ready();\r\n\t\t}\r\n\t},\r\n\r\n\t// [[Class]] -> type pairs\r\n\tclass2type = {};\r\n\r\njQuery.fn = jQuery.prototype = {\r\n\tconstructor: jQuery,\r\n\tinit: function( selector, context, rootjQuery ) {\r\n\t\tvar match, elem, ret, doc;\r\n\r\n\t\t// Handle $(\"\"), $(null), $(undefined), $(false)\r\n\t\tif ( !selector ) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t// Handle $(DOMElement)\r\n\t\tif ( selector.nodeType ) {\r\n\t\t\tthis.context = this[0] = selector;\r\n\t\t\tthis.length = 1;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t// Handle HTML strings\r\n\t\tif ( typeof selector === \"string\" ) {\r\n\t\t\tif ( selector.charAt(0) === \"<\" && selector.charAt( selector.length - 1 ) === \">\" && selector.length >= 3 ) {\r\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\r\n\t\t\t\tmatch = [ null, selector, null ];\r\n\r\n\t\t\t} else {\r\n\t\t\t\tmatch = rquickExpr.exec( selector );\r\n\t\t\t}\r\n\r\n\t\t\t// Match html or make sure no context is specified for #id\r\n\t\t\tif ( match && (match[1] || !context) ) {\r\n\r\n\t\t\t\t// HANDLE: $(html) -> $(array)\r\n\t\t\t\tif ( match[1] ) {\r\n\t\t\t\t\tcontext = context instanceof jQuery ? context[0] : context;\r\n\t\t\t\t\tdoc = ( context && context.nodeType ? context.ownerDocument || context : document );\r\n\r\n\t\t\t\t\t// scripts is true for back-compat\r\n\t\t\t\t\tselector = jQuery.parseHTML( match[1], doc, true );\r\n\t\t\t\t\tif ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {\r\n\t\t\t\t\t\tthis.attr.call( selector, context, true );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn jQuery.merge( this, selector );\r\n\r\n\t\t\t\t// HANDLE: $(#id)\r\n\t\t\t\t} else {\r\n\t\t\t\t\telem = document.getElementById( match[2] );\r\n\r\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\r\n\t\t\t\t\t// nodes that are no longer in the document #6963\r\n\t\t\t\t\tif ( elem && elem.parentNode ) {\r\n\t\t\t\t\t\t// Handle the case where IE and Opera return items\r\n\t\t\t\t\t\t// by name instead of ID\r\n\t\t\t\t\t\tif ( elem.id !== match[2] ) {\r\n\t\t\t\t\t\t\treturn rootjQuery.find( selector );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Otherwise, we inject the element directly into the jQuery object\r\n\t\t\t\t\t\tthis.length = 1;\r\n\t\t\t\t\t\tthis[0] = elem;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.context = document;\r\n\t\t\t\t\tthis.selector = selector;\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\r\n\t\t\t// HANDLE: $(expr, $(...))\r\n\t\t\t} else if ( !context || context.jquery ) {\r\n\t\t\t\treturn ( context || rootjQuery ).find( selector );\r\n\r\n\t\t\t// HANDLE: $(expr, context)\r\n\t\t\t// (which is just equivalent to: $(context).find(expr)\r\n\t\t\t} else {\r\n\t\t\t\treturn this.constructor( context ).find( selector );\r\n\t\t\t}\r\n\r\n\t\t// HANDLE: $(function)\r\n\t\t// Shortcut for document ready\r\n\t\t} else if ( jQuery.isFunction( selector ) ) {\r\n\t\t\treturn rootjQuery.ready( selector );\r\n\t\t}\r\n\r\n\t\tif ( selector.selector !== undefined ) {\r\n\t\t\tthis.selector = selector.selector;\r\n\t\t\tthis.context = selector.context;\r\n\t\t}\r\n\r\n\t\treturn jQuery.makeArray( selector, this );\r\n\t},\r\n\r\n\t// Start with an empty selector\r\n\tselector: \"\",\r\n\r\n\t// The current version of jQuery being used\r\n\tjquery: \"1.8.3\",\r\n\r\n\t// The default length of a jQuery object is 0\r\n\tlength: 0,\r\n\r\n\t// The number of elements contained in the matched element set\r\n\tsize: function() {\r\n\t\treturn this.length;\r\n\t},\r\n\r\n\ttoArray: function() {\r\n\t\treturn core_slice.call( this );\r\n\t},\r\n\r\n\t// Get the Nth element in the matched element set OR\r\n\t// Get the whole matched element set as a clean array\r\n\tget: function( num ) {\r\n\t\treturn num == null ?\r\n\r\n\t\t\t// Return a 'clean' array\r\n\t\t\tthis.toArray() :\r\n\r\n\t\t\t// Return just the object\r\n\t\t\t( num < 0 ? this[ this.length + num ] : this[ num ] );\r\n\t},\r\n\r\n\t// Take an array of elements and push it onto the stack\r\n\t// (returning the new matched element set)\r\n\tpushStack: function( elems, name, selector ) {\r\n\r\n\t\t// Build a new jQuery matched element set\r\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\r\n\r\n\t\t// Add the old object onto the stack (as a reference)\r\n\t\tret.prevObject = this;\r\n\r\n\t\tret.context = this.context;\r\n\r\n\t\tif ( name === \"find\" ) {\r\n\t\t\tret.selector = this.selector + ( this.selector ? \" \" : \"\" ) + selector;\r\n\t\t} else if ( name ) {\r\n\t\t\tret.selector = this.selector + \".\" + name + \"(\" + selector + \")\";\r\n\t\t}\r\n\r\n\t\t// Return the newly-formed element set\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t// Execute a callback for every element in the matched set.\r\n\t// (You can seed the arguments with an array of args, but this is\r\n\t// only used internally.)\r\n\teach: function( callback, args ) {\r\n\t\treturn jQuery.each( this, callback, args );\r\n\t},\r\n\r\n\tready: function( fn ) {\r\n\t\t// Add the callback\r\n\t\tjQuery.ready.promise().done( fn );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\teq: function( i ) {\r\n\t\ti = +i;\r\n\t\treturn i === -1 ?\r\n\t\t\tthis.slice( i ) :\r\n\t\t\tthis.slice( i, i + 1 );\r\n\t},\r\n\r\n\tfirst: function() {\r\n\t\treturn this.eq( 0 );\r\n\t},\r\n\r\n\tlast: function() {\r\n\t\treturn this.eq( -1 );\r\n\t},\r\n\r\n\tslice: function() {\r\n\t\treturn this.pushStack( core_slice.apply( this, arguments ),\r\n\t\t\t\"slice\", core_slice.call(arguments).join(\",\") );\r\n\t},\r\n\r\n\tmap: function( callback ) {\r\n\t\treturn this.pushStack( jQuery.map(this, function( elem, i ) {\r\n\t\t\treturn callback.call( elem, i, elem );\r\n\t\t}));\r\n\t},\r\n\r\n\tend: function() {\r\n\t\treturn this.prevObject || this.constructor(null);\r\n\t},\r\n\r\n\t// For internal use only.\r\n\t// Behaves like an Array's method, not like a jQuery method.\r\n\tpush: core_push,\r\n\tsort: [].sort,\r\n\tsplice: [].splice\r\n};\r\n\r\n// Give the init function the jQuery prototype for later instantiation\r\njQuery.fn.init.prototype = jQuery.fn;\r\n\r\njQuery.extend = jQuery.fn.extend = function() {\r\n\tvar options, name, src, copy, copyIsArray, clone,\r\n\t\ttarget = arguments[0] || {},\r\n\t\ti = 1,\r\n\t\tlength = arguments.length,\r\n\t\tdeep = false;\r\n\r\n\t// Handle a deep copy situation\r\n\tif ( typeof target === \"boolean\" ) {\r\n\t\tdeep = target;\r\n\t\ttarget = arguments[1] || {};\r\n\t\t// skip the boolean and the target\r\n\t\ti = 2;\r\n\t}\r\n\r\n\t// Handle case when target is a string or something (possible in deep copy)\r\n\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\r\n\t\ttarget = {};\r\n\t}\r\n\r\n\t// extend jQuery itself if only one argument is passed\r\n\tif ( length === i ) {\r\n\t\ttarget = this;\r\n\t\t--i;\r\n\t}\r\n\r\n\tfor ( ; i < length; i++ ) {\r\n\t\t// Only deal with non-null/undefined values\r\n\t\tif ( (options = arguments[ i ]) != null ) {\r\n\t\t\t// Extend the base object\r\n\t\t\tfor ( name in options ) {\r\n\t\t\t\tsrc = target[ name ];\r\n\t\t\t\tcopy = options[ name ];\r\n\r\n\t\t\t\t// Prevent never-ending loop\r\n\t\t\t\tif ( target === copy ) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Recurse if we're merging plain objects or arrays\r\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\r\n\t\t\t\t\tif ( copyIsArray ) {\r\n\t\t\t\t\t\tcopyIsArray = false;\r\n\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Never move original objects, clone them\r\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\r\n\r\n\t\t\t\t// Don't bring in undefined values\r\n\t\t\t\t} else if ( copy !== undefined ) {\r\n\t\t\t\t\ttarget[ name ] = copy;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Return the modified object\r\n\treturn target;\r\n};\r\n\r\njQuery.extend({\r\n\tnoConflict: function( deep ) {\r\n\t\tif ( window.$ === jQuery ) {\r\n\t\t\twindow.$ = _$;\r\n\t\t}\r\n\r\n\t\tif ( deep && window.jQuery === jQuery ) {\r\n\t\t\twindow.jQuery = _jQuery;\r\n\t\t}\r\n\r\n\t\treturn jQuery;\r\n\t},\r\n\r\n\t// Is the DOM ready to be used? Set to true once it occurs.\r\n\tisReady: false,\r\n\r\n\t// A counter to track how many items to wait for before\r\n\t// the ready event fires. See #6781\r\n\treadyWait: 1,\r\n\r\n\t// Hold (or release) the ready event\r\n\tholdReady: function( hold ) {\r\n\t\tif ( hold ) {\r\n\t\t\tjQuery.readyWait++;\r\n\t\t} else {\r\n\t\t\tjQuery.ready( true );\r\n\t\t}\r\n\t},\r\n\r\n\t// Handle when the DOM is ready\r\n\tready: function( wait ) {\r\n\r\n\t\t// Abort if there are pending holds or we're already ready\r\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).\r\n\t\tif ( !document.body ) {\r\n\t\t\treturn setTimeout( jQuery.ready, 1 );\r\n\t\t}\r\n\r\n\t\t// Remember that the DOM is ready\r\n\t\tjQuery.isReady = true;\r\n\r\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\r\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// If there are functions bound, to execute\r\n\t\treadyList.resolveWith( document, [ jQuery ] );\r\n\r\n\t\t// Trigger any bound ready events\r\n\t\tif ( jQuery.fn.trigger ) {\r\n\t\t\tjQuery( document ).trigger(\"ready\").off(\"ready\");\r\n\t\t}\r\n\t},\r\n\r\n\t// See test/unit/core.js for details concerning isFunction.\r\n\t// Since version 1.3, DOM methods and functions like alert\r\n\t// aren't supported. They return false on IE (#2968).\r\n\tisFunction: function( obj ) {\r\n\t\treturn jQuery.type(obj) === \"function\";\r\n\t},\r\n\r\n\tisArray: Array.isArray || function( obj ) {\r\n\t\treturn jQuery.type(obj) === \"array\";\r\n\t},\r\n\r\n\tisWindow: function( obj ) {\r\n\t\treturn obj != null && obj == obj.window;\r\n\t},\r\n\r\n\tisNumeric: function( obj ) {\r\n\t\treturn !isNaN( parseFloat(obj) ) && isFinite( obj );\r\n\t},\r\n\r\n\ttype: function( obj ) {\r\n\t\treturn obj == null ?\r\n\t\t\tString( obj ) :\r\n\t\t\tclass2type[ core_toString.call(obj) ] || \"object\";\r\n\t},\r\n\r\n\tisPlainObject: function( obj ) {\r\n\t\t// Must be an Object.\r\n\t\t// Because of IE, we also have to check the presence of the constructor property.\r\n\t\t// Make sure that DOM nodes and window objects don't pass through, as well\r\n\t\tif ( !obj || jQuery.type(obj) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\t// Not own constructor property must be Object\r\n\t\t\tif ( obj.constructor &&\r\n\t\t\t\t!core_hasOwn.call(obj, \"constructor\") &&\r\n\t\t\t\t!core_hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\") ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} catch ( e ) {\r\n\t\t\t// IE8,9 Will throw exceptions on certain host objects #9897\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Own properties are enumerated firstly, so to speed up,\r\n\t\t// if last one is own, then all properties are own.\r\n\r\n\t\tvar key;\r\n\t\tfor ( key in obj ) {}\r\n\r\n\t\treturn key === undefined || core_hasOwn.call( obj, key );\r\n\t},\r\n\r\n\tisEmptyObject: function( obj ) {\r\n\t\tvar name;\r\n\t\tfor ( name in obj ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\terror: function( msg ) {\r\n\t\tthrow new Error( msg );\r\n\t},\r\n\r\n\t// data: string of html\r\n\t// context (optional): If specified, the fragment will be created in this context, defaults to document\r\n\t// scripts (optional): If true, will include scripts passed in the html string\r\n\tparseHTML: function( data, context, scripts ) {\r\n\t\tvar parsed;\r\n\t\tif ( !data || typeof data !== \"string\" ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif ( typeof context === \"boolean\" ) {\r\n\t\t\tscripts = context;\r\n\t\t\tcontext = 0;\r\n\t\t}\r\n\t\tcontext = context || document;\r\n\r\n\t\t// Single tag\r\n\t\tif ( (parsed = rsingleTag.exec( data )) ) {\r\n\t\t\treturn [ context.createElement( parsed[1] ) ];\r\n\t\t}\r\n\r\n\t\tparsed = jQuery.buildFragment( [ data ], context, scripts ? null : [] );\r\n\t\treturn jQuery.merge( [],\r\n\t\t\t(parsed.cacheable ? jQuery.clone( parsed.fragment ) : parsed.fragment).childNodes );\r\n\t},\r\n\r\n\tparseJSON: function( data ) {\r\n\t\tif ( !data || typeof data !== \"string\") {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// Make sure leading/trailing whitespace is removed (IE can't handle it)\r\n\t\tdata = jQuery.trim( data );\r\n\r\n\t\t// Attempt to parse using the native JSON parser first\r\n\t\tif ( window.JSON && window.JSON.parse ) {\r\n\t\t\treturn window.JSON.parse( data );\r\n\t\t}\r\n\r\n\t\t// Make sure the incoming data is actual JSON\r\n\t\t// Logic borrowed from http://json.org/json2.js\r\n\t\tif ( rvalidchars.test( data.replace( rvalidescape, \"@\" )\r\n\t\t\t.replace( rvalidtokens, \"]\" )\r\n\t\t\t.replace( rvalidbraces, \"\")) ) {\r\n\r\n\t\t\treturn ( new Function( \"return \" + data ) )();\r\n\r\n\t\t}\r\n\t\tjQuery.error( \"Invalid JSON: \" + data );\r\n\t},\r\n\r\n\t// Cross-browser xml parsing\r\n\tparseXML: function( data ) {\r\n\t\tvar xml, tmp;\r\n\t\tif ( !data || typeof data !== \"string\" ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tif ( window.DOMParser ) { // Standard\r\n\t\t\t\ttmp = new DOMParser();\r\n\t\t\t\txml = tmp.parseFromString( data , \"text/xml\" );\r\n\t\t\t} else { // IE\r\n\t\t\t\txml = new ActiveXObject( \"Microsoft.XMLDOM\" );\r\n\t\t\t\txml.async = \"false\";\r\n\t\t\t\txml.loadXML( data );\r\n\t\t\t}\r\n\t\t} catch( e ) {\r\n\t\t\txml = undefined;\r\n\t\t}\r\n\t\tif ( !xml || !xml.documentElement || xml.getElementsByTagName( \"parsererror\" ).length ) {\r\n\t\t\tjQuery.error( \"Invalid XML: \" + data );\r\n\t\t}\r\n\t\treturn xml;\r\n\t},\r\n\r\n\tnoop: function() {},\r\n\r\n\t// Evaluates a script in a global context\r\n\t// Workarounds based on findings by Jim Driscoll\r\n\t// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context\r\n\tglobalEval: function( data ) {\r\n\t\tif ( data && core_rnotwhite.test( data ) ) {\r\n\t\t\t// We use execScript on Internet Explorer\r\n\t\t\t// We use an anonymous function so that context is window\r\n\t\t\t// rather than jQuery in Firefox\r\n\t\t\t( window.execScript || function( data ) {\r\n\t\t\t\twindow[ \"eval\" ].call( window, data );\r\n\t\t\t} )( data );\r\n\t\t}\r\n\t},\r\n\r\n\t// Convert dashed to camelCase; used by the css and data modules\r\n\t// Microsoft forgot to hump their vendor prefix (#9572)\r\n\tcamelCase: function( string ) {\r\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\r\n\t},\r\n\r\n\tnodeName: function( elem, name ) {\r\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\r\n\t},\r\n\r\n\t// args is for internal usage only\r\n\teach: function( obj, callback, args ) {\r\n\t\tvar name,\r\n\t\t\ti = 0,\r\n\t\t\tlength = obj.length,\r\n\t\t\tisObj = length === undefined || jQuery.isFunction( obj );\r\n\r\n\t\tif ( args ) {\r\n\t\t\tif ( isObj ) {\r\n\t\t\t\tfor ( name in obj ) {\r\n\t\t\t\t\tif ( callback.apply( obj[ name ], args ) === false ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor ( ; i < length; ) {\r\n\t\t\t\t\tif ( callback.apply( obj[ i++ ], args ) === false ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t// A special, fast, case for the most common use of each\r\n\t\t} else {\r\n\t\t\tif ( isObj ) {\r\n\t\t\t\tfor ( name in obj ) {\r\n\t\t\t\t\tif ( callback.call( obj[ name ], name, obj[ name ] ) === false ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor ( ; i < length; ) {\r\n\t\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i++ ] ) === false ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t},\r\n\r\n\t// Use native String.trim function wherever possible\r\n\ttrim: core_trim && !core_trim.call(\"\\uFEFF\\xA0\") ?\r\n\t\tfunction( text ) {\r\n\t\t\treturn text == null ?\r\n\t\t\t\t\"\" :\r\n\t\t\t\tcore_trim.call( text );\r\n\t\t} :\r\n\r\n\t\t// Otherwise use our own trimming functionality\r\n\t\tfunction( text ) {\r\n\t\t\treturn text == null ?\r\n\t\t\t\t\"\" :\r\n\t\t\t\t( text + \"\" ).replace( rtrim, \"\" );\r\n\t\t},\r\n\r\n\t// results is for internal usage only\r\n\tmakeArray: function( arr, results ) {\r\n\t\tvar type,\r\n\t\t\tret = results || [];\r\n\r\n\t\tif ( arr != null ) {\r\n\t\t\t// The window, strings (and functions) also have 'length'\r\n\t\t\t// Tweaked logic slightly to handle Blackberry 4.7 RegExp issues #6930\r\n\t\t\ttype = jQuery.type( arr );\r\n\r\n\t\t\tif ( arr.length == null || type === \"string\" || type === \"function\" || type === \"regexp\" || jQuery.isWindow( arr ) ) {\r\n\t\t\t\tcore_push.call( ret, arr );\r\n\t\t\t} else {\r\n\t\t\t\tjQuery.merge( ret, arr );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\tinArray: function( elem, arr, i ) {\r\n\t\tvar len;\r\n\r\n\t\tif ( arr ) {\r\n\t\t\tif ( core_indexOf ) {\r\n\t\t\t\treturn core_indexOf.call( arr, elem, i );\r\n\t\t\t}\r\n\r\n\t\t\tlen = arr.length;\r\n\t\t\ti = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;\r\n\r\n\t\t\tfor ( ; i < len; i++ ) {\r\n\t\t\t\t// Skip accessing in sparse arrays\r\n\t\t\t\tif ( i in arr && arr[ i ] === elem ) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t},\r\n\r\n\tmerge: function( first, second ) {\r\n\t\tvar l = second.length,\r\n\t\t\ti = first.length,\r\n\t\t\tj = 0;\r\n\r\n\t\tif ( typeof l === \"number\" ) {\r\n\t\t\tfor ( ; j < l; j++ ) {\r\n\t\t\t\tfirst[ i++ ] = second[ j ];\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\twhile ( second[j] !== undefined ) {\r\n\t\t\t\tfirst[ i++ ] = second[ j++ ];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfirst.length = i;\r\n\r\n\t\treturn first;\r\n\t},\r\n\r\n\tgrep: function( elems, callback, inv ) {\r\n\t\tvar retVal,\r\n\t\t\tret = [],\r\n\t\t\ti = 0,\r\n\t\t\tlength = elems.length;\r\n\t\tinv = !!inv;\r\n\r\n\t\t// Go through the array, only saving the items\r\n\t\t// that pass the validator function\r\n\t\tfor ( ; i < length; i++ ) {\r\n\t\t\tretVal = !!callback( elems[ i ], i );\r\n\t\t\tif ( inv !== retVal ) {\r\n\t\t\t\tret.push( elems[ i ] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t// arg is for internal usage only\r\n\tmap: function( elems, callback, arg ) {\r\n\t\tvar value, key,\r\n\t\t\tret = [],\r\n\t\t\ti = 0,\r\n\t\t\tlength = elems.length,\r\n\t\t\t// jquery objects are treated as arrays\r\n\t\t\tisArray = elems instanceof jQuery || length !== undefined && typeof length === \"number\" && ( ( length > 0 && elems[ 0 ] && elems[ length -1 ] ) || length === 0 || jQuery.isArray( elems ) ) ;\r\n\r\n\t\t// Go through the array, translating each of the items to their\r\n\t\tif ( isArray ) {\r\n\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\r\n\r\n\t\t\t\tif ( value != null ) {\r\n\t\t\t\t\tret[ ret.length ] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t// Go through every key on the object,\r\n\t\t} else {\r\n\t\t\tfor ( key in elems ) {\r\n\t\t\t\tvalue = callback( elems[ key ], key, arg );\r\n\r\n\t\t\t\tif ( value != null ) {\r\n\t\t\t\t\tret[ ret.length ] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Flatten any nested arrays\r\n\t\treturn ret.concat.apply( [], ret );\r\n\t},\r\n\r\n\t// A global GUID counter for objects\r\n\tguid: 1,\r\n\r\n\t// Bind a function to a context, optionally partially applying any\r\n\t// arguments.\r\n\tproxy: function( fn, context ) {\r\n\t\tvar tmp, args, proxy;\r\n\r\n\t\tif ( typeof context === \"string\" ) {\r\n\t\t\ttmp = fn[ context ];\r\n\t\t\tcontext = fn;\r\n\t\t\tfn = tmp;\r\n\t\t}\r\n\r\n\t\t// Quick check to determine if target is callable, in the spec\r\n\t\t// this throws a TypeError, but we will just return undefined.\r\n\t\tif ( !jQuery.isFunction( fn ) ) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\t// Simulated bind\r\n\t\targs = core_slice.call( arguments, 2 );\r\n\t\tproxy = function() {\r\n\t\t\treturn fn.apply( context, args.concat( core_slice.call( arguments ) ) );\r\n\t\t};\r\n\r\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\r\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\r\n\r\n\t\treturn proxy;\r\n\t},\r\n\r\n\t// Multifunctional method to get and set values of a collection\r\n\t// The value/s can optionally be executed if it's a function\r\n\taccess: function( elems, fn, key, value, chainable, emptyGet, pass ) {\r\n\t\tvar exec,\r\n\t\t\tbulk = key == null,\r\n\t\t\ti = 0,\r\n\t\t\tlength = elems.length;\r\n\r\n\t\t// Sets many values\r\n\t\tif ( key && typeof key === \"object\" ) {\r\n\t\t\tfor ( i in key ) {\r\n\t\t\t\tjQuery.access( elems, fn, i, key[i], 1, emptyGet, value );\r\n\t\t\t}\r\n\t\t\tchainable = 1;\r\n\r\n\t\t// Sets one value\r\n\t\t} else if ( value !== undefined ) {\r\n\t\t\t// Optionally, function values get executed if exec is true\r\n\t\t\texec = pass === undefined && jQuery.isFunction( value );\r\n\r\n\t\t\tif ( bulk ) {\r\n\t\t\t\t// Bulk operations only iterate when executing function values\r\n\t\t\t\tif ( exec ) {\r\n\t\t\t\t\texec = fn;\r\n\t\t\t\t\tfn = function( elem, key, value ) {\r\n\t\t\t\t\t\treturn exec.call( jQuery( elem ), value );\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t// Otherwise they run against the entire set\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfn.call( elems, value );\r\n\t\t\t\t\tfn = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( fn ) {\r\n\t\t\t\tfor (; i < length; i++ ) {\r\n\t\t\t\t\tfn( elems[i], key, exec ? value.call( elems[i], i, fn( elems[i], key ) ) : value, pass );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tchainable = 1;\r\n\t\t}\r\n\r\n\t\treturn chainable ?\r\n\t\t\telems :\r\n\r\n\t\t\t// Gets\r\n\t\t\tbulk ?\r\n\t\t\t\tfn.call( elems ) :\r\n\t\t\t\tlength ? fn( elems[0], key ) : emptyGet;\r\n\t},\r\n\r\n\tnow: function() {\r\n\t\treturn ( new Date() ).getTime();\r\n\t}\r\n});\r\n\r\njQuery.ready.promise = function( obj ) {\r\n\tif ( !readyList ) {\r\n\r\n\t\treadyList = jQuery.Deferred();\r\n\r\n\t\t// Catch cases where $(document).ready() is called after the browser event has already occurred.\r\n\t\t// we once tried to use readyState \"interactive\" here, but it caused issues like the one\r\n\t\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\r\n\t\tif ( document.readyState === \"complete\" ) {\r\n\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\r\n\t\t\tsetTimeout( jQuery.ready, 1 );\r\n\r\n\t\t// Standards-based browsers support DOMContentLoaded\r\n\t\t} else if ( document.addEventListener ) {\r\n\t\t\t// Use the handy event callback\r\n\t\t\tdocument.addEventListener( \"DOMContentLoaded\", DOMContentLoaded, false );\r\n\r\n\t\t\t// A fallback to window.onload, that will always work\r\n\t\t\twindow.addEventListener( \"load\", jQuery.ready, false );\r\n\r\n\t\t// If IE event model is used\r\n\t\t} else {\r\n\t\t\t// Ensure firing before onload, maybe late but safe also for iframes\r\n\t\t\tdocument.attachEvent( \"onreadystatechange\", DOMContentLoaded );\r\n\r\n\t\t\t// A fallback to window.onload, that will always work\r\n\t\t\twindow.attachEvent( \"onload\", jQuery.ready );\r\n\r\n\t\t\t// If IE and not a frame\r\n\t\t\t// continually check to see if the document is ready\r\n\t\t\tvar top = false;\r\n\r\n\t\t\ttry {\r\n\t\t\t\ttop = window.frameElement == null && document.documentElement;\r\n\t\t\t} catch(e) {}\r\n\r\n\t\t\tif ( top && top.doScroll ) {\r\n\t\t\t\t(function doScrollCheck() {\r\n\t\t\t\t\tif ( !jQuery.isReady ) {\r\n\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t// Use the trick by Diego Perini\r\n\t\t\t\t\t\t\t// http://javascript.nwbox.com/IEContentLoaded/\r\n\t\t\t\t\t\t\ttop.doScroll(\"left\");\r\n\t\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\t\treturn setTimeout( doScrollCheck, 50 );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// and execute any waiting functions\r\n\t\t\t\t\t\tjQuery.ready();\r\n\t\t\t\t\t}\r\n\t\t\t\t})();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn readyList.promise( obj );\r\n};\r\n\r\n// Populate the class2type map\r\njQuery.each(\"Boolean Number String Function Array Date RegExp Object\".split(\" \"), function(i, name) {\r\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\r\n});\r\n\r\n// All jQuery objects should point back to these\r\nrootjQuery = jQuery(document);\r\n// String to Object options format cache\r\nvar optionsCache = {};\r\n\r\n// Convert String-formatted options into Object-formatted ones and store in cache\r\nfunction createOptions( options ) {\r\n\tvar object = optionsCache[ options ] = {};\r\n\tjQuery.each( options.split( core_rspace ), function( _, flag ) {\r\n\t\tobject[ flag ] = true;\r\n\t});\r\n\treturn object;\r\n}\r\n\r\n/*\r\n * Create a callback list using the following parameters:\r\n *\r\n *\toptions: an optional list of space-separated options that will change how\r\n *\t\t\tthe callback list behaves or a more traditional option object\r\n *\r\n * By default a callback list will act like an event callback list and can be\r\n * \"fired\" multiple times.\r\n *\r\n * Possible options:\r\n *\r\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\r\n *\r\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\r\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\r\n *\t\t\t\t\tvalues (like a Deferred)\r\n *\r\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\r\n *\r\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\r\n *\r\n */\r\njQuery.Callbacks = function( options ) {\r\n\r\n\t// Convert options from String-formatted to Object-formatted if needed\r\n\t// (we check in cache first)\r\n\toptions = typeof options === \"string\" ?\r\n\t\t( optionsCache[ options ] || createOptions( options ) ) :\r\n\t\tjQuery.extend( {}, options );\r\n\r\n\tvar // Last fire value (for non-forgettable lists)\r\n\t\tmemory,\r\n\t\t// Flag to know if list was already fired\r\n\t\tfired,\r\n\t\t// Flag to know if list is currently firing\r\n\t\tfiring,\r\n\t\t// First callback to fire (used internally by add and fireWith)\r\n\t\tfiringStart,\r\n\t\t// End of the loop when firing\r\n\t\tfiringLength,\r\n\t\t// Index of currently firing callback (modified by remove if needed)\r\n\t\tfiringIndex,\r\n\t\t// Actual callback list\r\n\t\tlist = [],\r\n\t\t// Stack of fire calls for repeatable lists\r\n\t\tstack = !options.once && [],\r\n\t\t// Fire callbacks\r\n\t\tfire = function( data ) {\r\n\t\t\tmemory = options.memory && data;\r\n\t\t\tfired = true;\r\n\t\t\tfiringIndex = firingStart || 0;\r\n\t\t\tfiringStart = 0;\r\n\t\t\tfiringLength = list.length;\r\n\t\t\tfiring = true;\r\n\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\r\n\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\r\n\t\t\t\t\tmemory = false; // To prevent further calls using add\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfiring = false;\r\n\t\t\tif ( list ) {\r\n\t\t\t\tif ( stack ) {\r\n\t\t\t\t\tif ( stack.length ) {\r\n\t\t\t\t\t\tfire( stack.shift() );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ( memory ) {\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.disable();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// Actual Callbacks object\r\n\t\tself = {\r\n\t\t\t// Add a callback or a collection of callbacks to the list\r\n\t\t\tadd: function() {\r\n\t\t\t\tif ( list ) {\r\n\t\t\t\t\t// First, we save the current length\r\n\t\t\t\t\tvar start = list.length;\r\n\t\t\t\t\t(function add( args ) {\r\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\r\n\t\t\t\t\t\t\tvar type = jQuery.type( arg );\r\n\t\t\t\t\t\t\tif ( type === \"function\" ) {\r\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\r\n\t\t\t\t\t\t\t\t\tlist.push( arg );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\r\n\t\t\t\t\t\t\t\t// Inspect recursively\r\n\t\t\t\t\t\t\t\tadd( arg );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})( arguments );\r\n\t\t\t\t\t// Do we need to add the callbacks to the\r\n\t\t\t\t\t// current firing batch?\r\n\t\t\t\t\tif ( firing ) {\r\n\t\t\t\t\t\tfiringLength = list.length;\r\n\t\t\t\t\t// With memory, if we're not firing then\r\n\t\t\t\t\t// we should call right away\r\n\t\t\t\t\t} else if ( memory ) {\r\n\t\t\t\t\t\tfiringStart = start;\r\n\t\t\t\t\t\tfire( memory );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Remove a callback from the list\r\n\t\t\tremove: function() {\r\n\t\t\t\tif ( list ) {\r\n\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\r\n\t\t\t\t\t\tvar index;\r\n\t\t\t\t\t\twhile( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\r\n\t\t\t\t\t\t\tlist.splice( index, 1 );\r\n\t\t\t\t\t\t\t// Handle firing indexes\r\n\t\t\t\t\t\t\tif ( firing ) {\r\n\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\r\n\t\t\t\t\t\t\t\t\tfiringLength--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\r\n\t\t\t\t\t\t\t\t\tfiringIndex--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Control if a given callback is in the list\r\n\t\t\thas: function( fn ) {\r\n\t\t\t\treturn jQuery.inArray( fn, list ) > -1;\r\n\t\t\t},\r\n\t\t\t// Remove all callbacks from the list\r\n\t\t\tempty: function() {\r\n\t\t\t\tlist = [];\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Have the list do nothing anymore\r\n\t\t\tdisable: function() {\r\n\t\t\t\tlist = stack = memory = undefined;\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Is it disabled?\r\n\t\t\tdisabled: function() {\r\n\t\t\t\treturn !list;\r\n\t\t\t},\r\n\t\t\t// Lock the list in its current state\r\n\t\t\tlock: function() {\r\n\t\t\t\tstack = undefined;\r\n\t\t\t\tif ( !memory ) {\r\n\t\t\t\t\tself.disable();\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Is it locked?\r\n\t\t\tlocked: function() {\r\n\t\t\t\treturn !stack;\r\n\t\t\t},\r\n\t\t\t// Call all callbacks with the given context and arguments\r\n\t\t\tfireWith: function( context, args ) {\r\n\t\t\t\targs = args || [];\r\n\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\r\n\t\t\t\tif ( list && ( !fired || stack ) ) {\r\n\t\t\t\t\tif ( firing ) {\r\n\t\t\t\t\t\tstack.push( args );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfire( args );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Call all the callbacks with the given arguments\r\n\t\t\tfire: function() {\r\n\t\t\t\tself.fireWith( this, arguments );\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// To know if the callbacks have already been called at least once\r\n\t\t\tfired: function() {\r\n\t\t\t\treturn !!fired;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\treturn self;\r\n};\r\njQuery.extend({\r\n\r\n\tDeferred: function( func ) {\r\n\t\tvar tuples = [\r\n\t\t\t\t// action, add listener, listener list, final state\r\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\r\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\r\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\r\n\t\t\t],\r\n\t\t\tstate = \"pending\",\r\n\t\t\tpromise = {\r\n\t\t\t\tstate: function() {\r\n\t\t\t\t\treturn state;\r\n\t\t\t\t},\r\n\t\t\t\talways: function() {\r\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\r\n\t\t\t\t\tvar fns = arguments;\r\n\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\r\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\r\n\t\t\t\t\t\t\tvar action = tuple[ 0 ],\r\n\t\t\t\t\t\t\t\tfn = fns[ i ];\r\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\r\n\t\t\t\t\t\t\tdeferred[ tuple[1] ]( jQuery.isFunction( fn ) ?\r\n\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\tvar returned = fn.apply( this, arguments );\r\n\t\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\r\n\t\t\t\t\t\t\t\t\t\treturned.promise()\r\n\t\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\r\n\t\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\r\n\t\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tnewDefer[ action + \"With\" ]( this === deferred ? newDefer : this, [ returned ] );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} :\r\n\t\t\t\t\t\t\t\tnewDefer[ action ]\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfns = null;\r\n\t\t\t\t\t}).promise();\r\n\t\t\t\t},\r\n\t\t\t\t// Get a promise for this deferred\r\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\r\n\t\t\t\tpromise: function( obj ) {\r\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdeferred = {};\r\n\r\n\t\t// Keep pipe for back-compat\r\n\t\tpromise.pipe = promise.then;\r\n\r\n\t\t// Add list-specific methods\r\n\t\tjQuery.each( tuples, function( i, tuple ) {\r\n\t\t\tvar list = tuple[ 2 ],\r\n\t\t\t\tstateString = tuple[ 3 ];\r\n\r\n\t\t\t// promise[ done | fail | progress ] = list.add\r\n\t\t\tpromise[ tuple[1] ] = list.add;\r\n\r\n\t\t\t// Handle state\r\n\t\t\tif ( stateString ) {\r\n\t\t\t\tlist.add(function() {\r\n\t\t\t\t\t// state = [ resolved | rejected ]\r\n\t\t\t\t\tstate = stateString;\r\n\r\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\r\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\r\n\t\t\t}\r\n\r\n\t\t\t// deferred[ resolve | reject | notify ] = list.fire\r\n\t\t\tdeferred[ tuple[0] ] = list.fire;\r\n\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\r\n\t\t});\r\n\r\n\t\t// Make the deferred a promise\r\n\t\tpromise.promise( deferred );\r\n\r\n\t\t// Call given func if any\r\n\t\tif ( func ) {\r\n\t\t\tfunc.call( deferred, deferred );\r\n\t\t}\r\n\r\n\t\t// All done!\r\n\t\treturn deferred;\r\n\t},\r\n\r\n\t// Deferred helper\r\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\r\n\t\tvar i = 0,\r\n\t\t\tresolveValues = core_slice.call( arguments ),\r\n\t\t\tlength = resolveValues.length,\r\n\r\n\t\t\t// the count of uncompleted subordinates\r\n\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\r\n\r\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\r\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\r\n\r\n\t\t\t// Update function for both resolve and progress values\r\n\t\t\tupdateFunc = function( i, contexts, values ) {\r\n\t\t\t\treturn function( value ) {\r\n\t\t\t\t\tcontexts[ i ] = this;\r\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;\r\n\t\t\t\t\tif( values === progressValues ) {\r\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\r\n\t\t\t\t\t} else if ( !( --remaining ) ) {\r\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tprogressValues, progressContexts, resolveContexts;\r\n\r\n\t\t// add listeners to Deferred subordinates; treat others as resolved\r\n\t\tif ( length > 1 ) {\r\n\t\t\tprogressValues = new Array( length );\r\n\t\t\tprogressContexts = new Array( length );\r\n\t\t\tresolveContexts = new Array( length );\r\n\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\r\n\t\t\t\t\tresolveValues[ i ].promise()\r\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\r\n\t\t\t\t\t\t.fail( deferred.reject )\r\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t--remaining;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// if we're not waiting on anything, resolve the master\r\n\t\tif ( !remaining ) {\r\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\r\n\t\t}\r\n\r\n\t\treturn deferred.promise();\r\n\t}\r\n});\r\njQuery.support = (function() {\r\n\r\n\tvar support,\r\n\t\tall,\r\n\t\ta,\r\n\t\tselect,\r\n\t\topt,\r\n\t\tinput,\r\n\t\tfragment,\r\n\t\teventName,\r\n\t\ti,\r\n\t\tisSupported,\r\n\t\tclickFn,\r\n\t\tdiv = document.createElement(\"div\");\r\n\r\n\t// Setup\r\n\tdiv.setAttribute( \"className\", \"t\" );\r\n\tdiv.innerHTML = \"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\";\r\n\r\n\t// Support tests won't run in some limited or non-browser environments\r\n\tall = div.getElementsByTagName(\"*\");\r\n\ta = div.getElementsByTagName(\"a\")[ 0 ];\r\n\tif ( !all || !a || !all.length ) {\r\n\t\treturn {};\r\n\t}\r\n\r\n\t// First batch of tests\r\n\tselect = document.createElement(\"select\");\r\n\topt = select.appendChild( document.createElement(\"option\") );\r\n\tinput = div.getElementsByTagName(\"input\")[ 0 ];\r\n\r\n\ta.style.cssText = \"top:1px;float:left;opacity:.5\";\r\n\tsupport = {\r\n\t\t// IE strips leading whitespace when .innerHTML is used\r\n\t\tleadingWhitespace: ( div.firstChild.nodeType === 3 ),\r\n\r\n\t\t// Make sure that tbody elements aren't automatically inserted\r\n\t\t// IE will insert them into empty tables\r\n\t\ttbody: !div.getElementsByTagName(\"tbody\").length,\r\n\r\n\t\t// Make sure that link elements get serialized correctly by innerHTML\r\n\t\t// This requires a wrapper element in IE\r\n\t\thtmlSerialize: !!div.getElementsByTagName(\"link\").length,\r\n\r\n\t\t// Get the style information from getAttribute\r\n\t\t// (IE uses .cssText instead)\r\n\t\tstyle: /top/.test( a.getAttribute(\"style\") ),\r\n\r\n\t\t// Make sure that URLs aren't manipulated\r\n\t\t// (IE normalizes it by default)\r\n\t\threfNormalized: ( a.getAttribute(\"href\") === \"/a\" ),\r\n\r\n\t\t// Make sure that element opacity exists\r\n\t\t// (IE uses filter instead)\r\n\t\t// Use a regex to work around a WebKit issue. See #5145\r\n\t\topacity: /^0.5/.test( a.style.opacity ),\r\n\r\n\t\t// Verify style float existence\r\n\t\t// (IE uses styleFloat instead of cssFloat)\r\n\t\tcssFloat: !!a.style.cssFloat,\r\n\r\n\t\t// Make sure that if no value is specified for a checkbox\r\n\t\t// that it defaults to \"on\".\r\n\t\t// (WebKit defaults to \"\" instead)\r\n\t\tcheckOn: ( input.value === \"on\" ),\r\n\r\n\t\t// Make sure that a selected-by-default option has a working selected property.\r\n\t\t// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)\r\n\t\toptSelected: opt.selected,\r\n\r\n\t\t// Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)\r\n\t\tgetSetAttribute: div.className !== \"t\",\r\n\r\n\t\t// Tests for enctype support on a form (#6743)\r\n\t\tenctype: !!document.createElement(\"form\").enctype,\r\n\r\n\t\t// Makes sure cloning an html5 element does not cause problems\r\n\t\t// Where outerHTML is undefined, this still works\r\n\t\thtml5Clone: document.createElement(\"nav\").cloneNode( true ).outerHTML !== \"<:nav></:nav>\",\r\n\r\n\t\t// jQuery.support.boxModel DEPRECATED in 1.8 since we don't support Quirks Mode\r\n\t\tboxModel: ( document.compatMode === \"CSS1Compat\" ),\r\n\r\n\t\t// Will be defined later\r\n\t\tsubmitBubbles: true,\r\n\t\tchangeBubbles: true,\r\n\t\tfocusinBubbles: false,\r\n\t\tdeleteExpando: true,\r\n\t\tnoCloneEvent: true,\r\n\t\tinlineBlockNeedsLayout: false,\r\n\t\tshrinkWrapBlocks: false,\r\n\t\treliableMarginRight: true,\r\n\t\tboxSizingReliable: true,\r\n\t\tpixelPosition: false\r\n\t};\r\n\r\n\t// Make sure checked status is properly cloned\r\n\tinput.checked = true;\r\n\tsupport.noCloneChecked = input.cloneNode( true ).checked;\r\n\r\n\t// Make sure that the options inside disabled selects aren't marked as disabled\r\n\t// (WebKit marks them as disabled)\r\n\tselect.disabled = true;\r\n\tsupport.optDisabled = !opt.disabled;\r\n\r\n\t// Test to see if it's possible to delete an expando from an element\r\n\t// Fails in Internet Explorer\r\n\ttry {\r\n\t\tdelete div.test;\r\n\t} catch( e ) {\r\n\t\tsupport.deleteExpando = false;\r\n\t}\r\n\r\n\tif ( !div.addEventListener && div.attachEvent && div.fireEvent ) {\r\n\t\tdiv.attachEvent( \"onclick\", clickFn = function() {\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tsupport.noCloneEvent = false;\r\n\t\t});\r\n\t\tdiv.cloneNode( true ).fireEvent(\"onclick\");\r\n\t\tdiv.detachEvent( \"onclick\", clickFn );\r\n\t}\r\n\r\n\t// Check if a radio maintains its value\r\n\t// after being appended to the DOM\r\n\tinput = document.createElement(\"input\");\r\n\tinput.value = \"t\";\r\n\tinput.setAttribute( \"type\", \"radio\" );\r\n\tsupport.radioValue = input.value === \"t\";\r\n\r\n\tinput.setAttribute( \"checked\", \"checked\" );\r\n\r\n\t// #11217 - WebKit loses check when the name is after the checked attribute\r\n\tinput.setAttribute( \"name\", \"t\" );\r\n\r\n\tdiv.appendChild( input );\r\n\tfragment = document.createDocumentFragment();\r\n\tfragment.appendChild( div.lastChild );\r\n\r\n\t// WebKit doesn't clone checked state correctly in fragments\r\n\tsupport.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;\r\n\r\n\t// Check if a disconnected checkbox will retain its checked\r\n\t// value of true after appended to the DOM (IE6/7)\r\n\tsupport.appendChecked = input.checked;\r\n\r\n\tfragment.removeChild( input );\r\n\tfragment.appendChild( div );\r\n\r\n\t// Technique from Juriy Zaytsev\r\n\t// http://perfectionkills.com/detecting-event-support-without-browser-sniffing/\r\n\t// We only care about the case where non-standard event systems\r\n\t// are used, namely in IE. Short-circuiting here helps us to\r\n\t// avoid an eval call (in setAttribute) which can cause CSP\r\n\t// to go haywire. See: https://developer.mozilla.org/en/Security/CSP\r\n\tif ( div.attachEvent ) {\r\n\t\tfor ( i in {\r\n\t\t\tsubmit: true,\r\n\t\t\tchange: true,\r\n\t\t\tfocusin: true\r\n\t\t}) {\r\n\t\t\teventName = \"on\" + i;\r\n\t\t\tisSupported = ( eventName in div );\r\n\t\t\tif ( !isSupported ) {\r\n\t\t\t\tdiv.setAttribute( eventName, \"return;\" );\r\n\t\t\t\tisSupported = ( typeof div[ eventName ] === \"function\" );\r\n\t\t\t}\r\n\t\t\tsupport[ i + \"Bubbles\" ] = isSupported;\r\n\t\t}\r\n\t}\r\n\r\n\t// Run tests that need a body at doc ready\r\n\tjQuery(function() {\r\n\t\tvar container, div, tds, marginDiv,\r\n\t\t\tdivReset = \"padding:0;margin:0;border:0;display:block;overflow:hidden;\",\r\n\t\t\tbody = document.getElementsByTagName(\"body\")[0];\r\n\r\n\t\tif ( !body ) {\r\n\t\t\t// Return for frameset docs that don't have a body\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcontainer = document.createElement(\"div\");\r\n\t\tcontainer.style.cssText = \"visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px\";\r\n\t\tbody.insertBefore( container, body.firstChild );\r\n\r\n\t\t// Construct the test element\r\n\t\tdiv = document.createElement(\"div\");\r\n\t\tcontainer.appendChild( div );\r\n\r\n\t\t// Check if table cells still have offsetWidth/Height when they are set\r\n\t\t// to display:none and there are still other visible table cells in a\r\n\t\t// table row; if so, offsetWidth/Height are not reliable for use when\r\n\t\t// determining if an element has been hidden directly using\r\n\t\t// display:none (it is still safe to use offsets if a parent element is\r\n\t\t// hidden; don safety goggles and see bug #4512 for more information).\r\n\t\t// (only IE 8 fails this test)\r\n\t\tdiv.innerHTML = \"<table><tr><td></td><td>t</td></tr></table>\";\r\n\t\ttds = div.getElementsByTagName(\"td\");\r\n\t\ttds[ 0 ].style.cssText = \"padding:0;margin:0;border:0;display:none\";\r\n\t\tisSupported = ( tds[ 0 ].offsetHeight === 0 );\r\n\r\n\t\ttds[ 0 ].style.display = \"\";\r\n\t\ttds[ 1 ].style.display = \"none\";\r\n\r\n\t\t// Check if empty table cells still have offsetWidth/Height\r\n\t\t// (IE <= 8 fail this test)\r\n\t\tsupport.reliableHiddenOffsets = isSupported && ( tds[ 0 ].offsetHeight === 0 );\r\n\r\n\t\t// Check box-sizing and margin behavior\r\n\t\tdiv.innerHTML = \"\";\r\n\t\tdiv.style.cssText = \"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\";\r\n\t\tsupport.boxSizing = ( div.offsetWidth === 4 );\r\n\t\tsupport.doesNotIncludeMarginInBodyOffset = ( body.offsetTop !== 1 );\r\n\r\n\t\t// NOTE: To any future maintainer, we've window.getComputedStyle\r\n\t\t// because jsdom on node.js will break without it.\r\n\t\tif ( window.getComputedStyle ) {\r\n\t\t\tsupport.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== \"1%\";\r\n\t\t\tsupport.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: \"4px\" } ).width === \"4px\";\r\n\r\n\t\t\t// Check if div with explicit width and no margin-right incorrectly\r\n\t\t\t// gets computed margin-right based on width of container. For more\r\n\t\t\t// info see bug #3333\r\n\t\t\t// Fails in WebKit before Feb 2011 nightlies\r\n\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\r\n\t\t\tmarginDiv = document.createElement(\"div\");\r\n\t\t\tmarginDiv.style.cssText = div.style.cssText = divReset;\r\n\t\t\tmarginDiv.style.marginRight = marginDiv.style.width = \"0\";\r\n\t\t\tdiv.style.width = \"1px\";\r\n\t\t\tdiv.appendChild( marginDiv );\r\n\t\t\tsupport.reliableMarginRight =\r\n\t\t\t\t!parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );\r\n\t\t}\r\n\r\n\t\tif ( typeof div.style.zoom !== \"undefined\" ) {\r\n\t\t\t// Check if natively block-level elements act like inline-block\r\n\t\t\t// elements when setting their display to 'inline' and giving\r\n\t\t\t// them layout\r\n\t\t\t// (IE < 8 does this)\r\n\t\t\tdiv.innerHTML = \"\";\r\n\t\t\tdiv.style.cssText = divReset + \"width:1px;padding:1px;display:inline;zoom:1\";\r\n\t\t\tsupport.inlineBlockNeedsLayout = ( div.offsetWidth === 3 );\r\n\r\n\t\t\t// Check if elements with layout shrink-wrap their children\r\n\t\t\t// (IE 6 does this)\r\n\t\t\tdiv.style.display = \"block\";\r\n\t\t\tdiv.style.overflow = \"visible\";\r\n\t\t\tdiv.innerHTML = \"<div></div>\";\r\n\t\t\tdiv.firstChild.style.width = \"5px\";\r\n\t\t\tsupport.shrinkWrapBlocks = ( div.offsetWidth !== 3 );\r\n\r\n\t\t\tcontainer.style.zoom = 1;\r\n\t\t}\r\n\r\n\t\t// Null elements to avoid leaks in IE\r\n\t\tbody.removeChild( container );\r\n\t\tcontainer = div = tds = marginDiv = null;\r\n\t});\r\n\r\n\t// Null elements to avoid leaks in IE\r\n\tfragment.removeChild( div );\r\n\tall = a = select = opt = input = fragment = div = null;\r\n\r\n\treturn support;\r\n})();\r\nvar rbrace = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\r\n\trmultiDash = /([A-Z])/g;\r\n\r\njQuery.extend({\r\n\tcache: {},\r\n\r\n\tdeletedIds: [],\r\n\r\n\t// Remove at next major release (1.9/2.0)\r\n\tuuid: 0,\r\n\r\n\t// Unique for each copy of jQuery on the page\r\n\t// Non-digits removed to match rinlinejQuery\r\n\texpando: \"jQuery\" + ( jQuery.fn.jquery + Math.random() ).replace( /\\D/g, \"\" ),\r\n\r\n\t// The following elements throw uncatchable exceptions if you\r\n\t// attempt to add expando properties to them.\r\n\tnoData: {\r\n\t\t\"embed\": true,\r\n\t\t// Ban all objects except for Flash (which handle expandos)\r\n\t\t\"object\": \"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",\r\n\t\t\"applet\": true\r\n\t},\r\n\r\n\thasData: function( elem ) {\r\n\t\telem = elem.nodeType ? jQuery.cache[ elem[jQuery.expando] ] : elem[ jQuery.expando ];\r\n\t\treturn !!elem && !isEmptyDataObject( elem );\r\n\t},\r\n\r\n\tdata: function( elem, name, data, pvt /* Internal Use Only */ ) {\r\n\t\tif ( !jQuery.acceptData( elem ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar thisCache, ret,\r\n\t\t\tinternalKey = jQuery.expando,\r\n\t\t\tgetByName = typeof name === \"string\",\r\n\r\n\t\t\t// We have to handle DOM nodes and JS objects differently because IE6-7\r\n\t\t\t// can't GC object references properly across the DOM-JS boundary\r\n\t\t\tisNode = elem.nodeType,\r\n\r\n\t\t\t// Only DOM nodes need the global jQuery cache; JS object data is\r\n\t\t\t// attached directly to the object so GC can occur automatically\r\n\t\t\tcache = isNode ? jQuery.cache : elem,\r\n\r\n\t\t\t// Only defining an ID for JS objects if its cache already exists allows\r\n\t\t\t// the code to shortcut on the same path as a DOM node with no cache\r\n\t\t\tid = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;\r\n\r\n\t\t// Avoid doing any more work than we need to when trying to get data on an\r\n\t\t// object that has no data at all\r\n\t\tif ( (!id || !cache[id] || (!pvt && !cache[id].data)) && getByName && data === undefined ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !id ) {\r\n\t\t\t// Only DOM nodes need a new unique ID for each element since their data\r\n\t\t\t// ends up in the global cache\r\n\t\t\tif ( isNode ) {\r\n\t\t\t\telem[ internalKey ] = id = jQuery.deletedIds.pop() || jQuery.guid++;\r\n\t\t\t} else {\r\n\t\t\t\tid = internalKey;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( !cache[ id ] ) {\r\n\t\t\tcache[ id ] = {};\r\n\r\n\t\t\t// Avoids exposing jQuery metadata on plain JS objects when the object\r\n\t\t\t// is serialized using JSON.stringify\r\n\t\t\tif ( !isNode ) {\r\n\t\t\t\tcache[ id ].toJSON = jQuery.noop;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// An object can be passed to jQuery.data instead of a key/value pair; this gets\r\n\t\t// shallow copied over onto the existing cache\r\n\t\tif ( typeof name === \"object\" || typeof name === \"function\" ) {\r\n\t\t\tif ( pvt ) {\r\n\t\t\t\tcache[ id ] = jQuery.extend( cache[ id ], name );\r\n\t\t\t} else {\r\n\t\t\t\tcache[ id ].data = jQuery.extend( cache[ id ].data, name );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthisCache = cache[ id ];\r\n\r\n\t\t// jQuery data() is stored in a separate object inside the object's internal data\r\n\t\t// cache in order to avoid key collisions between internal data and user-defined\r\n\t\t// data.\r\n\t\tif ( !pvt ) {\r\n\t\t\tif ( !thisCache.data ) {\r\n\t\t\t\tthisCache.data = {};\r\n\t\t\t}\r\n\r\n\t\t\tthisCache = thisCache.data;\r\n\t\t}\r\n\r\n\t\tif ( data !== undefined ) {\r\n\t\t\tthisCache[ jQuery.camelCase( name ) ] = data;\r\n\t\t}\r\n\r\n\t\t// Check for both converted-to-camel and non-converted data property names\r\n\t\t// If a data property was specified\r\n\t\tif ( getByName ) {\r\n\r\n\t\t\t// First Try to find as-is property data\r\n\t\t\tret = thisCache[ name ];\r\n\r\n\t\t\t// Test for null|undefined property data\r\n\t\t\tif ( ret == null ) {\r\n\r\n\t\t\t\t// Try to find the camelCased property\r\n\t\t\t\tret = thisCache[ jQuery.camelCase( name ) ];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tret = thisCache;\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\tremoveData: function( elem, name, pvt /* Internal Use Only */ ) {\r\n\t\tif ( !jQuery.acceptData( elem ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar thisCache, i, l,\r\n\r\n\t\t\tisNode = elem.nodeType,\r\n\r\n\t\t\t// See jQuery.data for more information\r\n\t\t\tcache = isNode ? jQuery.cache : elem,\r\n\t\t\tid = isNode ? elem[ jQuery.expando ] : jQuery.expando;\r\n\r\n\t\t// If there is already no cache entry for this object, there is no\r\n\t\t// purpose in continuing\r\n\t\tif ( !cache[ id ] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( name ) {\r\n\r\n\t\t\tthisCache = pvt ? cache[ id ] : cache[ id ].data;\r\n\r\n\t\t\tif ( thisCache ) {\r\n\r\n\t\t\t\t// Support array or space separated string names for data keys\r\n\t\t\t\tif ( !jQuery.isArray( name ) ) {\r\n\r\n\t\t\t\t\t// try the string as a key before any manipulation\r\n\t\t\t\t\tif ( name in thisCache ) {\r\n\t\t\t\t\t\tname = [ name ];\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// split the camel cased version by spaces unless a key with the spaces exists\r\n\t\t\t\t\t\tname = jQuery.camelCase( name );\r\n\t\t\t\t\t\tif ( name in thisCache ) {\r\n\t\t\t\t\t\t\tname = [ name ];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tname = name.split(\" \");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( i = 0, l = name.length; i < l; i++ ) {\r\n\t\t\t\t\tdelete thisCache[ name[i] ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If there is no data left in the cache, we want to continue\r\n\t\t\t\t// and let the cache object itself get destroyed\r\n\t\t\t\tif ( !( pvt ? isEmptyDataObject : jQuery.isEmptyObject )( thisCache ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// See jQuery.data for more information\r\n\t\tif ( !pvt ) {\r\n\t\t\tdelete cache[ id ].data;\r\n\r\n\t\t\t// Don't destroy the parent cache unless the internal data object\r\n\t\t\t// had been the only thing left in it\r\n\t\t\tif ( !isEmptyDataObject( cache[ id ] ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Destroy the cache\r\n\t\tif ( isNode ) {\r\n\t\t\tjQuery.cleanData( [ elem ], true );\r\n\r\n\t\t// Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)\r\n\t\t} else if ( jQuery.support.deleteExpando || cache != cache.window ) {\r\n\t\t\tdelete cache[ id ];\r\n\r\n\t\t// When all else fails, null\r\n\t\t} else {\r\n\t\t\tcache[ id ] = null;\r\n\t\t}\r\n\t},\r\n\r\n\t// For internal use only.\r\n\t_data: function( elem, name, data ) {\r\n\t\treturn jQuery.data( elem, name, data, true );\r\n\t},\r\n\r\n\t// A method for determining if a DOM node can handle the data expando\r\n\tacceptData: function( elem ) {\r\n\t\tvar noData = elem.nodeName && jQuery.noData[ elem.nodeName.toLowerCase() ];\r\n\r\n\t\t// nodes accept data unless otherwise specified; rejection can be conditional\r\n\t\treturn !noData || noData !== true && elem.getAttribute(\"classid\") === noData;\r\n\t}\r\n});\r\n\r\njQuery.fn.extend({\r\n\tdata: function( key, value ) {\r\n\t\tvar parts, part, attr, name, l,\r\n\t\t\telem = this[0],\r\n\t\t\ti = 0,\r\n\t\t\tdata = null;\r\n\r\n\t\t// Gets all values\r\n\t\tif ( key === undefined ) {\r\n\t\t\tif ( this.length ) {\r\n\t\t\t\tdata = jQuery.data( elem );\r\n\r\n\t\t\t\tif ( elem.nodeType === 1 && !jQuery._data( elem, \"parsedAttrs\" ) ) {\r\n\t\t\t\t\tattr = elem.attributes;\r\n\t\t\t\t\tfor ( l = attr.length; i < l; i++ ) {\r\n\t\t\t\t\t\tname = attr[i].name;\r\n\r\n\t\t\t\t\t\tif ( !name.indexOf( \"data-\" ) ) {\r\n\t\t\t\t\t\t\tname = jQuery.camelCase( name.substring(5) );\r\n\r\n\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tjQuery._data( elem, \"parsedAttrs\", true );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\t// Sets multiple values\r\n\t\tif ( typeof key === \"object\" ) {\r\n\t\t\treturn this.each(function() {\r\n\t\t\t\tjQuery.data( this, key );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tparts = key.split( \".\", 2 );\r\n\t\tparts[1] = parts[1] ? \".\" + parts[1] : \"\";\r\n\t\tpart = parts[1] + \"!\";\r\n\r\n\t\treturn jQuery.access( this, function( value ) {\r\n\r\n\t\t\tif ( value === undefined ) {\r\n\t\t\t\tdata = this.triggerHandler( \"getData\" + part, [ parts[0] ] );\r\n\r\n\t\t\t\t// Try to fetch any internally stored data first\r\n\t\t\t\tif ( data === undefined && elem ) {\r\n\t\t\t\t\tdata = jQuery.data( elem, key );\r\n\t\t\t\t\tdata = dataAttr( elem, key, data );\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn data === undefined && parts[1] ?\r\n\t\t\t\t\tthis.data( parts[0] ) :\r\n\t\t\t\t\tdata;\r\n\t\t\t}\r\n\r\n\t\t\tparts[1] = value;\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar self = jQuery( this );\r\n\r\n\t\t\t\tself.triggerHandler( \"setData\" + part, parts );\r\n\t\t\t\tjQuery.data( this, key, value );\r\n\t\t\t\tself.triggerHandler( \"changeData\" + part, parts );\r\n\t\t\t});\r\n\t\t}, null, value, arguments.length > 1, null, false );\r\n\t},\r\n\r\n\tremoveData: function( key ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.removeData( this, key );\r\n\t\t});\r\n\t}\r\n});\r\n\r\nfunction dataAttr( elem, key, data ) {\r\n\t// If nothing was found internally, try to fetch any\r\n\t// data from the HTML5 data-* attribute\r\n\tif ( data === undefined && elem.nodeType === 1 ) {\r\n\r\n\t\tvar name = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\r\n\r\n\t\tdata = elem.getAttribute( name );\r\n\r\n\t\tif ( typeof data === \"string\" ) {\r\n\t\t\ttry {\r\n\t\t\t\tdata = data === \"true\" ? true :\r\n\t\t\t\tdata === \"false\" ? false :\r\n\t\t\t\tdata === \"null\" ? null :\r\n\t\t\t\t// Only convert to a number if it doesn't change the string\r\n\t\t\t\t+data + \"\" === data ? +data :\r\n\t\t\t\trbrace.test( data ) ? jQuery.parseJSON( data ) :\r\n\t\t\t\t\tdata;\r\n\t\t\t} catch( e ) {}\r\n\r\n\t\t\t// Make sure we set the data so it isn't changed later\r\n\t\t\tjQuery.data( elem, key, data );\r\n\r\n\t\t} else {\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\treturn data;\r\n}\r\n\r\n// checks a cache object for emptiness\r\nfunction isEmptyDataObject( obj ) {\r\n\tvar name;\r\n\tfor ( name in obj ) {\r\n\r\n\t\t// if the public data object is empty, the private is still empty\r\n\t\tif ( name === \"data\" && jQuery.isEmptyObject( obj[name] ) ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif ( name !== \"toJSON\" ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n}\r\njQuery.extend({\r\n\tqueue: function( elem, type, data ) {\r\n\t\tvar queue;\r\n\r\n\t\tif ( elem ) {\r\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\r\n\t\t\tqueue = jQuery._data( elem, type );\r\n\r\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\r\n\t\t\tif ( data ) {\r\n\t\t\t\tif ( !queue || jQuery.isArray(data) ) {\r\n\t\t\t\t\tqueue = jQuery._data( elem, type, jQuery.makeArray(data) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tqueue.push( data );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn queue || [];\r\n\t\t}\r\n\t},\r\n\r\n\tdequeue: function( elem, type ) {\r\n\t\ttype = type || \"fx\";\r\n\r\n\t\tvar queue = jQuery.queue( elem, type ),\r\n\t\t\tstartLength = queue.length,\r\n\t\t\tfn = queue.shift(),\r\n\t\t\thooks = jQuery._queueHooks( elem, type ),\r\n\t\t\tnext = function() {\r\n\t\t\t\tjQuery.dequeue( elem, type );\r\n\t\t\t};\r\n\r\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\r\n\t\tif ( fn === \"inprogress\" ) {\r\n\t\t\tfn = queue.shift();\r\n\t\t\tstartLength--;\r\n\t\t}\r\n\r\n\t\tif ( fn ) {\r\n\r\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\r\n\t\t\t// automatically dequeued\r\n\t\t\tif ( type === \"fx\" ) {\r\n\t\t\t\tqueue.unshift( \"inprogress\" );\r\n\t\t\t}\r\n\r\n\t\t\t// clear up the last queue stop function\r\n\t\t\tdelete hooks.stop;\r\n\t\t\tfn.call( elem, next, hooks );\r\n\t\t}\r\n\r\n\t\tif ( !startLength && hooks ) {\r\n\t\t\thooks.empty.fire();\r\n\t\t}\r\n\t},\r\n\r\n\t// not intended for public consumption - generates a queueHooks object, or returns the current one\r\n\t_queueHooks: function( elem, type ) {\r\n\t\tvar key = type + \"queueHooks\";\r\n\t\treturn jQuery._data( elem, key ) || jQuery._data( elem, key, {\r\n\t\t\tempty: jQuery.Callbacks(\"once memory\").add(function() {\r\n\t\t\t\tjQuery.removeData( elem, type + \"queue\", true );\r\n\t\t\t\tjQuery.removeData( elem, key, true );\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n});\r\n\r\njQuery.fn.extend({\r\n\tqueue: function( type, data ) {\r\n\t\tvar setter = 2;\r\n\r\n\t\tif ( typeof type !== \"string\" ) {\r\n\t\t\tdata = type;\r\n\t\t\ttype = \"fx\";\r\n\t\t\tsetter--;\r\n\t\t}\r\n\r\n\t\tif ( arguments.length < setter ) {\r\n\t\t\treturn jQuery.queue( this[0], type );\r\n\t\t}\r\n\r\n\t\treturn data === undefined ?\r\n\t\t\tthis :\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\r\n\r\n\t\t\t\t// ensure a hooks for this queue\r\n\t\t\t\tjQuery._queueHooks( this, type );\r\n\r\n\t\t\t\tif ( type === \"fx\" && queue[0] !== \"inprogress\" ) {\r\n\t\t\t\t\tjQuery.dequeue( this, type );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t},\r\n\tdequeue: function( type ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.dequeue( this, type );\r\n\t\t});\r\n\t},\r\n\t// Based off of the plugin by Clint Helfers, with permission.\r\n\t// http://blindsignals.com/index.php/2009/07/jquery-delay/\r\n\tdelay: function( time, type ) {\r\n\t\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\r\n\t\ttype = type || \"fx\";\r\n\r\n\t\treturn this.queue( type, function( next, hooks ) {\r\n\t\t\tvar timeout = setTimeout( next, time );\r\n\t\t\thooks.stop = function() {\r\n\t\t\t\tclearTimeout( timeout );\r\n\t\t\t};\r\n\t\t});\r\n\t},\r\n\tclearQueue: function( type ) {\r\n\t\treturn this.queue( type || \"fx\", [] );\r\n\t},\r\n\t// Get a promise resolved when queues of a certain type\r\n\t// are emptied (fx is the type by default)\r\n\tpromise: function( type, obj ) {\r\n\t\tvar tmp,\r\n\t\t\tcount = 1,\r\n\t\t\tdefer = jQuery.Deferred(),\r\n\t\t\telements = this,\r\n\t\t\ti = this.length,\r\n\t\t\tresolve = function() {\r\n\t\t\t\tif ( !( --count ) ) {\r\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\tif ( typeof type !== \"string\" ) {\r\n\t\t\tobj = type;\r\n\t\t\ttype = undefined;\r\n\t\t}\r\n\t\ttype = type || \"fx\";\r\n\r\n\t\twhile( i-- ) {\r\n\t\t\ttmp = jQuery._data( elements[ i ], type + \"queueHooks\" );\r\n\t\t\tif ( tmp && tmp.empty ) {\r\n\t\t\t\tcount++;\r\n\t\t\t\ttmp.empty.add( resolve );\r\n\t\t\t}\r\n\t\t}\r\n\t\tresolve();\r\n\t\treturn defer.promise( obj );\r\n\t}\r\n});\r\nvar nodeHook, boolHook, fixSpecified,\r\n\trclass = /[\\t\\r\\n]/g,\r\n\trreturn = /\\r/g,\r\n\trtype = /^(?:button|input)$/i,\r\n\trfocusable = /^(?:button|input|object|select|textarea)$/i,\r\n\trclickable = /^a(?:rea|)$/i,\r\n\trboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\r\n\tgetSetAttribute = jQuery.support.getSetAttribute;\r\n\r\njQuery.fn.extend({\r\n\tattr: function( name, value ) {\r\n\t\treturn jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );\r\n\t},\r\n\r\n\tremoveAttr: function( name ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.removeAttr( this, name );\r\n\t\t});\r\n\t},\r\n\r\n\tprop: function( name, value ) {\r\n\t\treturn jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );\r\n\t},\r\n\r\n\tremoveProp: function( name ) {\r\n\t\tname = jQuery.propFix[ name ] || name;\r\n\t\treturn this.each(function() {\r\n\t\t\t// try/catch handles cases where IE balks (such as removing a property on window)\r\n\t\t\ttry {\r\n\t\t\t\tthis[ name ] = undefined;\r\n\t\t\t\tdelete this[ name ];\r\n\t\t\t} catch( e ) {}\r\n\t\t});\r\n\t},\r\n\r\n\taddClass: function( value ) {\r\n\t\tvar classNames, i, l, elem,\r\n\t\t\tsetClass, c, cl;\r\n\r\n\t\tif ( jQuery.isFunction( value ) ) {\r\n\t\t\treturn this.each(function( j ) {\r\n\t\t\t\tjQuery( this ).addClass( value.call(this, j, this.className) );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( value && typeof value === \"string\" ) {\r\n\t\t\tclassNames = value.split( core_rspace );\r\n\r\n\t\t\tfor ( i = 0, l = this.length; i < l; i++ ) {\r\n\t\t\t\telem = this[ i ];\r\n\r\n\t\t\t\tif ( elem.nodeType === 1 ) {\r\n\t\t\t\t\tif ( !elem.className && classNames.length === 1 ) {\r\n\t\t\t\t\t\telem.className = value;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetClass = \" \" + elem.className + \" \";\r\n\r\n\t\t\t\t\t\tfor ( c = 0, cl = classNames.length; c < cl; c++ ) {\r\n\t\t\t\t\t\t\tif ( setClass.indexOf( \" \" + classNames[ c ] + \" \" ) < 0 ) {\r\n\t\t\t\t\t\t\t\tsetClass += classNames[ c ] + \" \";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telem.className = jQuery.trim( setClass );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveClass: function( value ) {\r\n\t\tvar removes, className, elem, c, cl, i, l;\r\n\r\n\t\tif ( jQuery.isFunction( value ) ) {\r\n\t\t\treturn this.each(function( j ) {\r\n\t\t\t\tjQuery( this ).removeClass( value.call(this, j, this.className) );\r\n\t\t\t});\r\n\t\t}\r\n\t\tif ( (value && typeof value === \"string\") || value === undefined ) {\r\n\t\t\tremoves = ( value || \"\" ).split( core_rspace );\r\n\r\n\t\t\tfor ( i = 0, l = this.length; i < l; i++ ) {\r\n\t\t\t\telem = this[ i ];\r\n\t\t\t\tif ( elem.nodeType === 1 && elem.className ) {\r\n\r\n\t\t\t\t\tclassName = (\" \" + elem.className + \" \").replace( rclass, \" \" );\r\n\r\n\t\t\t\t\t// loop over each item in the removal list\r\n\t\t\t\t\tfor ( c = 0, cl = removes.length; c < cl; c++ ) {\r\n\t\t\t\t\t\t// Remove until there is nothing to remove,\r\n\t\t\t\t\t\twhile ( className.indexOf(\" \" + removes[ c ] + \" \") >= 0 ) {\r\n\t\t\t\t\t\t\tclassName = className.replace( \" \" + removes[ c ] + \" \" , \" \" );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telem.className = value ? jQuery.trim( className ) : \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\ttoggleClass: function( value, stateVal ) {\r\n\t\tvar type = typeof value,\r\n\t\t\tisBool = typeof stateVal === \"boolean\";\r\n\r\n\t\tif ( jQuery.isFunction( value ) ) {\r\n\t\t\treturn this.each(function( i ) {\r\n\t\t\t\tjQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tif ( type === \"string\" ) {\r\n\t\t\t\t// toggle individual class names\r\n\t\t\t\tvar className,\r\n\t\t\t\t\ti = 0,\r\n\t\t\t\t\tself = jQuery( this ),\r\n\t\t\t\t\tstate = stateVal,\r\n\t\t\t\t\tclassNames = value.split( core_rspace );\r\n\r\n\t\t\t\twhile ( (className = classNames[ i++ ]) ) {\r\n\t\t\t\t\t// check each className given, space separated list\r\n\t\t\t\t\tstate = isBool ? state : !self.hasClass( className );\r\n\t\t\t\t\tself[ state ? \"addClass\" : \"removeClass\" ]( className );\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( type === \"undefined\" || type === \"boolean\" ) {\r\n\t\t\t\tif ( this.className ) {\r\n\t\t\t\t\t// store className if set\r\n\t\t\t\t\tjQuery._data( this, \"__className__\", this.className );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// toggle whole className\r\n\t\t\t\tthis.className = this.className || value === false ? \"\" : jQuery._data( this, \"__className__\" ) || \"\";\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\thasClass: function( selector ) {\r\n\t\tvar className = \" \" + selector + \" \",\r\n\t\t\ti = 0,\r\n\t\t\tl = this.length;\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tif ( this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass, \" \").indexOf( className ) >= 0 ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\tval: function( value ) {\r\n\t\tvar hooks, ret, isFunction,\r\n\t\t\telem = this[0];\r\n\r\n\t\tif ( !arguments.length ) {\r\n\t\t\tif ( elem ) {\r\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];\r\n\r\n\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, \"value\" )) !== undefined ) {\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tret = elem.value;\r\n\r\n\t\t\t\treturn typeof ret === \"string\" ?\r\n\t\t\t\t\t// handle most common string cases\r\n\t\t\t\t\tret.replace(rreturn, \"\") :\r\n\t\t\t\t\t// handle cases where value is null/undef or number\r\n\t\t\t\t\tret == null ? \"\" : ret;\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tisFunction = jQuery.isFunction( value );\r\n\r\n\t\treturn this.each(function( i ) {\r\n\t\t\tvar val,\r\n\t\t\t\tself = jQuery(this);\r\n\r\n\t\t\tif ( this.nodeType !== 1 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( isFunction ) {\r\n\t\t\t\tval = value.call( this, i, self.val() );\r\n\t\t\t} else {\r\n\t\t\t\tval = value;\r\n\t\t\t}\r\n\r\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\r\n\t\t\tif ( val == null ) {\r\n\t\t\t\tval = \"\";\r\n\t\t\t} else if ( typeof val === \"number\" ) {\r\n\t\t\t\tval += \"\";\r\n\t\t\t} else if ( jQuery.isArray( val ) ) {\r\n\t\t\t\tval = jQuery.map(val, function ( value ) {\r\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\r\n\r\n\t\t\t// If set returns undefined, fall back to normal setting\r\n\t\t\tif ( !hooks || !(\"set\" in hooks) || hooks.set( this, val, \"value\" ) === undefined ) {\r\n\t\t\t\tthis.value = val;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\njQuery.extend({\r\n\tvalHooks: {\r\n\t\toption: {\r\n\t\t\tget: function( elem ) {\r\n\t\t\t\t// attributes.value is undefined in Blackberry 4.7 but\r\n\t\t\t\t// uses .value. See #6932\r\n\t\t\t\tvar val = elem.attributes.value;\r\n\t\t\t\treturn !val || val.specified ? elem.value : elem.text;\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\tget: function( elem ) {\r\n\t\t\t\tvar value, option,\r\n\t\t\t\t\toptions = elem.options,\r\n\t\t\t\t\tindex = elem.selectedIndex,\r\n\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\r\n\t\t\t\t\tvalues = one ? null : [],\r\n\t\t\t\t\tmax = one ? index + 1 : options.length,\r\n\t\t\t\t\ti = index < 0 ?\r\n\t\t\t\t\t\tmax :\r\n\t\t\t\t\t\tone ? index : 0;\r\n\r\n\t\t\t\t// Loop through all the selected options\r\n\t\t\t\tfor ( ; i < max; i++ ) {\r\n\t\t\t\t\toption = options[ i ];\r\n\r\n\t\t\t\t\t// oldIE doesn't update selected after form reset (#2551)\r\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\r\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\r\n\t\t\t\t\t\t\t( jQuery.support.optDisabled ? !option.disabled : option.getAttribute(\"disabled\") === null ) &&\r\n\t\t\t\t\t\t\t( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\r\n\r\n\t\t\t\t\t\t// Get the specific value for the option\r\n\t\t\t\t\t\tvalue = jQuery( option ).val();\r\n\r\n\t\t\t\t\t\t// We don't need an array for one selects\r\n\t\t\t\t\t\tif ( one ) {\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Multi-Selects return an array\r\n\t\t\t\t\t\tvalues.push( value );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn values;\r\n\t\t\t},\r\n\r\n\t\t\tset: function( elem, value ) {\r\n\t\t\t\tvar values = jQuery.makeArray( value );\r\n\r\n\t\t\t\tjQuery(elem).find(\"option\").each(function() {\r\n\t\t\t\t\tthis.selected = jQuery.inArray( jQuery(this).val(), values ) >= 0;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ( !values.length ) {\r\n\t\t\t\t\telem.selectedIndex = -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn values;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Unused in 1.8, left in so attrFn-stabbers won't die; remove in 1.9\r\n\tattrFn: {},\r\n\r\n\tattr: function( elem, name, value, pass ) {\r\n\t\tvar ret, hooks, notxml,\r\n\t\t\tnType = elem.nodeType;\r\n\r\n\t\t// don't get/set attributes on text, comment and attribute nodes\r\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( pass && jQuery.isFunction( jQuery.fn[ name ] ) ) {\r\n\t\t\treturn jQuery( elem )[ name ]( value );\r\n\t\t}\r\n\r\n\t\t// Fallback to prop when attributes are not supported\r\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\r\n\t\t\treturn jQuery.prop( elem, name, value );\r\n\t\t}\r\n\r\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\r\n\r\n\t\t// All attributes are lowercase\r\n\t\t// Grab necessary hook if one is defined\r\n\t\tif ( notxml ) {\r\n\t\t\tname = name.toLowerCase();\r\n\t\t\thooks = jQuery.attrHooks[ name ] || ( rboolean.test( name ) ? boolHook : nodeHook );\r\n\t\t}\r\n\r\n\t\tif ( value !== undefined ) {\r\n\r\n\t\t\tif ( value === null ) {\r\n\t\t\t\tjQuery.removeAttr( elem, name );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t} else if ( hooks && \"set\" in hooks && notxml && (ret = hooks.set( elem, value, name )) !== undefined ) {\r\n\t\t\t\treturn ret;\r\n\r\n\t\t\t} else {\r\n\t\t\t\telem.setAttribute( name, value + \"\" );\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t} else if ( hooks && \"get\" in hooks && notxml && (ret = hooks.get( elem, name )) !== null ) {\r\n\t\t\treturn ret;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tret = elem.getAttribute( name );\r\n\r\n\t\t\t// Non-existent attributes return null, we normalize to undefined\r\n\t\t\treturn ret === null ?\r\n\t\t\t\tundefined :\r\n\t\t\t\tret;\r\n\t\t}\r\n\t},\r\n\r\n\tremoveAttr: function( elem, value ) {\r\n\t\tvar propName, attrNames, name, isBool,\r\n\t\t\ti = 0;\r\n\r\n\t\tif ( value && elem.nodeType === 1 ) {\r\n\r\n\t\t\tattrNames = value.split( core_rspace );\r\n\r\n\t\t\tfor ( ; i < attrNames.length; i++ ) {\r\n\t\t\t\tname = attrNames[ i ];\r\n\r\n\t\t\t\tif ( name ) {\r\n\t\t\t\t\tpropName = jQuery.propFix[ name ] || name;\r\n\t\t\t\t\tisBool = rboolean.test( name );\r\n\r\n\t\t\t\t\t// See #9699 for explanation of this approach (setting first, then removal)\r\n\t\t\t\t\t// Do not do this for boolean attributes (see #10870)\r\n\t\t\t\t\tif ( !isBool ) {\r\n\t\t\t\t\t\tjQuery.attr( elem, name, \"\" );\r\n\t\t\t\t\t}\r\n\t\t\t\t\telem.removeAttribute( getSetAttribute ? name : propName );\r\n\r\n\t\t\t\t\t// Set corresponding property to false for boolean attributes\r\n\t\t\t\t\tif ( isBool && propName in elem ) {\r\n\t\t\t\t\t\telem[ propName ] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tattrHooks: {\r\n\t\ttype: {\r\n\t\t\tset: function( elem, value ) {\r\n\t\t\t\t// We can't allow the type property to be changed (since it causes problems in IE)\r\n\t\t\t\tif ( rtype.test( elem.nodeName ) && elem.parentNode ) {\r\n\t\t\t\t\tjQuery.error( \"type property can't be changed\" );\r\n\t\t\t\t} else if ( !jQuery.support.radioValue && value === \"radio\" && jQuery.nodeName(elem, \"input\") ) {\r\n\t\t\t\t\t// Setting the type on a radio button after the value resets the value in IE6-9\r\n\t\t\t\t\t// Reset value to it's default in case type is set after value\r\n\t\t\t\t\t// This is for element creation\r\n\t\t\t\t\tvar val = elem.value;\r\n\t\t\t\t\telem.setAttribute( \"type\", value );\r\n\t\t\t\t\tif ( val ) {\r\n\t\t\t\t\t\telem.value = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// Use the value property for back compat\r\n\t\t// Use the nodeHook for button elements in IE6/7 (#1954)\r\n\t\tvalue: {\r\n\t\t\tget: function( elem, name ) {\r\n\t\t\t\tif ( nodeHook && jQuery.nodeName( elem, \"button\" ) ) {\r\n\t\t\t\t\treturn nodeHook.get( elem, name );\r\n\t\t\t\t}\r\n\t\t\t\treturn name in elem ?\r\n\t\t\t\t\telem.value :\r\n\t\t\t\t\tnull;\r\n\t\t\t},\r\n\t\t\tset: function( elem, value, name ) {\r\n\t\t\t\tif ( nodeHook && jQuery.nodeName( elem, \"button\" ) ) {\r\n\t\t\t\t\treturn nodeHook.set( elem, value, name );\r\n\t\t\t\t}\r\n\t\t\t\t// Does not return so that setAttribute is also used\r\n\t\t\t\telem.value = value;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tpropFix: {\r\n\t\ttabindex: \"tabIndex\",\r\n\t\treadonly: \"readOnly\",\r\n\t\t\"for\": \"htmlFor\",\r\n\t\t\"class\": \"className\",\r\n\t\tmaxlength: \"maxLength\",\r\n\t\tcellspacing: \"cellSpacing\",\r\n\t\tcellpadding: \"cellPadding\",\r\n\t\trowspan: \"rowSpan\",\r\n\t\tcolspan: \"colSpan\",\r\n\t\tusemap: \"useMap\",\r\n\t\tframeborder: \"frameBorder\",\r\n\t\tcontenteditable: \"contentEditable\"\r\n\t},\r\n\r\n\tprop: function( elem, name, value ) {\r\n\t\tvar ret, hooks, notxml,\r\n\t\t\tnType = elem.nodeType;\r\n\r\n\t\t// don't get/set properties on text, comment and attribute nodes\r\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\r\n\r\n\t\tif ( notxml ) {\r\n\t\t\t// Fix name and attach hooks\r\n\t\t\tname = jQuery.propFix[ name ] || name;\r\n\t\t\thooks = jQuery.propHooks[ name ];\r\n\t\t}\r\n\r\n\t\tif ( value !== undefined ) {\r\n\t\t\tif ( hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\r\n\t\t\t\treturn ret;\r\n\r\n\t\t\t} else {\r\n\t\t\t\treturn ( elem[ name ] = value );\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\r\n\t\t\t\treturn ret;\r\n\r\n\t\t\t} else {\r\n\t\t\t\treturn elem[ name ];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tpropHooks: {\r\n\t\ttabIndex: {\r\n\t\t\tget: function( elem ) {\r\n\t\t\t\t// elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set\r\n\t\t\t\t// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\r\n\t\t\t\tvar attributeNode = elem.getAttributeNode(\"tabindex\");\r\n\r\n\t\t\t\treturn attributeNode && attributeNode.specified ?\r\n\t\t\t\t\tparseInt( attributeNode.value, 10 ) :\r\n\t\t\t\t\trfocusable.test( elem.nodeName ) || rclickable.test( elem.nodeName ) && elem.href ?\r\n\t\t\t\t\t\t0 :\r\n\t\t\t\t\t\tundefined;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Hook for boolean attributes\r\nboolHook = {\r\n\tget: function( elem, name ) {\r\n\t\t// Align boolean attributes with corresponding properties\r\n\t\t// Fall back to attribute presence where some booleans are not supported\r\n\t\tvar attrNode,\r\n\t\t\tproperty = jQuery.prop( elem, name );\r\n\t\treturn property === true || typeof property !== \"boolean\" && ( attrNode = elem.getAttributeNode(name) ) && attrNode.nodeValue !== false ?\r\n\t\t\tname.toLowerCase() :\r\n\t\t\tundefined;\r\n\t},\r\n\tset: function( elem, value, name ) {\r\n\t\tvar propName;\r\n\t\tif ( value === false ) {\r\n\t\t\t// Remove boolean attributes when set to false\r\n\t\t\tjQuery.removeAttr( elem, name );\r\n\t\t} else {\r\n\t\t\t// value is true since we know at this point it's type boolean and not false\r\n\t\t\t// Set boolean attributes to the same name and set the DOM property\r\n\t\t\tpropName = jQuery.propFix[ name ] || name;\r\n\t\t\tif ( propName in elem ) {\r\n\t\t\t\t// Only set the IDL specifically if it already exists on the element\r\n\t\t\t\telem[ propName ] = true;\r\n\t\t\t}\r\n\r\n\t\t\telem.setAttribute( name, name.toLowerCase() );\r\n\t\t}\r\n\t\treturn name;\r\n\t}\r\n};\r\n\r\n// IE6/7 do not support getting/setting some attributes with get/setAttribute\r\nif ( !getSetAttribute ) {\r\n\r\n\tfixSpecified = {\r\n\t\tname: true,\r\n\t\tid: true,\r\n\t\tcoords: true\r\n\t};\r\n\r\n\t// Use this for any attribute in IE6/7\r\n\t// This fixes almost every IE6/7 issue\r\n\tnodeHook = jQuery.valHooks.button = {\r\n\t\tget: function( elem, name ) {\r\n\t\t\tvar ret;\r\n\t\t\tret = elem.getAttributeNode( name );\r\n\t\t\treturn ret && ( fixSpecified[ name ] ? ret.value !== \"\" : ret.specified ) ?\r\n\t\t\t\tret.value :\r\n\t\t\t\tundefined;\r\n\t\t},\r\n\t\tset: function( elem, value, name ) {\r\n\t\t\t// Set the existing or create a new attribute node\r\n\t\t\tvar ret = elem.getAttributeNode( name );\r\n\t\t\tif ( !ret ) {\r\n\t\t\t\tret = document.createAttribute( name );\r\n\t\t\t\telem.setAttributeNode( ret );\r\n\t\t\t}\r\n\t\t\treturn ( ret.value = value + \"\" );\r\n\t\t}\r\n\t};\r\n\r\n\t// Set width and height to auto instead of 0 on empty string( Bug #8150 )\r\n\t// This is for removals\r\n\tjQuery.each([ \"width\", \"height\" ], function( i, name ) {\r\n\t\tjQuery.attrHooks[ name ] = jQuery.extend( jQuery.attrHooks[ name ], {\r\n\t\t\tset: function( elem, value ) {\r\n\t\t\t\tif ( value === \"\" ) {\r\n\t\t\t\t\telem.setAttribute( name, \"auto\" );\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t// Set contenteditable to false on removals(#10429)\r\n\t// Setting to empty string throws an error as an invalid value\r\n\tjQuery.attrHooks.contenteditable = {\r\n\t\tget: nodeHook.get,\r\n\t\tset: function( elem, value, name ) {\r\n\t\t\tif ( value === \"\" ) {\r\n\t\t\t\tvalue = \"false\";\r\n\t\t\t}\r\n\t\t\tnodeHook.set( elem, value, name );\r\n\t\t}\r\n\t};\r\n}\r\n\r\n\r\n// Some attributes require a special call on IE\r\nif ( !jQuery.support.hrefNormalized ) {\r\n\tjQuery.each([ \"href\", \"src\", \"width\", \"height\" ], function( i, name ) {\r\n\t\tjQuery.attrHooks[ name ] = jQuery.extend( jQuery.attrHooks[ name ], {\r\n\t\t\tget: function( elem ) {\r\n\t\t\t\tvar ret = elem.getAttribute( name, 2 );\r\n\t\t\t\treturn ret === null ? undefined : ret;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\nif ( !jQuery.support.style ) {\r\n\tjQuery.attrHooks.style = {\r\n\t\tget: function( elem ) {\r\n\t\t\t// Return undefined in the case of empty string\r\n\t\t\t// Normalize to lowercase since IE uppercases css property names\r\n\t\t\treturn elem.style.cssText.toLowerCase() || undefined;\r\n\t\t},\r\n\t\tset: function( elem, value ) {\r\n\t\t\treturn ( elem.style.cssText = value + \"\" );\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// Safari mis-reports the default selected property of an option\r\n// Accessing the parent's selectedIndex property fixes it\r\nif ( !jQuery.support.optSelected ) {\r\n\tjQuery.propHooks.selected = jQuery.extend( jQuery.propHooks.selected, {\r\n\t\tget: function( elem ) {\r\n\t\t\tvar parent = elem.parentNode;\r\n\r\n\t\t\tif ( parent ) {\r\n\t\t\t\tparent.selectedIndex;\r\n\r\n\t\t\t\t// Make sure that it also works with optgroups, see #5701\r\n\t\t\t\tif ( parent.parentNode ) {\r\n\t\t\t\t\tparent.parentNode.selectedIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// IE6/7 call enctype encoding\r\nif ( !jQuery.support.enctype ) {\r\n\tjQuery.propFix.enctype = \"encoding\";\r\n}\r\n\r\n// Radios and checkboxes getter/setter\r\nif ( !jQuery.support.checkOn ) {\r\n\tjQuery.each([ \"radio\", \"checkbox\" ], function() {\r\n\t\tjQuery.valHooks[ this ] = {\r\n\t\t\tget: function( elem ) {\r\n\t\t\t\t// Handle the case where in Webkit \"\" is returned instead of \"on\" if a value isn't specified\r\n\t\t\t\treturn elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n}\r\njQuery.each([ \"radio\", \"checkbox\" ], function() {\r\n\tjQuery.valHooks[ this ] = jQuery.extend( jQuery.valHooks[ this ], {\r\n\t\tset: function( elem, value ) {\r\n\t\t\tif ( jQuery.isArray( value ) ) {\r\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\nvar rformElems = /^(?:textarea|input|select)$/i,\r\n\trtypenamespace = /^([^\\.]*|)(?:\\.(.+)|)$/,\r\n\trhoverHack = /(?:^|\\s)hover(\\.\\S+|)\\b/,\r\n\trkeyEvent = /^key/,\r\n\trmouseEvent = /^(?:mouse|contextmenu)|click/,\r\n\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\r\n\thoverHack = function( events ) {\r\n\t\treturn jQuery.event.special.hover ? events : events.replace( rhoverHack, \"mouseenter$1 mouseleave$1\" );\r\n\t};\r\n\r\n/*\r\n * Helper functions for managing events -- not part of the public interface.\r\n * Props to Dean Edwards' addEvent library for many of the ideas.\r\n */\r\njQuery.event = {\r\n\r\n\tadd: function( elem, types, handler, data, selector ) {\r\n\r\n\t\tvar elemData, eventHandle, events,\r\n\t\t\tt, tns, type, namespaces, handleObj,\r\n\t\t\thandleObjIn, handlers, special;\r\n\r\n\t\t// Don't attach events to noData or text/comment nodes (allow plain objects tho)\r\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 || !types || !handler || !(elemData = jQuery._data( elem )) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Caller can pass in an object of custom data in lieu of the handler\r\n\t\tif ( handler.handler ) {\r\n\t\t\thandleObjIn = handler;\r\n\t\t\thandler = handleObjIn.handler;\r\n\t\t\tselector = handleObjIn.selector;\r\n\t\t}\r\n\r\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\r\n\t\tif ( !handler.guid ) {\r\n\t\t\thandler.guid = jQuery.guid++;\r\n\t\t}\r\n\r\n\t\t// Init the element's event structure and main handler, if this is the first\r\n\t\tevents = elemData.events;\r\n\t\tif ( !events ) {\r\n\t\t\telemData.events = events = {};\r\n\t\t}\r\n\t\teventHandle = elemData.handle;\r\n\t\tif ( !eventHandle ) {\r\n\t\t\telemData.handle = eventHandle = function( e ) {\r\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\r\n\t\t\t\t// when an event is called after a page has unloaded\r\n\t\t\t\treturn typeof jQuery !== \"undefined\" && (!e || jQuery.event.triggered !== e.type) ?\r\n\t\t\t\t\tjQuery.event.dispatch.apply( eventHandle.elem, arguments ) :\r\n\t\t\t\t\tundefined;\r\n\t\t\t};\r\n\t\t\t// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events\r\n\t\t\teventHandle.elem = elem;\r\n\t\t}\r\n\r\n\t\t// Handle multiple events separated by a space\r\n\t\t// jQuery(...).bind(\"mouseover mouseout\", fn);\r\n\t\ttypes = jQuery.trim( hoverHack(types) ).split( \" \" );\r\n\t\tfor ( t = 0; t < types.length; t++ ) {\r\n\r\n\t\t\ttns = rtypenamespace.exec( types[t] ) || [];\r\n\t\t\ttype = tns[1];\r\n\t\t\tnamespaces = ( tns[2] || \"\" ).split( \".\" ).sort();\r\n\r\n\t\t\t// If event changes its type, use the special event handlers for the changed type\r\n\t\t\tspecial = jQuery.event.special[ type ] || {};\r\n\r\n\t\t\t// If selector defined, determine special event api type, otherwise given type\r\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\r\n\r\n\t\t\t// Update special based on newly reset type\r\n\t\t\tspecial = jQuery.event.special[ type ] || {};\r\n\r\n\t\t\t// handleObj is passed to all event handlers\r\n\t\t\thandleObj = jQuery.extend({\r\n\t\t\t\ttype: type,\r\n\t\t\t\torigType: tns[1],\r\n\t\t\t\tdata: data,\r\n\t\t\t\thandler: handler,\r\n\t\t\t\tguid: handler.guid,\r\n\t\t\t\tselector: selector,\r\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\r\n\t\t\t\tnamespace: namespaces.join(\".\")\r\n\t\t\t}, handleObjIn );\r\n\r\n\t\t\t// Init the event handler queue if we're the first\r\n\t\t\thandlers = events[ type ];\r\n\t\t\tif ( !handlers ) {\r\n\t\t\t\thandlers = events[ type ] = [];\r\n\t\t\t\thandlers.delegateCount = 0;\r\n\r\n\t\t\t\t// Only use addEventListener/attachEvent if the special events handler returns false\r\n\t\t\t\tif ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {\r\n\t\t\t\t\t// Bind the global event handler to the element\r\n\t\t\t\t\tif ( elem.addEventListener ) {\r\n\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\r\n\r\n\t\t\t\t\t} else if ( elem.attachEvent ) {\r\n\t\t\t\t\t\telem.attachEvent( \"on\" + type, eventHandle );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( special.add ) {\r\n\t\t\t\tspecial.add.call( elem, handleObj );\r\n\r\n\t\t\t\tif ( !handleObj.handler.guid ) {\r\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Add to the element's handler list, delegates in front\r\n\t\t\tif ( selector ) {\r\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\r\n\t\t\t} else {\r\n\t\t\t\thandlers.push( handleObj );\r\n\t\t\t}\r\n\r\n\t\t\t// Keep track of which events have ever been used, for event optimization\r\n\t\t\tjQuery.event.global[ type ] = true;\r\n\t\t}\r\n\r\n\t\t// Nullify elem to prevent memory leaks in IE\r\n\t\telem = null;\r\n\t},\r\n\r\n\tglobal: {},\r\n\r\n\t// Detach an event or set of events from an element\r\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\r\n\r\n\t\tvar t, tns, type, origType, namespaces, origCount,\r\n\t\t\tj, events, special, eventType, handleObj,\r\n\t\t\telemData = jQuery.hasData( elem ) && jQuery._data( elem );\r\n\r\n\t\tif ( !elemData || !(events = elemData.events) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Once for each type.namespace in types; type may be omitted\r\n\t\ttypes = jQuery.trim( hoverHack( types || \"\" ) ).split(\" \");\r\n\t\tfor ( t = 0; t < types.length; t++ ) {\r\n\t\t\ttns = rtypenamespace.exec( types[t] ) || [];\r\n\t\t\ttype = origType = tns[1];\r\n\t\t\tnamespaces = tns[2];\r\n\r\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\r\n\t\t\tif ( !type ) {\r\n\t\t\t\tfor ( type in events ) {\r\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\r\n\t\t\t\t}\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tspecial = jQuery.event.special[ type ] || {};\r\n\t\t\ttype = ( selector? special.delegateType : special.bindType ) || type;\r\n\t\t\teventType = events[ type ] || [];\r\n\t\t\torigCount = eventType.length;\r\n\t\t\tnamespaces = namespaces ? new RegExp(\"(^|\\\\.)\" + namespaces.split(\".\").sort().join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\") : null;\r\n\r\n\t\t\t// Remove matching events\r\n\t\t\tfor ( j = 0; j < eventType.length; j++ ) {\r\n\t\t\t\thandleObj = eventType[ j ];\r\n\r\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\r\n\t\t\t\t\t ( !handler || handler.guid === handleObj.guid ) &&\r\n\t\t\t\t\t ( !namespaces || namespaces.test( handleObj.namespace ) ) &&\r\n\t\t\t\t\t ( !selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector ) ) {\r\n\t\t\t\t\teventType.splice( j--, 1 );\r\n\r\n\t\t\t\t\tif ( handleObj.selector ) {\r\n\t\t\t\t\t\teventType.delegateCount--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( special.remove ) {\r\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\r\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\r\n\t\t\tif ( eventType.length === 0 && origCount !== eventType.length ) {\r\n\t\t\t\tif ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {\r\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete events[ type ];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remove the expando if it's no longer used\r\n\t\tif ( jQuery.isEmptyObject( events ) ) {\r\n\t\t\tdelete elemData.handle;\r\n\r\n\t\t\t// removeData also checks for emptiness and clears the expando if empty\r\n\t\t\t// so use it instead of delete\r\n\t\t\tjQuery.removeData( elem, \"events\", true );\r\n\t\t}\r\n\t},\r\n\r\n\t// Events that are safe to short-circuit if no handlers are attached.\r\n\t// Native DOM events should not be added, they may have inline handlers.\r\n\tcustomEvent: {\r\n\t\t\"getData\": true,\r\n\t\t\"setData\": true,\r\n\t\t\"changeData\": true\r\n\t},\r\n\r\n\ttrigger: function( event, data, elem, onlyHandlers ) {\r\n\t\t// Don't do events on text and comment nodes\r\n\t\tif ( elem && (elem.nodeType === 3 || elem.nodeType === 8) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Event object or event type\r\n\t\tvar cache, exclusive, i, cur, old, ontype, special, handle, eventPath, bubbleType,\r\n\t\t\ttype = event.type || event,\r\n\t\t\tnamespaces = [];\r\n\r\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\r\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( type.indexOf( \"!\" ) >= 0 ) {\r\n\t\t\t// Exclusive events trigger only for the exact event (no namespaces)\r\n\t\t\ttype = type.slice(0, -1);\r\n\t\t\texclusive = true;\r\n\t\t}\r\n\r\n\t\tif ( type.indexOf( \".\" ) >= 0 ) {\r\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\r\n\t\t\tnamespaces = type.split(\".\");\r\n\t\t\ttype = namespaces.shift();\r\n\t\t\tnamespaces.sort();\r\n\t\t}\r\n\r\n\t\tif ( (!elem || jQuery.event.customEvent[ type ]) && !jQuery.event.global[ type ] ) {\r\n\t\t\t// No jQuery handlers for this event type, and it can't have inline handlers\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Caller can pass in an Event, Object, or just an event type string\r\n\t\tevent = typeof event === \"object\" ?\r\n\t\t\t// jQuery.Event object\r\n\t\t\tevent[ jQuery.expando ] ? event :\r\n\t\t\t// Object literal\r\n\t\t\tnew jQuery.Event( type, event ) :\r\n\t\t\t// Just the event type (string)\r\n\t\t\tnew jQuery.Event( type );\r\n\r\n\t\tevent.type = type;\r\n\t\tevent.isTrigger = true;\r\n\t\tevent.exclusive = exclusive;\r\n\t\tevent.namespace = namespaces.join( \".\" );\r\n\t\tevent.namespace_re = event.namespace? new RegExp(\"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\") : null;\r\n\t\tontype = type.indexOf( \":\" ) < 0 ? \"on\" + type : \"\";\r\n\r\n\t\t// Handle a global trigger\r\n\t\tif ( !elem ) {\r\n\r\n\t\t\t// TODO: Stop taunting the data cache; remove global events and always attach to document\r\n\t\t\tcache = jQuery.cache;\r\n\t\t\tfor ( i in cache ) {\r\n\t\t\t\tif ( cache[ i ].events && cache[ i ].events[ type ] ) {\r\n\t\t\t\t\tjQuery.event.trigger( event, data, cache[ i ].handle.elem, true );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Clean up the event in case it is being reused\r\n\t\tevent.result = undefined;\r\n\t\tif ( !event.target ) {\r\n\t\t\tevent.target = elem;\r\n\t\t}\r\n\r\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\r\n\t\tdata = data != null ? jQuery.makeArray( data ) : [];\r\n\t\tdata.unshift( event );\r\n\r\n\t\t// Allow special events to draw outside the lines\r\n\t\tspecial = jQuery.event.special[ type ] || {};\r\n\t\tif ( special.trigger && special.trigger.apply( elem, data ) === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\r\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\r\n\t\teventPath = [[ elem, special.bindType || type ]];\r\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\r\n\r\n\t\t\tbubbleType = special.delegateType || type;\r\n\t\t\tcur = rfocusMorph.test( bubbleType + type ) ? elem : elem.parentNode;\r\n\t\t\tfor ( old = elem; cur; cur = cur.parentNode ) {\r\n\t\t\t\teventPath.push([ cur, bubbleType ]);\r\n\t\t\t\told = cur;\r\n\t\t\t}\r\n\r\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\r\n\t\t\tif ( old === (elem.ownerDocument || document) ) {\r\n\t\t\t\teventPath.push([ old.defaultView || old.parentWindow || window, bubbleType ]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Fire handlers on the event path\r\n\t\tfor ( i = 0; i < eventPath.length && !event.isPropagationStopped(); i++ ) {\r\n\r\n\t\t\tcur = eventPath[i][0];\r\n\t\t\tevent.type = eventPath[i][1];\r\n\r\n\t\t\thandle = ( jQuery._data( cur, \"events\" ) || {} )[ event.type ] && jQuery._data( cur, \"handle\" );\r\n\t\t\tif ( handle ) {\r\n\t\t\t\thandle.apply( cur, data );\r\n\t\t\t}\r\n\t\t\t// Note that this is a bare JS function and not a jQuery handler\r\n\t\t\thandle = ontype && cur[ ontype ];\r\n\t\t\tif ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\t\tevent.type = type;\r\n\r\n\t\t// If nobody prevented the default action, do it now\r\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\r\n\r\n\t\t\tif ( (!special._default || special._default.apply( elem.ownerDocument, data ) === false) &&\r\n\t\t\t\t!(type === \"click\" && jQuery.nodeName( elem, \"a\" )) && jQuery.acceptData( elem ) ) {\r\n\r\n\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\r\n\t\t\t\t// Can't use an .isFunction() check here because IE6/7 fails that test.\r\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\r\n\t\t\t\t// IE<9 dies on focus/blur to hidden element (#1486)\r\n\t\t\t\tif ( ontype && elem[ type ] && ((type !== \"focus\" && type !== \"blur\") || event.target.offsetWidth !== 0) && !jQuery.isWindow( elem ) ) {\r\n\r\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\r\n\t\t\t\t\told = elem[ ontype ];\r\n\r\n\t\t\t\t\tif ( old ) {\r\n\t\t\t\t\t\telem[ ontype ] = null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\r\n\t\t\t\t\tjQuery.event.triggered = type;\r\n\t\t\t\t\telem[ type ]();\r\n\t\t\t\t\tjQuery.event.triggered = undefined;\r\n\r\n\t\t\t\t\tif ( old ) {\r\n\t\t\t\t\t\telem[ ontype ] = old;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn event.result;\r\n\t},\r\n\r\n\tdispatch: function( event ) {\r\n\r\n\t\t// Make a writable jQuery.Event from the native event object\r\n\t\tevent = jQuery.event.fix( event || window.event );\r\n\r\n\t\tvar i, j, cur, ret, selMatch, matched, matches, handleObj, sel, related,\r\n\t\t\thandlers = ( (jQuery._data( this, \"events\" ) || {} )[ event.type ] || []),\r\n\t\t\tdelegateCount = handlers.delegateCount,\r\n\t\t\targs = core_slice.call( arguments ),\r\n\t\t\trun_all = !event.exclusive && !event.namespace,\r\n\t\t\tspecial = jQuery.event.special[ event.type ] || {},\r\n\t\t\thandlerQueue = [];\r\n\r\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\r\n\t\targs[0] = event;\r\n\t\tevent.delegateTarget = this;\r\n\r\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\r\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Determine handlers that should run if there are delegated events\r\n\t\t// Avoid non-left-click bubbling in Firefox (#3861)\r\n\t\tif ( delegateCount && !(event.button && event.type === \"click\") ) {\r\n\r\n\t\t\tfor ( cur = event.target; cur != this; cur = cur.parentNode || this ) {\r\n\r\n\t\t\t\t// Don't process clicks (ONLY) on disabled elements (#6911, #8165, #11382, #11764)\r\n\t\t\t\tif ( cur.disabled !== true || event.type !== \"click\" ) {\r\n\t\t\t\t\tselMatch = {};\r\n\t\t\t\t\tmatches = [];\r\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\r\n\t\t\t\t\t\thandleObj = handlers[ i ];\r\n\t\t\t\t\t\tsel = handleObj.selector;\r\n\r\n\t\t\t\t\t\tif ( selMatch[ sel ] === undefined ) {\r\n\t\t\t\t\t\t\tselMatch[ sel ] = handleObj.needsContext ?\r\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) >= 0 :\r\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( selMatch[ sel ] ) {\r\n\t\t\t\t\t\t\tmatches.push( handleObj );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( matches.length ) {\r\n\t\t\t\t\t\thandlerQueue.push({ elem: cur, matches: matches });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Add the remaining (directly-bound) handlers\r\n\t\tif ( handlers.length > delegateCount ) {\r\n\t\t\thandlerQueue.push({ elem: this, matches: handlers.slice( delegateCount ) });\r\n\t\t}\r\n\r\n\t\t// Run delegates first; they may want to stop propagation beneath us\r\n\t\tfor ( i = 0; i < handlerQueue.length && !event.isPropagationStopped(); i++ ) {\r\n\t\t\tmatched = handlerQueue[ i ];\r\n\t\t\tevent.currentTarget = matched.elem;\r\n\r\n\t\t\tfor ( j = 0; j < matched.matches.length && !event.isImmediatePropagationStopped(); j++ ) {\r\n\t\t\t\thandleObj = matched.matches[ j ];\r\n\r\n\t\t\t\t// Triggered event must either 1) be non-exclusive and have no namespace, or\r\n\t\t\t\t// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).\r\n\t\t\t\tif ( run_all || (!event.namespace && !handleObj.namespace) || event.namespace_re && event.namespace_re.test( handleObj.namespace ) ) {\r\n\r\n\t\t\t\t\tevent.data = handleObj.data;\r\n\t\t\t\t\tevent.handleObj = handleObj;\r\n\r\n\t\t\t\t\tret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )\r\n\t\t\t\t\t\t\t.apply( matched.elem, args );\r\n\r\n\t\t\t\t\tif ( ret !== undefined ) {\r\n\t\t\t\t\t\tevent.result = ret;\r\n\t\t\t\t\t\tif ( ret === false ) {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Call the postDispatch hook for the mapped type\r\n\t\tif ( special.postDispatch ) {\r\n\t\t\tspecial.postDispatch.call( this, event );\r\n\t\t}\r\n\r\n\t\treturn event.result;\r\n\t},\r\n\r\n\t// Includes some event props shared by KeyEvent and MouseEvent\r\n\t// *** attrChange attrName relatedNode srcElement  are not normalized, non-W3C, deprecated, will be removed in 1.8 ***\r\n\tprops: \"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\r\n\r\n\tfixHooks: {},\r\n\r\n\tkeyHooks: {\r\n\t\tprops: \"char charCode key keyCode\".split(\" \"),\r\n\t\tfilter: function( event, original ) {\r\n\r\n\t\t\t// Add which for key events\r\n\t\t\tif ( event.which == null ) {\r\n\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\r\n\t\t\t}\r\n\r\n\t\t\treturn event;\r\n\t\t}\r\n\t},\r\n\r\n\tmouseHooks: {\r\n\t\tprops: \"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\r\n\t\tfilter: function( event, original ) {\r\n\t\t\tvar eventDoc, doc, body,\r\n\t\t\t\tbutton = original.button,\r\n\t\t\t\tfromElement = original.fromElement;\r\n\r\n\t\t\t// Calculate pageX/Y if missing and clientX/Y available\r\n\t\t\tif ( event.pageX == null && original.clientX != null ) {\r\n\t\t\t\teventDoc = event.target.ownerDocument || document;\r\n\t\t\t\tdoc = eventDoc.documentElement;\r\n\t\t\t\tbody = eventDoc.body;\r\n\r\n\t\t\t\tevent.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\r\n\t\t\t\tevent.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\r\n\t\t\t}\r\n\r\n\t\t\t// Add relatedTarget, if necessary\r\n\t\t\tif ( !event.relatedTarget && fromElement ) {\r\n\t\t\t\tevent.relatedTarget = fromElement === event.target ? original.toElement : fromElement;\r\n\t\t\t}\r\n\r\n\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\r\n\t\t\t// Note: button is not normalized, so don't use it\r\n\t\t\tif ( !event.which && button !== undefined ) {\r\n\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\r\n\t\t\t}\r\n\r\n\t\t\treturn event;\r\n\t\t}\r\n\t},\r\n\r\n\tfix: function( event ) {\r\n\t\tif ( event[ jQuery.expando ] ) {\r\n\t\t\treturn event;\r\n\t\t}\r\n\r\n\t\t// Create a writable copy of the event object and normalize some properties\r\n\t\tvar i, prop,\r\n\t\t\toriginalEvent = event,\r\n\t\t\tfixHook = jQuery.event.fixHooks[ event.type ] || {},\r\n\t\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\r\n\r\n\t\tevent = jQuery.Event( originalEvent );\r\n\r\n\t\tfor ( i = copy.length; i; ) {\r\n\t\t\tprop = copy[ --i ];\r\n\t\t\tevent[ prop ] = originalEvent[ prop ];\r\n\t\t}\r\n\r\n\t\t// Fix target property, if necessary (#1925, IE 6/7/8 & Safari2)\r\n\t\tif ( !event.target ) {\r\n\t\t\tevent.target = originalEvent.srcElement || document;\r\n\t\t}\r\n\r\n\t\t// Target should not be a text node (#504, Safari)\r\n\t\tif ( event.target.nodeType === 3 ) {\r\n\t\t\tevent.target = event.target.parentNode;\r\n\t\t}\r\n\r\n\t\t// For mouse/key events, metaKey==false if it's undefined (#3368, #11328; IE6/7/8)\r\n\t\tevent.metaKey = !!event.metaKey;\r\n\r\n\t\treturn fixHook.filter? fixHook.filter( event, originalEvent ) : event;\r\n\t},\r\n\r\n\tspecial: {\r\n\t\tload: {\r\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\r\n\t\t\tnoBubble: true\r\n\t\t},\r\n\r\n\t\tfocus: {\r\n\t\t\tdelegateType: \"focusin\"\r\n\t\t},\r\n\t\tblur: {\r\n\t\t\tdelegateType: \"focusout\"\r\n\t\t},\r\n\r\n\t\tbeforeunload: {\r\n\t\t\tsetup: function( data, namespaces, eventHandle ) {\r\n\t\t\t\t// We only want to do this special case on windows\r\n\t\t\t\tif ( jQuery.isWindow( this ) ) {\r\n\t\t\t\t\tthis.onbeforeunload = eventHandle;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tteardown: function( namespaces, eventHandle ) {\r\n\t\t\t\tif ( this.onbeforeunload === eventHandle ) {\r\n\t\t\t\t\tthis.onbeforeunload = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsimulate: function( type, elem, event, bubble ) {\r\n\t\t// Piggyback on a donor event to simulate a different one.\r\n\t\t// Fake originalEvent to avoid donor's stopPropagation, but if the\r\n\t\t// simulated event prevents default then we do the same on the donor.\r\n\t\tvar e = jQuery.extend(\r\n\t\t\tnew jQuery.Event(),\r\n\t\t\tevent,\r\n\t\t\t{ type: type,\r\n\t\t\t\tisSimulated: true,\r\n\t\t\t\toriginalEvent: {}\r\n\t\t\t}\r\n\t\t);\r\n\t\tif ( bubble ) {\r\n\t\t\tjQuery.event.trigger( e, null, elem );\r\n\t\t} else {\r\n\t\t\tjQuery.event.dispatch.call( elem, e );\r\n\t\t}\r\n\t\tif ( e.isDefaultPrevented() ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Some plugins are using, but it's undocumented/deprecated and will be removed.\r\n// The 1.7 special event interface should provide all the hooks needed now.\r\njQuery.event.handle = jQuery.event.dispatch;\r\n\r\njQuery.removeEvent = document.removeEventListener ?\r\n\tfunction( elem, type, handle ) {\r\n\t\tif ( elem.removeEventListener ) {\r\n\t\t\telem.removeEventListener( type, handle, false );\r\n\t\t}\r\n\t} :\r\n\tfunction( elem, type, handle ) {\r\n\t\tvar name = \"on\" + type;\r\n\r\n\t\tif ( elem.detachEvent ) {\r\n\r\n\t\t\t// #8545, #7054, preventing memory leaks for custom events in IE6-8\r\n\t\t\t// detachEvent needed property on element, by name of that event, to properly expose it to GC\r\n\t\t\tif ( typeof elem[ name ] === \"undefined\" ) {\r\n\t\t\t\telem[ name ] = null;\r\n\t\t\t}\r\n\r\n\t\t\telem.detachEvent( name, handle );\r\n\t\t}\r\n\t};\r\n\r\njQuery.Event = function( src, props ) {\r\n\t// Allow instantiation without the 'new' keyword\r\n\tif ( !(this instanceof jQuery.Event) ) {\r\n\t\treturn new jQuery.Event( src, props );\r\n\t}\r\n\r\n\t// Event object\r\n\tif ( src && src.type ) {\r\n\t\tthis.originalEvent = src;\r\n\t\tthis.type = src.type;\r\n\r\n\t\t// Events bubbling up the document may have been marked as prevented\r\n\t\t// by a handler lower down the tree; reflect the correct value.\r\n\t\tthis.isDefaultPrevented = ( src.defaultPrevented || src.returnValue === false ||\r\n\t\t\tsrc.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;\r\n\r\n\t// Event type\r\n\t} else {\r\n\t\tthis.type = src;\r\n\t}\r\n\r\n\t// Put explicitly provided properties onto the event object\r\n\tif ( props ) {\r\n\t\tjQuery.extend( this, props );\r\n\t}\r\n\r\n\t// Create a timestamp if incoming event doesn't have one\r\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\r\n\r\n\t// Mark it as fixed\r\n\tthis[ jQuery.expando ] = true;\r\n};\r\n\r\nfunction returnFalse() {\r\n\treturn false;\r\n}\r\nfunction returnTrue() {\r\n\treturn true;\r\n}\r\n\r\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\r\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\r\njQuery.Event.prototype = {\r\n\tpreventDefault: function() {\r\n\t\tthis.isDefaultPrevented = returnTrue;\r\n\r\n\t\tvar e = this.originalEvent;\r\n\t\tif ( !e ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// if preventDefault exists run it on the original event\r\n\t\tif ( e.preventDefault ) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t// otherwise set the returnValue property of the original event to false (IE)\r\n\t\t} else {\r\n\t\t\te.returnValue = false;\r\n\t\t}\r\n\t},\r\n\tstopPropagation: function() {\r\n\t\tthis.isPropagationStopped = returnTrue;\r\n\r\n\t\tvar e = this.originalEvent;\r\n\t\tif ( !e ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// if stopPropagation exists run it on the original event\r\n\t\tif ( e.stopPropagation ) {\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t\t// otherwise set the cancelBubble property of the original event to true (IE)\r\n\t\te.cancelBubble = true;\r\n\t},\r\n\tstopImmediatePropagation: function() {\r\n\t\tthis.isImmediatePropagationStopped = returnTrue;\r\n\t\tthis.stopPropagation();\r\n\t},\r\n\tisDefaultPrevented: returnFalse,\r\n\tisPropagationStopped: returnFalse,\r\n\tisImmediatePropagationStopped: returnFalse\r\n};\r\n\r\n// Create mouseenter/leave events using mouseover/out and event-time checks\r\njQuery.each({\r\n\tmouseenter: \"mouseover\",\r\n\tmouseleave: \"mouseout\"\r\n}, function( orig, fix ) {\r\n\tjQuery.event.special[ orig ] = {\r\n\t\tdelegateType: fix,\r\n\t\tbindType: fix,\r\n\r\n\t\thandle: function( event ) {\r\n\t\t\tvar ret,\r\n\t\t\t\ttarget = this,\r\n\t\t\t\trelated = event.relatedTarget,\r\n\t\t\t\thandleObj = event.handleObj,\r\n\t\t\t\tselector = handleObj.selector;\r\n\r\n\t\t\t// For mousenter/leave call the handler if related is outside the target.\r\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\r\n\t\t\tif ( !related || (related !== target && !jQuery.contains( target, related )) ) {\r\n\t\t\t\tevent.type = handleObj.origType;\r\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\r\n\t\t\t\tevent.type = fix;\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t}\r\n\t};\r\n});\r\n\r\n// IE submit delegation\r\nif ( !jQuery.support.submitBubbles ) {\r\n\r\n\tjQuery.event.special.submit = {\r\n\t\tsetup: function() {\r\n\t\t\t// Only need this for delegated form submit events\r\n\t\t\tif ( jQuery.nodeName( this, \"form\" ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Lazy-add a submit handler when a descendant form may potentially be submitted\r\n\t\t\tjQuery.event.add( this, \"click._submit keypress._submit\", function( e ) {\r\n\t\t\t\t// Node name check avoids a VML-related crash in IE (#9807)\r\n\t\t\t\tvar elem = e.target,\r\n\t\t\t\t\tform = jQuery.nodeName( elem, \"input\" ) || jQuery.nodeName( elem, \"button\" ) ? elem.form : undefined;\r\n\t\t\t\tif ( form && !jQuery._data( form, \"_submit_attached\" ) ) {\r\n\t\t\t\t\tjQuery.event.add( form, \"submit._submit\", function( event ) {\r\n\t\t\t\t\t\tevent._submit_bubble = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjQuery._data( form, \"_submit_attached\", true );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// return undefined since we don't need an event listener\r\n\t\t},\r\n\r\n\t\tpostDispatch: function( event ) {\r\n\t\t\t// If form was submitted by the user, bubble the event up the tree\r\n\t\t\tif ( event._submit_bubble ) {\r\n\t\t\t\tdelete event._submit_bubble;\r\n\t\t\t\tif ( this.parentNode && !event.isTrigger ) {\r\n\t\t\t\t\tjQuery.event.simulate( \"submit\", this.parentNode, event, true );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tteardown: function() {\r\n\t\t\t// Only need this for delegated form submit events\r\n\t\t\tif ( jQuery.nodeName( this, \"form\" ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Remove delegated handlers; cleanData eventually reaps submit handlers attached above\r\n\t\t\tjQuery.event.remove( this, \"._submit\" );\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// IE change delegation and checkbox/radio fix\r\nif ( !jQuery.support.changeBubbles ) {\r\n\r\n\tjQuery.event.special.change = {\r\n\r\n\t\tsetup: function() {\r\n\r\n\t\t\tif ( rformElems.test( this.nodeName ) ) {\r\n\t\t\t\t// IE doesn't fire change on a check/radio until blur; trigger it on click\r\n\t\t\t\t// after a propertychange. Eat the blur-change in special.change.handle.\r\n\t\t\t\t// This still fires onchange a second time for check/radio after blur.\r\n\t\t\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\r\n\t\t\t\t\tjQuery.event.add( this, \"propertychange._change\", function( event ) {\r\n\t\t\t\t\t\tif ( event.originalEvent.propertyName === \"checked\" ) {\r\n\t\t\t\t\t\t\tthis._just_changed = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjQuery.event.add( this, \"click._change\", function( event ) {\r\n\t\t\t\t\t\tif ( this._just_changed && !event.isTrigger ) {\r\n\t\t\t\t\t\t\tthis._just_changed = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Allow triggered, simulated change events (#11500)\r\n\t\t\t\t\t\tjQuery.event.simulate( \"change\", this, event, true );\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// Delegated event; lazy-add a change handler on descendant inputs\r\n\t\t\tjQuery.event.add( this, \"beforeactivate._change\", function( e ) {\r\n\t\t\t\tvar elem = e.target;\r\n\r\n\t\t\t\tif ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, \"_change_attached\" ) ) {\r\n\t\t\t\t\tjQuery.event.add( elem, \"change._change\", function( event ) {\r\n\t\t\t\t\t\tif ( this.parentNode && !event.isSimulated && !event.isTrigger ) {\r\n\t\t\t\t\t\t\tjQuery.event.simulate( \"change\", this.parentNode, event, true );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjQuery._data( elem, \"_change_attached\", true );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\thandle: function( event ) {\r\n\t\t\tvar elem = event.target;\r\n\r\n\t\t\t// Swallow native change events from checkbox/radio, we already triggered them above\r\n\t\t\tif ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== \"radio\" && elem.type !== \"checkbox\") ) {\r\n\t\t\t\treturn event.handleObj.handler.apply( this, arguments );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tteardown: function() {\r\n\t\t\tjQuery.event.remove( this, \"._change\" );\r\n\r\n\t\t\treturn !rformElems.test( this.nodeName );\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// Create \"bubbling\" focus and blur events\r\nif ( !jQuery.support.focusinBubbles ) {\r\n\tjQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\r\n\r\n\t\t// Attach a single capturing handler while someone wants focusin/focusout\r\n\t\tvar attaches = 0,\r\n\t\t\thandler = function( event ) {\r\n\t\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );\r\n\t\t\t};\r\n\r\n\t\tjQuery.event.special[ fix ] = {\r\n\t\t\tsetup: function() {\r\n\t\t\t\tif ( attaches++ === 0 ) {\r\n\t\t\t\t\tdocument.addEventListener( orig, handler, true );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tteardown: function() {\r\n\t\t\t\tif ( --attaches === 0 ) {\r\n\t\t\t\t\tdocument.removeEventListener( orig, handler, true );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n}\r\n\r\njQuery.fn.extend({\r\n\r\n\ton: function( types, selector, data, fn, /*INTERNAL*/ one ) {\r\n\t\tvar origFn, type;\r\n\r\n\t\t// Types can be a map of types/handlers\r\n\t\tif ( typeof types === \"object\" ) {\r\n\t\t\t// ( types-Object, selector, data )\r\n\t\t\tif ( typeof selector !== \"string\" ) { // && selector != null\r\n\t\t\t\t// ( types-Object, data )\r\n\t\t\t\tdata = data || selector;\r\n\t\t\t\tselector = undefined;\r\n\t\t\t}\r\n\t\t\tfor ( type in types ) {\r\n\t\t\t\tthis.on( type, selector, data, types[ type ], one );\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif ( data == null && fn == null ) {\r\n\t\t\t// ( types, fn )\r\n\t\t\tfn = selector;\r\n\t\t\tdata = selector = undefined;\r\n\t\t} else if ( fn == null ) {\r\n\t\t\tif ( typeof selector === \"string\" ) {\r\n\t\t\t\t// ( types, selector, fn )\r\n\t\t\t\tfn = data;\r\n\t\t\t\tdata = undefined;\r\n\t\t\t} else {\r\n\t\t\t\t// ( types, data, fn )\r\n\t\t\t\tfn = data;\r\n\t\t\t\tdata = selector;\r\n\t\t\t\tselector = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( fn === false ) {\r\n\t\t\tfn = returnFalse;\r\n\t\t} else if ( !fn ) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif ( one === 1 ) {\r\n\t\t\torigFn = fn;\r\n\t\t\tfn = function( event ) {\r\n\t\t\t\t// Can use an empty set, since event contains the info\r\n\t\t\t\tjQuery().off( event );\r\n\t\t\t\treturn origFn.apply( this, arguments );\r\n\t\t\t};\r\n\t\t\t// Use same guid so caller can remove using origFn\r\n\t\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\r\n\t\t}\r\n\t\treturn this.each( function() {\r\n\t\t\tjQuery.event.add( this, types, fn, data, selector );\r\n\t\t});\r\n\t},\r\n\tone: function( types, selector, data, fn ) {\r\n\t\treturn this.on( types, selector, data, fn, 1 );\r\n\t},\r\n\toff: function( types, selector, fn ) {\r\n\t\tvar handleObj, type;\r\n\t\tif ( types && types.preventDefault && types.handleObj ) {\r\n\t\t\t// ( event )  dispatched jQuery.Event\r\n\t\t\thandleObj = types.handleObj;\r\n\t\t\tjQuery( types.delegateTarget ).off(\r\n\t\t\t\thandleObj.namespace ? handleObj.origType + \".\" + handleObj.namespace : handleObj.origType,\r\n\t\t\t\thandleObj.selector,\r\n\t\t\t\thandleObj.handler\r\n\t\t\t);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif ( typeof types === \"object\" ) {\r\n\t\t\t// ( types-object [, selector] )\r\n\t\t\tfor ( type in types ) {\r\n\t\t\t\tthis.off( type, selector, types[ type ] );\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif ( selector === false || typeof selector === \"function\" ) {\r\n\t\t\t// ( types [, fn] )\r\n\t\t\tfn = selector;\r\n\t\t\tselector = undefined;\r\n\t\t}\r\n\t\tif ( fn === false ) {\r\n\t\t\tfn = returnFalse;\r\n\t\t}\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.event.remove( this, types, fn, selector );\r\n\t\t});\r\n\t},\r\n\r\n\tbind: function( types, data, fn ) {\r\n\t\treturn this.on( types, null, data, fn );\r\n\t},\r\n\tunbind: function( types, fn ) {\r\n\t\treturn this.off( types, null, fn );\r\n\t},\r\n\r\n\tlive: function( types, data, fn ) {\r\n\t\tjQuery( this.context ).on( types, this.selector, data, fn );\r\n\t\treturn this;\r\n\t},\r\n\tdie: function( types, fn ) {\r\n\t\tjQuery( this.context ).off( types, this.selector || \"**\", fn );\r\n\t\treturn this;\r\n\t},\r\n\r\n\tdelegate: function( selector, types, data, fn ) {\r\n\t\treturn this.on( types, selector, data, fn );\r\n\t},\r\n\tundelegate: function( selector, types, fn ) {\r\n\t\t// ( namespace ) or ( selector, types [, fn] )\r\n\t\treturn arguments.length === 1 ? this.off( selector, \"**\" ) : this.off( types, selector || \"**\", fn );\r\n\t},\r\n\r\n\ttrigger: function( type, data ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.event.trigger( type, data, this );\r\n\t\t});\r\n\t},\r\n\ttriggerHandler: function( type, data ) {\r\n\t\tif ( this[0] ) {\r\n\t\t\treturn jQuery.event.trigger( type, data, this[0], true );\r\n\t\t}\r\n\t},\r\n\r\n\ttoggle: function( fn ) {\r\n\t\t// Save reference to arguments for access in closure\r\n\t\tvar args = arguments,\r\n\t\t\tguid = fn.guid || jQuery.guid++,\r\n\t\t\ti = 0,\r\n\t\t\ttoggler = function( event ) {\r\n\t\t\t\t// Figure out which function to execute\r\n\t\t\t\tvar lastToggle = ( jQuery._data( this, \"lastToggle\" + fn.guid ) || 0 ) % i;\r\n\t\t\t\tjQuery._data( this, \"lastToggle\" + fn.guid, lastToggle + 1 );\r\n\r\n\t\t\t\t// Make sure that clicks stop\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t// and execute the function\r\n\t\t\t\treturn args[ lastToggle ].apply( this, arguments ) || false;\r\n\t\t\t};\r\n\r\n\t\t// link all the functions, so any of them can unbind this click handler\r\n\t\ttoggler.guid = guid;\r\n\t\twhile ( i < args.length ) {\r\n\t\t\targs[ i++ ].guid = guid;\r\n\t\t}\r\n\r\n\t\treturn this.click( toggler );\r\n\t},\r\n\r\n\thover: function( fnOver, fnOut ) {\r\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\r\n\t}\r\n});\r\n\r\njQuery.each( (\"blur focus focusin focusout load resize scroll unload click dblclick \" +\r\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\r\n\t\"change select submit keydown keypress keyup error contextmenu\").split(\" \"), function( i, name ) {\r\n\r\n\t// Handle event binding\r\n\tjQuery.fn[ name ] = function( data, fn ) {\r\n\t\tif ( fn == null ) {\r\n\t\t\tfn = data;\r\n\t\t\tdata = null;\r\n\t\t}\r\n\r\n\t\treturn arguments.length > 0 ?\r\n\t\t\tthis.on( name, null, data, fn ) :\r\n\t\t\tthis.trigger( name );\r\n\t};\r\n\r\n\tif ( rkeyEvent.test( name ) ) {\r\n\t\tjQuery.event.fixHooks[ name ] = jQuery.event.keyHooks;\r\n\t}\r\n\r\n\tif ( rmouseEvent.test( name ) ) {\r\n\t\tjQuery.event.fixHooks[ name ] = jQuery.event.mouseHooks;\r\n\t}\r\n});\r\n/*!\r\n * Sizzle CSS Selector Engine\r\n * Copyright 2012 jQuery Foundation and other contributors\r\n * Released under the MIT license\r\n * http://sizzlejs.com/\r\n */\r\n(function( window, undefined ) {\r\n\r\nvar cachedruns,\r\n\tassertGetIdNotName,\r\n\tExpr,\r\n\tgetText,\r\n\tisXML,\r\n\tcontains,\r\n\tcompile,\r\n\tsortOrder,\r\n\thasDuplicate,\r\n\toutermostContext,\r\n\r\n\tbaseHasDuplicate = true,\r\n\tstrundefined = \"undefined\",\r\n\r\n\texpando = ( \"sizcache\" + Math.random() ).replace( \".\", \"\" ),\r\n\r\n\tToken = String,\r\n\tdocument = window.document,\r\n\tdocElem = document.documentElement,\r\n\tdirruns = 0,\r\n\tdone = 0,\r\n\tpop = [].pop,\r\n\tpush = [].push,\r\n\tslice = [].slice,\r\n\t// Use a stripped-down indexOf if a native one is unavailable\r\n\tindexOf = [].indexOf || function( elem ) {\r\n\t\tvar i = 0,\r\n\t\t\tlen = this.length;\r\n\t\tfor ( ; i < len; i++ ) {\r\n\t\t\tif ( this[i] === elem ) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t},\r\n\r\n\t// Augment a function for special use by Sizzle\r\n\tmarkFunction = function( fn, value ) {\r\n\t\tfn[ expando ] = value == null || value;\r\n\t\treturn fn;\r\n\t},\r\n\r\n\tcreateCache = function() {\r\n\t\tvar cache = {},\r\n\t\t\tkeys = [];\r\n\r\n\t\treturn markFunction(function( key, value ) {\r\n\t\t\t// Only keep the most recent entries\r\n\t\t\tif ( keys.push( key ) > Expr.cacheLength ) {\r\n\t\t\t\tdelete cache[ keys.shift() ];\r\n\t\t\t}\r\n\r\n\t\t\t// Retrieve with (key + \" \") to avoid collision with native Object.prototype properties (see Issue #157)\r\n\t\t\treturn (cache[ key + \" \" ] = value);\r\n\t\t}, cache );\r\n\t},\r\n\r\n\tclassCache = createCache(),\r\n\ttokenCache = createCache(),\r\n\tcompilerCache = createCache(),\r\n\r\n\t// Regex\r\n\r\n\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\r\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\r\n\t// http://www.w3.org/TR/css3-syntax/#characters\r\n\tcharacterEncoding = \"(?:\\\\\\\\.|[-\\\\w]|[^\\\\x00-\\\\xa0])+\",\r\n\r\n\t// Loosely modeled on CSS identifier characters\r\n\t// An unquoted value should be a CSS identifier (http://www.w3.org/TR/css3-selectors/#attribute-selectors)\r\n\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\r\n\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\r\n\r\n\t// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors\r\n\toperators = \"([*^$|!~]?=)\",\r\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")\" + whitespace +\r\n\t\t\"*(?:\" + operators + whitespace + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + identifier + \")|)|)\" + whitespace + \"*\\\\]\",\r\n\r\n\t// Prefer arguments not in parens/brackets,\r\n\t//   then attribute selectors and non-pseudos (denoted by :),\r\n\t//   then anything else\r\n\t// These preferences are here to reduce the number of selectors\r\n\t//   needing tokenize in the PSEUDO preFilter\r\n\tpseudos = \":(\" + characterEncoding + \")(?:\\\\((?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\2|([^()[\\\\]]*|(?:(?:\" + attributes + \")|[^:]|\\\\\\\\.)*|.*))\\\\)|)\",\r\n\r\n\t// For matchExpr.POS and matchExpr.needsContext\r\n\tpos = \":(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace +\r\n\t\t\"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\",\r\n\r\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\r\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\r\n\r\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\r\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\" + whitespace + \"*\" ),\r\n\trpseudo = new RegExp( pseudos ),\r\n\r\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\r\n\trquickExpr = /^(?:#([\\w\\-]+)|(\\w+)|\\.([\\w\\-]+))$/,\r\n\r\n\trnot = /^:not/,\r\n\trsibling = /[\\x20\\t\\r\\n\\f]*[+~]/,\r\n\trendsWithNot = /:not\\($/,\r\n\r\n\trheader = /h\\d/i,\r\n\trinputs = /input|select|textarea|button/i,\r\n\r\n\trbackslash = /\\\\(?!\\\\)/g,\r\n\r\n\tmatchExpr = {\r\n\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\r\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\r\n\t\t\"NAME\": new RegExp( \"^\\\\[name=['\\\"]?(\" + characterEncoding + \")['\\\"]?\\\\]\" ),\r\n\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\r\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\r\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\r\n\t\t\"POS\": new RegExp( pos, \"i\" ),\r\n\t\t\"CHILD\": new RegExp( \"^:(only|nth|first|last)-child(?:\\\\(\" + whitespace +\r\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\r\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\r\n\t\t// For use in libraries implementing .is()\r\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|\" + pos, \"i\" )\r\n\t},\r\n\r\n\t// Support\r\n\r\n\t// Used for testing something on an element\r\n\tassert = function( fn ) {\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\ttry {\r\n\t\t\treturn fn( div );\r\n\t\t} catch (e) {\r\n\t\t\treturn false;\r\n\t\t} finally {\r\n\t\t\t// release memory in IE\r\n\t\t\tdiv = null;\r\n\t\t}\r\n\t},\r\n\r\n\t// Check if getElementsByTagName(\"*\") returns only elements\r\n\tassertTagNameNoComments = assert(function( div ) {\r\n\t\tdiv.appendChild( document.createComment(\"\") );\r\n\t\treturn !div.getElementsByTagName(\"*\").length;\r\n\t}),\r\n\r\n\t// Check if getAttribute returns normalized href attributes\r\n\tassertHrefNotNormalized = assert(function( div ) {\r\n\t\tdiv.innerHTML = \"<a href='#'></a>\";\r\n\t\treturn div.firstChild && typeof div.firstChild.getAttribute !== strundefined &&\r\n\t\t\tdiv.firstChild.getAttribute(\"href\") === \"#\";\r\n\t}),\r\n\r\n\t// Check if attributes should be retrieved by attribute nodes\r\n\tassertAttributes = assert(function( div ) {\r\n\t\tdiv.innerHTML = \"<select></select>\";\r\n\t\tvar type = typeof div.lastChild.getAttribute(\"multiple\");\r\n\t\t// IE8 returns a string for some attributes even when not present\r\n\t\treturn type !== \"boolean\" && type !== \"string\";\r\n\t}),\r\n\r\n\t// Check if getElementsByClassName can be trusted\r\n\tassertUsableClassName = assert(function( div ) {\r\n\t\t// Opera can't find a second classname (in 9.6)\r\n\t\tdiv.innerHTML = \"<div class='hidden e'></div><div class='hidden'></div>\";\r\n\t\tif ( !div.getElementsByClassName || !div.getElementsByClassName(\"e\").length ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Safari 3.2 caches class attributes and doesn't catch changes\r\n\t\tdiv.lastChild.className = \"e\";\r\n\t\treturn div.getElementsByClassName(\"e\").length === 2;\r\n\t}),\r\n\r\n\t// Check if getElementById returns elements by name\r\n\t// Check if getElementsByName privileges form controls or returns elements by ID\r\n\tassertUsableName = assert(function( div ) {\r\n\t\t// Inject content\r\n\t\tdiv.id = expando + 0;\r\n\t\tdiv.innerHTML = \"<a name='\" + expando + \"'></a><div name='\" + expando + \"'></div>\";\r\n\t\tdocElem.insertBefore( div, docElem.firstChild );\r\n\r\n\t\t// Test\r\n\t\tvar pass = document.getElementsByName &&\r\n\t\t\t// buggy browsers will return fewer than the correct 2\r\n\t\t\tdocument.getElementsByName( expando ).length === 2 +\r\n\t\t\t// buggy browsers will return more than the correct 0\r\n\t\t\tdocument.getElementsByName( expando + 0 ).length;\r\n\t\tassertGetIdNotName = !document.getElementById( expando );\r\n\r\n\t\t// Cleanup\r\n\t\tdocElem.removeChild( div );\r\n\r\n\t\treturn pass;\r\n\t});\r\n\r\n// If slice is not available, provide a backup\r\ntry {\r\n\tslice.call( docElem.childNodes, 0 )[0].nodeType;\r\n} catch ( e ) {\r\n\tslice = function( i ) {\r\n\t\tvar elem,\r\n\t\t\tresults = [];\r\n\t\tfor ( ; (elem = this[i]); i++ ) {\r\n\t\t\tresults.push( elem );\r\n\t\t}\r\n\t\treturn results;\r\n\t};\r\n}\r\n\r\nfunction Sizzle( selector, context, results, seed ) {\r\n\tresults = results || [];\r\n\tcontext = context || document;\r\n\tvar match, elem, xml, m,\r\n\t\tnodeType = context.nodeType;\r\n\r\n\tif ( !selector || typeof selector !== \"string\" ) {\r\n\t\treturn results;\r\n\t}\r\n\r\n\tif ( nodeType !== 1 && nodeType !== 9 ) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\txml = isXML( context );\r\n\r\n\tif ( !xml && !seed ) {\r\n\t\tif ( (match = rquickExpr.exec( selector )) ) {\r\n\t\t\t// Speed-up: Sizzle(\"#ID\")\r\n\t\t\tif ( (m = match[1]) ) {\r\n\t\t\t\tif ( nodeType === 9 ) {\r\n\t\t\t\t\telem = context.getElementById( m );\r\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\r\n\t\t\t\t\t// nodes that are no longer in the document #6963\r\n\t\t\t\t\tif ( elem && elem.parentNode ) {\r\n\t\t\t\t\t\t// Handle the case where IE, Opera, and Webkit return items\r\n\t\t\t\t\t\t// by name instead of ID\r\n\t\t\t\t\t\tif ( elem.id === m ) {\r\n\t\t\t\t\t\t\tresults.push( elem );\r\n\t\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Context is not a document\r\n\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\r\n\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\r\n\t\t\t\t\t\tresults.push( elem );\r\n\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t// Speed-up: Sizzle(\"TAG\")\r\n\t\t\t} else if ( match[2] ) {\r\n\t\t\t\tpush.apply( results, slice.call(context.getElementsByTagName( selector ), 0) );\r\n\t\t\t\treturn results;\r\n\r\n\t\t\t// Speed-up: Sizzle(\".CLASS\")\r\n\t\t\t} else if ( (m = match[3]) && assertUsableClassName && context.getElementsByClassName ) {\r\n\t\t\t\tpush.apply( results, slice.call(context.getElementsByClassName( m ), 0) );\r\n\t\t\t\treturn results;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// All others\r\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed, xml );\r\n}\r\n\r\nSizzle.matches = function( expr, elements ) {\r\n\treturn Sizzle( expr, null, null, elements );\r\n};\r\n\r\nSizzle.matchesSelector = function( elem, expr ) {\r\n\treturn Sizzle( expr, null, null, [ elem ] ).length > 0;\r\n};\r\n\r\n// Returns a function to use in pseudos for input types\r\nfunction createInputPseudo( type ) {\r\n\treturn function( elem ) {\r\n\t\tvar name = elem.nodeName.toLowerCase();\r\n\t\treturn name === \"input\" && elem.type === type;\r\n\t};\r\n}\r\n\r\n// Returns a function to use in pseudos for buttons\r\nfunction createButtonPseudo( type ) {\r\n\treturn function( elem ) {\r\n\t\tvar name = elem.nodeName.toLowerCase();\r\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\r\n\t};\r\n}\r\n\r\n// Returns a function to use in pseudos for positionals\r\nfunction createPositionalPseudo( fn ) {\r\n\treturn markFunction(function( argument ) {\r\n\t\targument = +argument;\r\n\t\treturn markFunction(function( seed, matches ) {\r\n\t\t\tvar j,\r\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\r\n\t\t\t\ti = matchIndexes.length;\r\n\r\n\t\t\t// Match elements found at the specified indexes\r\n\t\t\twhile ( i-- ) {\r\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\r\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * Utility function for retrieving the text value of an array of DOM nodes\r\n * @param {Array|Element} elem\r\n */\r\ngetText = Sizzle.getText = function( elem ) {\r\n\tvar node,\r\n\t\tret = \"\",\r\n\t\ti = 0,\r\n\t\tnodeType = elem.nodeType;\r\n\r\n\tif ( nodeType ) {\r\n\t\tif ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\r\n\t\t\t// Use textContent for elements\r\n\t\t\t// innerText usage removed for consistency of new lines (see #11153)\r\n\t\t\tif ( typeof elem.textContent === \"string\" ) {\r\n\t\t\t\treturn elem.textContent;\r\n\t\t\t} else {\r\n\t\t\t\t// Traverse its children\r\n\t\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\r\n\t\t\t\t\tret += getText( elem );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if ( nodeType === 3 || nodeType === 4 ) {\r\n\t\t\treturn elem.nodeValue;\r\n\t\t}\r\n\t\t// Do not include comment or processing instruction nodes\r\n\t} else {\r\n\r\n\t\t// If no nodeType, this is expected to be an array\r\n\t\tfor ( ; (node = elem[i]); i++ ) {\r\n\t\t\t// Do not traverse comment nodes\r\n\t\t\tret += getText( node );\r\n\t\t}\r\n\t}\r\n\treturn ret;\r\n};\r\n\r\nisXML = Sizzle.isXML = function( elem ) {\r\n\t// documentElement is verified for cases where it doesn't yet exist\r\n\t// (such as loading iframes in IE - #4833)\r\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\r\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\r\n};\r\n\r\n// Element contains another\r\ncontains = Sizzle.contains = docElem.contains ?\r\n\tfunction( a, b ) {\r\n\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\r\n\t\t\tbup = b && b.parentNode;\r\n\t\treturn a === bup || !!( bup && bup.nodeType === 1 && adown.contains && adown.contains(bup) );\r\n\t} :\r\n\tdocElem.compareDocumentPosition ?\r\n\tfunction( a, b ) {\r\n\t\treturn b && !!( a.compareDocumentPosition( b ) & 16 );\r\n\t} :\r\n\tfunction( a, b ) {\r\n\t\twhile ( (b = b.parentNode) ) {\r\n\t\t\tif ( b === a ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\nSizzle.attr = function( elem, name ) {\r\n\tvar val,\r\n\t\txml = isXML( elem );\r\n\r\n\tif ( !xml ) {\r\n\t\tname = name.toLowerCase();\r\n\t}\r\n\tif ( (val = Expr.attrHandle[ name ]) ) {\r\n\t\treturn val( elem );\r\n\t}\r\n\tif ( xml || assertAttributes ) {\r\n\t\treturn elem.getAttribute( name );\r\n\t}\r\n\tval = elem.getAttributeNode( name );\r\n\treturn val ?\r\n\t\ttypeof elem[ name ] === \"boolean\" ?\r\n\t\t\telem[ name ] ? name : null :\r\n\t\t\tval.specified ? val.value : null :\r\n\t\tnull;\r\n};\r\n\r\nExpr = Sizzle.selectors = {\r\n\r\n\t// Can be adjusted by the user\r\n\tcacheLength: 50,\r\n\r\n\tcreatePseudo: markFunction,\r\n\r\n\tmatch: matchExpr,\r\n\r\n\t// IE6/7 return a modified href\r\n\tattrHandle: assertHrefNotNormalized ?\r\n\t\t{} :\r\n\t\t{\r\n\t\t\t\"href\": function( elem ) {\r\n\t\t\t\treturn elem.getAttribute( \"href\", 2 );\r\n\t\t\t},\r\n\t\t\t\"type\": function( elem ) {\r\n\t\t\t\treturn elem.getAttribute(\"type\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\tfind: {\r\n\t\t\"ID\": assertGetIdNotName ?\r\n\t\t\tfunction( id, context, xml ) {\r\n\t\t\t\tif ( typeof context.getElementById !== strundefined && !xml ) {\r\n\t\t\t\t\tvar m = context.getElementById( id );\r\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\r\n\t\t\t\t\t// nodes that are no longer in the document #6963\r\n\t\t\t\t\treturn m && m.parentNode ? [m] : [];\r\n\t\t\t\t}\r\n\t\t\t} :\r\n\t\t\tfunction( id, context, xml ) {\r\n\t\t\t\tif ( typeof context.getElementById !== strundefined && !xml ) {\r\n\t\t\t\t\tvar m = context.getElementById( id );\r\n\r\n\t\t\t\t\treturn m ?\r\n\t\t\t\t\t\tm.id === id || typeof m.getAttributeNode !== strundefined && m.getAttributeNode(\"id\").value === id ?\r\n\t\t\t\t\t\t\t[m] :\r\n\t\t\t\t\t\t\tundefined :\r\n\t\t\t\t\t\t[];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\"TAG\": assertTagNameNoComments ?\r\n\t\t\tfunction( tag, context ) {\r\n\t\t\t\tif ( typeof context.getElementsByTagName !== strundefined ) {\r\n\t\t\t\t\treturn context.getElementsByTagName( tag );\r\n\t\t\t\t}\r\n\t\t\t} :\r\n\t\t\tfunction( tag, context ) {\r\n\t\t\t\tvar results = context.getElementsByTagName( tag );\r\n\r\n\t\t\t\t// Filter out possible comments\r\n\t\t\t\tif ( tag === \"*\" ) {\r\n\t\t\t\t\tvar elem,\r\n\t\t\t\t\t\ttmp = [],\r\n\t\t\t\t\t\ti = 0;\r\n\r\n\t\t\t\t\tfor ( ; (elem = results[i]); i++ ) {\r\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\r\n\t\t\t\t\t\t\ttmp.push( elem );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn tmp;\r\n\t\t\t\t}\r\n\t\t\t\treturn results;\r\n\t\t\t},\r\n\r\n\t\t\"NAME\": assertUsableName && function( tag, context ) {\r\n\t\t\tif ( typeof context.getElementsByName !== strundefined ) {\r\n\t\t\t\treturn context.getElementsByName( name );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t\"CLASS\": assertUsableClassName && function( className, context, xml ) {\r\n\t\t\tif ( typeof context.getElementsByClassName !== strundefined && !xml ) {\r\n\t\t\t\treturn context.getElementsByClassName( className );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trelative: {\r\n\t\t\">\": { dir: \"parentNode\", first: true },\r\n\t\t\" \": { dir: \"parentNode\" },\r\n\t\t\"+\": { dir: \"previousSibling\", first: true },\r\n\t\t\"~\": { dir: \"previousSibling\" }\r\n\t},\r\n\r\n\tpreFilter: {\r\n\t\t\"ATTR\": function( match ) {\r\n\t\t\tmatch[1] = match[1].replace( rbackslash, \"\" );\r\n\r\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\r\n\t\t\tmatch[3] = ( match[4] || match[5] || \"\" ).replace( rbackslash, \"\" );\r\n\r\n\t\t\tif ( match[2] === \"~=\" ) {\r\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\r\n\t\t\t}\r\n\r\n\t\t\treturn match.slice( 0, 4 );\r\n\t\t},\r\n\r\n\t\t\"CHILD\": function( match ) {\r\n\t\t\t/* matches from matchExpr[\"CHILD\"]\r\n\t\t\t\t1 type (only|nth|...)\r\n\t\t\t\t2 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\r\n\t\t\t\t3 xn-component of xn+y argument ([+-]?\\d*n|)\r\n\t\t\t\t4 sign of xn-component\r\n\t\t\t\t5 x of xn-component\r\n\t\t\t\t6 sign of y-component\r\n\t\t\t\t7 y of y-component\r\n\t\t\t*/\r\n\t\t\tmatch[1] = match[1].toLowerCase();\r\n\r\n\t\t\tif ( match[1] === \"nth\" ) {\r\n\t\t\t\t// nth-child requires argument\r\n\t\t\t\tif ( !match[2] ) {\r\n\t\t\t\t\tSizzle.error( match[0] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\r\n\t\t\t\t// remember that false/true cast respectively to 0/1\r\n\t\t\t\tmatch[3] = +( match[3] ? match[4] + (match[5] || 1) : 2 * ( match[2] === \"even\" || match[2] === \"odd\" ) );\r\n\t\t\t\tmatch[4] = +( ( match[6] + match[7] ) || match[2] === \"odd\" );\r\n\r\n\t\t\t// other types prohibit arguments\r\n\t\t\t} else if ( match[2] ) {\r\n\t\t\t\tSizzle.error( match[0] );\r\n\t\t\t}\r\n\r\n\t\t\treturn match;\r\n\t\t},\r\n\r\n\t\t\"PSEUDO\": function( match ) {\r\n\t\t\tvar unquoted, excess;\r\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tif ( match[3] ) {\r\n\t\t\t\tmatch[2] = match[3];\r\n\t\t\t} else if ( (unquoted = match[4]) ) {\r\n\t\t\t\t// Only check arguments that contain a pseudo\r\n\t\t\t\tif ( rpseudo.test(unquoted) &&\r\n\t\t\t\t\t// Get excess from tokenize (recursively)\r\n\t\t\t\t\t(excess = tokenize( unquoted, true )) &&\r\n\t\t\t\t\t// advance to the next closing parenthesis\r\n\t\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\r\n\r\n\t\t\t\t\t// excess is a negative index\r\n\t\t\t\t\tunquoted = unquoted.slice( 0, excess );\r\n\t\t\t\t\tmatch[0] = match[0].slice( 0, excess );\r\n\t\t\t\t}\r\n\t\t\t\tmatch[2] = unquoted;\r\n\t\t\t}\r\n\r\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\r\n\t\t\treturn match.slice( 0, 3 );\r\n\t\t}\r\n\t},\r\n\r\n\tfilter: {\r\n\t\t\"ID\": assertGetIdNotName ?\r\n\t\t\tfunction( id ) {\r\n\t\t\t\tid = id.replace( rbackslash, \"\" );\r\n\t\t\t\treturn function( elem ) {\r\n\t\t\t\t\treturn elem.getAttribute(\"id\") === id;\r\n\t\t\t\t};\r\n\t\t\t} :\r\n\t\t\tfunction( id ) {\r\n\t\t\t\tid = id.replace( rbackslash, \"\" );\r\n\t\t\t\treturn function( elem ) {\r\n\t\t\t\t\tvar node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode(\"id\");\r\n\t\t\t\t\treturn node && node.value === id;\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\"TAG\": function( nodeName ) {\r\n\t\t\tif ( nodeName === \"*\" ) {\r\n\t\t\t\treturn function() { return true; };\r\n\t\t\t}\r\n\t\t\tnodeName = nodeName.replace( rbackslash, \"\" ).toLowerCase();\r\n\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t\"CLASS\": function( className ) {\r\n\t\t\tvar pattern = classCache[ expando ][ className + \" \" ];\r\n\r\n\t\t\treturn pattern ||\r\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\r\n\t\t\t\tclassCache( className, function( elem ) {\r\n\t\t\t\t\treturn pattern.test( elem.className || (typeof elem.getAttribute !== strundefined && elem.getAttribute(\"class\")) || \"\" );\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t\"ATTR\": function( name, operator, check ) {\r\n\t\t\treturn function( elem, context ) {\r\n\t\t\t\tvar result = Sizzle.attr( elem, name );\r\n\r\n\t\t\t\tif ( result == null ) {\r\n\t\t\t\t\treturn operator === \"!=\";\r\n\t\t\t\t}\r\n\t\t\t\tif ( !operator ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult += \"\";\r\n\r\n\t\t\t\treturn operator === \"=\" ? result === check :\r\n\t\t\t\t\toperator === \"!=\" ? result !== check :\r\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\r\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\r\n\t\t\t\t\toperator === \"$=\" ? check && result.substr( result.length - check.length ) === check :\r\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result + \" \" ).indexOf( check ) > -1 :\r\n\t\t\t\t\toperator === \"|=\" ? result === check || result.substr( 0, check.length + 1 ) === check + \"-\" :\r\n\t\t\t\t\tfalse;\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t\"CHILD\": function( type, argument, first, last ) {\r\n\r\n\t\t\tif ( type === \"nth\" ) {\r\n\t\t\t\treturn function( elem ) {\r\n\t\t\t\t\tvar node, diff,\r\n\t\t\t\t\t\tparent = elem.parentNode;\r\n\r\n\t\t\t\t\tif ( first === 1 && last === 0 ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( parent ) {\r\n\t\t\t\t\t\tdiff = 0;\r\n\t\t\t\t\t\tfor ( node = parent.firstChild; node; node = node.nextSibling ) {\r\n\t\t\t\t\t\t\tif ( node.nodeType === 1 ) {\r\n\t\t\t\t\t\t\t\tdiff++;\r\n\t\t\t\t\t\t\t\tif ( elem === node ) {\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Incorporate the offset (or cast to NaN), then check against cycle size\r\n\t\t\t\t\tdiff -= last;\r\n\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\tvar node = elem;\r\n\r\n\t\t\t\tswitch ( type ) {\r\n\t\t\t\t\tcase \"only\":\r\n\t\t\t\t\tcase \"first\":\r\n\t\t\t\t\t\twhile ( (node = node.previousSibling) ) {\r\n\t\t\t\t\t\t\tif ( node.nodeType === 1 ) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( type === \"first\" ) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnode = elem;\r\n\r\n\t\t\t\t\t\t/* falls through */\r\n\t\t\t\t\tcase \"last\":\r\n\t\t\t\t\t\twhile ( (node = node.nextSibling) ) {\r\n\t\t\t\t\t\t\tif ( node.nodeType === 1 ) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t\"PSEUDO\": function( pseudo, argument ) {\r\n\t\t\t// pseudo-class names are case-insensitive\r\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\r\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\r\n\t\t\t// Remember that setFilters inherits from pseudos\r\n\t\t\tvar args,\r\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\r\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\r\n\r\n\t\t\t// The user may use createPseudo to indicate that\r\n\t\t\t// arguments are needed to create the filter function\r\n\t\t\t// just as Sizzle does\r\n\t\t\tif ( fn[ expando ] ) {\r\n\t\t\t\treturn fn( argument );\r\n\t\t\t}\r\n\r\n\t\t\t// But maintain support for old signatures\r\n\t\t\tif ( fn.length > 1 ) {\r\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\r\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\r\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\r\n\t\t\t\t\t\tvar idx,\r\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\r\n\t\t\t\t\t\t\ti = matched.length;\r\n\t\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[i] );\r\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tfunction( elem ) {\r\n\t\t\t\t\t\treturn fn( elem, 0, args );\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn fn;\r\n\t\t}\r\n\t},\r\n\r\n\tpseudos: {\r\n\t\t\"not\": markFunction(function( selector ) {\r\n\t\t\t// Trim the selector passed to compile\r\n\t\t\t// to avoid treating leading and trailing\r\n\t\t\t// spaces as combinators\r\n\t\t\tvar input = [],\r\n\t\t\t\tresults = [],\r\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\r\n\r\n\t\t\treturn matcher[ expando ] ?\r\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\r\n\t\t\t\t\tvar elem,\r\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\r\n\t\t\t\t\t\ti = seed.length;\r\n\r\n\t\t\t\t\t// Match elements unmatched by `matcher`\r\n\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\r\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}) :\r\n\t\t\t\tfunction( elem, context, xml ) {\r\n\t\t\t\t\tinput[0] = elem;\r\n\t\t\t\t\tmatcher( input, null, xml, results );\r\n\t\t\t\t\treturn !results.pop();\r\n\t\t\t\t};\r\n\t\t}),\r\n\r\n\t\t\"has\": markFunction(function( selector ) {\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\r\n\t\t\t};\r\n\t\t}),\r\n\r\n\t\t\"contains\": markFunction(function( text ) {\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\r\n\t\t\t};\r\n\t\t}),\r\n\r\n\t\t\"enabled\": function( elem ) {\r\n\t\t\treturn elem.disabled === false;\r\n\t\t},\r\n\r\n\t\t\"disabled\": function( elem ) {\r\n\t\t\treturn elem.disabled === true;\r\n\t\t},\r\n\r\n\t\t\"checked\": function( elem ) {\r\n\t\t\t// In CSS3, :checked should return both checked and selected elements\r\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\r\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\r\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\r\n\t\t},\r\n\r\n\t\t\"selected\": function( elem ) {\r\n\t\t\t// Accessing this property makes selected-by-default\r\n\t\t\t// options in Safari work properly\r\n\t\t\tif ( elem.parentNode ) {\r\n\t\t\t\telem.parentNode.selectedIndex;\r\n\t\t\t}\r\n\r\n\t\t\treturn elem.selected === true;\r\n\t\t},\r\n\r\n\t\t\"parent\": function( elem ) {\r\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\r\n\t\t},\r\n\r\n\t\t\"empty\": function( elem ) {\r\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\r\n\t\t\t// :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),\r\n\t\t\t//   not comment, processing instructions, or others\r\n\t\t\t// Thanks to Diego Perini for the nodeName shortcut\r\n\t\t\t//   Greater than \"@\" means alpha characters (specifically not starting with \"#\" or \"?\")\r\n\t\t\tvar nodeType;\r\n\t\t\telem = elem.firstChild;\r\n\t\t\twhile ( elem ) {\r\n\t\t\t\tif ( elem.nodeName > \"@\" || (nodeType = elem.nodeType) === 3 || nodeType === 4 ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\telem = elem.nextSibling;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\t\"header\": function( elem ) {\r\n\t\t\treturn rheader.test( elem.nodeName );\r\n\t\t},\r\n\r\n\t\t\"text\": function( elem ) {\r\n\t\t\tvar type, attr;\r\n\t\t\t// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)\r\n\t\t\t// use getAttribute instead to test this case\r\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\r\n\t\t\t\t(type = elem.type) === \"text\" &&\r\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === type );\r\n\t\t},\r\n\r\n\t\t// Input types\r\n\t\t\"radio\": createInputPseudo(\"radio\"),\r\n\t\t\"checkbox\": createInputPseudo(\"checkbox\"),\r\n\t\t\"file\": createInputPseudo(\"file\"),\r\n\t\t\"password\": createInputPseudo(\"password\"),\r\n\t\t\"image\": createInputPseudo(\"image\"),\r\n\r\n\t\t\"submit\": createButtonPseudo(\"submit\"),\r\n\t\t\"reset\": createButtonPseudo(\"reset\"),\r\n\r\n\t\t\"button\": function( elem ) {\r\n\t\t\tvar name = elem.nodeName.toLowerCase();\r\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\r\n\t\t},\r\n\r\n\t\t\"input\": function( elem ) {\r\n\t\t\treturn rinputs.test( elem.nodeName );\r\n\t\t},\r\n\r\n\t\t\"focus\": function( elem ) {\r\n\t\t\tvar doc = elem.ownerDocument;\r\n\t\t\treturn elem === doc.activeElement && (!doc.hasFocus || doc.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\r\n\t\t},\r\n\r\n\t\t\"active\": function( elem ) {\r\n\t\t\treturn elem === elem.ownerDocument.activeElement;\r\n\t\t},\r\n\r\n\t\t// Positional types\r\n\t\t\"first\": createPositionalPseudo(function() {\r\n\t\t\treturn [ 0 ];\r\n\t\t}),\r\n\r\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\r\n\t\t\treturn [ length - 1 ];\r\n\t\t}),\r\n\r\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\r\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\r\n\t\t}),\r\n\r\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\r\n\t\t\tfor ( var i = 0; i < length; i += 2 ) {\r\n\t\t\t\tmatchIndexes.push( i );\r\n\t\t\t}\r\n\t\t\treturn matchIndexes;\r\n\t\t}),\r\n\r\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\r\n\t\t\tfor ( var i = 1; i < length; i += 2 ) {\r\n\t\t\t\tmatchIndexes.push( i );\r\n\t\t\t}\r\n\t\t\treturn matchIndexes;\r\n\t\t}),\r\n\r\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\r\n\t\t\tfor ( var i = argument < 0 ? argument + length : argument; --i >= 0; ) {\r\n\t\t\t\tmatchIndexes.push( i );\r\n\t\t\t}\r\n\t\t\treturn matchIndexes;\r\n\t\t}),\r\n\r\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\r\n\t\t\tfor ( var i = argument < 0 ? argument + length : argument; ++i < length; ) {\r\n\t\t\t\tmatchIndexes.push( i );\r\n\t\t\t}\r\n\t\t\treturn matchIndexes;\r\n\t\t})\r\n\t}\r\n};\r\n\r\nfunction siblingCheck( a, b, ret ) {\r\n\tif ( a === b ) {\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tvar cur = a.nextSibling;\r\n\r\n\twhile ( cur ) {\r\n\t\tif ( cur === b ) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tcur = cur.nextSibling;\r\n\t}\r\n\r\n\treturn 1;\r\n}\r\n\r\nsortOrder = docElem.compareDocumentPosition ?\r\n\tfunction( a, b ) {\r\n\t\tif ( a === b ) {\r\n\t\t\thasDuplicate = true;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\treturn ( !a.compareDocumentPosition || !b.compareDocumentPosition ?\r\n\t\t\ta.compareDocumentPosition :\r\n\t\t\ta.compareDocumentPosition(b) & 4\r\n\t\t) ? -1 : 1;\r\n\t} :\r\n\tfunction( a, b ) {\r\n\t\t// The nodes are identical, we can exit early\r\n\t\tif ( a === b ) {\r\n\t\t\thasDuplicate = true;\r\n\t\t\treturn 0;\r\n\r\n\t\t// Fallback to using sourceIndex (in IE) if it's available on both nodes\r\n\t\t} else if ( a.sourceIndex && b.sourceIndex ) {\r\n\t\t\treturn a.sourceIndex - b.sourceIndex;\r\n\t\t}\r\n\r\n\t\tvar al, bl,\r\n\t\t\tap = [],\r\n\t\t\tbp = [],\r\n\t\t\taup = a.parentNode,\r\n\t\t\tbup = b.parentNode,\r\n\t\t\tcur = aup;\r\n\r\n\t\t// If the nodes are siblings (or identical) we can do a quick check\r\n\t\tif ( aup === bup ) {\r\n\t\t\treturn siblingCheck( a, b );\r\n\r\n\t\t// If no parents were found then the nodes are disconnected\r\n\t\t} else if ( !aup ) {\r\n\t\t\treturn -1;\r\n\r\n\t\t} else if ( !bup ) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t// Otherwise they're somewhere else in the tree so we need\r\n\t\t// to build up a full list of the parentNodes for comparison\r\n\t\twhile ( cur ) {\r\n\t\t\tap.unshift( cur );\r\n\t\t\tcur = cur.parentNode;\r\n\t\t}\r\n\r\n\t\tcur = bup;\r\n\r\n\t\twhile ( cur ) {\r\n\t\t\tbp.unshift( cur );\r\n\t\t\tcur = cur.parentNode;\r\n\t\t}\r\n\r\n\t\tal = ap.length;\r\n\t\tbl = bp.length;\r\n\r\n\t\t// Start walking down the tree looking for a discrepancy\r\n\t\tfor ( var i = 0; i < al && i < bl; i++ ) {\r\n\t\t\tif ( ap[i] !== bp[i] ) {\r\n\t\t\t\treturn siblingCheck( ap[i], bp[i] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// We ended someplace up the tree so do a sibling check\r\n\t\treturn i === al ?\r\n\t\t\tsiblingCheck( a, bp[i], -1 ) :\r\n\t\t\tsiblingCheck( ap[i], b, 1 );\r\n\t};\r\n\r\n// Always assume the presence of duplicates if sort doesn't\r\n// pass them to our comparison function (as in Google Chrome).\r\n[0, 0].sort( sortOrder );\r\nbaseHasDuplicate = !hasDuplicate;\r\n\r\n// Document sorting and removing duplicates\r\nSizzle.uniqueSort = function( results ) {\r\n\tvar elem,\r\n\t\tduplicates = [],\r\n\t\ti = 1,\r\n\t\tj = 0;\r\n\r\n\thasDuplicate = baseHasDuplicate;\r\n\tresults.sort( sortOrder );\r\n\r\n\tif ( hasDuplicate ) {\r\n\t\tfor ( ; (elem = results[i]); i++ ) {\r\n\t\t\tif ( elem === results[ i - 1 ] ) {\r\n\t\t\t\tj = duplicates.push( i );\r\n\t\t\t}\r\n\t\t}\r\n\t\twhile ( j-- ) {\r\n\t\t\tresults.splice( duplicates[ j ], 1 );\r\n\t\t}\r\n\t}\r\n\r\n\treturn results;\r\n};\r\n\r\nSizzle.error = function( msg ) {\r\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\r\n};\r\n\r\nfunction tokenize( selector, parseOnly ) {\r\n\tvar matched, match, tokens, type,\r\n\t\tsoFar, groups, preFilters,\r\n\t\tcached = tokenCache[ expando ][ selector + \" \" ];\r\n\r\n\tif ( cached ) {\r\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\r\n\t}\r\n\r\n\tsoFar = selector;\r\n\tgroups = [];\r\n\tpreFilters = Expr.preFilter;\r\n\r\n\twhile ( soFar ) {\r\n\r\n\t\t// Comma and first run\r\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\r\n\t\t\tif ( match ) {\r\n\t\t\t\t// Don't consume trailing commas as valid\r\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\r\n\t\t\t}\r\n\t\t\tgroups.push( tokens = [] );\r\n\t\t}\r\n\r\n\t\tmatched = false;\r\n\r\n\t\t// Combinators\r\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\r\n\t\t\ttokens.push( matched = new Token( match.shift() ) );\r\n\t\t\tsoFar = soFar.slice( matched.length );\r\n\r\n\t\t\t// Cast descendant combinators to space\r\n\t\t\tmatched.type = match[0].replace( rtrim, \" \" );\r\n\t\t}\r\n\r\n\t\t// Filters\r\n\t\tfor ( type in Expr.filter ) {\r\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\r\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\r\n\r\n\t\t\t\ttokens.push( matched = new Token( match.shift() ) );\r\n\t\t\t\tsoFar = soFar.slice( matched.length );\r\n\t\t\t\tmatched.type = type;\r\n\t\t\t\tmatched.matches = match;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( !matched ) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// Return the length of the invalid excess\r\n\t// if we're just parsing\r\n\t// Otherwise, throw an error or return tokens\r\n\treturn parseOnly ?\r\n\t\tsoFar.length :\r\n\t\tsoFar ?\r\n\t\t\tSizzle.error( selector ) :\r\n\t\t\t// Cache the tokens\r\n\t\t\ttokenCache( selector, groups ).slice( 0 );\r\n}\r\n\r\nfunction addCombinator( matcher, combinator, base ) {\r\n\tvar dir = combinator.dir,\r\n\t\tcheckNonElements = base && combinator.dir === \"parentNode\",\r\n\t\tdoneName = done++;\r\n\r\n\treturn combinator.first ?\r\n\t\t// Check against closest ancestor/preceding element\r\n\t\tfunction( elem, context, xml ) {\r\n\t\t\twhile ( (elem = elem[ dir ]) ) {\r\n\t\t\t\tif ( checkNonElements || elem.nodeType === 1  ) {\r\n\t\t\t\t\treturn matcher( elem, context, xml );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} :\r\n\r\n\t\t// Check against all ancestor/preceding elements\r\n\t\tfunction( elem, context, xml ) {\r\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\r\n\t\t\tif ( !xml ) {\r\n\t\t\t\tvar cache,\r\n\t\t\t\t\tdirkey = dirruns + \" \" + doneName + \" \",\r\n\t\t\t\t\tcachedkey = dirkey + cachedruns;\r\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\r\n\t\t\t\t\tif ( checkNonElements || elem.nodeType === 1 ) {\r\n\t\t\t\t\t\tif ( (cache = elem[ expando ]) === cachedkey ) {\r\n\t\t\t\t\t\t\treturn elem.sizset;\r\n\t\t\t\t\t\t} else if ( typeof cache === \"string\" && cache.indexOf(dirkey) === 0 ) {\r\n\t\t\t\t\t\t\tif ( elem.sizset ) {\r\n\t\t\t\t\t\t\t\treturn elem;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telem[ expando ] = cachedkey;\r\n\t\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\r\n\t\t\t\t\t\t\t\telem.sizset = true;\r\n\t\t\t\t\t\t\t\treturn elem;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telem.sizset = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\r\n\t\t\t\t\tif ( checkNonElements || elem.nodeType === 1 ) {\r\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\r\n\t\t\t\t\t\t\treturn elem;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n}\r\n\r\nfunction elementMatcher( matchers ) {\r\n\treturn matchers.length > 1 ?\r\n\t\tfunction( elem, context, xml ) {\r\n\t\t\tvar i = matchers.length;\r\n\t\t\twhile ( i-- ) {\r\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} :\r\n\t\tmatchers[0];\r\n}\r\n\r\nfunction condense( unmatched, map, filter, context, xml ) {\r\n\tvar elem,\r\n\t\tnewUnmatched = [],\r\n\t\ti = 0,\r\n\t\tlen = unmatched.length,\r\n\t\tmapped = map != null;\r\n\r\n\tfor ( ; i < len; i++ ) {\r\n\t\tif ( (elem = unmatched[i]) ) {\r\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\r\n\t\t\t\tnewUnmatched.push( elem );\r\n\t\t\t\tif ( mapped ) {\r\n\t\t\t\t\tmap.push( i );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn newUnmatched;\r\n}\r\n\r\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\r\n\tif ( postFilter && !postFilter[ expando ] ) {\r\n\t\tpostFilter = setMatcher( postFilter );\r\n\t}\r\n\tif ( postFinder && !postFinder[ expando ] ) {\r\n\t\tpostFinder = setMatcher( postFinder, postSelector );\r\n\t}\r\n\treturn markFunction(function( seed, results, context, xml ) {\r\n\t\tvar temp, i, elem,\r\n\t\t\tpreMap = [],\r\n\t\t\tpostMap = [],\r\n\t\t\tpreexisting = results.length,\r\n\r\n\t\t\t// Get initial elements from seed or context\r\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\r\n\r\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\r\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\r\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\r\n\t\t\t\telems,\r\n\r\n\t\t\tmatcherOut = matcher ?\r\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\r\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\r\n\r\n\t\t\t\t\t// ...intermediate processing is necessary\r\n\t\t\t\t\t[] :\r\n\r\n\t\t\t\t\t// ...otherwise use results directly\r\n\t\t\t\t\tresults :\r\n\t\t\t\tmatcherIn;\r\n\r\n\t\t// Find primary matches\r\n\t\tif ( matcher ) {\r\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\r\n\t\t}\r\n\r\n\t\t// Apply postFilter\r\n\t\tif ( postFilter ) {\r\n\t\t\ttemp = condense( matcherOut, postMap );\r\n\t\t\tpostFilter( temp, [], context, xml );\r\n\r\n\t\t\t// Un-match failing elements by moving them back to matcherIn\r\n\t\t\ti = temp.length;\r\n\t\t\twhile ( i-- ) {\r\n\t\t\t\tif ( (elem = temp[i]) ) {\r\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( seed ) {\r\n\t\t\tif ( postFinder || preFilter ) {\r\n\t\t\t\tif ( postFinder ) {\r\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\r\n\t\t\t\t\ttemp = [];\r\n\t\t\t\t\ti = matcherOut.length;\r\n\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\r\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\r\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\r\n\t\t\t\ti = matcherOut.length;\r\n\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\r\n\t\t\t\t\t\t(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {\r\n\r\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t// Add elements to results, through postFinder if defined\r\n\t\t} else {\r\n\t\t\tmatcherOut = condense(\r\n\t\t\t\tmatcherOut === results ?\r\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\r\n\t\t\t\t\tmatcherOut\r\n\t\t\t);\r\n\t\t\tif ( postFinder ) {\r\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\r\n\t\t\t} else {\r\n\t\t\t\tpush.apply( results, matcherOut );\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction matcherFromTokens( tokens ) {\r\n\tvar checkContext, matcher, j,\r\n\t\tlen = tokens.length,\r\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\r\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\r\n\t\ti = leadingRelative ? 1 : 0,\r\n\r\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\r\n\t\tmatchContext = addCombinator( function( elem ) {\r\n\t\t\treturn elem === checkContext;\r\n\t\t}, implicitRelative, true ),\r\n\t\tmatchAnyContext = addCombinator( function( elem ) {\r\n\t\t\treturn indexOf.call( checkContext, elem ) > -1;\r\n\t\t}, implicitRelative, true ),\r\n\t\tmatchers = [ function( elem, context, xml ) {\r\n\t\t\treturn ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\r\n\t\t\t\t(checkContext = context).nodeType ?\r\n\t\t\t\t\tmatchContext( elem, context, xml ) :\r\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\r\n\t\t} ];\r\n\r\n\tfor ( ; i < len; i++ ) {\r\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\r\n\t\t\tmatchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];\r\n\t\t} else {\r\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\r\n\r\n\t\t\t// Return special upon seeing a positional matcher\r\n\t\t\tif ( matcher[ expando ] ) {\r\n\t\t\t\t// Find the next relative operator (if any) for proper handling\r\n\t\t\t\tj = ++i;\r\n\t\t\t\tfor ( ; j < len; j++ ) {\r\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn setMatcher(\r\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\r\n\t\t\t\t\ti > 1 && tokens.slice( 0, i - 1 ).join(\"\").replace( rtrim, \"$1\" ),\r\n\t\t\t\t\tmatcher,\r\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\r\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\r\n\t\t\t\t\tj < len && tokens.join(\"\")\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tmatchers.push( matcher );\r\n\t\t}\r\n\t}\r\n\r\n\treturn elementMatcher( matchers );\r\n}\r\n\r\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\r\n\tvar bySet = setMatchers.length > 0,\r\n\t\tbyElement = elementMatchers.length > 0,\r\n\t\tsuperMatcher = function( seed, context, xml, results, expandContext ) {\r\n\t\t\tvar elem, j, matcher,\r\n\t\t\t\tsetMatched = [],\r\n\t\t\t\tmatchedCount = 0,\r\n\t\t\t\ti = \"0\",\r\n\t\t\t\tunmatched = seed && [],\r\n\t\t\t\toutermost = expandContext != null,\r\n\t\t\t\tcontextBackup = outermostContext,\r\n\t\t\t\t// We must always have either seed elements or context\r\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", expandContext && context.parentNode || context ),\r\n\t\t\t\t// Nested matchers should use non-integer dirruns\r\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.E);\r\n\r\n\t\t\tif ( outermost ) {\r\n\t\t\t\toutermostContext = context !== document && context;\r\n\t\t\t\tcachedruns = superMatcher.el;\r\n\t\t\t}\r\n\r\n\t\t\t// Add elements passing elementMatchers directly to results\r\n\t\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\r\n\t\t\t\tif ( byElement && elem ) {\r\n\t\t\t\t\tfor ( j = 0; (matcher = elementMatchers[j]); j++ ) {\r\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\r\n\t\t\t\t\t\t\tresults.push( elem );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( outermost ) {\r\n\t\t\t\t\t\tdirruns = dirrunsUnique;\r\n\t\t\t\t\t\tcachedruns = ++superMatcher.el;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Track unmatched elements for set filters\r\n\t\t\t\tif ( bySet ) {\r\n\t\t\t\t\t// They will have gone through all possible matchers\r\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\r\n\t\t\t\t\t\tmatchedCount--;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Lengthen the array for every element, matched or not\r\n\t\t\t\t\tif ( seed ) {\r\n\t\t\t\t\t\tunmatched.push( elem );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Apply set filters to unmatched elements\r\n\t\t\tmatchedCount += i;\r\n\t\t\tif ( bySet && i !== matchedCount ) {\r\n\t\t\t\tfor ( j = 0; (matcher = setMatchers[j]); j++ ) {\r\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( seed ) {\r\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\r\n\t\t\t\t\tif ( matchedCount > 0 ) {\r\n\t\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\r\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\r\n\t\t\t\t\tsetMatched = condense( setMatched );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add matches to results\r\n\t\t\t\tpush.apply( results, setMatched );\r\n\r\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\r\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\r\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\r\n\r\n\t\t\t\t\tSizzle.uniqueSort( results );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Override manipulation of globals by nested matchers\r\n\t\t\tif ( outermost ) {\r\n\t\t\t\tdirruns = dirrunsUnique;\r\n\t\t\t\toutermostContext = contextBackup;\r\n\t\t\t}\r\n\r\n\t\t\treturn unmatched;\r\n\t\t};\r\n\r\n\tsuperMatcher.el = 0;\r\n\treturn bySet ?\r\n\t\tmarkFunction( superMatcher ) :\r\n\t\tsuperMatcher;\r\n}\r\n\r\ncompile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {\r\n\tvar i,\r\n\t\tsetMatchers = [],\r\n\t\telementMatchers = [],\r\n\t\tcached = compilerCache[ expando ][ selector + \" \" ];\r\n\r\n\tif ( !cached ) {\r\n\t\t// Generate a function of recursive functions that can be used to check each element\r\n\t\tif ( !group ) {\r\n\t\t\tgroup = tokenize( selector );\r\n\t\t}\r\n\t\ti = group.length;\r\n\t\twhile ( i-- ) {\r\n\t\t\tcached = matcherFromTokens( group[i] );\r\n\t\t\tif ( cached[ expando ] ) {\r\n\t\t\t\tsetMatchers.push( cached );\r\n\t\t\t} else {\r\n\t\t\t\telementMatchers.push( cached );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Cache the compiled function\r\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\r\n\t}\r\n\treturn cached;\r\n};\r\n\r\nfunction multipleContexts( selector, contexts, results ) {\r\n\tvar i = 0,\r\n\t\tlen = contexts.length;\r\n\tfor ( ; i < len; i++ ) {\r\n\t\tSizzle( selector, contexts[i], results );\r\n\t}\r\n\treturn results;\r\n}\r\n\r\nfunction select( selector, context, results, seed, xml ) {\r\n\tvar i, tokens, token, type, find,\r\n\t\tmatch = tokenize( selector ),\r\n\t\tj = match.length;\r\n\r\n\tif ( !seed ) {\r\n\t\t// Try to minimize operations if there is only one group\r\n\t\tif ( match.length === 1 ) {\r\n\r\n\t\t\t// Take a shortcut and set the context if the root selector is an ID\r\n\t\t\ttokens = match[0] = match[0].slice( 0 );\r\n\t\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\r\n\t\t\t\t\tcontext.nodeType === 9 && !xml &&\r\n\t\t\t\t\tExpr.relative[ tokens[1].type ] ) {\r\n\r\n\t\t\t\tcontext = Expr.find[\"ID\"]( token.matches[0].replace( rbackslash, \"\" ), context, xml )[0];\r\n\t\t\t\tif ( !context ) {\r\n\t\t\t\t\treturn results;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tselector = selector.slice( tokens.shift().length );\r\n\t\t\t}\r\n\r\n\t\t\t// Fetch a seed set for right-to-left matching\r\n\t\t\tfor ( i = matchExpr[\"POS\"].test( selector ) ? -1 : tokens.length - 1; i >= 0; i-- ) {\r\n\t\t\t\ttoken = tokens[i];\r\n\r\n\t\t\t\t// Abort if we hit a combinator\r\n\t\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif ( (find = Expr.find[ type ]) ) {\r\n\t\t\t\t\t// Search, expanding context for leading sibling combinators\r\n\t\t\t\t\tif ( (seed = find(\r\n\t\t\t\t\t\ttoken.matches[0].replace( rbackslash, \"\" ),\r\n\t\t\t\t\t\trsibling.test( tokens[0].type ) && context.parentNode || context,\r\n\t\t\t\t\t\txml\r\n\t\t\t\t\t)) ) {\r\n\r\n\t\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\r\n\t\t\t\t\t\ttokens.splice( i, 1 );\r\n\t\t\t\t\t\tselector = seed.length && tokens.join(\"\");\r\n\t\t\t\t\t\tif ( !selector ) {\r\n\t\t\t\t\t\t\tpush.apply( results, slice.call( seed, 0 ) );\r\n\t\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Compile and execute a filtering function\r\n\t// Provide `match` to avoid retokenization if we modified the selector above\r\n\tcompile( selector, match )(\r\n\t\tseed,\r\n\t\tcontext,\r\n\t\txml,\r\n\t\tresults,\r\n\t\trsibling.test( selector )\r\n\t);\r\n\treturn results;\r\n}\r\n\r\nif ( document.querySelectorAll ) {\r\n\t(function() {\r\n\t\tvar disconnectedMatch,\r\n\t\t\toldSelect = select,\r\n\t\t\trescape = /'|\\\\/g,\r\n\t\t\trattributeQuotes = /\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,\r\n\r\n\t\t\t// qSa(:focus) reports false when true (Chrome 21), no need to also add to buggyMatches since matches checks buggyQSA\r\n\t\t\t// A support test would require too much code (would include document ready)\r\n\t\t\trbuggyQSA = [ \":focus\" ],\r\n\r\n\t\t\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\r\n\t\t\t// A support test would require too much code (would include document ready)\r\n\t\t\t// just skip matchesSelector for :active\r\n\t\t\trbuggyMatches = [ \":active\" ],\r\n\t\t\tmatches = docElem.matchesSelector ||\r\n\t\t\t\tdocElem.mozMatchesSelector ||\r\n\t\t\t\tdocElem.webkitMatchesSelector ||\r\n\t\t\t\tdocElem.oMatchesSelector ||\r\n\t\t\t\tdocElem.msMatchesSelector;\r\n\r\n\t\t// Build QSA regex\r\n\t\t// Regex strategy adopted from Diego Perini\r\n\t\tassert(function( div ) {\r\n\t\t\t// Select is set to empty string on purpose\r\n\t\t\t// This is to test IE's treatment of not explictly\r\n\t\t\t// setting a boolean content attribute,\r\n\t\t\t// since its presence should be enough\r\n\t\t\t// http://bugs.jquery.com/ticket/12359\r\n\t\t\tdiv.innerHTML = \"<select><option selected=''></option></select>\";\r\n\r\n\t\t\t// IE8 - Some boolean attributes are not treated correctly\r\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\r\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\" );\r\n\t\t\t}\r\n\r\n\t\t\t// Webkit/Opera - :checked should return selected option elements\r\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\r\n\t\t\t// IE8 throws error here (do not put tests after this one)\r\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\r\n\t\t\t\trbuggyQSA.push(\":checked\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tassert(function( div ) {\r\n\r\n\t\t\t// Opera 10-12/IE9 - ^= $= *= and empty values\r\n\t\t\t// Should not select anything\r\n\t\t\tdiv.innerHTML = \"<p test=''></p>\";\r\n\t\t\tif ( div.querySelectorAll(\"[test^='']\").length ) {\r\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:\\\"\\\"|'')\" );\r\n\t\t\t}\r\n\r\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\r\n\t\t\t// IE8 throws error here (do not put tests after this one)\r\n\t\t\tdiv.innerHTML = \"<input type='hidden'/>\";\r\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\r\n\t\t\t\trbuggyQSA.push(\":enabled\", \":disabled\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// rbuggyQSA always contains :focus, so no need for a length check\r\n\t\trbuggyQSA = /* rbuggyQSA.length && */ new RegExp( rbuggyQSA.join(\"|\") );\r\n\r\n\t\tselect = function( selector, context, results, seed, xml ) {\r\n\t\t\t// Only use querySelectorAll when not filtering,\r\n\t\t\t// when this is not xml,\r\n\t\t\t// and when no QSA bugs apply\r\n\t\t\tif ( !seed && !xml && !rbuggyQSA.test( selector ) ) {\r\n\t\t\t\tvar groups, i,\r\n\t\t\t\t\told = true,\r\n\t\t\t\t\tnid = expando,\r\n\t\t\t\t\tnewContext = context,\r\n\t\t\t\t\tnewSelector = context.nodeType === 9 && selector;\r\n\r\n\t\t\t\t// qSA works strangely on Element-rooted queries\r\n\t\t\t\t// We can work around this by specifying an extra ID on the root\r\n\t\t\t\t// and working up from there (Thanks to Andrew Dupont for the technique)\r\n\t\t\t\t// IE 8 doesn't work on object elements\r\n\t\t\t\tif ( context.nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\r\n\t\t\t\t\tgroups = tokenize( selector );\r\n\r\n\t\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\r\n\t\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontext.setAttribute( \"id\", nid );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnid = \"[id='\" + nid + \"'] \";\r\n\r\n\t\t\t\t\ti = groups.length;\r\n\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\tgroups[i] = nid + groups[i].join(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnewContext = rsibling.test( selector ) && context.parentNode || context;\r\n\t\t\t\t\tnewSelector = groups.join(\",\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( newSelector ) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tpush.apply( results, slice.call( newContext.querySelectorAll(\r\n\t\t\t\t\t\t\tnewSelector\r\n\t\t\t\t\t\t), 0 ) );\r\n\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t} catch(qsaError) {\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tif ( !old ) {\r\n\t\t\t\t\t\t\tcontext.removeAttribute(\"id\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn oldSelect( selector, context, results, seed, xml );\r\n\t\t};\r\n\r\n\t\tif ( matches ) {\r\n\t\t\tassert(function( div ) {\r\n\t\t\t\t// Check to see if it's possible to do matchesSelector\r\n\t\t\t\t// on a disconnected node (IE 9)\r\n\t\t\t\tdisconnectedMatch = matches.call( div, \"div\" );\r\n\r\n\t\t\t\t// This should fail with an exception\r\n\t\t\t\t// Gecko does not error, returns false instead\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmatches.call( div, \"[test!='']:sizzle\" );\r\n\t\t\t\t\trbuggyMatches.push( \"!=\", pseudos );\r\n\t\t\t\t} catch ( e ) {}\r\n\t\t\t});\r\n\r\n\t\t\t// rbuggyMatches always contains :active and :focus, so no need for a length check\r\n\t\t\trbuggyMatches = /* rbuggyMatches.length && */ new RegExp( rbuggyMatches.join(\"|\") );\r\n\r\n\t\t\tSizzle.matchesSelector = function( elem, expr ) {\r\n\t\t\t\t// Make sure that attribute selectors are quoted\r\n\t\t\t\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\r\n\r\n\t\t\t\t// rbuggyMatches always contains :active, so no need for an existence check\r\n\t\t\t\tif ( !isXML( elem ) && !rbuggyMatches.test( expr ) && !rbuggyQSA.test( expr ) ) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar ret = matches.call( elem, expr );\r\n\r\n\t\t\t\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\r\n\t\t\t\t\t\tif ( ret || disconnectedMatch ||\r\n\t\t\t\t\t\t\t\t// As well, disconnected nodes are said to be in a document\r\n\t\t\t\t\t\t\t\t// fragment in IE 9\r\n\t\t\t\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\r\n\t\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Sizzle( expr, null, null, [ elem ] ).length > 0;\r\n\t\t\t};\r\n\t\t}\r\n\t})();\r\n}\r\n\r\n// Deprecated\r\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\r\n\r\n// Back-compat\r\nfunction setFilters() {}\r\nExpr.filters = setFilters.prototype = Expr.pseudos;\r\nExpr.setFilters = new setFilters();\r\n\r\n// Override sizzle attribute retrieval\r\nSizzle.attr = jQuery.attr;\r\njQuery.find = Sizzle;\r\njQuery.expr = Sizzle.selectors;\r\njQuery.expr[\":\"] = jQuery.expr.pseudos;\r\njQuery.unique = Sizzle.uniqueSort;\r\njQuery.text = Sizzle.getText;\r\njQuery.isXMLDoc = Sizzle.isXML;\r\njQuery.contains = Sizzle.contains;\r\n\r\n\r\n})( window );\r\nvar runtil = /Until$/,\r\n\trparentsprev = /^(?:parents|prev(?:Until|All))/,\r\n\tisSimple = /^.[^:#\\[\\.,]*$/,\r\n\trneedsContext = jQuery.expr.match.needsContext,\r\n\t// methods guaranteed to produce a unique set when starting from a unique set\r\n\tguaranteedUnique = {\r\n\t\tchildren: true,\r\n\t\tcontents: true,\r\n\t\tnext: true,\r\n\t\tprev: true\r\n\t};\r\n\r\njQuery.fn.extend({\r\n\tfind: function( selector ) {\r\n\t\tvar i, l, length, n, r, ret,\r\n\t\t\tself = this;\r\n\r\n\t\tif ( typeof selector !== \"string\" ) {\r\n\t\t\treturn jQuery( selector ).filter(function() {\r\n\t\t\t\tfor ( i = 0, l = self.length; i < l; i++ ) {\r\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tret = this.pushStack( \"\", \"find\", selector );\r\n\r\n\t\tfor ( i = 0, l = this.length; i < l; i++ ) {\r\n\t\t\tlength = ret.length;\r\n\t\t\tjQuery.find( selector, this[i], ret );\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\t\t\t\t// Make sure that the results are unique\r\n\t\t\t\tfor ( n = length; n < ret.length; n++ ) {\r\n\t\t\t\t\tfor ( r = 0; r < length; r++ ) {\r\n\t\t\t\t\t\tif ( ret[r] === ret[n] ) {\r\n\t\t\t\t\t\t\tret.splice(n--, 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\thas: function( target ) {\r\n\t\tvar i,\r\n\t\t\ttargets = jQuery( target, this ),\r\n\t\t\tlen = targets.length;\r\n\r\n\t\treturn this.filter(function() {\r\n\t\t\tfor ( i = 0; i < len; i++ ) {\r\n\t\t\t\tif ( jQuery.contains( this, targets[i] ) ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tnot: function( selector ) {\r\n\t\treturn this.pushStack( winnow(this, selector, false), \"not\", selector);\r\n\t},\r\n\r\n\tfilter: function( selector ) {\r\n\t\treturn this.pushStack( winnow(this, selector, true), \"filter\", selector );\r\n\t},\r\n\r\n\tis: function( selector ) {\r\n\t\treturn !!selector && (\r\n\t\t\ttypeof selector === \"string\" ?\r\n\t\t\t\t// If this is a positional/relative selector, check membership in the returned set\r\n\t\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\r\n\t\t\t\trneedsContext.test( selector ) ?\r\n\t\t\t\t\tjQuery( selector, this.context ).index( this[0] ) >= 0 :\r\n\t\t\t\t\tjQuery.filter( selector, this ).length > 0 :\r\n\t\t\t\tthis.filter( selector ).length > 0 );\r\n\t},\r\n\r\n\tclosest: function( selectors, context ) {\r\n\t\tvar cur,\r\n\t\t\ti = 0,\r\n\t\t\tl = this.length,\r\n\t\t\tret = [],\r\n\t\t\tpos = rneedsContext.test( selectors ) || typeof selectors !== \"string\" ?\r\n\t\t\t\tjQuery( selectors, context || this.context ) :\r\n\t\t\t\t0;\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tcur = this[i];\r\n\r\n\t\t\twhile ( cur && cur.ownerDocument && cur !== context && cur.nodeType !== 11 ) {\r\n\t\t\t\tif ( pos ? pos.index(cur) > -1 : jQuery.find.matchesSelector(cur, selectors) ) {\r\n\t\t\t\t\tret.push( cur );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcur = cur.parentNode;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tret = ret.length > 1 ? jQuery.unique( ret ) : ret;\r\n\r\n\t\treturn this.pushStack( ret, \"closest\", selectors );\r\n\t},\r\n\r\n\t// Determine the position of an element within\r\n\t// the matched set of elements\r\n\tindex: function( elem ) {\r\n\r\n\t\t// No argument, return index in parent\r\n\t\tif ( !elem ) {\r\n\t\t\treturn ( this[0] && this[0].parentNode ) ? this.prevAll().length : -1;\r\n\t\t}\r\n\r\n\t\t// index in selector\r\n\t\tif ( typeof elem === \"string\" ) {\r\n\t\t\treturn jQuery.inArray( this[0], jQuery( elem ) );\r\n\t\t}\r\n\r\n\t\t// Locate the position of the desired element\r\n\t\treturn jQuery.inArray(\r\n\t\t\t// If it receives a jQuery object, the first element is used\r\n\t\t\telem.jquery ? elem[0] : elem, this );\r\n\t},\r\n\r\n\tadd: function( selector, context ) {\r\n\t\tvar set = typeof selector === \"string\" ?\r\n\t\t\t\tjQuery( selector, context ) :\r\n\t\t\t\tjQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),\r\n\t\t\tall = jQuery.merge( this.get(), set );\r\n\r\n\t\treturn this.pushStack( isDisconnected( set[0] ) || isDisconnected( all[0] ) ?\r\n\t\t\tall :\r\n\t\t\tjQuery.unique( all ) );\r\n\t},\r\n\r\n\taddBack: function( selector ) {\r\n\t\treturn this.add( selector == null ?\r\n\t\t\tthis.prevObject : this.prevObject.filter(selector)\r\n\t\t);\r\n\t}\r\n});\r\n\r\njQuery.fn.andSelf = jQuery.fn.addBack;\r\n\r\n// A painfully simple check to see if an element is disconnected\r\n// from a document (should be improved, where feasible).\r\nfunction isDisconnected( node ) {\r\n\treturn !node || !node.parentNode || node.parentNode.nodeType === 11;\r\n}\r\n\r\nfunction sibling( cur, dir ) {\r\n\tdo {\r\n\t\tcur = cur[ dir ];\r\n\t} while ( cur && cur.nodeType !== 1 );\r\n\r\n\treturn cur;\r\n}\r\n\r\njQuery.each({\r\n\tparent: function( elem ) {\r\n\t\tvar parent = elem.parentNode;\r\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\r\n\t},\r\n\tparents: function( elem ) {\r\n\t\treturn jQuery.dir( elem, \"parentNode\" );\r\n\t},\r\n\tparentsUntil: function( elem, i, until ) {\r\n\t\treturn jQuery.dir( elem, \"parentNode\", until );\r\n\t},\r\n\tnext: function( elem ) {\r\n\t\treturn sibling( elem, \"nextSibling\" );\r\n\t},\r\n\tprev: function( elem ) {\r\n\t\treturn sibling( elem, \"previousSibling\" );\r\n\t},\r\n\tnextAll: function( elem ) {\r\n\t\treturn jQuery.dir( elem, \"nextSibling\" );\r\n\t},\r\n\tprevAll: function( elem ) {\r\n\t\treturn jQuery.dir( elem, \"previousSibling\" );\r\n\t},\r\n\tnextUntil: function( elem, i, until ) {\r\n\t\treturn jQuery.dir( elem, \"nextSibling\", until );\r\n\t},\r\n\tprevUntil: function( elem, i, until ) {\r\n\t\treturn jQuery.dir( elem, \"previousSibling\", until );\r\n\t},\r\n\tsiblings: function( elem ) {\r\n\t\treturn jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );\r\n\t},\r\n\tchildren: function( elem ) {\r\n\t\treturn jQuery.sibling( elem.firstChild );\r\n\t},\r\n\tcontents: function( elem ) {\r\n\t\treturn jQuery.nodeName( elem, \"iframe\" ) ?\r\n\t\t\telem.contentDocument || elem.contentWindow.document :\r\n\t\t\tjQuery.merge( [], elem.childNodes );\r\n\t}\r\n}, function( name, fn ) {\r\n\tjQuery.fn[ name ] = function( until, selector ) {\r\n\t\tvar ret = jQuery.map( this, fn, until );\r\n\r\n\t\tif ( !runtil.test( name ) ) {\r\n\t\t\tselector = until;\r\n\t\t}\r\n\r\n\t\tif ( selector && typeof selector === \"string\" ) {\r\n\t\t\tret = jQuery.filter( selector, ret );\r\n\t\t}\r\n\r\n\t\tret = this.length > 1 && !guaranteedUnique[ name ] ? jQuery.unique( ret ) : ret;\r\n\r\n\t\tif ( this.length > 1 && rparentsprev.test( name ) ) {\r\n\t\t\tret = ret.reverse();\r\n\t\t}\r\n\r\n\t\treturn this.pushStack( ret, name, core_slice.call( arguments ).join(\",\") );\r\n\t};\r\n});\r\n\r\njQuery.extend({\r\n\tfilter: function( expr, elems, not ) {\r\n\t\tif ( not ) {\r\n\t\t\texpr = \":not(\" + expr + \")\";\r\n\t\t}\r\n\r\n\t\treturn elems.length === 1 ?\r\n\t\t\tjQuery.find.matchesSelector(elems[0], expr) ? [ elems[0] ] : [] :\r\n\t\t\tjQuery.find.matches(expr, elems);\r\n\t},\r\n\r\n\tdir: function( elem, dir, until ) {\r\n\t\tvar matched = [],\r\n\t\t\tcur = elem[ dir ];\r\n\r\n\t\twhile ( cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery( cur ).is( until )) ) {\r\n\t\t\tif ( cur.nodeType === 1 ) {\r\n\t\t\t\tmatched.push( cur );\r\n\t\t\t}\r\n\t\t\tcur = cur[dir];\r\n\t\t}\r\n\t\treturn matched;\r\n\t},\r\n\r\n\tsibling: function( n, elem ) {\r\n\t\tvar r = [];\r\n\r\n\t\tfor ( ; n; n = n.nextSibling ) {\r\n\t\t\tif ( n.nodeType === 1 && n !== elem ) {\r\n\t\t\t\tr.push( n );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn r;\r\n\t}\r\n});\r\n\r\n// Implement the identical functionality for filter and not\r\nfunction winnow( elements, qualifier, keep ) {\r\n\r\n\t// Can't pass null or undefined to indexOf in Firefox 4\r\n\t// Set to 0 to skip string check\r\n\tqualifier = qualifier || 0;\r\n\r\n\tif ( jQuery.isFunction( qualifier ) ) {\r\n\t\treturn jQuery.grep(elements, function( elem, i ) {\r\n\t\t\tvar retVal = !!qualifier.call( elem, i, elem );\r\n\t\t\treturn retVal === keep;\r\n\t\t});\r\n\r\n\t} else if ( qualifier.nodeType ) {\r\n\t\treturn jQuery.grep(elements, function( elem, i ) {\r\n\t\t\treturn ( elem === qualifier ) === keep;\r\n\t\t});\r\n\r\n\t} else if ( typeof qualifier === \"string\" ) {\r\n\t\tvar filtered = jQuery.grep(elements, function( elem ) {\r\n\t\t\treturn elem.nodeType === 1;\r\n\t\t});\r\n\r\n\t\tif ( isSimple.test( qualifier ) ) {\r\n\t\t\treturn jQuery.filter(qualifier, filtered, !keep);\r\n\t\t} else {\r\n\t\t\tqualifier = jQuery.filter( qualifier, filtered );\r\n\t\t}\r\n\t}\r\n\r\n\treturn jQuery.grep(elements, function( elem, i ) {\r\n\t\treturn ( jQuery.inArray( elem, qualifier ) >= 0 ) === keep;\r\n\t});\r\n}\r\nfunction createSafeFragment( document ) {\r\n\tvar list = nodeNames.split( \"|\" ),\r\n\tsafeFrag = document.createDocumentFragment();\r\n\r\n\tif ( safeFrag.createElement ) {\r\n\t\twhile ( list.length ) {\r\n\t\t\tsafeFrag.createElement(\r\n\t\t\t\tlist.pop()\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\treturn safeFrag;\r\n}\r\n\r\nvar nodeNames = \"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|\" +\r\n\t\t\"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",\r\n\trinlinejQuery = / jQuery\\d+=\"(?:null|\\d+)\"/g,\r\n\trleadingWhitespace = /^\\s+/,\r\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\r\n\trtagName = /<([\\w:]+)/,\r\n\trtbody = /<tbody/i,\r\n\trhtml = /<|&#?\\w+;/,\r\n\trnoInnerhtml = /<(?:script|style|link)/i,\r\n\trnocache = /<(?:script|object|embed|option|style)/i,\r\n\trnoshimcache = new RegExp(\"<(?:\" + nodeNames + \")[\\\\s/>]\", \"i\"),\r\n\trcheckableType = /^(?:checkbox|radio)$/,\r\n\t// checked=\"checked\" or checked\r\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\r\n\trscriptType = /\\/(java|ecma)script/i,\r\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|\\-\\-)|[\\]\\-]{2}>\\s*$/g,\r\n\twrapMap = {\r\n\t\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\r\n\t\tlegend: [ 1, \"<fieldset>\", \"</fieldset>\" ],\r\n\t\tthead: [ 1, \"<table>\", \"</table>\" ],\r\n\t\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\r\n\t\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\r\n\t\tcol: [ 2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\" ],\r\n\t\tarea: [ 1, \"<map>\", \"</map>\" ],\r\n\t\t_default: [ 0, \"\", \"\" ]\r\n\t},\r\n\tsafeFragment = createSafeFragment( document ),\r\n\tfragmentDiv = safeFragment.appendChild( document.createElement(\"div\") );\r\n\r\nwrapMap.optgroup = wrapMap.option;\r\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\r\nwrapMap.th = wrapMap.td;\r\n\r\n// IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,\r\n// unless wrapped in a div with non-breaking characters in front of it.\r\nif ( !jQuery.support.htmlSerialize ) {\r\n\twrapMap._default = [ 1, \"X<div>\", \"</div>\" ];\r\n}\r\n\r\njQuery.fn.extend({\r\n\ttext: function( value ) {\r\n\t\treturn jQuery.access( this, function( value ) {\r\n\t\t\treturn value === undefined ?\r\n\t\t\t\tjQuery.text( this ) :\r\n\t\t\t\tthis.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );\r\n\t\t}, null, value, arguments.length );\r\n\t},\r\n\r\n\twrapAll: function( html ) {\r\n\t\tif ( jQuery.isFunction( html ) ) {\r\n\t\t\treturn this.each(function(i) {\r\n\t\t\t\tjQuery(this).wrapAll( html.call(this, i) );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( this[0] ) {\r\n\t\t\t// The elements to wrap the target around\r\n\t\t\tvar wrap = jQuery( html, this[0].ownerDocument ).eq(0).clone(true);\r\n\r\n\t\t\tif ( this[0].parentNode ) {\r\n\t\t\t\twrap.insertBefore( this[0] );\r\n\t\t\t}\r\n\r\n\t\t\twrap.map(function() {\r\n\t\t\t\tvar elem = this;\r\n\r\n\t\t\t\twhile ( elem.firstChild && elem.firstChild.nodeType === 1 ) {\r\n\t\t\t\t\telem = elem.firstChild;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn elem;\r\n\t\t\t}).append( this );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\twrapInner: function( html ) {\r\n\t\tif ( jQuery.isFunction( html ) ) {\r\n\t\t\treturn this.each(function(i) {\r\n\t\t\t\tjQuery(this).wrapInner( html.call(this, i) );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar self = jQuery( this ),\r\n\t\t\t\tcontents = self.contents();\r\n\r\n\t\t\tif ( contents.length ) {\r\n\t\t\t\tcontents.wrapAll( html );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.append( html );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\twrap: function( html ) {\r\n\t\tvar isFunction = jQuery.isFunction( html );\r\n\r\n\t\treturn this.each(function(i) {\r\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );\r\n\t\t});\r\n\t},\r\n\r\n\tunwrap: function() {\r\n\t\treturn this.parent().each(function() {\r\n\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\r\n\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\r\n\t\t\t}\r\n\t\t}).end();\r\n\t},\r\n\r\n\tappend: function() {\r\n\t\treturn this.domManip(arguments, true, function( elem ) {\r\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 ) {\r\n\t\t\t\tthis.appendChild( elem );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tprepend: function() {\r\n\t\treturn this.domManip(arguments, true, function( elem ) {\r\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 ) {\r\n\t\t\t\tthis.insertBefore( elem, this.firstChild );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tbefore: function() {\r\n\t\tif ( !isDisconnected( this[0] ) ) {\r\n\t\t\treturn this.domManip(arguments, false, function( elem ) {\r\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( arguments.length ) {\r\n\t\t\tvar set = jQuery.clean( arguments );\r\n\t\t\treturn this.pushStack( jQuery.merge( set, this ), \"before\", this.selector );\r\n\t\t}\r\n\t},\r\n\r\n\tafter: function() {\r\n\t\tif ( !isDisconnected( this[0] ) ) {\r\n\t\t\treturn this.domManip(arguments, false, function( elem ) {\r\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( arguments.length ) {\r\n\t\t\tvar set = jQuery.clean( arguments );\r\n\t\t\treturn this.pushStack( jQuery.merge( this, set ), \"after\", this.selector );\r\n\t\t}\r\n\t},\r\n\r\n\t// keepData is for internal use only--do not document\r\n\tremove: function( selector, keepData ) {\r\n\t\tvar elem,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\r\n\t\t\tif ( !selector || jQuery.filter( selector, [ elem ] ).length ) {\r\n\t\t\t\tif ( !keepData && elem.nodeType === 1 ) {\r\n\t\t\t\t\tjQuery.cleanData( elem.getElementsByTagName(\"*\") );\r\n\t\t\t\t\tjQuery.cleanData( [ elem ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( elem.parentNode ) {\r\n\t\t\t\t\telem.parentNode.removeChild( elem );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tempty: function() {\r\n\t\tvar elem,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\r\n\t\t\t// Remove element nodes and prevent memory leaks\r\n\t\t\tif ( elem.nodeType === 1 ) {\r\n\t\t\t\tjQuery.cleanData( elem.getElementsByTagName(\"*\") );\r\n\t\t\t}\r\n\r\n\t\t\t// Remove any remaining nodes\r\n\t\t\twhile ( elem.firstChild ) {\r\n\t\t\t\telem.removeChild( elem.firstChild );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\r\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\r\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\r\n\r\n\t\treturn this.map( function () {\r\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\r\n\t\t});\r\n\t},\r\n\r\n\thtml: function( value ) {\r\n\t\treturn jQuery.access( this, function( value ) {\r\n\t\t\tvar elem = this[0] || {},\r\n\t\t\t\ti = 0,\r\n\t\t\t\tl = this.length;\r\n\r\n\t\t\tif ( value === undefined ) {\r\n\t\t\t\treturn elem.nodeType === 1 ?\r\n\t\t\t\t\telem.innerHTML.replace( rinlinejQuery, \"\" ) :\r\n\t\t\t\t\tundefined;\r\n\t\t\t}\r\n\r\n\t\t\t// See if we can take a shortcut and just use innerHTML\r\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\r\n\t\t\t\t( jQuery.support.htmlSerialize || !rnoshimcache.test( value )  ) &&\r\n\t\t\t\t( jQuery.support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&\r\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [\"\", \"\"] )[1].toLowerCase() ] ) {\r\n\r\n\t\t\t\tvalue = value.replace( rxhtmlTag, \"<$1></$2>\" );\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfor (; i < l; i++ ) {\r\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\r\n\t\t\t\t\t\telem = this[i] || {};\r\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\r\n\t\t\t\t\t\t\tjQuery.cleanData( elem.getElementsByTagName( \"*\" ) );\r\n\t\t\t\t\t\t\telem.innerHTML = value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telem = 0;\r\n\r\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\r\n\t\t\t\t} catch(e) {}\r\n\t\t\t}\r\n\r\n\t\t\tif ( elem ) {\r\n\t\t\t\tthis.empty().append( value );\r\n\t\t\t}\r\n\t\t}, null, value, arguments.length );\r\n\t},\r\n\r\n\treplaceWith: function( value ) {\r\n\t\tif ( !isDisconnected( this[0] ) ) {\r\n\t\t\t// Make sure that the elements are removed from the DOM before they are inserted\r\n\t\t\t// this can help fix replacing a parent with child elements\r\n\t\t\tif ( jQuery.isFunction( value ) ) {\r\n\t\t\t\treturn this.each(function(i) {\r\n\t\t\t\t\tvar self = jQuery(this), old = self.html();\r\n\t\t\t\t\tself.replaceWith( value.call( this, i, old ) );\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif ( typeof value !== \"string\" ) {\r\n\t\t\t\tvalue = jQuery( value ).detach();\r\n\t\t\t}\r\n\r\n\t\t\treturn this.each(function() {\r\n\t\t\t\tvar next = this.nextSibling,\r\n\t\t\t\t\tparent = this.parentNode;\r\n\r\n\t\t\t\tjQuery( this ).remove();\r\n\r\n\t\t\t\tif ( next ) {\r\n\t\t\t\t\tjQuery(next).before( value );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery(parent).append( value );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.length ?\r\n\t\t\tthis.pushStack( jQuery(jQuery.isFunction(value) ? value() : value), \"replaceWith\", value ) :\r\n\t\t\tthis;\r\n\t},\r\n\r\n\tdetach: function( selector ) {\r\n\t\treturn this.remove( selector, true );\r\n\t},\r\n\r\n\tdomManip: function( args, table, callback ) {\r\n\r\n\t\t// Flatten any nested arrays\r\n\t\targs = [].concat.apply( [], args );\r\n\r\n\t\tvar results, first, fragment, iNoClone,\r\n\t\t\ti = 0,\r\n\t\t\tvalue = args[0],\r\n\t\t\tscripts = [],\r\n\t\t\tl = this.length;\r\n\r\n\t\t// We can't cloneNode fragments that contain checked, in WebKit\r\n\t\tif ( !jQuery.support.checkClone && l > 1 && typeof value === \"string\" && rchecked.test( value ) ) {\r\n\t\t\treturn this.each(function() {\r\n\t\t\t\tjQuery(this).domManip( args, table, callback );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( jQuery.isFunction(value) ) {\r\n\t\t\treturn this.each(function(i) {\r\n\t\t\t\tvar self = jQuery(this);\r\n\t\t\t\targs[0] = value.call( this, i, table ? self.html() : undefined );\r\n\t\t\t\tself.domManip( args, table, callback );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( this[0] ) {\r\n\t\t\tresults = jQuery.buildFragment( args, this, scripts );\r\n\t\t\tfragment = results.fragment;\r\n\t\t\tfirst = fragment.firstChild;\r\n\r\n\t\t\tif ( fragment.childNodes.length === 1 ) {\r\n\t\t\t\tfragment = first;\r\n\t\t\t}\r\n\r\n\t\t\tif ( first ) {\r\n\t\t\t\ttable = table && jQuery.nodeName( first, \"tr\" );\r\n\r\n\t\t\t\t// Use the original fragment for the last item instead of the first because it can end up\r\n\t\t\t\t// being emptied incorrectly in certain situations (#8070).\r\n\t\t\t\t// Fragments from the fragment cache must always be cloned and never used in place.\r\n\t\t\t\tfor ( iNoClone = results.cacheable || l - 1; i < l; i++ ) {\r\n\t\t\t\t\tcallback.call(\r\n\t\t\t\t\t\ttable && jQuery.nodeName( this[i], \"table\" ) ?\r\n\t\t\t\t\t\t\tfindOrAppend( this[i], \"tbody\" ) :\r\n\t\t\t\t\t\t\tthis[i],\r\n\t\t\t\t\t\ti === iNoClone ?\r\n\t\t\t\t\t\t\tfragment :\r\n\t\t\t\t\t\t\tjQuery.clone( fragment, true, true )\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Fix #11809: Avoid leaking memory\r\n\t\t\tfragment = first = null;\r\n\r\n\t\t\tif ( scripts.length ) {\r\n\t\t\t\tjQuery.each( scripts, function( i, elem ) {\r\n\t\t\t\t\tif ( elem.src ) {\r\n\t\t\t\t\t\tif ( jQuery.ajax ) {\r\n\t\t\t\t\t\t\tjQuery.ajax({\r\n\t\t\t\t\t\t\t\turl: elem.src,\r\n\t\t\t\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\t\t\t\tdataType: \"script\",\r\n\t\t\t\t\t\t\t\tasync: false,\r\n\t\t\t\t\t\t\t\tglobal: false,\r\n\t\t\t\t\t\t\t\t\"throws\": true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjQuery.error(\"no ajax\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery.globalEval( ( elem.text || elem.textContent || elem.innerHTML || \"\" ).replace( rcleanScript, \"\" ) );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( elem.parentNode ) {\r\n\t\t\t\t\t\telem.parentNode.removeChild( elem );\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\nfunction findOrAppend( elem, tag ) {\r\n\treturn elem.getElementsByTagName( tag )[0] || elem.appendChild( elem.ownerDocument.createElement( tag ) );\r\n}\r\n\r\nfunction cloneCopyEvent( src, dest ) {\r\n\r\n\tif ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar type, i, l,\r\n\t\toldData = jQuery._data( src ),\r\n\t\tcurData = jQuery._data( dest, oldData ),\r\n\t\tevents = oldData.events;\r\n\r\n\tif ( events ) {\r\n\t\tdelete curData.handle;\r\n\t\tcurData.events = {};\r\n\r\n\t\tfor ( type in events ) {\r\n\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\r\n\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// make the cloned public data object a copy from the original\r\n\tif ( curData.data ) {\r\n\t\tcurData.data = jQuery.extend( {}, curData.data );\r\n\t}\r\n}\r\n\r\nfunction cloneFixAttributes( src, dest ) {\r\n\tvar nodeName;\r\n\r\n\t// We do not need to do anything for non-Elements\r\n\tif ( dest.nodeType !== 1 ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// clearAttributes removes the attributes, which we don't want,\r\n\t// but also removes the attachEvent events, which we *do* want\r\n\tif ( dest.clearAttributes ) {\r\n\t\tdest.clearAttributes();\r\n\t}\r\n\r\n\t// mergeAttributes, in contrast, only merges back on the\r\n\t// original attributes, not the events\r\n\tif ( dest.mergeAttributes ) {\r\n\t\tdest.mergeAttributes( src );\r\n\t}\r\n\r\n\tnodeName = dest.nodeName.toLowerCase();\r\n\r\n\tif ( nodeName === \"object\" ) {\r\n\t\t// IE6-10 improperly clones children of object elements using classid.\r\n\t\t// IE10 throws NoModificationAllowedError if parent is null, #12132.\r\n\t\tif ( dest.parentNode ) {\r\n\t\t\tdest.outerHTML = src.outerHTML;\r\n\t\t}\r\n\r\n\t\t// This path appears unavoidable for IE9. When cloning an object\r\n\t\t// element in IE9, the outerHTML strategy above is not sufficient.\r\n\t\t// If the src has innerHTML and the destination does not,\r\n\t\t// copy the src.innerHTML into the dest.innerHTML. #10324\r\n\t\tif ( jQuery.support.html5Clone && (src.innerHTML && !jQuery.trim(dest.innerHTML)) ) {\r\n\t\t\tdest.innerHTML = src.innerHTML;\r\n\t\t}\r\n\r\n\t} else if ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\r\n\t\t// IE6-8 fails to persist the checked state of a cloned checkbox\r\n\t\t// or radio button. Worse, IE6-7 fail to give the cloned element\r\n\t\t// a checked appearance if the defaultChecked value isn't also set\r\n\r\n\t\tdest.defaultChecked = dest.checked = src.checked;\r\n\r\n\t\t// IE6-7 get confused and end up setting the value of a cloned\r\n\t\t// checkbox/radio button to an empty string instead of \"on\"\r\n\t\tif ( dest.value !== src.value ) {\r\n\t\t\tdest.value = src.value;\r\n\t\t}\r\n\r\n\t// IE6-8 fails to return the selected option to the default selected\r\n\t// state when cloning options\r\n\t} else if ( nodeName === \"option\" ) {\r\n\t\tdest.selected = src.defaultSelected;\r\n\r\n\t// IE6-8 fails to set the defaultValue to the correct value when\r\n\t// cloning other types of input fields\r\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\r\n\t\tdest.defaultValue = src.defaultValue;\r\n\r\n\t// IE blanks contents when cloning scripts\r\n\t} else if ( nodeName === \"script\" && dest.text !== src.text ) {\r\n\t\tdest.text = src.text;\r\n\t}\r\n\r\n\t// Event data gets referenced instead of copied if the expando\r\n\t// gets copied too\r\n\tdest.removeAttribute( jQuery.expando );\r\n}\r\n\r\njQuery.buildFragment = function( args, context, scripts ) {\r\n\tvar fragment, cacheable, cachehit,\r\n\t\tfirst = args[ 0 ];\r\n\r\n\t// Set context from what may come in as undefined or a jQuery collection or a node\r\n\t// Updated to fix #12266 where accessing context[0] could throw an exception in IE9/10 &\r\n\t// also doubles as fix for #8950 where plain objects caused createDocumentFragment exception\r\n\tcontext = context || document;\r\n\tcontext = !context.nodeType && context[0] || context;\r\n\tcontext = context.ownerDocument || context;\r\n\r\n\t// Only cache \"small\" (1/2 KB) HTML strings that are associated with the main document\r\n\t// Cloning options loses the selected state, so don't cache them\r\n\t// IE 6 doesn't like it when you put <object> or <embed> elements in a fragment\r\n\t// Also, WebKit does not clone 'checked' attributes on cloneNode, so don't cache\r\n\t// Lastly, IE6,7,8 will not correctly reuse cached fragments that were created from unknown elems #10501\r\n\tif ( args.length === 1 && typeof first === \"string\" && first.length < 512 && context === document &&\r\n\t\tfirst.charAt(0) === \"<\" && !rnocache.test( first ) &&\r\n\t\t(jQuery.support.checkClone || !rchecked.test( first )) &&\r\n\t\t(jQuery.support.html5Clone || !rnoshimcache.test( first )) ) {\r\n\r\n\t\t// Mark cacheable and look for a hit\r\n\t\tcacheable = true;\r\n\t\tfragment = jQuery.fragments[ first ];\r\n\t\tcachehit = fragment !== undefined;\r\n\t}\r\n\r\n\tif ( !fragment ) {\r\n\t\tfragment = context.createDocumentFragment();\r\n\t\tjQuery.clean( args, context, fragment, scripts );\r\n\r\n\t\t// Update the cache, but only store false\r\n\t\t// unless this is a second parsing of the same content\r\n\t\tif ( cacheable ) {\r\n\t\t\tjQuery.fragments[ first ] = cachehit && fragment;\r\n\t\t}\r\n\t}\r\n\r\n\treturn { fragment: fragment, cacheable: cacheable };\r\n};\r\n\r\njQuery.fragments = {};\r\n\r\njQuery.each({\r\n\tappendTo: \"append\",\r\n\tprependTo: \"prepend\",\r\n\tinsertBefore: \"before\",\r\n\tinsertAfter: \"after\",\r\n\treplaceAll: \"replaceWith\"\r\n}, function( name, original ) {\r\n\tjQuery.fn[ name ] = function( selector ) {\r\n\t\tvar elems,\r\n\t\t\ti = 0,\r\n\t\t\tret = [],\r\n\t\t\tinsert = jQuery( selector ),\r\n\t\t\tl = insert.length,\r\n\t\t\tparent = this.length === 1 && this[0].parentNode;\r\n\r\n\t\tif ( (parent == null || parent && parent.nodeType === 11 && parent.childNodes.length === 1) && l === 1 ) {\r\n\t\t\tinsert[ original ]( this[0] );\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\tfor ( ; i < l; i++ ) {\r\n\t\t\t\telems = ( i > 0 ? this.clone(true) : this ).get();\r\n\t\t\t\tjQuery( insert[i] )[ original ]( elems );\r\n\t\t\t\tret = ret.concat( elems );\r\n\t\t\t}\r\n\r\n\t\t\treturn this.pushStack( ret, name, insert.selector );\r\n\t\t}\r\n\t};\r\n});\r\n\r\nfunction getAll( elem ) {\r\n\tif ( typeof elem.getElementsByTagName !== \"undefined\" ) {\r\n\t\treturn elem.getElementsByTagName( \"*\" );\r\n\r\n\t} else if ( typeof elem.querySelectorAll !== \"undefined\" ) {\r\n\t\treturn elem.querySelectorAll( \"*\" );\r\n\r\n\t} else {\r\n\t\treturn [];\r\n\t}\r\n}\r\n\r\n// Used in clean, fixes the defaultChecked property\r\nfunction fixDefaultChecked( elem ) {\r\n\tif ( rcheckableType.test( elem.type ) ) {\r\n\t\telem.defaultChecked = elem.checked;\r\n\t}\r\n}\r\n\r\njQuery.extend({\r\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\r\n\t\tvar srcElements,\r\n\t\t\tdestElements,\r\n\t\t\ti,\r\n\t\t\tclone;\r\n\r\n\t\tif ( jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test( \"<\" + elem.nodeName + \">\" ) ) {\r\n\t\t\tclone = elem.cloneNode( true );\r\n\r\n\t\t// IE<=8 does not properly clone detached, unknown element nodes\r\n\t\t} else {\r\n\t\t\tfragmentDiv.innerHTML = elem.outerHTML;\r\n\t\t\tfragmentDiv.removeChild( clone = fragmentDiv.firstChild );\r\n\t\t}\r\n\r\n\t\tif ( (!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) &&\r\n\t\t\t\t(elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem) ) {\r\n\t\t\t// IE copies events bound via attachEvent when using cloneNode.\r\n\t\t\t// Calling detachEvent on the clone will also remove the events\r\n\t\t\t// from the original. In order to get around this, we use some\r\n\t\t\t// proprietary methods to clear the events. Thanks to MooTools\r\n\t\t\t// guys for this hotness.\r\n\r\n\t\t\tcloneFixAttributes( elem, clone );\r\n\r\n\t\t\t// Using Sizzle here is crazy slow, so we use getElementsByTagName instead\r\n\t\t\tsrcElements = getAll( elem );\r\n\t\t\tdestElements = getAll( clone );\r\n\r\n\t\t\t// Weird iteration because IE will replace the length property\r\n\t\t\t// with an element if you are cloning the body and one of the\r\n\t\t\t// elements on the page has a name or id of \"length\"\r\n\t\t\tfor ( i = 0; srcElements[i]; ++i ) {\r\n\t\t\t\t// Ensure that the destination node is not null; Fixes #9587\r\n\t\t\t\tif ( destElements[i] ) {\r\n\t\t\t\t\tcloneFixAttributes( srcElements[i], destElements[i] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Copy the events from the original to the clone\r\n\t\tif ( dataAndEvents ) {\r\n\t\t\tcloneCopyEvent( elem, clone );\r\n\r\n\t\t\tif ( deepDataAndEvents ) {\r\n\t\t\t\tsrcElements = getAll( elem );\r\n\t\t\t\tdestElements = getAll( clone );\r\n\r\n\t\t\t\tfor ( i = 0; srcElements[i]; ++i ) {\r\n\t\t\t\t\tcloneCopyEvent( srcElements[i], destElements[i] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsrcElements = destElements = null;\r\n\r\n\t\t// Return the cloned set\r\n\t\treturn clone;\r\n\t},\r\n\r\n\tclean: function( elems, context, fragment, scripts ) {\r\n\t\tvar i, j, elem, tag, wrap, depth, div, hasBody, tbody, len, handleScript, jsTags,\r\n\t\t\tsafe = context === document && safeFragment,\r\n\t\t\tret = [];\r\n\r\n\t\t// Ensure that context is a document\r\n\t\tif ( !context || typeof context.createDocumentFragment === \"undefined\" ) {\r\n\t\t\tcontext = document;\r\n\t\t}\r\n\r\n\t\t// Use the already-created safe fragment if context permits\r\n\t\tfor ( i = 0; (elem = elems[i]) != null; i++ ) {\r\n\t\t\tif ( typeof elem === \"number\" ) {\r\n\t\t\t\telem += \"\";\r\n\t\t\t}\r\n\r\n\t\t\tif ( !elem ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Convert html string into DOM nodes\r\n\t\t\tif ( typeof elem === \"string\" ) {\r\n\t\t\t\tif ( !rhtml.test( elem ) ) {\r\n\t\t\t\t\telem = context.createTextNode( elem );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Ensure a safe container in which to render the html\r\n\t\t\t\t\tsafe = safe || createSafeFragment( context );\r\n\t\t\t\t\tdiv = context.createElement(\"div\");\r\n\t\t\t\t\tsafe.appendChild( div );\r\n\r\n\t\t\t\t\t// Fix \"XHTML\"-style tags in all browsers\r\n\t\t\t\t\telem = elem.replace(rxhtmlTag, \"<$1></$2>\");\r\n\r\n\t\t\t\t\t// Go to html and back, then peel off extra wrappers\r\n\t\t\t\t\ttag = ( rtagName.exec( elem ) || [\"\", \"\"] )[1].toLowerCase();\r\n\t\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\r\n\t\t\t\t\tdepth = wrap[0];\r\n\t\t\t\t\tdiv.innerHTML = wrap[1] + elem + wrap[2];\r\n\r\n\t\t\t\t\t// Move to the right depth\r\n\t\t\t\t\twhile ( depth-- ) {\r\n\t\t\t\t\t\tdiv = div.lastChild;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Remove IE's autoinserted <tbody> from table fragments\r\n\t\t\t\t\tif ( !jQuery.support.tbody ) {\r\n\r\n\t\t\t\t\t\t// String was a <table>, *may* have spurious <tbody>\r\n\t\t\t\t\t\thasBody = rtbody.test(elem);\r\n\t\t\t\t\t\t\ttbody = tag === \"table\" && !hasBody ?\r\n\t\t\t\t\t\t\t\tdiv.firstChild && div.firstChild.childNodes :\r\n\r\n\t\t\t\t\t\t\t\t// String was a bare <thead> or <tfoot>\r\n\t\t\t\t\t\t\t\twrap[1] === \"<table>\" && !hasBody ?\r\n\t\t\t\t\t\t\t\t\tdiv.childNodes :\r\n\t\t\t\t\t\t\t\t\t[];\r\n\r\n\t\t\t\t\t\tfor ( j = tbody.length - 1; j >= 0 ; --j ) {\r\n\t\t\t\t\t\t\tif ( jQuery.nodeName( tbody[ j ], \"tbody\" ) && !tbody[ j ].childNodes.length ) {\r\n\t\t\t\t\t\t\t\ttbody[ j ].parentNode.removeChild( tbody[ j ] );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// IE completely kills leading whitespace when innerHTML is used\r\n\t\t\t\t\tif ( !jQuery.support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {\r\n\t\t\t\t\t\tdiv.insertBefore( context.createTextNode( rleadingWhitespace.exec(elem)[0] ), div.firstChild );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telem = div.childNodes;\r\n\r\n\t\t\t\t\t// Take out of fragment container (we need a fresh div each time)\r\n\t\t\t\t\tdiv.parentNode.removeChild( div );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( elem.nodeType ) {\r\n\t\t\t\tret.push( elem );\r\n\t\t\t} else {\r\n\t\t\t\tjQuery.merge( ret, elem );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Fix #11356: Clear elements from safeFragment\r\n\t\tif ( div ) {\r\n\t\t\telem = div = safe = null;\r\n\t\t}\r\n\r\n\t\t// Reset defaultChecked for any radios and checkboxes\r\n\t\t// about to be appended to the DOM in IE 6/7 (#8060)\r\n\t\tif ( !jQuery.support.appendChecked ) {\r\n\t\t\tfor ( i = 0; (elem = ret[i]) != null; i++ ) {\r\n\t\t\t\tif ( jQuery.nodeName( elem, \"input\" ) ) {\r\n\t\t\t\t\tfixDefaultChecked( elem );\r\n\t\t\t\t} else if ( typeof elem.getElementsByTagName !== \"undefined\" ) {\r\n\t\t\t\t\tjQuery.grep( elem.getElementsByTagName(\"input\"), fixDefaultChecked );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Append elements to a provided document fragment\r\n\t\tif ( fragment ) {\r\n\t\t\t// Special handling of each script element\r\n\t\t\thandleScript = function( elem ) {\r\n\t\t\t\t// Check if we consider it executable\r\n\t\t\t\tif ( !elem.type || rscriptType.test( elem.type ) ) {\r\n\t\t\t\t\t// Detach the script and store it in the scripts array (if provided) or the fragment\r\n\t\t\t\t\t// Return truthy to indicate that it has been handled\r\n\t\t\t\t\treturn scripts ?\r\n\t\t\t\t\t\tscripts.push( elem.parentNode ? elem.parentNode.removeChild( elem ) : elem ) :\r\n\t\t\t\t\t\tfragment.appendChild( elem );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( i = 0; (elem = ret[i]) != null; i++ ) {\r\n\t\t\t\t// Check if we're done after handling an executable script\r\n\t\t\t\tif ( !( jQuery.nodeName( elem, \"script\" ) && handleScript( elem ) ) ) {\r\n\t\t\t\t\t// Append to fragment and handle embedded scripts\r\n\t\t\t\t\tfragment.appendChild( elem );\r\n\t\t\t\t\tif ( typeof elem.getElementsByTagName !== \"undefined\" ) {\r\n\t\t\t\t\t\t// handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration\r\n\t\t\t\t\t\tjsTags = jQuery.grep( jQuery.merge( [], elem.getElementsByTagName(\"script\") ), handleScript );\r\n\r\n\t\t\t\t\t\t// Splice the scripts into ret after their former ancestor and advance our index beyond them\r\n\t\t\t\t\t\tret.splice.apply( ret, [i + 1, 0].concat( jsTags ) );\r\n\t\t\t\t\t\ti += jsTags.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\tcleanData: function( elems, /* internal */ acceptData ) {\r\n\t\tvar data, id, elem, type,\r\n\t\t\ti = 0,\r\n\t\t\tinternalKey = jQuery.expando,\r\n\t\t\tcache = jQuery.cache,\r\n\t\t\tdeleteExpando = jQuery.support.deleteExpando,\r\n\t\t\tspecial = jQuery.event.special;\r\n\r\n\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\r\n\r\n\t\t\tif ( acceptData || jQuery.acceptData( elem ) ) {\r\n\r\n\t\t\t\tid = elem[ internalKey ];\r\n\t\t\t\tdata = id && cache[ id ];\r\n\r\n\t\t\t\tif ( data ) {\r\n\t\t\t\t\tif ( data.events ) {\r\n\t\t\t\t\t\tfor ( type in data.events ) {\r\n\t\t\t\t\t\t\tif ( special[ type ] ) {\r\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\r\n\r\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Remove cache only if it was not already removed by jQuery.event.remove\r\n\t\t\t\t\tif ( cache[ id ] ) {\r\n\r\n\t\t\t\t\t\tdelete cache[ id ];\r\n\r\n\t\t\t\t\t\t// IE does not allow us to delete expando properties from nodes,\r\n\t\t\t\t\t\t// nor does it have a removeAttribute function on Document nodes;\r\n\t\t\t\t\t\t// we must handle all of these cases\r\n\t\t\t\t\t\tif ( deleteExpando ) {\r\n\t\t\t\t\t\t\tdelete elem[ internalKey ];\r\n\r\n\t\t\t\t\t\t} else if ( elem.removeAttribute ) {\r\n\t\t\t\t\t\t\telem.removeAttribute( internalKey );\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telem[ internalKey ] = null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tjQuery.deletedIds.push( id );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n// Limit scope pollution from any deprecated API\r\n(function() {\r\n\r\nvar matched, browser;\r\n\r\n// Use of jQuery.browser is frowned upon.\r\n// More details: http://api.jquery.com/jQuery.browser\r\n// jQuery.uaMatch maintained for back-compat\r\njQuery.uaMatch = function( ua ) {\r\n\tua = ua.toLowerCase();\r\n\r\n\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(msie) ([\\w.]+)/.exec( ua ) ||\r\n\t\tua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\r\n\t\t[];\r\n\r\n\treturn {\r\n\t\tbrowser: match[ 1 ] || \"\",\r\n\t\tversion: match[ 2 ] || \"0\"\r\n\t};\r\n};\r\n\r\nmatched = jQuery.uaMatch( navigator.userAgent );\r\nbrowser = {};\r\n\r\nif ( matched.browser ) {\r\n\tbrowser[ matched.browser ] = true;\r\n\tbrowser.version = matched.version;\r\n}\r\n\r\n// Chrome is Webkit, but Webkit is also Safari.\r\nif ( browser.chrome ) {\r\n\tbrowser.webkit = true;\r\n} else if ( browser.webkit ) {\r\n\tbrowser.safari = true;\r\n}\r\n\r\njQuery.browser = browser;\r\n\r\njQuery.sub = function() {\r\n\tfunction jQuerySub( selector, context ) {\r\n\t\treturn new jQuerySub.fn.init( selector, context );\r\n\t}\r\n\tjQuery.extend( true, jQuerySub, this );\r\n\tjQuerySub.superclass = this;\r\n\tjQuerySub.fn = jQuerySub.prototype = this();\r\n\tjQuerySub.fn.constructor = jQuerySub;\r\n\tjQuerySub.sub = this.sub;\r\n\tjQuerySub.fn.init = function init( selector, context ) {\r\n\t\tif ( context && context instanceof jQuery && !(context instanceof jQuerySub) ) {\r\n\t\t\tcontext = jQuerySub( context );\r\n\t\t}\r\n\r\n\t\treturn jQuery.fn.init.call( this, selector, context, rootjQuerySub );\r\n\t};\r\n\tjQuerySub.fn.init.prototype = jQuerySub.fn;\r\n\tvar rootjQuerySub = jQuerySub(document);\r\n\treturn jQuerySub;\r\n};\r\n\r\n})();\r\nvar curCSS, iframe, iframeDoc,\r\n\tralpha = /alpha\\([^)]*\\)/i,\r\n\tropacity = /opacity=([^)]*)/,\r\n\trposition = /^(top|right|bottom|left)$/,\r\n\t// swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\r\n\t// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\r\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\r\n\trmargin = /^margin/,\r\n\trnumsplit = new RegExp( \"^(\" + core_pnum + \")(.*)$\", \"i\" ),\r\n\trnumnonpx = new RegExp( \"^(\" + core_pnum + \")(?!px)[a-z%]+$\", \"i\" ),\r\n\trrelNum = new RegExp( \"^([-+])=(\" + core_pnum + \")\", \"i\" ),\r\n\telemdisplay = { BODY: \"block\" },\r\n\r\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\r\n\tcssNormalTransform = {\r\n\t\tletterSpacing: 0,\r\n\t\tfontWeight: 400\r\n\t},\r\n\r\n\tcssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ],\r\n\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ],\r\n\r\n\teventsToggle = jQuery.fn.toggle;\r\n\r\n// return a css property mapped to a potentially vendor prefixed property\r\nfunction vendorPropName( style, name ) {\r\n\r\n\t// shortcut for names that are not vendor prefixed\r\n\tif ( name in style ) {\r\n\t\treturn name;\r\n\t}\r\n\r\n\t// check for vendor prefixed names\r\n\tvar capName = name.charAt(0).toUpperCase() + name.slice(1),\r\n\t\torigName = name,\r\n\t\ti = cssPrefixes.length;\r\n\r\n\twhile ( i-- ) {\r\n\t\tname = cssPrefixes[ i ] + capName;\r\n\t\tif ( name in style ) {\r\n\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\treturn origName;\r\n}\r\n\r\nfunction isHidden( elem, el ) {\r\n\telem = el || elem;\r\n\treturn jQuery.css( elem, \"display\" ) === \"none\" || !jQuery.contains( elem.ownerDocument, elem );\r\n}\r\n\r\nfunction showHide( elements, show ) {\r\n\tvar elem, display,\r\n\t\tvalues = [],\r\n\t\tindex = 0,\r\n\t\tlength = elements.length;\r\n\r\n\tfor ( ; index < length; index++ ) {\r\n\t\telem = elements[ index ];\r\n\t\tif ( !elem.style ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tvalues[ index ] = jQuery._data( elem, \"olddisplay\" );\r\n\t\tif ( show ) {\r\n\t\t\t// Reset the inline display of this element to learn if it is\r\n\t\t\t// being hidden by cascaded rules or not\r\n\t\t\tif ( !values[ index ] && elem.style.display === \"none\" ) {\r\n\t\t\t\telem.style.display = \"\";\r\n\t\t\t}\r\n\r\n\t\t\t// Set elements which have been overridden with display: none\r\n\t\t\t// in a stylesheet to whatever the default browser style is\r\n\t\t\t// for such an element\r\n\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\r\n\t\t\t\tvalues[ index ] = jQuery._data( elem, \"olddisplay\", css_defaultDisplay(elem.nodeName) );\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdisplay = curCSS( elem, \"display\" );\r\n\r\n\t\t\tif ( !values[ index ] && display !== \"none\" ) {\r\n\t\t\t\tjQuery._data( elem, \"olddisplay\", display );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Set the display of most of the elements in a second loop\r\n\t// to avoid the constant reflow\r\n\tfor ( index = 0; index < length; index++ ) {\r\n\t\telem = elements[ index ];\r\n\t\tif ( !elem.style ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\r\n\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn elements;\r\n}\r\n\r\njQuery.fn.extend({\r\n\tcss: function( name, value ) {\r\n\t\treturn jQuery.access( this, function( elem, name, value ) {\r\n\t\t\treturn value !== undefined ?\r\n\t\t\t\tjQuery.style( elem, name, value ) :\r\n\t\t\t\tjQuery.css( elem, name );\r\n\t\t}, name, value, arguments.length > 1 );\r\n\t},\r\n\tshow: function() {\r\n\t\treturn showHide( this, true );\r\n\t},\r\n\thide: function() {\r\n\t\treturn showHide( this );\r\n\t},\r\n\ttoggle: function( state, fn2 ) {\r\n\t\tvar bool = typeof state === \"boolean\";\r\n\r\n\t\tif ( jQuery.isFunction( state ) && jQuery.isFunction( fn2 ) ) {\r\n\t\t\treturn eventsToggle.apply( this, arguments );\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tif ( bool ? state : isHidden( this ) ) {\r\n\t\t\t\tjQuery( this ).show();\r\n\t\t\t} else {\r\n\t\t\t\tjQuery( this ).hide();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\njQuery.extend({\r\n\t// Add in style property hooks for overriding the default\r\n\t// behavior of getting and setting a style property\r\n\tcssHooks: {\r\n\t\topacity: {\r\n\t\t\tget: function( elem, computed ) {\r\n\t\t\t\tif ( computed ) {\r\n\t\t\t\t\t// We should always get a number back from opacity\r\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\r\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Exclude the following css properties to add px\r\n\tcssNumber: {\r\n\t\t\"fillOpacity\": true,\r\n\t\t\"fontWeight\": true,\r\n\t\t\"lineHeight\": true,\r\n\t\t\"opacity\": true,\r\n\t\t\"orphans\": true,\r\n\t\t\"widows\": true,\r\n\t\t\"zIndex\": true,\r\n\t\t\"zoom\": true\r\n\t},\r\n\r\n\t// Add in properties whose names you wish to fix before\r\n\t// setting or getting the value\r\n\tcssProps: {\r\n\t\t// normalize float css property\r\n\t\t\"float\": jQuery.support.cssFloat ? \"cssFloat\" : \"styleFloat\"\r\n\t},\r\n\r\n\t// Get and set the style property on a DOM Node\r\n\tstyle: function( elem, name, value, extra ) {\r\n\t\t// Don't set styles on text and comment nodes\r\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Make sure that we're working with the right name\r\n\t\tvar ret, type, hooks,\r\n\t\t\torigName = jQuery.camelCase( name ),\r\n\t\t\tstyle = elem.style;\r\n\r\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );\r\n\r\n\t\t// gets hook for the prefixed version\r\n\t\t// followed by the unprefixed version\r\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\r\n\r\n\t\t// Check if we're setting a value\r\n\t\tif ( value !== undefined ) {\r\n\t\t\ttype = typeof value;\r\n\r\n\t\t\t// convert relative number strings (+= or -=) to relative numbers. #7345\r\n\t\t\tif ( type === \"string\" && (ret = rrelNum.exec( value )) ) {\r\n\t\t\t\tvalue = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );\r\n\t\t\t\t// Fixes bug #9237\r\n\t\t\t\ttype = \"number\";\r\n\t\t\t}\r\n\r\n\t\t\t// Make sure that NaN and null values aren't set. See: #7116\r\n\t\t\tif ( value == null || type === \"number\" && isNaN( value ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// If a number was passed in, add 'px' to the (except for certain CSS properties)\r\n\t\t\tif ( type === \"number\" && !jQuery.cssNumber[ origName ] ) {\r\n\t\t\t\tvalue += \"px\";\r\n\t\t\t}\r\n\r\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\r\n\t\t\tif ( !hooks || !(\"set\" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {\r\n\t\t\t\t// Wrapped to prevent IE from throwing errors when 'invalid' values are provided\r\n\t\t\t\t// Fixes bug #5509\r\n\t\t\t\ttry {\r\n\t\t\t\t\tstyle[ name ] = value;\r\n\t\t\t\t} catch(e) {}\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// If a hook was provided get the non-computed value from there\r\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\r\n\t\t\t// Otherwise just get the value from the style object\r\n\t\t\treturn style[ name ];\r\n\t\t}\r\n\t},\r\n\r\n\tcss: function( elem, name, numeric, extra ) {\r\n\t\tvar val, num, hooks,\r\n\t\t\torigName = jQuery.camelCase( name );\r\n\r\n\t\t// Make sure that we're working with the right name\r\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );\r\n\r\n\t\t// gets hook for the prefixed version\r\n\t\t// followed by the unprefixed version\r\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\r\n\r\n\t\t// If a hook was provided get the computed value from there\r\n\t\tif ( hooks && \"get\" in hooks ) {\r\n\t\t\tval = hooks.get( elem, true, extra );\r\n\t\t}\r\n\r\n\t\t// Otherwise, if a way to get the computed value exists, use that\r\n\t\tif ( val === undefined ) {\r\n\t\t\tval = curCSS( elem, name );\r\n\t\t}\r\n\r\n\t\t//convert \"normal\" to computed value\r\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\r\n\t\t\tval = cssNormalTransform[ name ];\r\n\t\t}\r\n\r\n\t\t// Return, converting to number if forced or a qualifier was provided and val looks numeric\r\n\t\tif ( numeric || extra !== undefined ) {\r\n\t\t\tnum = parseFloat( val );\r\n\t\t\treturn numeric || jQuery.isNumeric( num ) ? num || 0 : val;\r\n\t\t}\r\n\t\treturn val;\r\n\t},\r\n\r\n\t// A method for quickly swapping in/out CSS properties to get correct calculations\r\n\tswap: function( elem, options, callback ) {\r\n\t\tvar ret, name,\r\n\t\t\told = {};\r\n\r\n\t\t// Remember the old values, and insert the new ones\r\n\t\tfor ( name in options ) {\r\n\t\t\told[ name ] = elem.style[ name ];\r\n\t\t\telem.style[ name ] = options[ name ];\r\n\t\t}\r\n\r\n\t\tret = callback.call( elem );\r\n\r\n\t\t// Revert the old values\r\n\t\tfor ( name in options ) {\r\n\t\t\telem.style[ name ] = old[ name ];\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t}\r\n});\r\n\r\n// NOTE: To any future maintainer, we've window.getComputedStyle\r\n// because jsdom on node.js will break without it.\r\nif ( window.getComputedStyle ) {\r\n\tcurCSS = function( elem, name ) {\r\n\t\tvar ret, width, minWidth, maxWidth,\r\n\t\t\tcomputed = window.getComputedStyle( elem, null ),\r\n\t\t\tstyle = elem.style;\r\n\r\n\t\tif ( computed ) {\r\n\r\n\t\t\t// getPropertyValue is only needed for .css('filter') in IE9, see #12537\r\n\t\t\tret = computed.getPropertyValue( name ) || computed[ name ];\r\n\r\n\t\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\r\n\t\t\t\tret = jQuery.style( elem, name );\r\n\t\t\t}\r\n\r\n\t\t\t// A tribute to the \"awesome hack by Dean Edwards\"\r\n\t\t\t// Chrome < 17 and Safari 5.0 uses \"computed value\" instead of \"used value\" for margin-right\r\n\t\t\t// Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\r\n\t\t\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\r\n\t\t\tif ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {\r\n\t\t\t\twidth = style.width;\r\n\t\t\t\tminWidth = style.minWidth;\r\n\t\t\t\tmaxWidth = style.maxWidth;\r\n\r\n\t\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\r\n\t\t\t\tret = computed.width;\r\n\r\n\t\t\t\tstyle.width = width;\r\n\t\t\t\tstyle.minWidth = minWidth;\r\n\t\t\t\tstyle.maxWidth = maxWidth;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t};\r\n} else if ( document.documentElement.currentStyle ) {\r\n\tcurCSS = function( elem, name ) {\r\n\t\tvar left, rsLeft,\r\n\t\t\tret = elem.currentStyle && elem.currentStyle[ name ],\r\n\t\t\tstyle = elem.style;\r\n\r\n\t\t// Avoid setting ret to empty string here\r\n\t\t// so we don't default to auto\r\n\t\tif ( ret == null && style && style[ name ] ) {\r\n\t\t\tret = style[ name ];\r\n\t\t}\r\n\r\n\t\t// From the awesome hack by Dean Edwards\r\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\r\n\r\n\t\t// If we're not dealing with a regular pixel number\r\n\t\t// but a number that has a weird ending, we need to convert it to pixels\r\n\t\t// but not position css attributes, as those are proportional to the parent element instead\r\n\t\t// and we can't measure the parent instead because it might trigger a \"stacking dolls\" problem\r\n\t\tif ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {\r\n\r\n\t\t\t// Remember the original values\r\n\t\t\tleft = style.left;\r\n\t\t\trsLeft = elem.runtimeStyle && elem.runtimeStyle.left;\r\n\r\n\t\t\t// Put in the new values to get a computed value out\r\n\t\t\tif ( rsLeft ) {\r\n\t\t\t\telem.runtimeStyle.left = elem.currentStyle.left;\r\n\t\t\t}\r\n\t\t\tstyle.left = name === \"fontSize\" ? \"1em\" : ret;\r\n\t\t\tret = style.pixelLeft + \"px\";\r\n\r\n\t\t\t// Revert the changed values\r\n\t\t\tstyle.left = left;\r\n\t\t\tif ( rsLeft ) {\r\n\t\t\t\telem.runtimeStyle.left = rsLeft;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret === \"\" ? \"auto\" : ret;\r\n\t};\r\n}\r\n\r\nfunction setPositiveNumber( elem, value, subtract ) {\r\n\tvar matches = rnumsplit.exec( value );\r\n\treturn matches ?\r\n\t\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\r\n\t\t\tvalue;\r\n}\r\n\r\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox ) {\r\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\r\n\t\t// If we already have the right measurement, avoid augmentation\r\n\t\t4 :\r\n\t\t// Otherwise initialize for horizontal or vertical properties\r\n\t\tname === \"width\" ? 1 : 0,\r\n\r\n\t\tval = 0;\r\n\r\n\tfor ( ; i < 4; i += 2 ) {\r\n\t\t// both box models exclude margin, so add it if we want it\r\n\t\tif ( extra === \"margin\" ) {\r\n\t\t\t// we use jQuery.css instead of curCSS here\r\n\t\t\t// because of the reliableMarginRight CSS hook!\r\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true );\r\n\t\t}\r\n\r\n\t\t// From this point on we use curCSS for maximum performance (relevant in animations)\r\n\t\tif ( isBorderBox ) {\r\n\t\t\t// border-box includes padding, so remove it if we want content\r\n\t\t\tif ( extra === \"content\" ) {\r\n\t\t\t\tval -= parseFloat( curCSS( elem, \"padding\" + cssExpand[ i ] ) ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t// at this point, extra isn't border nor margin, so remove border\r\n\t\t\tif ( extra !== \"margin\" ) {\r\n\t\t\t\tval -= parseFloat( curCSS( elem, \"border\" + cssExpand[ i ] + \"Width\" ) ) || 0;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// at this point, extra isn't content, so add padding\r\n\t\t\tval += parseFloat( curCSS( elem, \"padding\" + cssExpand[ i ] ) ) || 0;\r\n\r\n\t\t\t// at this point, extra isn't content nor padding, so add border\r\n\t\t\tif ( extra !== \"padding\" ) {\r\n\t\t\t\tval += parseFloat( curCSS( elem, \"border\" + cssExpand[ i ] + \"Width\" ) ) || 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn val;\r\n}\r\n\r\nfunction getWidthOrHeight( elem, name, extra ) {\r\n\r\n\t// Start with offset property, which is equivalent to the border-box value\r\n\tvar val = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\r\n\t\tvalueIsBorderBox = true,\r\n\t\tisBorderBox = jQuery.support.boxSizing && jQuery.css( elem, \"boxSizing\" ) === \"border-box\";\r\n\r\n\t// some non-html elements return undefined for offsetWidth, so check for null/undefined\r\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\r\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\r\n\tif ( val <= 0 || val == null ) {\r\n\t\t// Fall back to computed then uncomputed css if necessary\r\n\t\tval = curCSS( elem, name );\r\n\t\tif ( val < 0 || val == null ) {\r\n\t\t\tval = elem.style[ name ];\r\n\t\t}\r\n\r\n\t\t// Computed unit is not pixels. Stop here and return.\r\n\t\tif ( rnumnonpx.test(val) ) {\r\n\t\t\treturn val;\r\n\t\t}\r\n\r\n\t\t// we need the check for style in case a browser which returns unreliable values\r\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\r\n\t\tvalueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );\r\n\r\n\t\t// Normalize \"\", auto, and prepare for extra\r\n\t\tval = parseFloat( val ) || 0;\r\n\t}\r\n\r\n\t// use the active box-sizing model to add/subtract irrelevant styles\r\n\treturn ( val +\r\n\t\taugmentWidthOrHeight(\r\n\t\t\telem,\r\n\t\t\tname,\r\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\r\n\t\t\tvalueIsBorderBox\r\n\t\t)\r\n\t) + \"px\";\r\n}\r\n\r\n\r\n// Try to determine the default display value of an element\r\nfunction css_defaultDisplay( nodeName ) {\r\n\tif ( elemdisplay[ nodeName ] ) {\r\n\t\treturn elemdisplay[ nodeName ];\r\n\t}\r\n\r\n\tvar elem = jQuery( \"<\" + nodeName + \">\" ).appendTo( document.body ),\r\n\t\tdisplay = elem.css(\"display\");\r\n\telem.remove();\r\n\r\n\t// If the simple way fails,\r\n\t// get element's real default display by attaching it to a temp iframe\r\n\tif ( display === \"none\" || display === \"\" ) {\r\n\t\t// Use the already-created iframe if possible\r\n\t\tiframe = document.body.appendChild(\r\n\t\t\tiframe || jQuery.extend( document.createElement(\"iframe\"), {\r\n\t\t\t\tframeBorder: 0,\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\t// Create a cacheable copy of the iframe document on first call.\r\n\t\t// IE and Opera will allow us to reuse the iframeDoc without re-writing the fake HTML\r\n\t\t// document to it; WebKit & Firefox won't allow reusing the iframe document.\r\n\t\tif ( !iframeDoc || !iframe.createElement ) {\r\n\t\t\tiframeDoc = ( iframe.contentWindow || iframe.contentDocument ).document;\r\n\t\t\tiframeDoc.write(\"<!doctype html><html><body>\");\r\n\t\t\tiframeDoc.close();\r\n\t\t}\r\n\r\n\t\telem = iframeDoc.body.appendChild( iframeDoc.createElement(nodeName) );\r\n\r\n\t\tdisplay = curCSS( elem, \"display\" );\r\n\t\tdocument.body.removeChild( iframe );\r\n\t}\r\n\r\n\t// Store the correct default display\r\n\telemdisplay[ nodeName ] = display;\r\n\r\n\treturn display;\r\n}\r\n\r\njQuery.each([ \"height\", \"width\" ], function( i, name ) {\r\n\tjQuery.cssHooks[ name ] = {\r\n\t\tget: function( elem, computed, extra ) {\r\n\t\t\tif ( computed ) {\r\n\t\t\t\t// certain elements can have dimension info if we invisibly show them\r\n\t\t\t\t// however, it must have a current display style that would benefit from this\r\n\t\t\t\tif ( elem.offsetWidth === 0 && rdisplayswap.test( curCSS( elem, \"display\" ) ) ) {\r\n\t\t\t\t\treturn jQuery.swap( elem, cssShow, function() {\r\n\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset: function( elem, value, extra ) {\r\n\t\t\treturn setPositiveNumber( elem, value, extra ?\r\n\t\t\t\taugmentWidthOrHeight(\r\n\t\t\t\t\telem,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\textra,\r\n\t\t\t\t\tjQuery.support.boxSizing && jQuery.css( elem, \"boxSizing\" ) === \"border-box\"\r\n\t\t\t\t) : 0\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n});\r\n\r\nif ( !jQuery.support.opacity ) {\r\n\tjQuery.cssHooks.opacity = {\r\n\t\tget: function( elem, computed ) {\r\n\t\t\t// IE uses filters for opacity\r\n\t\t\treturn ropacity.test( (computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || \"\" ) ?\r\n\t\t\t\t( 0.01 * parseFloat( RegExp.$1 ) ) + \"\" :\r\n\t\t\t\tcomputed ? \"1\" : \"\";\r\n\t\t},\r\n\r\n\t\tset: function( elem, value ) {\r\n\t\t\tvar style = elem.style,\r\n\t\t\t\tcurrentStyle = elem.currentStyle,\r\n\t\t\t\topacity = jQuery.isNumeric( value ) ? \"alpha(opacity=\" + value * 100 + \")\" : \"\",\r\n\t\t\t\tfilter = currentStyle && currentStyle.filter || style.filter || \"\";\r\n\r\n\t\t\t// IE has trouble with opacity if it does not have layout\r\n\t\t\t// Force it by setting the zoom level\r\n\t\t\tstyle.zoom = 1;\r\n\r\n\t\t\t// if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652\r\n\t\t\tif ( value >= 1 && jQuery.trim( filter.replace( ralpha, \"\" ) ) === \"\" &&\r\n\t\t\t\tstyle.removeAttribute ) {\r\n\r\n\t\t\t\t// Setting style.filter to null, \"\" & \" \" still leave \"filter:\" in the cssText\r\n\t\t\t\t// if \"filter:\" is present at all, clearType is disabled, we want to avoid this\r\n\t\t\t\t// style.removeAttribute is IE Only, but so apparently is this code path...\r\n\t\t\t\tstyle.removeAttribute( \"filter\" );\r\n\r\n\t\t\t\t// if there there is no filter style applied in a css rule, we are done\r\n\t\t\t\tif ( currentStyle && !currentStyle.filter ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise, set new filter values\r\n\t\t\tstyle.filter = ralpha.test( filter ) ?\r\n\t\t\t\tfilter.replace( ralpha, opacity ) :\r\n\t\t\t\tfilter + \" \" + opacity;\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// These hooks cannot be added until DOM ready because the support test\r\n// for it is not run until after DOM ready\r\njQuery(function() {\r\n\tif ( !jQuery.support.reliableMarginRight ) {\r\n\t\tjQuery.cssHooks.marginRight = {\r\n\t\t\tget: function( elem, computed ) {\r\n\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\r\n\t\t\t\t// Work around by temporarily setting element display to inline-block\r\n\t\t\t\treturn jQuery.swap( elem, { \"display\": \"inline-block\" }, function() {\r\n\t\t\t\t\tif ( computed ) {\r\n\t\t\t\t\t\treturn curCSS( elem, \"marginRight\" );\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\r\n\t// getComputedStyle returns percent when specified for top/left/bottom/right\r\n\t// rather than make the css module depend on the offset module, we just check for it here\r\n\tif ( !jQuery.support.pixelPosition && jQuery.fn.position ) {\r\n\t\tjQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\r\n\t\t\tjQuery.cssHooks[ prop ] = {\r\n\t\t\t\tget: function( elem, computed ) {\r\n\t\t\t\t\tif ( computed ) {\r\n\t\t\t\t\t\tvar ret = curCSS( elem, prop );\r\n\t\t\t\t\t\t// if curCSS returns percentage, fallback to offset\r\n\t\t\t\t\t\treturn rnumnonpx.test( ret ) ? jQuery( elem ).position()[ prop ] + \"px\" : ret;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n});\r\n\r\nif ( jQuery.expr && jQuery.expr.filters ) {\r\n\tjQuery.expr.filters.hidden = function( elem ) {\r\n\t\treturn ( elem.offsetWidth === 0 && elem.offsetHeight === 0 ) || (!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || curCSS( elem, \"display\" )) === \"none\");\r\n\t};\r\n\r\n\tjQuery.expr.filters.visible = function( elem ) {\r\n\t\treturn !jQuery.expr.filters.hidden( elem );\r\n\t};\r\n}\r\n\r\n// These hooks are used by animate to expand properties\r\njQuery.each({\r\n\tmargin: \"\",\r\n\tpadding: \"\",\r\n\tborder: \"Width\"\r\n}, function( prefix, suffix ) {\r\n\tjQuery.cssHooks[ prefix + suffix ] = {\r\n\t\texpand: function( value ) {\r\n\t\t\tvar i,\r\n\r\n\t\t\t\t// assumes a single number if not a string\r\n\t\t\t\tparts = typeof value === \"string\" ? value.split(\" \") : [ value ],\r\n\t\t\t\texpanded = {};\r\n\r\n\t\t\tfor ( i = 0; i < 4; i++ ) {\r\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\r\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\r\n\t\t\t}\r\n\r\n\t\t\treturn expanded;\r\n\t\t}\r\n\t};\r\n\r\n\tif ( !rmargin.test( prefix ) ) {\r\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\r\n\t}\r\n});\r\nvar r20 = /%20/g,\r\n\trbracket = /\\[\\]$/,\r\n\trCRLF = /\\r?\\n/g,\r\n\trinput = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,\r\n\trselectTextarea = /^(?:select|textarea)/i;\r\n\r\njQuery.fn.extend({\r\n\tserialize: function() {\r\n\t\treturn jQuery.param( this.serializeArray() );\r\n\t},\r\n\tserializeArray: function() {\r\n\t\treturn this.map(function(){\r\n\t\t\treturn this.elements ? jQuery.makeArray( this.elements ) : this;\r\n\t\t})\r\n\t\t.filter(function(){\r\n\t\t\treturn this.name && !this.disabled &&\r\n\t\t\t\t( this.checked || rselectTextarea.test( this.nodeName ) ||\r\n\t\t\t\t\trinput.test( this.type ) );\r\n\t\t})\r\n\t\t.map(function( i, elem ){\r\n\t\t\tvar val = jQuery( this ).val();\r\n\r\n\t\t\treturn val == null ?\r\n\t\t\t\tnull :\r\n\t\t\t\tjQuery.isArray( val ) ?\r\n\t\t\t\t\tjQuery.map( val, function( val, i ){\r\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\r\n\t\t}).get();\r\n\t}\r\n});\r\n\r\n//Serialize an array of form elements or a set of\r\n//key/values into a query string\r\njQuery.param = function( a, traditional ) {\r\n\tvar prefix,\r\n\t\ts = [],\r\n\t\tadd = function( key, value ) {\r\n\t\t\t// If value is a function, invoke it and return its value\r\n\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\r\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\r\n\t\t};\r\n\r\n\t// Set traditional to true for jQuery <= 1.3.2 behavior.\r\n\tif ( traditional === undefined ) {\r\n\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\r\n\t}\r\n\r\n\t// If an array was passed in, assume that it is an array of form elements.\r\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\r\n\t\t// Serialize the form elements\r\n\t\tjQuery.each( a, function() {\r\n\t\t\tadd( this.name, this.value );\r\n\t\t});\r\n\r\n\t} else {\r\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\r\n\t\t// did it), otherwise encode params recursively.\r\n\t\tfor ( prefix in a ) {\r\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\r\n\t\t}\r\n\t}\r\n\r\n\t// Return the resulting serialization\r\n\treturn s.join( \"&\" ).replace( r20, \"+\" );\r\n};\r\n\r\nfunction buildParams( prefix, obj, traditional, add ) {\r\n\tvar name;\r\n\r\n\tif ( jQuery.isArray( obj ) ) {\r\n\t\t// Serialize array item.\r\n\t\tjQuery.each( obj, function( i, v ) {\r\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\r\n\t\t\t\t// Treat each array item as a scalar.\r\n\t\t\t\tadd( prefix, v );\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// If array item is non-scalar (array or object), encode its\r\n\t\t\t\t// numeric index to resolve deserialization ambiguity issues.\r\n\t\t\t\t// Note that rack (as of 1.0.0) can't currently deserialize\r\n\t\t\t\t// nested arrays properly, and attempting to do so may cause\r\n\t\t\t\t// a server error. Possible fixes are to modify rack's\r\n\t\t\t\t// deserialization algorithm or to provide an option or flag\r\n\t\t\t\t// to force array serialization to be shallow.\r\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\r\n\t\t// Serialize object item.\r\n\t\tfor ( name in obj ) {\r\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\r\n\t\t}\r\n\r\n\t} else {\r\n\t\t// Serialize scalar item.\r\n\t\tadd( prefix, obj );\r\n\t}\r\n}\r\nvar\r\n\t// Document location\r\n\tajaxLocParts,\r\n\tajaxLocation,\r\n\r\n\trhash = /#.*$/,\r\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg, // IE leaves an \\r character at EOL\r\n\t// #7653, #8125, #8152: local protocol detection\r\n\trlocalProtocol = /^(?:about|app|app\\-storage|.+\\-extension|file|res|widget):$/,\r\n\trnoContent = /^(?:GET|HEAD)$/,\r\n\trprotocol = /^\\/\\//,\r\n\trquery = /\\?/,\r\n\trscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\r\n\trts = /([?&])_=[^&]*/,\r\n\trurl = /^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,\r\n\r\n\t// Keep a copy of the old load method\r\n\t_load = jQuery.fn.load,\r\n\r\n\t/* Prefilters\r\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\r\n\t * 2) These are called:\r\n\t *    - BEFORE asking for a transport\r\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\r\n\t * 3) key is the dataType\r\n\t * 4) the catchall symbol \"*\" can be used\r\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\r\n\t */\r\n\tprefilters = {},\r\n\r\n\t/* Transports bindings\r\n\t * 1) key is the dataType\r\n\t * 2) the catchall symbol \"*\" can be used\r\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\r\n\t */\r\n\ttransports = {},\r\n\r\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\r\n\tallTypes = [\"*/\"] + [\"*\"];\r\n\r\n// #8138, IE may throw an exception when accessing\r\n// a field from window.location if document.domain has been set\r\ntry {\r\n\tajaxLocation = location.href;\r\n} catch( e ) {\r\n\t// Use the href attribute of an A element\r\n\t// since IE will modify it given document.location\r\n\tajaxLocation = document.createElement( \"a\" );\r\n\tajaxLocation.href = \"\";\r\n\tajaxLocation = ajaxLocation.href;\r\n}\r\n\r\n// Segment location into parts\r\najaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\r\n\r\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\r\nfunction addToPrefiltersOrTransports( structure ) {\r\n\r\n\t// dataTypeExpression is optional and defaults to \"*\"\r\n\treturn function( dataTypeExpression, func ) {\r\n\r\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\r\n\t\t\tfunc = dataTypeExpression;\r\n\t\t\tdataTypeExpression = \"*\";\r\n\t\t}\r\n\r\n\t\tvar dataType, list, placeBefore,\r\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().split( core_rspace ),\r\n\t\t\ti = 0,\r\n\t\t\tlength = dataTypes.length;\r\n\r\n\t\tif ( jQuery.isFunction( func ) ) {\r\n\t\t\t// For each dataType in the dataTypeExpression\r\n\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\tdataType = dataTypes[ i ];\r\n\t\t\t\t// We control if we're asked to add before\r\n\t\t\t\t// any existing element\r\n\t\t\t\tplaceBefore = /^\\+/.test( dataType );\r\n\t\t\t\tif ( placeBefore ) {\r\n\t\t\t\t\tdataType = dataType.substr( 1 ) || \"*\";\r\n\t\t\t\t}\r\n\t\t\t\tlist = structure[ dataType ] = structure[ dataType ] || [];\r\n\t\t\t\t// then we add to the structure accordingly\r\n\t\t\t\tlist[ placeBefore ? \"unshift\" : \"push\" ]( func );\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// Base inspection function for prefilters and transports\r\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR,\r\n\t\tdataType /* internal */, inspected /* internal */ ) {\r\n\r\n\tdataType = dataType || options.dataTypes[ 0 ];\r\n\tinspected = inspected || {};\r\n\r\n\tinspected[ dataType ] = true;\r\n\r\n\tvar selection,\r\n\t\tlist = structure[ dataType ],\r\n\t\ti = 0,\r\n\t\tlength = list ? list.length : 0,\r\n\t\texecuteOnly = ( structure === prefilters );\r\n\r\n\tfor ( ; i < length && ( executeOnly || !selection ); i++ ) {\r\n\t\tselection = list[ i ]( options, originalOptions, jqXHR );\r\n\t\t// If we got redirected to another dataType\r\n\t\t// we try there if executing only and not done already\r\n\t\tif ( typeof selection === \"string\" ) {\r\n\t\t\tif ( !executeOnly || inspected[ selection ] ) {\r\n\t\t\t\tselection = undefined;\r\n\t\t\t} else {\r\n\t\t\t\toptions.dataTypes.unshift( selection );\r\n\t\t\t\tselection = inspectPrefiltersOrTransports(\r\n\t\t\t\t\t\tstructure, options, originalOptions, jqXHR, selection, inspected );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// If we're only executing or nothing was selected\r\n\t// we try the catchall dataType if not done already\r\n\tif ( ( executeOnly || !selection ) && !inspected[ \"*\" ] ) {\r\n\t\tselection = inspectPrefiltersOrTransports(\r\n\t\t\t\tstructure, options, originalOptions, jqXHR, \"*\", inspected );\r\n\t}\r\n\t// unnecessary when only executing (prefilters)\r\n\t// but it'll be ignored by the caller in that case\r\n\treturn selection;\r\n}\r\n\r\n// A special extend for ajax options\r\n// that takes \"flat\" options (not to be deep extended)\r\n// Fixes #9887\r\nfunction ajaxExtend( target, src ) {\r\n\tvar key, deep,\r\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\r\n\tfor ( key in src ) {\r\n\t\tif ( src[ key ] !== undefined ) {\r\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\r\n\t\t}\r\n\t}\r\n\tif ( deep ) {\r\n\t\tjQuery.extend( true, target, deep );\r\n\t}\r\n}\r\n\r\njQuery.fn.load = function( url, params, callback ) {\r\n\tif ( typeof url !== \"string\" && _load ) {\r\n\t\treturn _load.apply( this, arguments );\r\n\t}\r\n\r\n\t// Don't do a request if no elements are being requested\r\n\tif ( !this.length ) {\r\n\t\treturn this;\r\n\t}\r\n\r\n\tvar selector, type, response,\r\n\t\tself = this,\r\n\t\toff = url.indexOf(\" \");\r\n\r\n\tif ( off >= 0 ) {\r\n\t\tselector = url.slice( off, url.length );\r\n\t\turl = url.slice( 0, off );\r\n\t}\r\n\r\n\t// If it's a function\r\n\tif ( jQuery.isFunction( params ) ) {\r\n\r\n\t\t// We assume that it's the callback\r\n\t\tcallback = params;\r\n\t\tparams = undefined;\r\n\r\n\t// Otherwise, build a param string\r\n\t} else if ( params && typeof params === \"object\" ) {\r\n\t\ttype = \"POST\";\r\n\t}\r\n\r\n\t// Request the remote document\r\n\tjQuery.ajax({\r\n\t\turl: url,\r\n\r\n\t\t// if \"type\" variable is undefined, then \"GET\" method will be used\r\n\t\ttype: type,\r\n\t\tdataType: \"html\",\r\n\t\tdata: params,\r\n\t\tcomplete: function( jqXHR, status ) {\r\n\t\t\tif ( callback ) {\r\n\t\t\t\tself.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );\r\n\t\t\t}\r\n\t\t}\r\n\t}).done(function( responseText ) {\r\n\r\n\t\t// Save response for use in complete callback\r\n\t\tresponse = arguments;\r\n\r\n\t\t// See if a selector was specified\r\n\t\tself.html( selector ?\r\n\r\n\t\t\t// Create a dummy div to hold the results\r\n\t\t\tjQuery(\"<div>\")\r\n\r\n\t\t\t\t// inject the contents of the document in, removing the scripts\r\n\t\t\t\t// to avoid any 'Permission Denied' errors in IE\r\n\t\t\t\t.append( responseText.replace( rscript, \"\" ) )\r\n\r\n\t\t\t\t// Locate the specified elements\r\n\t\t\t\t.find( selector ) :\r\n\r\n\t\t\t// If not, just inject the full result\r\n\t\t\tresponseText );\r\n\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\n// Attach a bunch of functions for handling common AJAX events\r\njQuery.each( \"ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend\".split( \" \" ), function( i, o ){\r\n\tjQuery.fn[ o ] = function( f ){\r\n\t\treturn this.on( o, f );\r\n\t};\r\n});\r\n\r\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\r\n\tjQuery[ method ] = function( url, data, callback, type ) {\r\n\t\t// shift arguments if data argument was omitted\r\n\t\tif ( jQuery.isFunction( data ) ) {\r\n\t\t\ttype = type || callback;\r\n\t\t\tcallback = data;\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\r\n\t\treturn jQuery.ajax({\r\n\t\t\ttype: method,\r\n\t\t\turl: url,\r\n\t\t\tdata: data,\r\n\t\t\tsuccess: callback,\r\n\t\t\tdataType: type\r\n\t\t});\r\n\t};\r\n});\r\n\r\njQuery.extend({\r\n\r\n\tgetScript: function( url, callback ) {\r\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\r\n\t},\r\n\r\n\tgetJSON: function( url, data, callback ) {\r\n\t\treturn jQuery.get( url, data, callback, \"json\" );\r\n\t},\r\n\r\n\t// Creates a full fledged settings object into target\r\n\t// with both ajaxSettings and settings fields.\r\n\t// If target is omitted, writes into ajaxSettings.\r\n\tajaxSetup: function( target, settings ) {\r\n\t\tif ( settings ) {\r\n\t\t\t// Building a settings object\r\n\t\t\tajaxExtend( target, jQuery.ajaxSettings );\r\n\t\t} else {\r\n\t\t\t// Extending ajaxSettings\r\n\t\t\tsettings = target;\r\n\t\t\ttarget = jQuery.ajaxSettings;\r\n\t\t}\r\n\t\tajaxExtend( target, settings );\r\n\t\treturn target;\r\n\t},\r\n\r\n\tajaxSettings: {\r\n\t\turl: ajaxLocation,\r\n\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\r\n\t\tglobal: true,\r\n\t\ttype: \"GET\",\r\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n\t\tprocessData: true,\r\n\t\tasync: true,\r\n\t\t/*\r\n\t\ttimeout: 0,\r\n\t\tdata: null,\r\n\t\tdataType: null,\r\n\t\tusername: null,\r\n\t\tpassword: null,\r\n\t\tcache: null,\r\n\t\tthrows: false,\r\n\t\ttraditional: false,\r\n\t\theaders: {},\r\n\t\t*/\r\n\r\n\t\taccepts: {\r\n\t\t\txml: \"application/xml, text/xml\",\r\n\t\t\thtml: \"text/html\",\r\n\t\t\ttext: \"text/plain\",\r\n\t\t\tjson: \"application/json, text/javascript\",\r\n\t\t\t\"*\": allTypes\r\n\t\t},\r\n\r\n\t\tcontents: {\r\n\t\t\txml: /xml/,\r\n\t\t\thtml: /html/,\r\n\t\t\tjson: /json/\r\n\t\t},\r\n\r\n\t\tresponseFields: {\r\n\t\t\txml: \"responseXML\",\r\n\t\t\ttext: \"responseText\"\r\n\t\t},\r\n\r\n\t\t// List of data converters\r\n\t\t// 1) key format is \"source_type destination_type\" (a single space in-between)\r\n\t\t// 2) the catchall symbol \"*\" can be used for source_type\r\n\t\tconverters: {\r\n\r\n\t\t\t// Convert anything to text\r\n\t\t\t\"* text\": window.String,\r\n\r\n\t\t\t// Text to html (true = no transformation)\r\n\t\t\t\"text html\": true,\r\n\r\n\t\t\t// Evaluate text as a json expression\r\n\t\t\t\"text json\": jQuery.parseJSON,\r\n\r\n\t\t\t// Parse text as xml\r\n\t\t\t\"text xml\": jQuery.parseXML\r\n\t\t},\r\n\r\n\t\t// For options that shouldn't be deep extended:\r\n\t\t// you can add your own custom options here if\r\n\t\t// and when you create one that shouldn't be\r\n\t\t// deep extended (see ajaxExtend)\r\n\t\tflatOptions: {\r\n\t\t\tcontext: true,\r\n\t\t\turl: true\r\n\t\t}\r\n\t},\r\n\r\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\r\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\r\n\r\n\t// Main method\r\n\tajax: function( url, options ) {\r\n\r\n\t\t// If url is an object, simulate pre-1.5 signature\r\n\t\tif ( typeof url === \"object\" ) {\r\n\t\t\toptions = url;\r\n\t\t\turl = undefined;\r\n\t\t}\r\n\r\n\t\t// Force options to be an object\r\n\t\toptions = options || {};\r\n\r\n\t\tvar // ifModified key\r\n\t\t\tifModifiedKey,\r\n\t\t\t// Response headers\r\n\t\t\tresponseHeadersString,\r\n\t\t\tresponseHeaders,\r\n\t\t\t// transport\r\n\t\t\ttransport,\r\n\t\t\t// timeout handle\r\n\t\t\ttimeoutTimer,\r\n\t\t\t// Cross-domain detection vars\r\n\t\t\tparts,\r\n\t\t\t// To know if global events are to be dispatched\r\n\t\t\tfireGlobals,\r\n\t\t\t// Loop variable\r\n\t\t\ti,\r\n\t\t\t// Create the final options object\r\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\r\n\t\t\t// Callbacks context\r\n\t\t\tcallbackContext = s.context || s,\r\n\t\t\t// Context for global events\r\n\t\t\t// It's the callbackContext if one was provided in the options\r\n\t\t\t// and if it's a DOM node or a jQuery collection\r\n\t\t\tglobalEventContext = callbackContext !== s &&\r\n\t\t\t\t( callbackContext.nodeType || callbackContext instanceof jQuery ) ?\r\n\t\t\t\t\t\tjQuery( callbackContext ) : jQuery.event,\r\n\t\t\t// Deferreds\r\n\t\t\tdeferred = jQuery.Deferred(),\r\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\r\n\t\t\t// Status-dependent callbacks\r\n\t\t\tstatusCode = s.statusCode || {},\r\n\t\t\t// Headers (they are sent all at once)\r\n\t\t\trequestHeaders = {},\r\n\t\t\trequestHeadersNames = {},\r\n\t\t\t// The jqXHR state\r\n\t\t\tstate = 0,\r\n\t\t\t// Default abort message\r\n\t\t\tstrAbort = \"canceled\",\r\n\t\t\t// Fake xhr\r\n\t\t\tjqXHR = {\r\n\r\n\t\t\t\treadyState: 0,\r\n\r\n\t\t\t\t// Caches the header\r\n\t\t\t\tsetRequestHeader: function( name, value ) {\r\n\t\t\t\t\tif ( !state ) {\r\n\t\t\t\t\t\tvar lname = name.toLowerCase();\r\n\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\r\n\t\t\t\t\t\trequestHeaders[ name ] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Raw string\r\n\t\t\t\tgetAllResponseHeaders: function() {\r\n\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Builds headers hashtable if needed\r\n\t\t\t\tgetResponseHeader: function( key ) {\r\n\t\t\t\t\tvar match;\r\n\t\t\t\t\tif ( state === 2 ) {\r\n\t\t\t\t\t\tif ( !responseHeaders ) {\r\n\t\t\t\t\t\t\tresponseHeaders = {};\r\n\t\t\t\t\t\t\twhile( ( match = rheaders.exec( responseHeadersString ) ) ) {\r\n\t\t\t\t\t\t\t\tresponseHeaders[ match[1].toLowerCase() ] = match[ 2 ];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn match === undefined ? null : match;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Overrides response content-type header\r\n\t\t\t\toverrideMimeType: function( type ) {\r\n\t\t\t\t\tif ( !state ) {\r\n\t\t\t\t\t\ts.mimeType = type;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Cancel the request\r\n\t\t\t\tabort: function( statusText ) {\r\n\t\t\t\t\tstatusText = statusText || strAbort;\r\n\t\t\t\t\tif ( transport ) {\r\n\t\t\t\t\t\ttransport.abort( statusText );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdone( 0, statusText );\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t// Callback for when everything is done\r\n\t\t// It is defined here because jslint complains if it is declared\r\n\t\t// at the end of the function (which would be more logical and readable)\r\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\r\n\t\t\tvar isSuccess, success, error, response, modified,\r\n\t\t\t\tstatusText = nativeStatusText;\r\n\r\n\t\t\t// Called once\r\n\t\t\tif ( state === 2 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// State is \"done\" now\r\n\t\t\tstate = 2;\r\n\r\n\t\t\t// Clear timeout if it exists\r\n\t\t\tif ( timeoutTimer ) {\r\n\t\t\t\tclearTimeout( timeoutTimer );\r\n\t\t\t}\r\n\r\n\t\t\t// Dereference transport for early garbage collection\r\n\t\t\t// (no matter how long the jqXHR object will be used)\r\n\t\t\ttransport = undefined;\r\n\r\n\t\t\t// Cache response headers\r\n\t\t\tresponseHeadersString = headers || \"\";\r\n\r\n\t\t\t// Set readyState\r\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\r\n\r\n\t\t\t// Get response data\r\n\t\t\tif ( responses ) {\r\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\r\n\t\t\t}\r\n\r\n\t\t\t// If successful, handle type chaining\r\n\t\t\tif ( status >= 200 && status < 300 || status === 304 ) {\r\n\r\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\r\n\t\t\t\tif ( s.ifModified ) {\r\n\r\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Last-Modified\");\r\n\t\t\t\t\tif ( modified ) {\r\n\t\t\t\t\t\tjQuery.lastModified[ ifModifiedKey ] = modified;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Etag\");\r\n\t\t\t\t\tif ( modified ) {\r\n\t\t\t\t\t\tjQuery.etag[ ifModifiedKey ] = modified;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If not modified\r\n\t\t\t\tif ( status === 304 ) {\r\n\r\n\t\t\t\t\tstatusText = \"notmodified\";\r\n\t\t\t\t\tisSuccess = true;\r\n\r\n\t\t\t\t// If we have data\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tisSuccess = ajaxConvert( s, response );\r\n\t\t\t\t\tstatusText = isSuccess.state;\r\n\t\t\t\t\tsuccess = isSuccess.data;\r\n\t\t\t\t\terror = isSuccess.error;\r\n\t\t\t\t\tisSuccess = !error;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// We extract error from statusText\r\n\t\t\t\t// then normalize statusText and status for non-aborts\r\n\t\t\t\terror = statusText;\r\n\t\t\t\tif ( !statusText || status ) {\r\n\t\t\t\t\tstatusText = \"error\";\r\n\t\t\t\t\tif ( status < 0 ) {\r\n\t\t\t\t\t\tstatus = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Set data for the fake xhr object\r\n\t\t\tjqXHR.status = status;\r\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\r\n\r\n\t\t\t// Success/Error\r\n\t\t\tif ( isSuccess ) {\r\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\r\n\t\t\t} else {\r\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\r\n\t\t\t}\r\n\r\n\t\t\t// Status-dependent callbacks\r\n\t\t\tjqXHR.statusCode( statusCode );\r\n\t\t\tstatusCode = undefined;\r\n\r\n\t\t\tif ( fireGlobals ) {\r\n\t\t\t\tglobalEventContext.trigger( \"ajax\" + ( isSuccess ? \"Success\" : \"Error\" ),\r\n\t\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\r\n\t\t\t}\r\n\r\n\t\t\t// Complete\r\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\r\n\r\n\t\t\tif ( fireGlobals ) {\r\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\r\n\t\t\t\t// Handle the global AJAX counter\r\n\t\t\t\tif ( !( --jQuery.active ) ) {\r\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Attach deferreds\r\n\t\tdeferred.promise( jqXHR );\r\n\t\tjqXHR.success = jqXHR.done;\r\n\t\tjqXHR.error = jqXHR.fail;\r\n\t\tjqXHR.complete = completeDeferred.add;\r\n\r\n\t\t// Status-dependent callbacks\r\n\t\tjqXHR.statusCode = function( map ) {\r\n\t\t\tif ( map ) {\r\n\t\t\t\tvar tmp;\r\n\t\t\t\tif ( state < 2 ) {\r\n\t\t\t\t\tfor ( tmp in map ) {\r\n\t\t\t\t\t\tstatusCode[ tmp ] = [ statusCode[tmp], map[tmp] ];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttmp = map[ jqXHR.status ];\r\n\t\t\t\t\tjqXHR.always( tmp );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t\t// Remove hash character (#7531: and string promotion)\r\n\t\t// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)\r\n\t\t// We also use the url parameter if available\r\n\t\ts.url = ( ( url || s.url ) + \"\" ).replace( rhash, \"\" ).replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\r\n\r\n\t\t// Extract dataTypes list\r\n\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().split( core_rspace );\r\n\r\n\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\r\n\t\tif ( s.crossDomain == null ) {\r\n\t\t\tparts = rurl.exec( s.url.toLowerCase() );\r\n\t\t\ts.crossDomain = !!( parts &&\r\n\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\r\n\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? 80 : 443 ) ) !=\r\n\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? 80 : 443 ) ) )\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// Convert data if not already a string\r\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\r\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\r\n\t\t}\r\n\r\n\t\t// Apply prefilters\r\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\r\n\r\n\t\t// If request was aborted inside a prefilter, stop there\r\n\t\tif ( state === 2 ) {\r\n\t\t\treturn jqXHR;\r\n\t\t}\r\n\r\n\t\t// We can fire global events as of now if asked to\r\n\t\tfireGlobals = s.global;\r\n\r\n\t\t// Uppercase the type\r\n\t\ts.type = s.type.toUpperCase();\r\n\r\n\t\t// Determine if request has content\r\n\t\ts.hasContent = !rnoContent.test( s.type );\r\n\r\n\t\t// Watch for a new set of requests\r\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\r\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\r\n\t\t}\r\n\r\n\t\t// More options handling for requests with no content\r\n\t\tif ( !s.hasContent ) {\r\n\r\n\t\t\t// If data is available, append data to url\r\n\t\t\tif ( s.data ) {\r\n\t\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.data;\r\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\r\n\t\t\t\tdelete s.data;\r\n\t\t\t}\r\n\r\n\t\t\t// Get ifModifiedKey before adding the anti-cache parameter\r\n\t\t\tifModifiedKey = s.url;\r\n\r\n\t\t\t// Add anti-cache in url if needed\r\n\t\t\tif ( s.cache === false ) {\r\n\r\n\t\t\t\tvar ts = jQuery.now(),\r\n\t\t\t\t\t// try replacing _= if it is there\r\n\t\t\t\t\tret = s.url.replace( rts, \"$1_=\" + ts );\r\n\r\n\t\t\t\t// if nothing was replaced, add timestamp to the end\r\n\t\t\t\ts.url = ret + ( ( ret === s.url ) ? ( rquery.test( s.url ) ? \"&\" : \"?\" ) + \"_=\" + ts : \"\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Set the correct header, if data is being sent\r\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\r\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\r\n\t\t}\r\n\r\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\r\n\t\tif ( s.ifModified ) {\r\n\t\t\tifModifiedKey = ifModifiedKey || s.url;\r\n\t\t\tif ( jQuery.lastModified[ ifModifiedKey ] ) {\r\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ ifModifiedKey ] );\r\n\t\t\t}\r\n\t\t\tif ( jQuery.etag[ ifModifiedKey ] ) {\r\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ ifModifiedKey ] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Set the Accepts header for the server, depending on the dataType\r\n\t\tjqXHR.setRequestHeader(\r\n\t\t\t\"Accept\",\r\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?\r\n\t\t\t\ts.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\r\n\t\t\t\ts.accepts[ \"*\" ]\r\n\t\t);\r\n\r\n\t\t// Check for headers option\r\n\t\tfor ( i in s.headers ) {\r\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\r\n\t\t}\r\n\r\n\t\t// Allow custom headers/mimetypes and early abort\r\n\t\tif ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\r\n\t\t\t\t// Abort if not done already and return\r\n\t\t\t\treturn jqXHR.abort();\r\n\r\n\t\t}\r\n\r\n\t\t// aborting is no longer a cancellation\r\n\t\tstrAbort = \"abort\";\r\n\r\n\t\t// Install callbacks on deferreds\r\n\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\r\n\t\t\tjqXHR[ i ]( s[ i ] );\r\n\t\t}\r\n\r\n\t\t// Get transport\r\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\r\n\r\n\t\t// If no transport, we auto-abort\r\n\t\tif ( !transport ) {\r\n\t\t\tdone( -1, \"No Transport\" );\r\n\t\t} else {\r\n\t\t\tjqXHR.readyState = 1;\r\n\t\t\t// Send global event\r\n\t\t\tif ( fireGlobals ) {\r\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\r\n\t\t\t}\r\n\t\t\t// Timeout\r\n\t\t\tif ( s.async && s.timeout > 0 ) {\r\n\t\t\t\ttimeoutTimer = setTimeout( function(){\r\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\r\n\t\t\t\t}, s.timeout );\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tstate = 1;\r\n\t\t\t\ttransport.send( requestHeaders, done );\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// Propagate exception as error if not done\r\n\t\t\t\tif ( state < 2 ) {\r\n\t\t\t\t\tdone( -1, e );\r\n\t\t\t\t// Simply rethrow otherwise\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn jqXHR;\r\n\t},\r\n\r\n\t// Counter for holding the number of active queries\r\n\tactive: 0,\r\n\r\n\t// Last-Modified header cache for next request\r\n\tlastModified: {},\r\n\tetag: {}\r\n\r\n});\r\n\r\n/* Handles responses to an ajax request:\r\n * - sets all responseXXX fields accordingly\r\n * - finds the right dataType (mediates between content-type and expected dataType)\r\n * - returns the corresponding response\r\n */\r\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\r\n\r\n\tvar ct, type, finalDataType, firstDataType,\r\n\t\tcontents = s.contents,\r\n\t\tdataTypes = s.dataTypes,\r\n\t\tresponseFields = s.responseFields;\r\n\r\n\t// Fill responseXXX fields\r\n\tfor ( type in responseFields ) {\r\n\t\tif ( type in responses ) {\r\n\t\t\tjqXHR[ responseFields[type] ] = responses[ type ];\r\n\t\t}\r\n\t}\r\n\r\n\t// Remove auto dataType and get content-type in the process\r\n\twhile( dataTypes[ 0 ] === \"*\" ) {\r\n\t\tdataTypes.shift();\r\n\t\tif ( ct === undefined ) {\r\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"content-type\" );\r\n\t\t}\r\n\t}\r\n\r\n\t// Check if we're dealing with a known content-type\r\n\tif ( ct ) {\r\n\t\tfor ( type in contents ) {\r\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\r\n\t\t\t\tdataTypes.unshift( type );\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Check to see if we have a response for the expected dataType\r\n\tif ( dataTypes[ 0 ] in responses ) {\r\n\t\tfinalDataType = dataTypes[ 0 ];\r\n\t} else {\r\n\t\t// Try convertible dataTypes\r\n\t\tfor ( type in responses ) {\r\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[0] ] ) {\r\n\t\t\t\tfinalDataType = type;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif ( !firstDataType ) {\r\n\t\t\t\tfirstDataType = type;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Or just use first one\r\n\t\tfinalDataType = finalDataType || firstDataType;\r\n\t}\r\n\r\n\t// If we found a dataType\r\n\t// We add the dataType to the list if needed\r\n\t// and return the corresponding response\r\n\tif ( finalDataType ) {\r\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\r\n\t\t\tdataTypes.unshift( finalDataType );\r\n\t\t}\r\n\t\treturn responses[ finalDataType ];\r\n\t}\r\n}\r\n\r\n// Chain conversions given the request and the original response\r\nfunction ajaxConvert( s, response ) {\r\n\r\n\tvar conv, conv2, current, tmp,\r\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\r\n\t\tdataTypes = s.dataTypes.slice(),\r\n\t\tprev = dataTypes[ 0 ],\r\n\t\tconverters = {},\r\n\t\ti = 0;\r\n\r\n\t// Apply the dataFilter if provided\r\n\tif ( s.dataFilter ) {\r\n\t\tresponse = s.dataFilter( response, s.dataType );\r\n\t}\r\n\r\n\t// Create converters map with lowercased keys\r\n\tif ( dataTypes[ 1 ] ) {\r\n\t\tfor ( conv in s.converters ) {\r\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\r\n\t\t}\r\n\t}\r\n\r\n\t// Convert to each sequential dataType, tolerating list modification\r\n\tfor ( ; (current = dataTypes[++i]); ) {\r\n\r\n\t\t// There's only work to do if current dataType is non-auto\r\n\t\tif ( current !== \"*\" ) {\r\n\r\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\r\n\t\t\tif ( prev !== \"*\" && prev !== current ) {\r\n\r\n\t\t\t\t// Seek a direct converter\r\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\r\n\r\n\t\t\t\t// If none found, seek a pair\r\n\t\t\t\tif ( !conv ) {\r\n\t\t\t\t\tfor ( conv2 in converters ) {\r\n\r\n\t\t\t\t\t\t// If conv2 outputs current\r\n\t\t\t\t\t\ttmp = conv2.split(\" \");\r\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\r\n\r\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\r\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\r\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\r\n\t\t\t\t\t\t\tif ( conv ) {\r\n\t\t\t\t\t\t\t\t// Condense equivalence converters\r\n\t\t\t\t\t\t\t\tif ( conv === true ) {\r\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\r\n\r\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\r\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\r\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\r\n\t\t\t\t\t\t\t\t\tdataTypes.splice( i--, 0, current );\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Apply converter (if not an equivalence)\r\n\t\t\t\tif ( conv !== true ) {\r\n\r\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\r\n\t\t\t\t\tif ( conv && s[\"throws\"] ) {\r\n\t\t\t\t\t\tresponse = conv( response );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tresponse = conv( response );\r\n\t\t\t\t\t\t} catch ( e ) {\r\n\t\t\t\t\t\t\treturn { state: \"parsererror\", error: conv ? e : \"No conversion from \" + prev + \" to \" + current };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Update prev for next iteration\r\n\t\t\tprev = current;\r\n\t\t}\r\n\t}\r\n\r\n\treturn { state: \"success\", data: response };\r\n}\r\nvar oldCallbacks = [],\r\n\trquestion = /\\?/,\r\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/,\r\n\tnonce = jQuery.now();\r\n\r\n// Default jsonp settings\r\njQuery.ajaxSetup({\r\n\tjsonp: \"callback\",\r\n\tjsonpCallback: function() {\r\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\r\n\t\tthis[ callback ] = true;\r\n\t\treturn callback;\r\n\t}\r\n});\r\n\r\n// Detect, normalize options and install callbacks for jsonp requests\r\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\r\n\r\n\tvar callbackName, overwritten, responseContainer,\r\n\t\tdata = s.data,\r\n\t\turl = s.url,\r\n\t\thasCallback = s.jsonp !== false,\r\n\t\treplaceInUrl = hasCallback && rjsonp.test( url ),\r\n\t\treplaceInData = hasCallback && !replaceInUrl && typeof data === \"string\" &&\r\n\t\t\t!( s.contentType || \"\" ).indexOf(\"application/x-www-form-urlencoded\") &&\r\n\t\t\trjsonp.test( data );\r\n\r\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\r\n\tif ( s.dataTypes[ 0 ] === \"jsonp\" || replaceInUrl || replaceInData ) {\r\n\r\n\t\t// Get callback name, remembering preexisting value associated with it\r\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\r\n\t\t\ts.jsonpCallback() :\r\n\t\t\ts.jsonpCallback;\r\n\t\toverwritten = window[ callbackName ];\r\n\r\n\t\t// Insert callback into url or form data\r\n\t\tif ( replaceInUrl ) {\r\n\t\t\ts.url = url.replace( rjsonp, \"$1\" + callbackName );\r\n\t\t} else if ( replaceInData ) {\r\n\t\t\ts.data = data.replace( rjsonp, \"$1\" + callbackName );\r\n\t\t} else if ( hasCallback ) {\r\n\t\t\ts.url += ( rquestion.test( url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\r\n\t\t}\r\n\r\n\t\t// Use data converter to retrieve json after script execution\r\n\t\ts.converters[\"script json\"] = function() {\r\n\t\t\tif ( !responseContainer ) {\r\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\r\n\t\t\t}\r\n\t\t\treturn responseContainer[ 0 ];\r\n\t\t};\r\n\r\n\t\t// force json dataType\r\n\t\ts.dataTypes[ 0 ] = \"json\";\r\n\r\n\t\t// Install callback\r\n\t\twindow[ callbackName ] = function() {\r\n\t\t\tresponseContainer = arguments;\r\n\t\t};\r\n\r\n\t\t// Clean-up function (fires after converters)\r\n\t\tjqXHR.always(function() {\r\n\t\t\t// Restore preexisting value\r\n\t\t\twindow[ callbackName ] = overwritten;\r\n\r\n\t\t\t// Save back as free\r\n\t\t\tif ( s[ callbackName ] ) {\r\n\t\t\t\t// make sure that re-using the options doesn't screw things around\r\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\r\n\r\n\t\t\t\t// save the callback name for future use\r\n\t\t\t\toldCallbacks.push( callbackName );\r\n\t\t\t}\r\n\r\n\t\t\t// Call if it was a function and we have a response\r\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\r\n\t\t\t\toverwritten( responseContainer[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t\tresponseContainer = overwritten = undefined;\r\n\t\t});\r\n\r\n\t\t// Delegate to script\r\n\t\treturn \"script\";\r\n\t}\r\n});\r\n// Install script dataType\r\njQuery.ajaxSetup({\r\n\taccepts: {\r\n\t\tscript: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\r\n\t},\r\n\tcontents: {\r\n\t\tscript: /javascript|ecmascript/\r\n\t},\r\n\tconverters: {\r\n\t\t\"text script\": function( text ) {\r\n\t\t\tjQuery.globalEval( text );\r\n\t\t\treturn text;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Handle cache's special case and global\r\njQuery.ajaxPrefilter( \"script\", function( s ) {\r\n\tif ( s.cache === undefined ) {\r\n\t\ts.cache = false;\r\n\t}\r\n\tif ( s.crossDomain ) {\r\n\t\ts.type = \"GET\";\r\n\t\ts.global = false;\r\n\t}\r\n});\r\n\r\n// Bind script tag hack transport\r\njQuery.ajaxTransport( \"script\", function(s) {\r\n\r\n\t// This transport only deals with cross domain requests\r\n\tif ( s.crossDomain ) {\r\n\r\n\t\tvar script,\r\n\t\t\thead = document.head || document.getElementsByTagName( \"head\" )[0] || document.documentElement;\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsend: function( _, callback ) {\r\n\r\n\t\t\t\tscript = document.createElement( \"script\" );\r\n\r\n\t\t\t\tscript.async = \"async\";\r\n\r\n\t\t\t\tif ( s.scriptCharset ) {\r\n\t\t\t\t\tscript.charset = s.scriptCharset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscript.src = s.url;\r\n\r\n\t\t\t\t// Attach handlers for all browsers\r\n\t\t\t\tscript.onload = script.onreadystatechange = function( _, isAbort ) {\r\n\r\n\t\t\t\t\tif ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {\r\n\r\n\t\t\t\t\t\t// Handle memory leak in IE\r\n\t\t\t\t\t\tscript.onload = script.onreadystatechange = null;\r\n\r\n\t\t\t\t\t\t// Remove the script\r\n\t\t\t\t\t\tif ( head && script.parentNode ) {\r\n\t\t\t\t\t\t\thead.removeChild( script );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Dereference the script\r\n\t\t\t\t\t\tscript = undefined;\r\n\r\n\t\t\t\t\t\t// Callback if not abort\r\n\t\t\t\t\t\tif ( !isAbort ) {\r\n\t\t\t\t\t\t\tcallback( 200, \"success\" );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t// Use insertBefore instead of appendChild  to circumvent an IE6 bug.\r\n\t\t\t\t// This arises when a base node is used (#2709 and #4378).\r\n\t\t\t\thead.insertBefore( script, head.firstChild );\r\n\t\t\t},\r\n\r\n\t\t\tabort: function() {\r\n\t\t\t\tif ( script ) {\r\n\t\t\t\t\tscript.onload( 0, 1 );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n});\r\nvar xhrCallbacks,\r\n\t// #5280: Internet Explorer will keep connections alive if we don't abort on unload\r\n\txhrOnUnloadAbort = window.ActiveXObject ? function() {\r\n\t\t// Abort all pending requests\r\n\t\tfor ( var key in xhrCallbacks ) {\r\n\t\t\txhrCallbacks[ key ]( 0, 1 );\r\n\t\t}\r\n\t} : false,\r\n\txhrId = 0;\r\n\r\n// Functions to create xhrs\r\nfunction createStandardXHR() {\r\n\ttry {\r\n\t\treturn new window.XMLHttpRequest();\r\n\t} catch( e ) {}\r\n}\r\n\r\nfunction createActiveXHR() {\r\n\ttry {\r\n\t\treturn new window.ActiveXObject( \"Microsoft.XMLHTTP\" );\r\n\t} catch( e ) {}\r\n}\r\n\r\n// Create the request object\r\n// (This is still attached to ajaxSettings for backward compatibility)\r\njQuery.ajaxSettings.xhr = window.ActiveXObject ?\r\n\t/* Microsoft failed to properly\r\n\t * implement the XMLHttpRequest in IE7 (can't request local files),\r\n\t * so we use the ActiveXObject when it is available\r\n\t * Additionally XMLHttpRequest can be disabled in IE7/IE8 so\r\n\t * we need a fallback.\r\n\t */\r\n\tfunction() {\r\n\t\treturn !this.isLocal && createStandardXHR() || createActiveXHR();\r\n\t} :\r\n\t// For all other browsers, use the standard XMLHttpRequest object\r\n\tcreateStandardXHR;\r\n\r\n// Determine support properties\r\n(function( xhr ) {\r\n\tjQuery.extend( jQuery.support, {\r\n\t\tajax: !!xhr,\r\n\t\tcors: !!xhr && ( \"withCredentials\" in xhr )\r\n\t});\r\n})( jQuery.ajaxSettings.xhr() );\r\n\r\n// Create transport if the browser can provide an xhr\r\nif ( jQuery.support.ajax ) {\r\n\r\n\tjQuery.ajaxTransport(function( s ) {\r\n\t\t// Cross domain only allowed if supported through XMLHttpRequest\r\n\t\tif ( !s.crossDomain || jQuery.support.cors ) {\r\n\r\n\t\t\tvar callback;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsend: function( headers, complete ) {\r\n\r\n\t\t\t\t\t// Get a new xhr\r\n\t\t\t\t\tvar handle, i,\r\n\t\t\t\t\t\txhr = s.xhr();\r\n\r\n\t\t\t\t\t// Open the socket\r\n\t\t\t\t\t// Passing null username, generates a login popup on Opera (#2865)\r\n\t\t\t\t\tif ( s.username ) {\r\n\t\t\t\t\t\txhr.open( s.type, s.url, s.async, s.username, s.password );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txhr.open( s.type, s.url, s.async );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Apply custom fields if provided\r\n\t\t\t\t\tif ( s.xhrFields ) {\r\n\t\t\t\t\t\tfor ( i in s.xhrFields ) {\r\n\t\t\t\t\t\t\txhr[ i ] = s.xhrFields[ i ];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Override mime type if needed\r\n\t\t\t\t\tif ( s.mimeType && xhr.overrideMimeType ) {\r\n\t\t\t\t\t\txhr.overrideMimeType( s.mimeType );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// X-Requested-With header\r\n\t\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\r\n\t\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\r\n\t\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\r\n\t\t\t\t\t// For same-domain requests, won't change header if already provided.\r\n\t\t\t\t\tif ( !s.crossDomain && !headers[\"X-Requested-With\"] ) {\r\n\t\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Need an extra try/catch for cross domain requests in Firefox 3\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tfor ( i in headers ) {\r\n\t\t\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch( _ ) {}\r\n\r\n\t\t\t\t\t// Do send the request\r\n\t\t\t\t\t// This may raise an exception which is actually\r\n\t\t\t\t\t// handled in jQuery.ajax (so no try/catch here)\r\n\t\t\t\t\txhr.send( ( s.hasContent && s.data ) || null );\r\n\r\n\t\t\t\t\t// Listener\r\n\t\t\t\t\tcallback = function( _, isAbort ) {\r\n\r\n\t\t\t\t\t\tvar status,\r\n\t\t\t\t\t\t\tstatusText,\r\n\t\t\t\t\t\t\tresponseHeaders,\r\n\t\t\t\t\t\t\tresponses,\r\n\t\t\t\t\t\t\txml;\r\n\r\n\t\t\t\t\t\t// Firefox throws exceptions when accessing properties\r\n\t\t\t\t\t\t// of an xhr when a network error occurred\r\n\t\t\t\t\t\t// http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)\r\n\t\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\t\t// Was never called and is aborted or complete\r\n\t\t\t\t\t\t\tif ( callback && ( isAbort || xhr.readyState === 4 ) ) {\r\n\r\n\t\t\t\t\t\t\t\t// Only called once\r\n\t\t\t\t\t\t\t\tcallback = undefined;\r\n\r\n\t\t\t\t\t\t\t\t// Do not keep as active anymore\r\n\t\t\t\t\t\t\t\tif ( handle ) {\r\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = jQuery.noop;\r\n\t\t\t\t\t\t\t\t\tif ( xhrOnUnloadAbort ) {\r\n\t\t\t\t\t\t\t\t\t\tdelete xhrCallbacks[ handle ];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// If it's an abort\r\n\t\t\t\t\t\t\t\tif ( isAbort ) {\r\n\t\t\t\t\t\t\t\t\t// Abort it manually if needed\r\n\t\t\t\t\t\t\t\t\tif ( xhr.readyState !== 4 ) {\r\n\t\t\t\t\t\t\t\t\t\txhr.abort();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tstatus = xhr.status;\r\n\t\t\t\t\t\t\t\t\tresponseHeaders = xhr.getAllResponseHeaders();\r\n\t\t\t\t\t\t\t\t\tresponses = {};\r\n\t\t\t\t\t\t\t\t\txml = xhr.responseXML;\r\n\r\n\t\t\t\t\t\t\t\t\t// Construct response list\r\n\t\t\t\t\t\t\t\t\tif ( xml && xml.documentElement /* #4958 */ ) {\r\n\t\t\t\t\t\t\t\t\t\tresponses.xml = xml;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// When requesting binary data, IE6-9 will throw an exception\r\n\t\t\t\t\t\t\t\t\t// on any attempt to access responseText (#11426)\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tresponses.text = xhr.responseText;\r\n\t\t\t\t\t\t\t\t\t} catch( e ) {\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Firefox throws an exception when accessing\r\n\t\t\t\t\t\t\t\t\t// statusText for faulty cross-domain requests\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tstatusText = xhr.statusText;\r\n\t\t\t\t\t\t\t\t\t} catch( e ) {\r\n\t\t\t\t\t\t\t\t\t\t// We normalize with Webkit giving an empty statusText\r\n\t\t\t\t\t\t\t\t\t\tstatusText = \"\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Filter status for non standard behaviors\r\n\r\n\t\t\t\t\t\t\t\t\t// If the request is local and we have data: assume a success\r\n\t\t\t\t\t\t\t\t\t// (success with no data won't get notified, that's the best we\r\n\t\t\t\t\t\t\t\t\t// can do given current implementations)\r\n\t\t\t\t\t\t\t\t\tif ( !status && s.isLocal && !s.crossDomain ) {\r\n\t\t\t\t\t\t\t\t\t\tstatus = responses.text ? 200 : 404;\r\n\t\t\t\t\t\t\t\t\t// IE - #1450: sometimes returns 1223 when it should be 204\r\n\t\t\t\t\t\t\t\t\t} else if ( status === 1223 ) {\r\n\t\t\t\t\t\t\t\t\t\tstatus = 204;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch( firefoxAccessException ) {\r\n\t\t\t\t\t\t\tif ( !isAbort ) {\r\n\t\t\t\t\t\t\t\tcomplete( -1, firefoxAccessException );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Call complete if needed\r\n\t\t\t\t\t\tif ( responses ) {\r\n\t\t\t\t\t\t\tcomplete( status, statusText, responses, responseHeaders );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif ( !s.async ) {\r\n\t\t\t\t\t\t// if we're in sync mode we fire the callback\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t} else if ( xhr.readyState === 4 ) {\r\n\t\t\t\t\t\t// (IE6 & IE7) if it's in cache and has been\r\n\t\t\t\t\t\t// retrieved directly we need to fire the callback\r\n\t\t\t\t\t\tsetTimeout( callback, 0 );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thandle = ++xhrId;\r\n\t\t\t\t\t\tif ( xhrOnUnloadAbort ) {\r\n\t\t\t\t\t\t\t// Create the active xhrs callbacks list if needed\r\n\t\t\t\t\t\t\t// and attach the unload handler\r\n\t\t\t\t\t\t\tif ( !xhrCallbacks ) {\r\n\t\t\t\t\t\t\t\txhrCallbacks = {};\r\n\t\t\t\t\t\t\t\tjQuery( window ).unload( xhrOnUnloadAbort );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Add to list of active xhrs callbacks\r\n\t\t\t\t\t\t\txhrCallbacks[ handle ] = callback;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txhr.onreadystatechange = callback;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tabort: function() {\r\n\t\t\t\t\tif ( callback ) {\r\n\t\t\t\t\t\tcallback(0,1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n}\r\nvar fxNow, timerId,\r\n\trfxtypes = /^(?:toggle|show|hide)$/,\r\n\trfxnum = new RegExp( \"^(?:([-+])=|)(\" + core_pnum + \")([a-z%]*)$\", \"i\" ),\r\n\trrun = /queueHooks$/,\r\n\tanimationPrefilters = [ defaultPrefilter ],\r\n\ttweeners = {\r\n\t\t\"*\": [function( prop, value ) {\r\n\t\t\tvar end, unit,\r\n\t\t\t\ttween = this.createTween( prop, value ),\r\n\t\t\t\tparts = rfxnum.exec( value ),\r\n\t\t\t\ttarget = tween.cur(),\r\n\t\t\t\tstart = +target || 0,\r\n\t\t\t\tscale = 1,\r\n\t\t\t\tmaxIterations = 20;\r\n\r\n\t\t\tif ( parts ) {\r\n\t\t\t\tend = +parts[2];\r\n\t\t\t\tunit = parts[3] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\r\n\r\n\t\t\t\t// We need to compute starting value\r\n\t\t\t\tif ( unit !== \"px\" && start ) {\r\n\t\t\t\t\t// Iteratively approximate from a nonzero starting point\r\n\t\t\t\t\t// Prefer the current property, because this process will be trivial if it uses the same units\r\n\t\t\t\t\t// Fallback to end or a simple constant\r\n\t\t\t\t\tstart = jQuery.css( tween.elem, prop, true ) || end || 1;\r\n\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\t// If previous iteration zeroed out, double until we get *something*\r\n\t\t\t\t\t\t// Use a string for doubling factor so we don't accidentally see scale as unchanged below\r\n\t\t\t\t\t\tscale = scale || \".5\";\r\n\r\n\t\t\t\t\t\t// Adjust and apply\r\n\t\t\t\t\t\tstart = start / scale;\r\n\t\t\t\t\t\tjQuery.style( tween.elem, prop, start + unit );\r\n\r\n\t\t\t\t\t// Update scale, tolerating zero or NaN from tween.cur()\r\n\t\t\t\t\t// And breaking the loop if scale is unchanged or perfect, or if we've just had enough\r\n\t\t\t\t\t} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttween.unit = unit;\r\n\t\t\t\ttween.start = start;\r\n\t\t\t\t// If a +=/-= token was provided, we're doing a relative animation\r\n\t\t\t\ttween.end = parts[1] ? start + ( parts[1] + 1 ) * end : end;\r\n\t\t\t}\r\n\t\t\treturn tween;\r\n\t\t}]\r\n\t};\r\n\r\n// Animations created synchronously will run synchronously\r\nfunction createFxNow() {\r\n\tsetTimeout(function() {\r\n\t\tfxNow = undefined;\r\n\t}, 0 );\r\n\treturn ( fxNow = jQuery.now() );\r\n}\r\n\r\nfunction createTweens( animation, props ) {\r\n\tjQuery.each( props, function( prop, value ) {\r\n\t\tvar collection = ( tweeners[ prop ] || [] ).concat( tweeners[ \"*\" ] ),\r\n\t\t\tindex = 0,\r\n\t\t\tlength = collection.length;\r\n\t\tfor ( ; index < length; index++ ) {\r\n\t\t\tif ( collection[ index ].call( animation, prop, value ) ) {\r\n\r\n\t\t\t\t// we're done with this property\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction Animation( elem, properties, options ) {\r\n\tvar result,\r\n\t\tindex = 0,\r\n\t\ttweenerIndex = 0,\r\n\t\tlength = animationPrefilters.length,\r\n\t\tdeferred = jQuery.Deferred().always( function() {\r\n\t\t\t// don't match elem in the :animated selector\r\n\t\t\tdelete tick.elem;\r\n\t\t}),\r\n\t\ttick = function() {\r\n\t\t\tvar currentTime = fxNow || createFxNow(),\r\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\r\n\t\t\t\t// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)\r\n\t\t\t\ttemp = remaining / animation.duration || 0,\r\n\t\t\t\tpercent = 1 - temp,\r\n\t\t\t\tindex = 0,\r\n\t\t\t\tlength = animation.tweens.length;\r\n\r\n\t\t\tfor ( ; index < length ; index++ ) {\r\n\t\t\t\tanimation.tweens[ index ].run( percent );\r\n\t\t\t}\r\n\r\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ]);\r\n\r\n\t\t\tif ( percent < 1 && length ) {\r\n\t\t\t\treturn remaining;\r\n\t\t\t} else {\r\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tanimation = deferred.promise({\r\n\t\t\telem: elem,\r\n\t\t\tprops: jQuery.extend( {}, properties ),\r\n\t\t\topts: jQuery.extend( true, { specialEasing: {} }, options ),\r\n\t\t\toriginalProperties: properties,\r\n\t\t\toriginalOptions: options,\r\n\t\t\tstartTime: fxNow || createFxNow(),\r\n\t\t\tduration: options.duration,\r\n\t\t\ttweens: [],\r\n\t\t\tcreateTween: function( prop, end, easing ) {\r\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\r\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\r\n\t\t\t\tanimation.tweens.push( tween );\r\n\t\t\t\treturn tween;\r\n\t\t\t},\r\n\t\t\tstop: function( gotoEnd ) {\r\n\t\t\t\tvar index = 0,\r\n\t\t\t\t\t// if we are going to the end, we want to run all the tweens\r\n\t\t\t\t\t// otherwise we skip this part\r\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\r\n\r\n\t\t\t\tfor ( ; index < length ; index++ ) {\r\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// resolve when we played the last frame\r\n\t\t\t\t// otherwise, reject\r\n\t\t\t\tif ( gotoEnd ) {\r\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t}),\r\n\t\tprops = animation.props;\r\n\r\n\tpropFilter( props, animation.opts.specialEasing );\r\n\r\n\tfor ( ; index < length ; index++ ) {\r\n\t\tresult = animationPrefilters[ index ].call( animation, elem, props, animation.opts );\r\n\t\tif ( result ) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\tcreateTweens( animation, props );\r\n\r\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\r\n\t\tanimation.opts.start.call( elem, animation );\r\n\t}\r\n\r\n\tjQuery.fx.timer(\r\n\t\tjQuery.extend( tick, {\r\n\t\t\tanim: animation,\r\n\t\t\tqueue: animation.opts.queue,\r\n\t\t\telem: elem\r\n\t\t})\r\n\t);\r\n\r\n\t// attach callbacks from options\r\n\treturn animation.progress( animation.opts.progress )\r\n\t\t.done( animation.opts.done, animation.opts.complete )\r\n\t\t.fail( animation.opts.fail )\r\n\t\t.always( animation.opts.always );\r\n}\r\n\r\nfunction propFilter( props, specialEasing ) {\r\n\tvar index, name, easing, value, hooks;\r\n\r\n\t// camelCase, specialEasing and expand cssHook pass\r\n\tfor ( index in props ) {\r\n\t\tname = jQuery.camelCase( index );\r\n\t\teasing = specialEasing[ name ];\r\n\t\tvalue = props[ index ];\r\n\t\tif ( jQuery.isArray( value ) ) {\r\n\t\t\teasing = value[ 1 ];\r\n\t\t\tvalue = props[ index ] = value[ 0 ];\r\n\t\t}\r\n\r\n\t\tif ( index !== name ) {\r\n\t\t\tprops[ name ] = value;\r\n\t\t\tdelete props[ index ];\r\n\t\t}\r\n\r\n\t\thooks = jQuery.cssHooks[ name ];\r\n\t\tif ( hooks && \"expand\" in hooks ) {\r\n\t\t\tvalue = hooks.expand( value );\r\n\t\t\tdelete props[ name ];\r\n\r\n\t\t\t// not quite $.extend, this wont overwrite keys already present.\r\n\t\t\t// also - reusing 'index' from above because we have the correct \"name\"\r\n\t\t\tfor ( index in value ) {\r\n\t\t\t\tif ( !( index in props ) ) {\r\n\t\t\t\t\tprops[ index ] = value[ index ];\r\n\t\t\t\t\tspecialEasing[ index ] = easing;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tspecialEasing[ name ] = easing;\r\n\t\t}\r\n\t}\r\n}\r\n\r\njQuery.Animation = jQuery.extend( Animation, {\r\n\r\n\ttweener: function( props, callback ) {\r\n\t\tif ( jQuery.isFunction( props ) ) {\r\n\t\t\tcallback = props;\r\n\t\t\tprops = [ \"*\" ];\r\n\t\t} else {\r\n\t\t\tprops = props.split(\" \");\r\n\t\t}\r\n\r\n\t\tvar prop,\r\n\t\t\tindex = 0,\r\n\t\t\tlength = props.length;\r\n\r\n\t\tfor ( ; index < length ; index++ ) {\r\n\t\t\tprop = props[ index ];\r\n\t\t\ttweeners[ prop ] = tweeners[ prop ] || [];\r\n\t\t\ttweeners[ prop ].unshift( callback );\r\n\t\t}\r\n\t},\r\n\r\n\tprefilter: function( callback, prepend ) {\r\n\t\tif ( prepend ) {\r\n\t\t\tanimationPrefilters.unshift( callback );\r\n\t\t} else {\r\n\t\t\tanimationPrefilters.push( callback );\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction defaultPrefilter( elem, props, opts ) {\r\n\tvar index, prop, value, length, dataShow, toggle, tween, hooks, oldfire,\r\n\t\tanim = this,\r\n\t\tstyle = elem.style,\r\n\t\torig = {},\r\n\t\thandled = [],\r\n\t\thidden = elem.nodeType && isHidden( elem );\r\n\r\n\t// handle queue: false promises\r\n\tif ( !opts.queue ) {\r\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\r\n\t\tif ( hooks.unqueued == null ) {\r\n\t\t\thooks.unqueued = 0;\r\n\t\t\toldfire = hooks.empty.fire;\r\n\t\t\thooks.empty.fire = function() {\r\n\t\t\t\tif ( !hooks.unqueued ) {\r\n\t\t\t\t\toldfire();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\thooks.unqueued++;\r\n\r\n\t\tanim.always(function() {\r\n\t\t\t// doing this makes sure that the complete handler will be called\r\n\t\t\t// before this completes\r\n\t\t\tanim.always(function() {\r\n\t\t\t\thooks.unqueued--;\r\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\r\n\t\t\t\t\thooks.empty.fire();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// height/width overflow pass\r\n\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\r\n\t\t// Make sure that nothing sneaks out\r\n\t\t// Record all 3 overflow attributes because IE does not\r\n\t\t// change the overflow attribute when overflowX and\r\n\t\t// overflowY are set to the same value\r\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\r\n\r\n\t\t// Set display property to inline-block for height/width\r\n\t\t// animations on inline elements that are having width/height animated\r\n\t\tif ( jQuery.css( elem, \"display\" ) === \"inline\" &&\r\n\t\t\t\tjQuery.css( elem, \"float\" ) === \"none\" ) {\r\n\r\n\t\t\t// inline-level elements accept inline-block;\r\n\t\t\t// block-level elements need to be inline with layout\r\n\t\t\tif ( !jQuery.support.inlineBlockNeedsLayout || css_defaultDisplay( elem.nodeName ) === \"inline\" ) {\r\n\t\t\t\tstyle.display = \"inline-block\";\r\n\r\n\t\t\t} else {\r\n\t\t\t\tstyle.zoom = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif ( opts.overflow ) {\r\n\t\tstyle.overflow = \"hidden\";\r\n\t\tif ( !jQuery.support.shrinkWrapBlocks ) {\r\n\t\t\tanim.done(function() {\r\n\t\t\t\tstyle.overflow = opts.overflow[ 0 ];\r\n\t\t\t\tstyle.overflowX = opts.overflow[ 1 ];\r\n\t\t\t\tstyle.overflowY = opts.overflow[ 2 ];\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// show/hide pass\r\n\tfor ( index in props ) {\r\n\t\tvalue = props[ index ];\r\n\t\tif ( rfxtypes.exec( value ) ) {\r\n\t\t\tdelete props[ index ];\r\n\t\t\ttoggle = toggle || value === \"toggle\";\r\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\thandled.push( index );\r\n\t\t}\r\n\t}\r\n\r\n\tlength = handled.length;\r\n\tif ( length ) {\r\n\t\tdataShow = jQuery._data( elem, \"fxshow\" ) || jQuery._data( elem, \"fxshow\", {} );\r\n\t\tif ( \"hidden\" in dataShow ) {\r\n\t\t\thidden = dataShow.hidden;\r\n\t\t}\r\n\r\n\t\t// store state if its toggle - enables .stop().toggle() to \"reverse\"\r\n\t\tif ( toggle ) {\r\n\t\t\tdataShow.hidden = !hidden;\r\n\t\t}\r\n\t\tif ( hidden ) {\r\n\t\t\tjQuery( elem ).show();\r\n\t\t} else {\r\n\t\t\tanim.done(function() {\r\n\t\t\t\tjQuery( elem ).hide();\r\n\t\t\t});\r\n\t\t}\r\n\t\tanim.done(function() {\r\n\t\t\tvar prop;\r\n\t\t\tjQuery.removeData( elem, \"fxshow\", true );\r\n\t\t\tfor ( prop in orig ) {\r\n\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\r\n\t\t\t}\r\n\t\t});\r\n\t\tfor ( index = 0 ; index < length ; index++ ) {\r\n\t\t\tprop = handled[ index ];\r\n\t\t\ttween = anim.createTween( prop, hidden ? dataShow[ prop ] : 0 );\r\n\t\t\torig[ prop ] = dataShow[ prop ] || jQuery.style( elem, prop );\r\n\r\n\t\t\tif ( !( prop in dataShow ) ) {\r\n\t\t\t\tdataShow[ prop ] = tween.start;\r\n\t\t\t\tif ( hidden ) {\r\n\t\t\t\t\ttween.end = tween.start;\r\n\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction Tween( elem, options, prop, end, easing ) {\r\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\r\n}\r\njQuery.Tween = Tween;\r\n\r\nTween.prototype = {\r\n\tconstructor: Tween,\r\n\tinit: function( elem, options, prop, end, easing, unit ) {\r\n\t\tthis.elem = elem;\r\n\t\tthis.prop = prop;\r\n\t\tthis.easing = easing || \"swing\";\r\n\t\tthis.options = options;\r\n\t\tthis.start = this.now = this.cur();\r\n\t\tthis.end = end;\r\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\r\n\t},\r\n\tcur: function() {\r\n\t\tvar hooks = Tween.propHooks[ this.prop ];\r\n\r\n\t\treturn hooks && hooks.get ?\r\n\t\t\thooks.get( this ) :\r\n\t\t\tTween.propHooks._default.get( this );\r\n\t},\r\n\trun: function( percent ) {\r\n\t\tvar eased,\r\n\t\t\thooks = Tween.propHooks[ this.prop ];\r\n\r\n\t\tif ( this.options.duration ) {\r\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\r\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tthis.pos = eased = percent;\r\n\t\t}\r\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\r\n\r\n\t\tif ( this.options.step ) {\r\n\t\t\tthis.options.step.call( this.elem, this.now, this );\r\n\t\t}\r\n\r\n\t\tif ( hooks && hooks.set ) {\r\n\t\t\thooks.set( this );\r\n\t\t} else {\r\n\t\t\tTween.propHooks._default.set( this );\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nTween.prototype.init.prototype = Tween.prototype;\r\n\r\nTween.propHooks = {\r\n\t_default: {\r\n\t\tget: function( tween ) {\r\n\t\t\tvar result;\r\n\r\n\t\t\tif ( tween.elem[ tween.prop ] != null &&\r\n\t\t\t\t(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {\r\n\t\t\t\treturn tween.elem[ tween.prop ];\r\n\t\t\t}\r\n\r\n\t\t\t// passing any value as a 4th parameter to .css will automatically\r\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails\r\n\t\t\t// so, simple values such as \"10px\" are parsed to Float.\r\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as is.\r\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, false, \"\" );\r\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\r\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\r\n\t\t},\r\n\t\tset: function( tween ) {\r\n\t\t\t// use step hook for back compat - use cssHook if its there - use .style if its\r\n\t\t\t// available and use plain properties where available\r\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\r\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\r\n\t\t\t} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {\r\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\r\n\t\t\t} else {\r\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Remove in 2.0 - this supports IE8's panic based approach\r\n// to setting things on disconnected nodes\r\n\r\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\r\n\tset: function( tween ) {\r\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\r\n\t\t\ttween.elem[ tween.prop ] = tween.now;\r\n\t\t}\r\n\t}\r\n};\r\n\r\njQuery.each([ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\r\n\tvar cssFn = jQuery.fn[ name ];\r\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\r\n\t\treturn speed == null || typeof speed === \"boolean\" ||\r\n\t\t\t// special check for .toggle( handler, handler, ... )\r\n\t\t\t( !i && jQuery.isFunction( speed ) && jQuery.isFunction( easing ) ) ?\r\n\t\t\tcssFn.apply( this, arguments ) :\r\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\r\n\t};\r\n});\r\n\r\njQuery.fn.extend({\r\n\tfadeTo: function( speed, to, easing, callback ) {\r\n\r\n\t\t// show any hidden elements after setting opacity to 0\r\n\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\r\n\r\n\t\t\t// animate to the value specified\r\n\t\t\t.end().animate({ opacity: to }, speed, easing, callback );\r\n\t},\r\n\tanimate: function( prop, speed, easing, callback ) {\r\n\t\tvar empty = jQuery.isEmptyObject( prop ),\r\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\r\n\t\t\tdoAnimation = function() {\r\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\r\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\r\n\r\n\t\t\t\t// Empty animations resolve immediately\r\n\t\t\t\tif ( empty ) {\r\n\t\t\t\t\tanim.stop( true );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\treturn empty || optall.queue === false ?\r\n\t\t\tthis.each( doAnimation ) :\r\n\t\t\tthis.queue( optall.queue, doAnimation );\r\n\t},\r\n\tstop: function( type, clearQueue, gotoEnd ) {\r\n\t\tvar stopQueue = function( hooks ) {\r\n\t\t\tvar stop = hooks.stop;\r\n\t\t\tdelete hooks.stop;\r\n\t\t\tstop( gotoEnd );\r\n\t\t};\r\n\r\n\t\tif ( typeof type !== \"string\" ) {\r\n\t\t\tgotoEnd = clearQueue;\r\n\t\t\tclearQueue = type;\r\n\t\t\ttype = undefined;\r\n\t\t}\r\n\t\tif ( clearQueue && type !== false ) {\r\n\t\t\tthis.queue( type || \"fx\", [] );\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar dequeue = true,\r\n\t\t\t\tindex = type != null && type + \"queueHooks\",\r\n\t\t\t\ttimers = jQuery.timers,\r\n\t\t\t\tdata = jQuery._data( this );\r\n\r\n\t\t\tif ( index ) {\r\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\r\n\t\t\t\t\tstopQueue( data[ index ] );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor ( index in data ) {\r\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\r\n\t\t\t\t\t\tstopQueue( data[ index ] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor ( index = timers.length; index--; ) {\r\n\t\t\t\tif ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {\r\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\r\n\t\t\t\t\tdequeue = false;\r\n\t\t\t\t\ttimers.splice( index, 1 );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// start the next in the queue if the last step wasn't forced\r\n\t\t\t// timers currently will call their complete callbacks, which will dequeue\r\n\t\t\t// but only if they were gotoEnd\r\n\t\t\tif ( dequeue || !gotoEnd ) {\r\n\t\t\t\tjQuery.dequeue( this, type );\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\n// Generate parameters to create a standard animation\r\nfunction genFx( type, includeWidth ) {\r\n\tvar which,\r\n\t\tattrs = { height: type },\r\n\t\ti = 0;\r\n\r\n\t// if we include width, step value is 1 to do all cssExpand values,\r\n\t// if we don't include width, step value is 2 to skip over Left and Right\r\n\tincludeWidth = includeWidth? 1 : 0;\r\n\tfor( ; i < 4 ; i += 2 - includeWidth ) {\r\n\t\twhich = cssExpand[ i ];\r\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\r\n\t}\r\n\r\n\tif ( includeWidth ) {\r\n\t\tattrs.opacity = attrs.width = type;\r\n\t}\r\n\r\n\treturn attrs;\r\n}\r\n\r\n// Generate shortcuts for custom animations\r\njQuery.each({\r\n\tslideDown: genFx(\"show\"),\r\n\tslideUp: genFx(\"hide\"),\r\n\tslideToggle: genFx(\"toggle\"),\r\n\tfadeIn: { opacity: \"show\" },\r\n\tfadeOut: { opacity: \"hide\" },\r\n\tfadeToggle: { opacity: \"toggle\" }\r\n}, function( name, props ) {\r\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\r\n\t\treturn this.animate( props, speed, easing, callback );\r\n\t};\r\n});\r\n\r\njQuery.speed = function( speed, easing, fn ) {\r\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\r\n\t\tcomplete: fn || !fn && easing ||\r\n\t\t\tjQuery.isFunction( speed ) && speed,\r\n\t\tduration: speed,\r\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\r\n\t};\r\n\r\n\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\r\n\t\topt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\r\n\r\n\t// normalize opt.queue - true/undefined/null -> \"fx\"\r\n\tif ( opt.queue == null || opt.queue === true ) {\r\n\t\topt.queue = \"fx\";\r\n\t}\r\n\r\n\t// Queueing\r\n\topt.old = opt.complete;\r\n\r\n\topt.complete = function() {\r\n\t\tif ( jQuery.isFunction( opt.old ) ) {\r\n\t\t\topt.old.call( this );\r\n\t\t}\r\n\r\n\t\tif ( opt.queue ) {\r\n\t\t\tjQuery.dequeue( this, opt.queue );\r\n\t\t}\r\n\t};\r\n\r\n\treturn opt;\r\n};\r\n\r\njQuery.easing = {\r\n\tlinear: function( p ) {\r\n\t\treturn p;\r\n\t},\r\n\tswing: function( p ) {\r\n\t\treturn 0.5 - Math.cos( p*Math.PI ) / 2;\r\n\t}\r\n};\r\n\r\njQuery.timers = [];\r\njQuery.fx = Tween.prototype.init;\r\njQuery.fx.tick = function() {\r\n\tvar timer,\r\n\t\ttimers = jQuery.timers,\r\n\t\ti = 0;\r\n\r\n\tfxNow = jQuery.now();\r\n\r\n\tfor ( ; i < timers.length; i++ ) {\r\n\t\ttimer = timers[ i ];\r\n\t\t// Checks the timer has not already been removed\r\n\t\tif ( !timer() && timers[ i ] === timer ) {\r\n\t\t\ttimers.splice( i--, 1 );\r\n\t\t}\r\n\t}\r\n\r\n\tif ( !timers.length ) {\r\n\t\tjQuery.fx.stop();\r\n\t}\r\n\tfxNow = undefined;\r\n};\r\n\r\njQuery.fx.timer = function( timer ) {\r\n\tif ( timer() && jQuery.timers.push( timer ) && !timerId ) {\r\n\t\ttimerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );\r\n\t}\r\n};\r\n\r\njQuery.fx.interval = 13;\r\n\r\njQuery.fx.stop = function() {\r\n\tclearInterval( timerId );\r\n\ttimerId = null;\r\n};\r\n\r\njQuery.fx.speeds = {\r\n\tslow: 600,\r\n\tfast: 200,\r\n\t// Default speed\r\n\t_default: 400\r\n};\r\n\r\n// Back Compat <1.8 extension point\r\njQuery.fx.step = {};\r\n\r\nif ( jQuery.expr && jQuery.expr.filters ) {\r\n\tjQuery.expr.filters.animated = function( elem ) {\r\n\t\treturn jQuery.grep(jQuery.timers, function( fn ) {\r\n\t\t\treturn elem === fn.elem;\r\n\t\t}).length;\r\n\t};\r\n}\r\nvar rroot = /^(?:body|html)$/i;\r\n\r\njQuery.fn.offset = function( options ) {\r\n\tif ( arguments.length ) {\r\n\t\treturn options === undefined ?\r\n\t\t\tthis :\r\n\t\t\tthis.each(function( i ) {\r\n\t\t\t\tjQuery.offset.setOffset( this, options, i );\r\n\t\t\t});\r\n\t}\r\n\r\n\tvar docElem, body, win, clientTop, clientLeft, scrollTop, scrollLeft,\r\n\t\tbox = { top: 0, left: 0 },\r\n\t\telem = this[ 0 ],\r\n\t\tdoc = elem && elem.ownerDocument;\r\n\r\n\tif ( !doc ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( (body = doc.body) === elem ) {\r\n\t\treturn jQuery.offset.bodyOffset( elem );\r\n\t}\r\n\r\n\tdocElem = doc.documentElement;\r\n\r\n\t// Make sure it's not a disconnected DOM node\r\n\tif ( !jQuery.contains( docElem, elem ) ) {\r\n\t\treturn box;\r\n\t}\r\n\r\n\t// If we don't have gBCR, just use 0,0 rather than error\r\n\t// BlackBerry 5, iOS 3 (original iPhone)\r\n\tif ( typeof elem.getBoundingClientRect !== \"undefined\" ) {\r\n\t\tbox = elem.getBoundingClientRect();\r\n\t}\r\n\twin = getWindow( doc );\r\n\tclientTop  = docElem.clientTop  || body.clientTop  || 0;\r\n\tclientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\tscrollTop  = win.pageYOffset || docElem.scrollTop;\r\n\tscrollLeft = win.pageXOffset || docElem.scrollLeft;\r\n\treturn {\r\n\t\ttop: box.top  + scrollTop  - clientTop,\r\n\t\tleft: box.left + scrollLeft - clientLeft\r\n\t};\r\n};\r\n\r\njQuery.offset = {\r\n\r\n\tbodyOffset: function( body ) {\r\n\t\tvar top = body.offsetTop,\r\n\t\t\tleft = body.offsetLeft;\r\n\r\n\t\tif ( jQuery.support.doesNotIncludeMarginInBodyOffset ) {\r\n\t\t\ttop  += parseFloat( jQuery.css(body, \"marginTop\") ) || 0;\r\n\t\t\tleft += parseFloat( jQuery.css(body, \"marginLeft\") ) || 0;\r\n\t\t}\r\n\r\n\t\treturn { top: top, left: left };\r\n\t},\r\n\r\n\tsetOffset: function( elem, options, i ) {\r\n\t\tvar position = jQuery.css( elem, \"position\" );\r\n\r\n\t\t// set position first, in-case top/left are set even on static elem\r\n\t\tif ( position === \"static\" ) {\r\n\t\t\telem.style.position = \"relative\";\r\n\t\t}\r\n\r\n\t\tvar curElem = jQuery( elem ),\r\n\t\t\tcurOffset = curElem.offset(),\r\n\t\t\tcurCSSTop = jQuery.css( elem, \"top\" ),\r\n\t\t\tcurCSSLeft = jQuery.css( elem, \"left\" ),\r\n\t\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) && jQuery.inArray(\"auto\", [curCSSTop, curCSSLeft]) > -1,\r\n\t\t\tprops = {}, curPosition = {}, curTop, curLeft;\r\n\r\n\t\t// need to be able to calculate position if either top or left is auto and position is either absolute or fixed\r\n\t\tif ( calculatePosition ) {\r\n\t\t\tcurPosition = curElem.position();\r\n\t\t\tcurTop = curPosition.top;\r\n\t\t\tcurLeft = curPosition.left;\r\n\t\t} else {\r\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\r\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\r\n\t\t}\r\n\r\n\t\tif ( jQuery.isFunction( options ) ) {\r\n\t\t\toptions = options.call( elem, i, curOffset );\r\n\t\t}\r\n\r\n\t\tif ( options.top != null ) {\r\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\r\n\t\t}\r\n\t\tif ( options.left != null ) {\r\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\r\n\t\t}\r\n\r\n\t\tif ( \"using\" in options ) {\r\n\t\t\toptions.using.call( elem, props );\r\n\t\t} else {\r\n\t\t\tcurElem.css( props );\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\njQuery.fn.extend({\r\n\r\n\tposition: function() {\r\n\t\tif ( !this[0] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar elem = this[0],\r\n\r\n\t\t// Get *real* offsetParent\r\n\t\toffsetParent = this.offsetParent(),\r\n\r\n\t\t// Get correct offsets\r\n\t\toffset       = this.offset(),\r\n\t\tparentOffset = rroot.test(offsetParent[0].nodeName) ? { top: 0, left: 0 } : offsetParent.offset();\r\n\r\n\t\t// Subtract element margins\r\n\t\t// note: when an element has margin: auto the offsetLeft and marginLeft\r\n\t\t// are the same in Safari causing offset.left to incorrectly be 0\r\n\t\toffset.top  -= parseFloat( jQuery.css(elem, \"marginTop\") ) || 0;\r\n\t\toffset.left -= parseFloat( jQuery.css(elem, \"marginLeft\") ) || 0;\r\n\r\n\t\t// Add offsetParent borders\r\n\t\tparentOffset.top  += parseFloat( jQuery.css(offsetParent[0], \"borderTopWidth\") ) || 0;\r\n\t\tparentOffset.left += parseFloat( jQuery.css(offsetParent[0], \"borderLeftWidth\") ) || 0;\r\n\r\n\t\t// Subtract the two offsets\r\n\t\treturn {\r\n\t\t\ttop:  offset.top  - parentOffset.top,\r\n\t\t\tleft: offset.left - parentOffset.left\r\n\t\t};\r\n\t},\r\n\r\n\toffsetParent: function() {\r\n\t\treturn this.map(function() {\r\n\t\t\tvar offsetParent = this.offsetParent || document.body;\r\n\t\t\twhile ( offsetParent && (!rroot.test(offsetParent.nodeName) && jQuery.css(offsetParent, \"position\") === \"static\") ) {\r\n\t\t\t\toffsetParent = offsetParent.offsetParent;\r\n\t\t\t}\r\n\t\t\treturn offsetParent || document.body;\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\n// Create scrollLeft and scrollTop methods\r\njQuery.each( {scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\"}, function( method, prop ) {\r\n\tvar top = /Y/.test( prop );\r\n\r\n\tjQuery.fn[ method ] = function( val ) {\r\n\t\treturn jQuery.access( this, function( elem, method, val ) {\r\n\t\t\tvar win = getWindow( elem );\r\n\r\n\t\t\tif ( val === undefined ) {\r\n\t\t\t\treturn win ? (prop in win) ? win[ prop ] :\r\n\t\t\t\t\twin.document.documentElement[ method ] :\r\n\t\t\t\t\telem[ method ];\r\n\t\t\t}\r\n\r\n\t\t\tif ( win ) {\r\n\t\t\t\twin.scrollTo(\r\n\t\t\t\t\t!top ? val : jQuery( win ).scrollLeft(),\r\n\t\t\t\t\t top ? val : jQuery( win ).scrollTop()\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\telem[ method ] = val;\r\n\t\t\t}\r\n\t\t}, method, val, arguments.length, null );\r\n\t};\r\n});\r\n\r\nfunction getWindow( elem ) {\r\n\treturn jQuery.isWindow( elem ) ?\r\n\t\telem :\r\n\t\telem.nodeType === 9 ?\r\n\t\t\telem.defaultView || elem.parentWindow :\r\n\t\t\tfalse;\r\n}\r\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\r\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\r\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name }, function( defaultExtra, funcName ) {\r\n\t\t// margin is only for outerHeight, outerWidth\r\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\r\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\r\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\r\n\r\n\t\t\treturn jQuery.access( this, function( elem, type, value ) {\r\n\t\t\t\tvar doc;\r\n\r\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\r\n\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\r\n\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\r\n\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\r\n\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Get document width or height\r\n\t\t\t\tif ( elem.nodeType === 9 ) {\r\n\t\t\t\t\tdoc = elem.documentElement;\r\n\r\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest\r\n\t\t\t\t\t// unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.\r\n\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\r\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\r\n\t\t\t\t\t\tdoc[ \"client\" + name ]\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn value === undefined ?\r\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\r\n\t\t\t\t\tjQuery.css( elem, type, value, extra ) :\r\n\r\n\t\t\t\t\t// Set width or height on the element\r\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\r\n\t\t\t}, type, chainable ? margin : undefined, chainable, null );\r\n\t\t};\r\n\t});\r\n});\r\n// Expose jQuery to the global object\r\nwindow.jQuery = window.$ = jQuery;\r\n\r\n// Expose jQuery as an AMD module, but only for AMD loaders that\r\n// understand the issues with loading multiple versions of jQuery\r\n// in a page that all might call define(). The loader will indicate\r\n// they have special allowances for multiple jQuery versions by\r\n// specifying define.amd.jQuery = true. Register as a named module,\r\n// since jQuery can be concatenated with other files that may use define,\r\n// but not use a proper concatenation script that understands anonymous\r\n// AMD modules. A named AMD is safest and most robust way to register.\r\n// Lowercase jquery is used because AMD module names are derived from\r\n// file names, and jQuery is normally delivered in a lowercase file name.\r\n// Do this after creating the global so that if an AMD module wants to call\r\n// noConflict to hide this version of jQuery, it will work.\r\nif ( typeof define === \"function\" && define.amd && define.amd.jQuery ) {\r\n\tdefine( \"jquery\", [], function () { return jQuery; } );\r\n}\r\n\r\n})( window );\r\n"
}